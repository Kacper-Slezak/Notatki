/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
https://github.com/Mikodin/obsidian-scribe
*/

var Fq=Object.create;var Nm=Object.defineProperty;var Bq=Object.getOwnPropertyDescriptor;var Zq=Object.getOwnPropertyNames;var Vq=Object.getPrototypeOf,qq=Object.prototype.hasOwnProperty;var Gq=(t,e,r)=>e in t?Nm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ne=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),na=(t,e)=>{for(var r in e)Nm(t,r,{get:e[r],enumerable:!0})},Xk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zq(e))!qq.call(t,i)&&i!==r&&Nm(t,i,{get:()=>e[i],enumerable:!(n=Bq(e,i))||n.enumerable});return t};var be=(t,e,r)=>(r=t!=null?Fq(Vq(t)):{},Xk(e||!t||!t.__esModule?Nm(r,"default",{value:t,enumerable:!0}):r,t)),Hq=t=>Xk(Nm({},"__esModule",{value:!0}),t);var A=(t,e,r)=>Gq(t,typeof e!="symbol"?e+"":e,r);var c$=ne(Ut=>{"use strict";function f0(t,e){var r=t.length;t.push(e);e:for(;0<r;){var n=r-1>>>1,i=t[n];if(0<cy(i,e))t[n]=e,t[r]=i,r=n;else break e}}function _o(t){return t.length===0?null:t[0]}function dy(t){if(t.length===0)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length,o=i>>>1;n<o;){var a=2*(n+1)-1,s=t[a],c=a+1,u=t[c];if(0>cy(s,r))c<i&&0>cy(u,s)?(t[n]=u,t[c]=r,n=c):(t[n]=s,t[a]=r,n=a);else if(c<i&&0>cy(u,r))t[n]=u,t[c]=r,n=c;else break e}}return e}function cy(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}Ut.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(e$=performance,Ut.unstable_now=function(){return e$.now()}):(c0=Date,t$=c0.now(),Ut.unstable_now=function(){return c0.now()-t$});var e$,c0,t$,ia=[],as=[],Wq=1,gi=null,Hr=3,m0=!1,Cm=!1,km=!1,p0=!1,i$=typeof setTimeout=="function"?setTimeout:null,o$=typeof clearTimeout=="function"?clearTimeout:null,r$=typeof setImmediate!="undefined"?setImmediate:null;function ly(t){for(var e=_o(as);e!==null;){if(e.callback===null)dy(as);else if(e.startTime<=t)dy(as),e.sortIndex=e.expirationTime,f0(ia,e);else break;e=_o(as)}}function h0(t){if(km=!1,ly(t),!Cm)if(_o(ia)!==null)Cm=!0,Cl||(Cl=!0,Nl());else{var e=_o(as);e!==null&&g0(h0,e.startTime-t)}}var Cl=!1,$m=-1,a$=5,s$=-1;function u$(){return p0?!0:!(Ut.unstable_now()-s$<a$)}function l0(){if(p0=!1,Cl){var t=Ut.unstable_now();s$=t;var e=!0;try{e:{Cm=!1,km&&(km=!1,o$($m),$m=-1),m0=!0;var r=Hr;try{t:{for(ly(t),gi=_o(ia);gi!==null&&!(gi.expirationTime>t&&u$());){var n=gi.callback;if(typeof n=="function"){gi.callback=null,Hr=gi.priorityLevel;var i=n(gi.expirationTime<=t);if(t=Ut.unstable_now(),typeof i=="function"){gi.callback=i,ly(t),e=!0;break t}gi===_o(ia)&&dy(ia),ly(t)}else dy(ia);gi=_o(ia)}if(gi!==null)e=!0;else{var o=_o(as);o!==null&&g0(h0,o.startTime-t),e=!1}}break e}finally{gi=null,Hr=r,m0=!1}e=void 0}}finally{e?Nl():Cl=!1}}}var Nl;typeof r$=="function"?Nl=function(){r$(l0)}:typeof MessageChannel!="undefined"?(d0=new MessageChannel,n$=d0.port2,d0.port1.onmessage=l0,Nl=function(){n$.postMessage(null)}):Nl=function(){i$(l0,0)};var d0,n$;function g0(t,e){$m=i$(function(){t(Ut.unstable_now())},e)}Ut.unstable_IdlePriority=5;Ut.unstable_ImmediatePriority=1;Ut.unstable_LowPriority=4;Ut.unstable_NormalPriority=3;Ut.unstable_Profiling=null;Ut.unstable_UserBlockingPriority=2;Ut.unstable_cancelCallback=function(t){t.callback=null};Ut.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):a$=0<t?Math.floor(1e3/t):5};Ut.unstable_getCurrentPriorityLevel=function(){return Hr};Ut.unstable_next=function(t){switch(Hr){case 1:case 2:case 3:var e=3;break;default:e=Hr}var r=Hr;Hr=e;try{return t()}finally{Hr=r}};Ut.unstable_requestPaint=function(){p0=!0};Ut.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=Hr;Hr=t;try{return e()}finally{Hr=r}};Ut.unstable_scheduleCallback=function(t,e,r){var n=Ut.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:Wq++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,f0(as,t),_o(ia)===null&&t===_o(as)&&(km?(o$($m),$m=-1):km=!0,g0(h0,r-n))):(t.sortIndex=i,f0(ia,t),Cm||m0||(Cm=!0,Cl||(Cl=!0,Nl()))),t};Ut.unstable_shouldYield=u$;Ut.unstable_wrapCallback=function(t){var e=Hr;return function(){var r=Hr;Hr=e;try{return t.apply(this,arguments)}finally{Hr=r}}}});var d$=ne((Mle,l$)=>{"use strict";l$.exports=c$()});var w$=ne(ze=>{"use strict";var v0=Symbol.for("react.transitional.element"),Yq=Symbol.for("react.portal"),Xq=Symbol.for("react.fragment"),Qq=Symbol.for("react.strict_mode"),eG=Symbol.for("react.profiler"),tG=Symbol.for("react.consumer"),rG=Symbol.for("react.context"),nG=Symbol.for("react.forward_ref"),iG=Symbol.for("react.suspense"),oG=Symbol.for("react.memo"),g$=Symbol.for("react.lazy"),aG=Symbol.for("react.activity"),f$=Symbol.iterator;function sG(t){return t===null||typeof t!="object"?null:(t=f$&&t[f$]||t["@@iterator"],typeof t=="function"?t:null)}var y$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_$=Object.assign,v$={};function $l(t,e,r){this.props=t,this.context=e,this.refs=v$,this.updater=r||y$}$l.prototype.isReactComponent={};$l.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$l.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b$(){}b$.prototype=$l.prototype;function b0(t,e,r){this.props=t,this.context=e,this.refs=v$,this.updater=r||y$}var x0=b0.prototype=new b$;x0.constructor=b0;_$(x0,$l.prototype);x0.isPureReactComponent=!0;var m$=Array.isArray;function _0(){}var kt={H:null,A:null,T:null,S:null},x$=Object.prototype.hasOwnProperty;function w0(t,e,r){var n=r.ref;return{$$typeof:v0,type:t,key:e,ref:n!==void 0?n:null,props:r}}function uG(t,e){return w0(t.type,e,t.props)}function S0(t){return typeof t=="object"&&t!==null&&t.$$typeof===v0}function cG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var p$=/\/+/g;function y0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cG(""+t.key):e.toString(36)}function lG(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(_0,_0):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function kl(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case v0:case Yq:a=!0;break;case g$:return a=t._init,kl(a(t._payload),e,r,n,i)}}if(a)return i=i(t),a=n===""?"."+y0(t,0):n,m$(i)?(r="",a!=null&&(r=a.replace(p$,"$&/")+"/"),kl(i,e,r,"",function(u){return u})):i!=null&&(S0(i)&&(i=uG(i,r+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(p$,"$&/")+"/")+a)),e.push(i)),1;a=0;var s=n===""?".":n+":";if(m$(t))for(var c=0;c<t.length;c++)n=t[c],o=s+y0(n,c),a+=kl(n,e,r,o,i);else if(c=sG(t),typeof c=="function")for(t=c.call(t),c=0;!(n=t.next()).done;)n=n.value,o=s+y0(n,c++),a+=kl(n,e,r,o,i);else if(o==="object"){if(typeof t.then=="function")return kl(lG(t),e,r,n,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function fy(t,e,r){if(t==null)return t;var n=[],i=0;return kl(t,n,"","",function(o){return e.call(r,o,i++)}),n}function dG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var h$=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},fG={map:fy,forEach:function(t,e,r){fy(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return fy(t,function(){e++}),e},toArray:function(t){return fy(t,function(e){return e})||[]},only:function(t){if(!S0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Activity=aG;ze.Children=fG;ze.Component=$l;ze.Fragment=Xq;ze.Profiler=eG;ze.PureComponent=b0;ze.StrictMode=Qq;ze.Suspense=iG;ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=kt;ze.__COMPILER_RUNTIME={__proto__:null,c:function(t){return kt.H.useMemoCache(t)}};ze.cache=function(t){return function(){return t.apply(null,arguments)}};ze.cacheSignal=function(){return null};ze.cloneElement=function(t,e,r){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=_$({},t.props),i=t.key;if(e!=null)for(o in e.key!==void 0&&(i=""+e.key),e)!x$.call(e,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&e.ref===void 0||(n[o]=e[o]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];n.children=a}return w0(t.type,i,n)};ze.createContext=function(t){return t={$$typeof:rG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:tG,_context:t},t};ze.createElement=function(t,e,r){var n,i={},o=null;if(e!=null)for(n in e.key!==void 0&&(o=""+e.key),e)x$.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+2];i.children=s}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return w0(t,o,i)};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:nG,render:t}};ze.isValidElement=S0;ze.lazy=function(t){return{$$typeof:g$,_payload:{_status:-1,_result:t},_init:dG}};ze.memo=function(t,e){return{$$typeof:oG,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=kt.T,r={};kt.T=r;try{var n=t(),i=kt.S;i!==null&&i(r,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(_0,h$)}catch(o){h$(o)}finally{e!==null&&r.types!==null&&(e.types=r.types),kt.T=e}};ze.unstable_useCacheRefresh=function(){return kt.H.useCacheRefresh()};ze.use=function(t){return kt.H.use(t)};ze.useActionState=function(t,e,r){return kt.H.useActionState(t,e,r)};ze.useCallback=function(t,e){return kt.H.useCallback(t,e)};ze.useContext=function(t){return kt.H.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t,e){return kt.H.useDeferredValue(t,e)};ze.useEffect=function(t,e){return kt.H.useEffect(t,e)};ze.useEffectEvent=function(t){return kt.H.useEffectEvent(t)};ze.useId=function(){return kt.H.useId()};ze.useImperativeHandle=function(t,e,r){return kt.H.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return kt.H.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return kt.H.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return kt.H.useMemo(t,e)};ze.useOptimistic=function(t,e){return kt.H.useOptimistic(t,e)};ze.useReducer=function(t,e,r){return kt.H.useReducer(t,e,r)};ze.useRef=function(t){return kt.H.useRef(t)};ze.useState=function(t){return kt.H.useState(t)};ze.useSyncExternalStore=function(t,e,r){return kt.H.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return kt.H.useTransition()};ze.version="19.2.3"});var yi=ne((Dle,S$)=>{"use strict";S$.exports=w$()});var T$=ne(an=>{"use strict";var mG=yi();function A$(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ss(){}var on={d:{f:ss,r:function(){throw Error(A$(522))},D:ss,C:ss,L:ss,m:ss,X:ss,S:ss,M:ss},p:0,findDOMNode:null},pG=Symbol.for("react.portal");function hG(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pG,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}var Rm=mG.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function my(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=on;an.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(A$(299));return hG(t,e,null,r)};an.flushSync=function(t){var e=Rm.T,r=on.p;try{if(Rm.T=null,on.p=2,t)return t()}finally{Rm.T=e,on.p=r,on.d.f()}};an.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,on.d.C(t,e))};an.prefetchDNS=function(t){typeof t=="string"&&on.d.D(t)};an.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var r=e.as,n=my(r,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,o=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;r==="style"?on.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:i,fetchPriority:o}):r==="script"&&on.d.X(t,{crossOrigin:n,integrity:i,fetchPriority:o,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};an.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var r=my(e.as,e.crossOrigin);on.d.M(t,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&on.d.M(t)};an.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var r=e.as,n=my(r,e.crossOrigin);on.d.L(t,r,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};an.preloadModule=function(t,e){if(typeof t=="string")if(e){var r=my(e.as,e.crossOrigin);on.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else on.d.m(t)};an.requestFormReset=function(t){on.d.r(t)};an.unstable_batchedUpdates=function(t,e){return t(e)};an.useFormState=function(t,e,r){return Rm.H.useFormState(t,e,r)};an.useFormStatus=function(){return Rm.H.useHostTransitionStatus()};an.version="19.2.3"});var I$=ne((Ule,O$)=>{"use strict";function E$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E$)}catch(t){console.error(t)}}E$(),O$.exports=T$()});var j2=ne(L_=>{"use strict";var _r=d$(),eP=yi(),gG=I$();function G(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function tP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vp(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function rP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nP(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N$(t){if(vp(t)!==t)throw Error(G(188))}function yG(t){var e=t.alternate;if(!e){if(e=vp(t),e===null)throw Error(G(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return N$(i),t;if(o===n)return N$(i),e;o=o.sibling}throw Error(G(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(G(189))}}if(r.alternate!==n)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?t:e}function iP(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=iP(t),e!==null)return e;t=t.sibling}return null}var Pt=Object.assign,_G=Symbol.for("react.element"),py=Symbol.for("react.transitional.element"),Fm=Symbol.for("react.portal"),Ll=Symbol.for("react.fragment"),oP=Symbol.for("react.strict_mode"),nS=Symbol.for("react.profiler"),aP=Symbol.for("react.consumer"),fa=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),iS=Symbol.for("react.suspense"),oS=Symbol.for("react.suspense_list"),QS=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),aS=Symbol.for("react.activity"),vG=Symbol.for("react.memo_cache_sentinel"),C$=Symbol.iterator;function Pm(t){return t===null||typeof t!="object"?null:(t=C$&&t[C$]||t["@@iterator"],typeof t=="function"?t:null)}var bG=Symbol.for("react.client.reference");function sS(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===bG?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ll:return"Fragment";case nS:return"Profiler";case oP:return"StrictMode";case iS:return"Suspense";case oS:return"SuspenseList";case aS:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Fm:return"Portal";case fa:return t.displayName||"Context";case aP:return(t._context.displayName||"Context")+".Consumer";case XS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case QS:return e=t.displayName||null,e!==null?e:sS(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return sS(t(e))}catch(r){}}return null}var Bm=Array.isArray,ke=eP.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=gG.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bu={pending:!1,data:null,method:null,action:null},uS=[],Ul=-1;function So(t){return{current:t}}function Ir(t){0>Ul||(t.current=uS[Ul],uS[Ul]=null,Ul--)}function It(t,e){Ul++,uS[Ul]=t.current,t.current=e}var wo=So(null),op=So(null),vs=So(null),Hy=So(null);function Ky(t,e){switch(It(vs,e),It(op,t),It(wo,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?DR(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=DR(e),t=E2(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ir(wo),It(wo,t)}function nd(){Ir(wo),Ir(op),Ir(vs)}function cS(t){t.memoizedState!==null&&It(Hy,t);var e=wo.current,r=E2(e,t.type);e!==r&&(It(op,t),It(wo,r))}function Jy(t){op.current===t&&(Ir(wo),Ir(op)),Hy.current===t&&(Ir(Hy),gp._currentValue=Bu)}var A0,k$;function Lu(t){if(A0===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);A0=e&&e[1]||"",k$=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+A0+t+k$}var T0=!1;function E0(t,e){if(!t||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var f=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){f=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){f=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&f&&typeof m.stack=="string")return[m.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=n.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var c=a.split(`
`),u=s.split(`
`);for(i=n=0;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(n===c.length||i===u.length)for(n=c.length-1,i=u.length-1;1<=n&&0<=i&&c[n]!==u[i];)i--;for(;1<=n&&0<=i;n--,i--)if(c[n]!==u[i]){if(n!==1||i!==1)do if(n--,i--,0>i||c[n]!==u[i]){var l=`
`+c[n].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=n&&0<=i);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Lu(r):""}function xG(t,e){switch(t.tag){case 26:case 27:case 5:return Lu(t.type);case 16:return Lu("Lazy");case 13:return t.child!==e&&e!==null?Lu("Suspense Fallback"):Lu("Suspense");case 19:return Lu("SuspenseList");case 0:case 15:return E0(t.type,!1);case 11:return E0(t.type.render,!1);case 1:return E0(t.type,!0);case 31:return Lu("Activity");default:return""}}function $$(t){try{var e="",r=null;do e+=xG(t,r),r=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var lS=Object.prototype.hasOwnProperty,eA=_r.unstable_scheduleCallback,O0=_r.unstable_cancelCallback,wG=_r.unstable_shouldYield,SG=_r.unstable_requestPaint,Wn=_r.unstable_now,AG=_r.unstable_getCurrentPriorityLevel,sP=_r.unstable_ImmediatePriority,uP=_r.unstable_UserBlockingPriority,Wy=_r.unstable_NormalPriority,TG=_r.unstable_LowPriority,cP=_r.unstable_IdlePriority,EG=_r.log,OG=_r.unstable_setDisableYieldValue,bp=null,Yn=null;function ps(t){if(typeof EG=="function"&&OG(t),Yn&&typeof Yn.setStrictMode=="function")try{Yn.setStrictMode(bp,t)}catch(e){}}var Xn=Math.clz32?Math.clz32:CG,IG=Math.log,NG=Math.LN2;function CG(t){return t>>>=0,t===0?32:31-(IG(t)/NG|0)|0}var hy=256,gy=262144,yy=4194304;function Uu(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function w_(t,e,r){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var s=n&134217727;return s!==0?(n=s&~o,n!==0?i=Uu(n):(a&=s,a!==0?i=Uu(a):r||(r=s&~t,r!==0&&(i=Uu(r))))):(s=n&~o,s!==0?i=Uu(s):a!==0?i=Uu(a):r||(r=n&~t,r!==0&&(i=Uu(r)))),i===0?0:e!==0&&e!==i&&(e&o)===0&&(o=i&-i,r=e&-e,o>=r||o===32&&(r&4194048)!==0)?e:i}function xp(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function kG(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lP(){var t=yy;return yy<<=1,(yy&62914560)===0&&(yy=4194304),t}function I0(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function wp(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $G(t,e,r,n,i,o){var a=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var s=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(r=a&~r;0<r;){var l=31-Xn(r),d=1<<l;s[l]=0,c[l]=-1;var f=u[l];if(f!==null)for(u[l]=null,l=0;l<f.length;l++){var m=f[l];m!==null&&(m.lane&=-536870913)}r&=~d}n!==0&&dP(t,n,0),o!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=o&~(a&~e))}function dP(t,e,r){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Xn(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|r&261930}function fP(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Xn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}function mP(t,e){var r=e&-e;return r=(r&42)!==0?1:tA(r),(r&(t.suspendedLanes|e))!==0?0:r}function tA(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function rA(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function pP(){var t=ct.p;return t!==0?t:(t=window.event,t===void 0?32:D2(t.type))}function R$(t,e){var r=ct.p;try{return ct.p=t,e()}finally{ct.p=r}}var $s=Math.random().toString(36).slice(2),Pr="__reactFiber$"+$s,kn="__reactProps$"+$s,pd="__reactContainer$"+$s,dS="__reactEvents$"+$s,RG="__reactListeners$"+$s,PG="__reactHandles$"+$s,P$="__reactResources$"+$s,Sp="__reactMarker$"+$s;function nA(t){delete t[Pr],delete t[kn],delete t[dS],delete t[RG],delete t[PG]}function jl(t){var e=t[Pr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[pd]||r[Pr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=BR(t);t!==null;){if(r=t[Pr])return r;t=BR(t)}return e}t=r,r=t.parentNode}return null}function hd(t){if(t=t[Pr]||t[pd]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Zm(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(G(33))}function Wl(t){var e=t[P$];return e||(e=t[P$]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Or(t){t[Sp]=!0}var hP=new Set,gP={};function Xu(t,e){id(t,e),id(t+"Capture",e)}function id(t,e){for(gP[t]=e,t=0;t<e.length;t++)hP.add(e[t])}var MG=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),M$={},z$={};function zG(t){return lS.call(z$,t)?!0:lS.call(M$,t)?!1:MG.test(t)?z$[t]=!0:(M$[t]=!0,!1)}function $y(t,e,r){if(zG(e))if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+r)}}function _y(t,e,r){if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+r)}}function oa(t,e,r,n){if(n===null)t.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(e,r,""+n)}}function vi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DG(t,e,r){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fS(t){if(!t._valueTracker){var e=yP(t)?"checked":"value";t._valueTracker=DG(t,e,""+t[e])}}function _P(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=yP(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Yy(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}var LG=/[\n"\\]/g;function wi(t){return t.replace(LG,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mS(t,e,r,n,i,o,a,s){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+vi(e)):t.value!==""+vi(e)&&(t.value=""+vi(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?pS(t,a,vi(e)):r!=null?pS(t,a,vi(r)):n!=null&&t.removeAttribute("value"),i==null&&o!=null&&(t.defaultChecked=!!o),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.name=""+vi(s):t.removeAttribute("name")}function vP(t,e,r,n,i,o,a,s){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.type=o),e!=null||r!=null){if(!(o!=="submit"&&o!=="reset"||e!=null)){fS(t);return}r=r!=null?""+vi(r):"",e=e!=null?""+vi(e):r,s||e===t.value||(t.value=e),t.defaultValue=e}n=n!=null?n:i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=s?t.checked:!!n,t.defaultChecked=!!n,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),fS(t)}function pS(t,e,r){e==="number"&&Yy(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Yl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+vi(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bP(t,e,r){if(e!=null&&(e=""+vi(e),e!==t.value&&(t.value=e),r==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=r!=null?""+vi(r):""}function xP(t,e,r,n){if(e==null){if(n!=null){if(r!=null)throw Error(G(92));if(Bm(n)){if(1<n.length)throw Error(G(93));n=n[0]}r=n}r==null&&(r=""),e=r}r=vi(e),t.defaultValue=r,n=t.textContent,n===r&&n!==""&&n!==null&&(t.value=n),fS(t)}function od(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var UG=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function D$(t,e,r){var n=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,r):typeof r!="number"||r===0||UG.has(e)?e==="float"?t.cssFloat=r:t[e]=(""+r).trim():t[e]=r+"px"}function wP(t,e,r){if(e!=null&&typeof e!="object")throw Error(G(62));if(t=t.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var i in e)n=e[i],e.hasOwnProperty(i)&&r[i]!==n&&D$(t,i,n)}else for(var o in e)e.hasOwnProperty(o)&&D$(t,o,e[o])}function iA(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jG=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),FG=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ry(t){return FG.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ma(){}var hS=null;function oA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fl=null,Xl=null;function L$(t){var e=hd(t);if(e&&(t=e.stateNode)){var r=t[kn]||null;e:switch(t=e.stateNode,e.type){case"input":if(mS(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+wi(""+e)+'"][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=n[kn]||null;if(!i)throw Error(G(90));mS(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<r.length;e++)n=r[e],n.form===t.form&&_P(n)}break e;case"textarea":bP(t,r.value,r.defaultValue);break e;case"select":e=r.value,e!=null&&Yl(t,!!r.multiple,e,!1)}}}var N0=!1;function SP(t,e,r){if(N0)return t(e,r);N0=!0;try{var n=t(e);return n}finally{if(N0=!1,(Fl!==null||Xl!==null)&&(P_(),Fl&&(e=Fl,t=Xl,Xl=Fl=null,L$(e),t)))for(e=0;e<t.length;e++)L$(t[e])}}function ap(t,e){var r=t.stateNode;if(r===null)return null;var n=r[kn]||null;if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(G(231,e,typeof r));return r}var _a=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),gS=!1;if(_a)try{Rl={},Object.defineProperty(Rl,"passive",{get:function(){gS=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch(t){gS=!1}var Rl,hs=null,aA=null,Py=null;function AP(){if(Py)return Py;var t,e=aA,r=e.length,n,i="value"in hs?hs.value:hs.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return Py=i.slice(t,1<n?1-n:void 0)}function My(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vy(){return!0}function U$(){return!1}function $n(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vy:U$,this.isPropagationStopped=U$,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vy)},persist:function(){},isPersistent:vy}),e}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S_=$n(Qu),Ap=Pt({},Qu,{view:0,detail:0}),BG=$n(Ap),C0,k0,Mm,A_=Pt({},Ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mm&&(Mm&&t.type==="mousemove"?(C0=t.screenX-Mm.screenX,k0=t.screenY-Mm.screenY):k0=C0=0,Mm=t),C0)},movementY:function(t){return"movementY"in t?t.movementY:k0}}),j$=$n(A_),ZG=Pt({},A_,{dataTransfer:0}),VG=$n(ZG),qG=Pt({},Ap,{relatedTarget:0}),$0=$n(qG),GG=Pt({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),HG=$n(GG),KG=Pt({},Qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JG=$n(KG),WG=Pt({},Qu,{data:0}),F$=$n(WG),YG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QG[t])?!!e[t]:!1}function sA(){return eH}var tH=Pt({},Ap,{key:function(t){if(t.key){var e=YG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=My(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sA,charCode:function(t){return t.type==="keypress"?My(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?My(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rH=$n(tH),nH=Pt({},A_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B$=$n(nH),iH=Pt({},Ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sA}),oH=$n(iH),aH=Pt({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),sH=$n(aH),uH=Pt({},A_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cH=$n(uH),lH=Pt({},Qu,{newState:0,oldState:0}),dH=$n(lH),fH=[9,13,27,32],uA=_a&&"CompositionEvent"in window,Gm=null;_a&&"documentMode"in document&&(Gm=document.documentMode);var mH=_a&&"TextEvent"in window&&!Gm,TP=_a&&(!uA||Gm&&8<Gm&&11>=Gm),Z$=" ",V$=!1;function EP(t,e){switch(t){case"keyup":return fH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bl=!1;function pH(t,e){switch(t){case"compositionend":return OP(e);case"keypress":return e.which!==32?null:(V$=!0,Z$);case"textInput":return t=e.data,t===Z$&&V$?null:t;default:return null}}function hH(t,e){if(Bl)return t==="compositionend"||!uA&&EP(t,e)?(t=AP(),Py=aA=hs=null,Bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TP&&e.locale!=="ko"?null:e.data;default:return null}}var gH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gH[t.type]:e==="textarea"}function IP(t,e,r,n){Fl?Xl?Xl.push(n):Xl=[n]:Fl=n,e=h_(e,"onChange"),0<e.length&&(r=new S_("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Hm=null,sp=null;function yH(t){S2(t,0)}function T_(t){var e=Zm(t);if(_P(e))return t}function G$(t,e){if(t==="change")return e}var NP=!1;_a&&(_a?(xy="oninput"in document,xy||(R0=document.createElement("div"),R0.setAttribute("oninput","return;"),xy=typeof R0.oninput=="function"),by=xy):by=!1,NP=by&&(!document.documentMode||9<document.documentMode));var by,xy,R0;function H$(){Hm&&(Hm.detachEvent("onpropertychange",CP),sp=Hm=null)}function CP(t){if(t.propertyName==="value"&&T_(sp)){var e=[];IP(e,sp,t,oA(t)),SP(yH,e)}}function _H(t,e,r){t==="focusin"?(H$(),Hm=e,sp=r,Hm.attachEvent("onpropertychange",CP)):t==="focusout"&&H$()}function vH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return T_(sp)}function bH(t,e){if(t==="click")return T_(e)}function xH(t,e){if(t==="input"||t==="change")return T_(e)}function wH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ei=typeof Object.is=="function"?Object.is:wH;function up(t,e){if(ei(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!lS.call(e,i)||!ei(t[i],e[i]))return!1}return!0}function K$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J$(t,e){var r=K$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=K$(r)}}function kP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $P(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Yy(t.document);e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch(n){r=!1}if(r)t=e.contentWindow;else break;e=Yy(t.document)}return e}function cA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var SH=_a&&"documentMode"in document&&11>=document.documentMode,Zl=null,yS=null,Km=null,_S=!1;function W$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_S||Zl==null||Zl!==Yy(n)||(n=Zl,"selectionStart"in n&&cA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Km&&up(Km,n)||(Km=n,n=h_(yS,"onSelect"),0<n.length&&(e=new S_("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Zl)))}function Du(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vl={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionrun:Du("Transition","TransitionRun"),transitionstart:Du("Transition","TransitionStart"),transitioncancel:Du("Transition","TransitionCancel"),transitionend:Du("Transition","TransitionEnd")},P0={},RP={};_a&&(RP=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function ec(t){if(P0[t])return P0[t];if(!Vl[t])return t;var e=Vl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in RP)return P0[t]=e[r];return t}var PP=ec("animationend"),MP=ec("animationiteration"),zP=ec("animationstart"),AH=ec("transitionrun"),TH=ec("transitionstart"),EH=ec("transitioncancel"),DP=ec("transitionend"),LP=new Map,vS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vS.push("scrollEnd");function Wi(t,e){LP.set(t,e),Xu(e,[t])}var Xy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},_i=[],ql=0,lA=0;function E_(){for(var t=ql,e=lA=ql=0;e<t;){var r=_i[e];_i[e++]=null;var n=_i[e];_i[e++]=null;var i=_i[e];_i[e++]=null;var o=_i[e];if(_i[e++]=null,n!==null&&i!==null){var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}o!==0&&UP(r,i,o)}}function O_(t,e,r,n){_i[ql++]=t,_i[ql++]=e,_i[ql++]=r,_i[ql++]=n,lA|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function dA(t,e,r,n){return O_(t,e,r,n),Qy(t)}function tc(t,e){return O_(t,null,null,e),Qy(t)}function UP(t,e,r){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r);for(var i=!1,o=t.return;o!==null;)o.childLanes|=r,n=o.alternate,n!==null&&(n.childLanes|=r),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(i=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,i&&e!==null&&(i=31-Xn(r),t=o.hiddenUpdates,n=t[i],n===null?t[i]=[e]:n.push(e),e.lane=r|536870912),o):null}function Qy(t){if(50<np)throw np=0,jS=null,Error(G(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Gl={};function OH(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,r,n){return new OH(t,e,r,n)}function fA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ha(t,e){var r=t.alternate;return r===null?(r=Kn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function jP(t,e){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function zy(t,e,r,n,i,o){var a=0;if(n=t,typeof t=="function")fA(t)&&(a=1);else if(typeof t=="string")a=C7(t,r,wo.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case aS:return t=Kn(31,r,e,i),t.elementType=aS,t.lanes=o,t;case Ll:return Zu(r.children,i,o,e);case oP:a=8,i|=24;break;case nS:return t=Kn(12,r,e,i|2),t.elementType=nS,t.lanes=o,t;case iS:return t=Kn(13,r,e,i),t.elementType=iS,t.lanes=o,t;case oS:return t=Kn(19,r,e,i),t.elementType=oS,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fa:a=10;break e;case aP:a=9;break e;case XS:a=11;break e;case QS:a=14;break e;case us:a=16,n=null;break e}a=29,r=Error(G(130,t===null?"null":typeof t,"")),n=null}return e=Kn(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Zu(t,e,r,n){return t=Kn(7,t,n,e),t.lanes=r,t}function M0(t,e,r){return t=Kn(6,t,null,e),t.lanes=r,t}function FP(t){var e=Kn(18,null,null,0);return e.stateNode=t,e}function z0(t,e,r){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Y$=new WeakMap;function Si(t,e){if(typeof t=="object"&&t!==null){var r=Y$.get(t);return r!==void 0?r:(e={value:t,source:e,stack:$$(e)},Y$.set(t,e),e)}return{value:t,source:e,stack:$$(e)}}var Hl=[],Kl=0,e_=null,cp=0,bi=[],xi=0,Is=null,vo=1,bo="";function la(t,e){Hl[Kl++]=cp,Hl[Kl++]=e_,e_=t,cp=e}function BP(t,e,r){bi[xi++]=vo,bi[xi++]=bo,bi[xi++]=Is,Is=t;var n=vo;t=bo;var i=32-Xn(n)-1;n&=~(1<<i),r+=1;var o=32-Xn(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,vo=1<<32-Xn(e)+i|r<<i|n,bo=o+t}else vo=1<<o|r<<i|n,bo=t}function mA(t){t.return!==null&&(la(t,1),BP(t,1,0))}function pA(t){for(;t===e_;)e_=Hl[--Kl],Hl[Kl]=null,cp=Hl[--Kl],Hl[Kl]=null;for(;t===Is;)Is=bi[--xi],bi[xi]=null,bo=bi[--xi],bi[xi]=null,vo=bi[--xi],bi[xi]=null}function ZP(t,e){bi[xi++]=vo,bi[xi++]=bo,bi[xi++]=Is,vo=e.id,bo=e.overflow,Is=t}var Mr=null,Rt=null,tt=!1,bs=null,Ai=!1,bS=Error(G(519));function Ns(t){var e=Error(G(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lp(Si(e,t)),bS}function X$(t){var e=t.stateNode,r=t.type,n=t.memoizedProps;switch(e[Pr]=t,e[kn]=n,r){case"dialog":Ge("cancel",e),Ge("close",e);break;case"iframe":case"object":case"embed":Ge("load",e);break;case"video":case"audio":for(r=0;r<pp.length;r++)Ge(pp[r],e);break;case"source":Ge("error",e);break;case"img":case"image":case"link":Ge("error",e),Ge("load",e);break;case"details":Ge("toggle",e);break;case"input":Ge("invalid",e),vP(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Ge("invalid",e);break;case"textarea":Ge("invalid",e),xP(e,n.value,n.defaultValue,n.children)}r=n.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||e.textContent===""+r||n.suppressHydrationWarning===!0||T2(e.textContent,r)?(n.popover!=null&&(Ge("beforetoggle",e),Ge("toggle",e)),n.onScroll!=null&&Ge("scroll",e),n.onScrollEnd!=null&&Ge("scrollend",e),n.onClick!=null&&(e.onclick=ma),e=!0):e=!1,e||Ns(t,!0)}function Q$(t){for(Mr=t.return;Mr;)switch(Mr.tag){case 5:case 31:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:Mr=Mr.return}}function Pl(t){if(t!==Mr)return!1;if(!tt)return Q$(t),tt=!0,!1;var e=t.tag,r;if((r=e!==3&&e!==27)&&((r=e===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||qS(t.type,t.memoizedProps)),r=!r),r&&Rt&&Ns(t),Q$(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));Rt=FR(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));Rt=FR(t)}else e===27?(e=Rt,Rs(t.type)?(t=JS,JS=null,Rt=t):Rt=e):Rt=Mr?Ei(t.stateNode.nextSibling):null;return!0}function Hu(){Rt=Mr=null,tt=!1}function D0(){var t=bs;return t!==null&&(Nn===null?Nn=t:Nn.push.apply(Nn,t),bs=null),t}function lp(t){bs===null?bs=[t]:bs.push(t)}var xS=So(null),rc=null,pa=null;function ls(t,e,r){It(xS,e._currentValue),e._currentValue=r}function ga(t){t._currentValue=xS.current,Ir(xS)}function wS(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function SS(t,e,r,n){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){var a=i.child;o=o.firstContext;e:for(;o!==null;){var s=o;o=i;for(var c=0;c<e.length;c++)if(s.context===e[c]){o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),wS(o.return,r,t),n||(a=null);break e}o=s.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),wS(a,r,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function gd(t,e,r,n){t=null;for(var i=e,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(G(387));if(a=a.memoizedProps,a!==null){var s=i.type;ei(i.pendingProps.value,a.value)||(t!==null?t.push(s):t=[s])}}else if(i===Hy.current){if(a=i.alternate,a===null)throw Error(G(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(gp):t=[gp])}i=i.return}t!==null&&SS(e,t,r,n),e.flags|=262144}function t_(t){for(t=t.firstContext;t!==null;){if(!ei(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ku(t){rc=t,pa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function zr(t){return VP(rc,t)}function wy(t,e){return rc===null&&Ku(t),VP(t,e)}function VP(t,e){var r=e._currentValue;if(e={context:e,memoizedValue:r,next:null},pa===null){if(t===null)throw Error(G(308));pa=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else pa=pa.next=e;return r}var IH=typeof AbortController!="undefined"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(r,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(r){return r()})}},NH=_r.unstable_scheduleCallback,CH=_r.unstable_NormalPriority,fr={$$typeof:fa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hA(){return{controller:new IH,data:new Map,refCount:0}}function Tp(t){t.refCount--,t.refCount===0&&NH(CH,function(){t.controller.abort()})}var Jm=null,AS=0,ad=0,Ql=null;function kH(t,e){if(Jm===null){var r=Jm=[];AS=0,ad=jA(),Ql={status:"pending",value:void 0,then:function(n){r.push(n)}}}return AS++,e.then(eR,eR),e}function eR(){if(--AS===0&&Jm!==null){Ql!==null&&(Ql.status="fulfilled");var t=Jm;Jm=null,ad=0,Ql=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function $H(t,e){var r=[],n={status:"pending",value:null,reason:null,then:function(i){r.push(i)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var i=0;i<r.length;i++)(0,r[i])(e)},function(i){for(n.status="rejected",n.reason=i,i=0;i<r.length;i++)(0,r[i])(void 0)}),n}var tR=ke.S;ke.S=function(t,e){i2=Wn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&kH(t,e),tR!==null&&tR(t,e)};var Vu=So(null);function gA(){var t=Vu.current;return t!==null?t:St.pooledCache}function Dy(t,e){e===null?It(Vu,Vu.current):It(Vu,e.pool)}function qP(){var t=gA();return t===null?null:{parent:fr._currentValue,pool:t}}var yd=Error(G(460)),yA=Error(G(474)),I_=Error(G(542)),r_={then:function(){}};function rR(t){return t=t.status,t==="fulfilled"||t==="rejected"}function GP(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(ma,ma),e=r),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,iR(t),t;default:if(typeof e.status=="string")e.then(ma,ma);else{if(t=St,t!==null&&100<t.shellSuspendCounter)throw Error(G(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=n}},function(n){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,iR(t),t}throw qu=e,yd}}function ju(t){try{var e=t._init;return e(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(qu=r,yd):r}}var qu=null;function nR(){if(qu===null)throw Error(G(459));var t=qu;return qu=null,t}function iR(t){if(t===yd||t===I_)throw Error(G(483))}var ed=null,dp=0;function Sy(t){var e=dp;return dp+=1,ed===null&&(ed=[]),GP(ed,t,e)}function zm(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ay(t,e){throw e.$$typeof===_G?Error(G(525)):(t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function HP(t){function e(h,_){if(t){var v=h.deletions;v===null?(h.deletions=[_],h.flags|=16):v.push(_)}}function r(h,_){if(!t)return null;for(;_!==null;)e(h,_),_=_.sibling;return null}function n(h){for(var _=new Map;h!==null;)h.key!==null?_.set(h.key,h):_.set(h.index,h),h=h.sibling;return _}function i(h,_){return h=ha(h,_),h.index=0,h.sibling=null,h}function o(h,_,v){return h.index=v,t?(v=h.alternate,v!==null?(v=v.index,v<_?(h.flags|=67108866,_):v):(h.flags|=67108866,_)):(h.flags|=1048576,_)}function a(h){return t&&h.alternate===null&&(h.flags|=67108866),h}function s(h,_,v,x){return _===null||_.tag!==6?(_=M0(v,h.mode,x),_.return=h,_):(_=i(_,v),_.return=h,_)}function c(h,_,v,x){var w=v.type;return w===Ll?l(h,_,v.props.children,x,v.key):_!==null&&(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===us&&ju(w)===_.type)?(_=i(_,v.props),zm(_,v),_.return=h,_):(_=zy(v.type,v.key,v.props,null,h.mode,x),zm(_,v),_.return=h,_)}function u(h,_,v,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=z0(v,h.mode,x),_.return=h,_):(_=i(_,v.children||[]),_.return=h,_)}function l(h,_,v,x,w){return _===null||_.tag!==7?(_=Zu(v,h.mode,x,w),_.return=h,_):(_=i(_,v),_.return=h,_)}function d(h,_,v){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=M0(""+_,h.mode,v),_.return=h,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case py:return v=zy(_.type,_.key,_.props,null,h.mode,v),zm(v,_),v.return=h,v;case Fm:return _=z0(_,h.mode,v),_.return=h,_;case us:return _=ju(_),d(h,_,v)}if(Bm(_)||Pm(_))return _=Zu(_,h.mode,v,null),_.return=h,_;if(typeof _.then=="function")return d(h,Sy(_),v);if(_.$$typeof===fa)return d(h,wy(h,_),v);Ay(h,_)}return null}function f(h,_,v,x){var w=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return w!==null?null:s(h,_,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case py:return v.key===w?c(h,_,v,x):null;case Fm:return v.key===w?u(h,_,v,x):null;case us:return v=ju(v),f(h,_,v,x)}if(Bm(v)||Pm(v))return w!==null?null:l(h,_,v,x,null);if(typeof v.then=="function")return f(h,_,Sy(v),x);if(v.$$typeof===fa)return f(h,_,wy(h,v),x);Ay(h,v)}return null}function m(h,_,v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return h=h.get(v)||null,s(_,h,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case py:return h=h.get(x.key===null?v:x.key)||null,c(_,h,x,w);case Fm:return h=h.get(x.key===null?v:x.key)||null,u(_,h,x,w);case us:return x=ju(x),m(h,_,v,x,w)}if(Bm(x)||Pm(x))return h=h.get(v)||null,l(_,h,x,w,null);if(typeof x.then=="function")return m(h,_,v,Sy(x),w);if(x.$$typeof===fa)return m(h,_,v,wy(_,x),w);Ay(_,x)}return null}function p(h,_,v,x){for(var w=null,E=null,S=_,g=_=0,I=null;S!==null&&g<v.length;g++){S.index>g?(I=S,S=null):I=S.sibling;var N=f(h,S,v[g],x);if(N===null){S===null&&(S=I);break}t&&S&&N.alternate===null&&e(h,S),_=o(N,_,g),E===null?w=N:E.sibling=N,E=N,S=I}if(g===v.length)return r(h,S),tt&&la(h,g),w;if(S===null){for(;g<v.length;g++)S=d(h,v[g],x),S!==null&&(_=o(S,_,g),E===null?w=S:E.sibling=S,E=S);return tt&&la(h,g),w}for(S=n(S);g<v.length;g++)I=m(S,h,g,v[g],x),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?g:I.key),_=o(I,_,g),E===null?w=I:E.sibling=I,E=I);return t&&S.forEach(function(C){return e(h,C)}),tt&&la(h,g),w}function b(h,_,v,x){if(v==null)throw Error(G(151));for(var w=null,E=null,S=_,g=_=0,I=null,N=v.next();S!==null&&!N.done;g++,N=v.next()){S.index>g?(I=S,S=null):I=S.sibling;var C=f(h,S,N.value,x);if(C===null){S===null&&(S=I);break}t&&S&&C.alternate===null&&e(h,S),_=o(C,_,g),E===null?w=C:E.sibling=C,E=C,S=I}if(N.done)return r(h,S),tt&&la(h,g),w;if(S===null){for(;!N.done;g++,N=v.next())N=d(h,N.value,x),N!==null&&(_=o(N,_,g),E===null?w=N:E.sibling=N,E=N);return tt&&la(h,g),w}for(S=n(S);!N.done;g++,N=v.next())N=m(S,h,g,N.value,x),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?g:N.key),_=o(N,_,g),E===null?w=N:E.sibling=N,E=N);return t&&S.forEach(function(R){return e(h,R)}),tt&&la(h,g),w}function y(h,_,v,x){if(typeof v=="object"&&v!==null&&v.type===Ll&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case py:e:{for(var w=v.key;_!==null;){if(_.key===w){if(w=v.type,w===Ll){if(_.tag===7){r(h,_.sibling),x=i(_,v.props.children),x.return=h,h=x;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===us&&ju(w)===_.type){r(h,_.sibling),x=i(_,v.props),zm(x,v),x.return=h,h=x;break e}r(h,_);break}else e(h,_);_=_.sibling}v.type===Ll?(x=Zu(v.props.children,h.mode,x,v.key),x.return=h,h=x):(x=zy(v.type,v.key,v.props,null,h.mode,x),zm(x,v),x.return=h,h=x)}return a(h);case Fm:e:{for(w=v.key;_!==null;){if(_.key===w)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){r(h,_.sibling),x=i(_,v.children||[]),x.return=h,h=x;break e}else{r(h,_);break}else e(h,_);_=_.sibling}x=z0(v,h.mode,x),x.return=h,h=x}return a(h);case us:return v=ju(v),y(h,_,v,x)}if(Bm(v))return p(h,_,v,x);if(Pm(v)){if(w=Pm(v),typeof w!="function")throw Error(G(150));return v=w.call(v),b(h,_,v,x)}if(typeof v.then=="function")return y(h,_,Sy(v),x);if(v.$$typeof===fa)return y(h,_,wy(h,v),x);Ay(h,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,_!==null&&_.tag===6?(r(h,_.sibling),x=i(_,v),x.return=h,h=x):(r(h,_),x=M0(v,h.mode,x),x.return=h,h=x),a(h)):r(h,_)}return function(h,_,v,x){try{dp=0;var w=y(h,_,v,x);return ed=null,w}catch(S){if(S===yd||S===I_)throw S;var E=Kn(29,S,null,h.mode);return E.lanes=x,E.return=h,E}}}var Ju=HP(!0),KP=HP(!1),cs=!1;function _A(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ws(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(ut&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,e=Qy(t),UP(t,null,r),e}return O_(t,n,e,r),Qy(t)}function Wm(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,fP(t,r)}}function L0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,callbacks:n.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}var ES=!1;function Ym(){if(ES){var t=Ql;if(t!==null)throw t}}function Xm(t,e,r,n){ES=!1;var i=t.updateQueue;cs=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,s=l.lastBaseUpdate,s!==a&&(s===null?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,l=u=c=null,s=o;do{var f=s.lane&-536870913,m=f!==s.lane;if(m?(et&f)===f:(n&f)===f){f!==0&&f===ad&&(ES=!0),l!==null&&(l=l.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var p=t,b=s;f=e;var y=r;switch(b.tag){case 1:if(p=b.payload,typeof p=="function"){d=p.call(y,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=b.payload,f=typeof p=="function"?p.call(y,d,f):p,f==null)break e;d=Pt({},d,f);break e;case 2:cs=!0}}f=s.callback,f!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[f]:m.push(f))}else m={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},l===null?(u=l=m,c=d):l=l.next=m,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;m=s,s=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);l===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,o===null&&(i.shared.lanes=0),ks|=a,t.lanes=a,t.memoizedState=d}}function JP(t,e){if(typeof t!="function")throw Error(G(191,t));t.call(e)}function WP(t,e){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)JP(r[t],e)}var sd=So(null),n_=So(0);function oR(t,e){t=wa,It(n_,t),It(sd,e),wa=t|e.baseLanes}function OS(){It(n_,wa),It(sd,sd.current)}function vA(){wa=n_.current,Ir(sd),Ir(n_)}var ti=So(null),Ti=null;function ds(t){var e=t.alternate;It(nr,nr.current&1),It(ti,t),Ti===null&&(e===null||sd.current!==null||e.memoizedState!==null)&&(Ti=t)}function IS(t){It(nr,nr.current),It(ti,t),Ti===null&&(Ti=t)}function YP(t){t.tag===22?(It(nr,nr.current),It(ti,t),Ti===null&&(Ti=t)):fs(t)}function fs(){It(nr,nr.current),It(ti,ti.current)}function Hn(t){Ir(ti),Ti===t&&(Ti=null),Ir(nr)}var nr=So(0);function i_(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||HS(r)||KS(r)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var va=0,Le=null,yt=null,lr=null,o_=!1,td=!1,Wu=!1,a_=0,fp=0,rd=null,RH=0;function Jt(){throw Error(G(321))}function bA(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ei(t[r],e[r]))return!1;return!0}function xA(t,e,r,n,i,o){return va=o,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ke.H=t===null||t.memoizedState===null?IM:$A,Wu=!1,o=r(n,i),Wu=!1,td&&(o=QP(e,r,n,i)),XP(t),o}function XP(t){ke.H=mp;var e=yt!==null&&yt.next!==null;if(va=0,lr=yt=Le=null,o_=!1,fp=0,rd=null,e)throw Error(G(300));t===null||mr||(t=t.dependencies,t!==null&&t_(t)&&(mr=!0))}function QP(t,e,r,n){Le=t;var i=0;do{if(td&&(rd=null),fp=0,td=!1,25<=i)throw Error(G(301));if(i+=1,lr=yt=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}ke.H=NM,o=e(r,n)}while(td);return o}function PH(){var t=ke.H,e=t.useState()[0];return e=typeof e.then=="function"?Ep(e):e,t=t.useState()[0],(yt!==null?yt.memoizedState:null)!==t&&(Le.flags|=1024),e}function wA(){var t=a_!==0;return a_=0,t}function SA(t,e,r){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r}function AA(t){if(o_){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}o_=!1}va=0,lr=yt=Le=null,td=!1,fp=a_=0,rd=null}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?Le.memoizedState=lr=t:lr=lr.next=t,lr}function ir(){if(yt===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=lr===null?Le.memoizedState:lr.next;if(e!==null)lr=e,yt=t;else{if(t===null)throw Le.alternate===null?Error(G(467)):Error(G(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},lr===null?Le.memoizedState=lr=t:lr=lr.next=t}return lr}function N_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ep(t){var e=fp;return fp+=1,rd===null&&(rd=[]),t=GP(rd,t,e),e=Le,(lr===null?e.memoizedState:lr.next)===null&&(e=e.alternate,ke.H=e===null||e.memoizedState===null?IM:$A),t}function C_(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ep(t);if(t.$$typeof===fa)return zr(t)}throw Error(G(438,String(t)))}function TA(t){var e=null,r=Le.updateQueue;if(r!==null&&(e=r.memoCache),e==null){var n=Le.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),r===null&&(r=N_(),Le.updateQueue=r),r.memoCache=e,r=e.data[e.index],r===void 0)for(r=e.data[e.index]=Array(t),n=0;n<t;n++)r[n]=vG;return e.index++,r}function ba(t,e){return typeof e=="function"?e(t):e}function Ly(t){var e=ir();return EA(e,yt,t)}function EA(t,e,r){var n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=r;var i=t.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}e.baseQueue=i=o,n.pending=null}if(o=t.baseState,i===null)t.memoizedState=o;else{e=i.next;var s=a=null,c=null,u=e,l=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(et&d)===d:(va&d)===d){var f=u.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===ad&&(l=!0);else if((va&f)===f){u=u.next,f===ad&&(l=!0);continue}else d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(s=c=d,a=o):c=c.next=d,Le.lanes|=f,ks|=f;d=u.action,Wu&&r(o,d),o=u.hasEagerState?u.eagerState:r(o,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(s=c=f,a=o):c=c.next=f,Le.lanes|=d,ks|=d;u=u.next}while(u!==null&&u!==e);if(c===null?a=o:c.next=s,!ei(o,t.memoizedState)&&(mr=!0,l&&(r=Ql,r!==null)))throw r;t.memoizedState=o,t.baseState=a,t.baseQueue=c,n.lastRenderedState=o}return i===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function U0(t){var e=ir(),r=e.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);ei(o,e.memoizedState)||(mr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function eM(t,e,r){var n=Le,i=ir(),o=tt;if(o){if(r===void 0)throw Error(G(407));r=r()}else r=e();var a=!ei((yt||i).memoizedState,r);if(a&&(i.memoizedState=r,mr=!0),i=i.queue,OA(nM.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||lr!==null&&lr.memoizedState.tag&1){if(n.flags|=2048,ud(9,{destroy:void 0},rM.bind(null,n,i,r,e),null),St===null)throw Error(G(349));o||(va&127)!==0||tM(n,e,r)}return r}function tM(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Le.updateQueue,e===null?(e=N_(),Le.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function rM(t,e,r,n){e.value=r,e.getSnapshot=n,iM(e)&&oM(t)}function nM(t,e,r){return r(function(){iM(e)&&oM(t)})}function iM(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ei(t,r)}catch(n){return!0}}function oM(t){var e=tc(t,2);e!==null&&Cn(e,t,2)}function NS(t){var e=sn();if(typeof t=="function"){var r=t;if(t=r(),Wu){ps(!0);try{r()}finally{ps(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e}function aM(t,e,r,n){return t.baseState=r,EA(t,yt,typeof n=="function"?n:ba)}function MH(t,e,r,n,i){if($_(t))throw Error(G(485));if(t=e.action,t!==null){var o={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){o.listeners.push(a)}};ke.T!==null?r(!0):o.isTransition=!1,n(o),r=e.pending,r===null?(o.next=e.pending=o,sM(e,o)):(o.next=r.next,e.pending=r.next=o)}}function sM(t,e){var r=e.action,n=e.payload,i=t.state;if(e.isTransition){var o=ke.T,a={};ke.T=a;try{var s=r(i,n),c=ke.S;c!==null&&c(a,s),aR(t,e,s)}catch(u){CS(t,e,u)}finally{o!==null&&a.types!==null&&(o.types=a.types),ke.T=o}}else try{o=r(i,n),aR(t,e,o)}catch(u){CS(t,e,u)}}function aR(t,e,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(n){sR(t,e,n)},function(n){return CS(t,e,n)}):sR(t,e,r)}function sR(t,e,r){e.status="fulfilled",e.value=r,uM(e),t.state=r,e=t.pending,e!==null&&(r=e.next,r===e?t.pending=null:(r=r.next,e.next=r,sM(t,r)))}function CS(t,e,r){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=r,uM(e),e=e.next;while(e!==n)}t.action=null}function uM(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function cM(t,e){return e}function uR(t,e){if(tt){var r=St.formState;if(r!==null){e:{var n=Le;if(tt){if(Rt){t:{for(var i=Rt,o=Ai;i.nodeType!==8;){if(!o){i=null;break t}if(i=Ei(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){Rt=Ei(i.nextSibling),n=i.data==="F!";break e}}Ns(n)}n=!1}n&&(e=r[0])}}return r=sn(),r.memoizedState=r.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cM,lastRenderedState:e},r.queue=n,r=TM.bind(null,Le,n),n.dispatch=r,n=NS(!1),o=kA.bind(null,Le,!1,n.queue),n=sn(),i={state:e,dispatch:null,action:t,pending:null},n.queue=i,r=MH.bind(null,Le,i,o,r),i.dispatch=r,n.memoizedState=t,[e,r,!1]}function cR(t){var e=ir();return lM(e,yt,t)}function lM(t,e,r){if(e=EA(t,e,cM)[0],t=Ly(ba)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=Ep(e)}catch(a){throw a===yd?I_:a}else n=e;e=ir();var i=e.queue,o=i.dispatch;return r!==e.memoizedState&&(Le.flags|=2048,ud(9,{destroy:void 0},zH.bind(null,i,r),null)),[n,o,t]}function zH(t,e){t.action=e}function lR(t){var e=ir(),r=yt;if(r!==null)return lM(e,r,t);ir(),e=e.memoizedState,r=ir();var n=r.queue.dispatch;return r.memoizedState=t,[e,n,!1]}function ud(t,e,r,n){return t={tag:t,create:r,deps:n,inst:e,next:null},e=Le.updateQueue,e===null&&(e=N_(),Le.updateQueue=e),r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function dM(){return ir().memoizedState}function Uy(t,e,r,n){var i=sn();Le.flags|=t,i.memoizedState=ud(1|e,{destroy:void 0},r,n===void 0?null:n)}function k_(t,e,r,n){var i=ir();n=n===void 0?null:n;var o=i.memoizedState.inst;yt!==null&&n!==null&&bA(n,yt.memoizedState.deps)?i.memoizedState=ud(e,o,r,n):(Le.flags|=t,i.memoizedState=ud(1|e,o,r,n))}function dR(t,e){Uy(8390656,8,t,e)}function OA(t,e){k_(2048,8,t,e)}function DH(t){Le.flags|=4;var e=Le.updateQueue;if(e===null)e=N_(),Le.updateQueue=e,e.events=[t];else{var r=e.events;r===null?e.events=[t]:r.push(t)}}function fM(t){var e=ir().memoizedState;return DH({ref:e,nextImpl:t}),function(){if((ut&2)!==0)throw Error(G(440));return e.impl.apply(void 0,arguments)}}function mM(t,e){return k_(4,2,t,e)}function pM(t,e){return k_(4,4,t,e)}function hM(t,e){if(typeof e=="function"){t=t();var r=e(t);return function(){typeof r=="function"?r():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gM(t,e,r){r=r!=null?r.concat([t]):null,k_(4,4,hM.bind(null,e,t),r)}function IA(){}function yM(t,e){var r=ir();e=e===void 0?null:e;var n=r.memoizedState;return e!==null&&bA(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function _M(t,e){var r=ir();e=e===void 0?null:e;var n=r.memoizedState;if(e!==null&&bA(e,n[1]))return n[0];if(n=t(),Wu){ps(!0);try{t()}finally{ps(!1)}}return r.memoizedState=[n,e],n}function NA(t,e,r){return r===void 0||(va&1073741824)!==0&&(et&261930)===0?t.memoizedState=e:(t.memoizedState=r,t=a2(),Le.lanes|=t,ks|=t,r)}function vM(t,e,r,n){return ei(r,e)?r:sd.current!==null?(t=NA(t,r,n),ei(t,e)||(mr=!0),t):(va&42)===0||(va&1073741824)!==0&&(et&261930)===0?(mr=!0,t.memoizedState=r):(t=a2(),Le.lanes|=t,ks|=t,e)}function bM(t,e,r,n,i){var o=ct.p;ct.p=o!==0&&8>o?o:8;var a=ke.T,s={};ke.T=s,kA(t,!1,e,r);try{var c=i(),u=ke.S;if(u!==null&&u(s,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=$H(c,n);Qm(t,e,l,Qn(t))}else Qm(t,e,n,Qn(t))}catch(d){Qm(t,e,{then:function(){},status:"rejected",reason:d},Qn())}finally{ct.p=o,a!==null&&s.types!==null&&(a.types=s.types),ke.T=a}}function LH(){}function kS(t,e,r,n){if(t.tag!==5)throw Error(G(476));var i=xM(t).queue;bM(t,i,e,Bu,r===null?LH:function(){return wM(t),r(n)})}function xM(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Bu,baseState:Bu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:Bu},next:null};var r={};return e.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:r},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function wM(t){var e=xM(t);e.next===null&&(e=t.alternate.memoizedState),Qm(t,e.next.queue,{},Qn())}function CA(){return zr(gp)}function SM(){return ir().memoizedState}function AM(){return ir().memoizedState}function UH(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var r=Qn();t=xs(r);var n=ws(e,t,r);n!==null&&(Cn(n,e,r),Wm(n,e,r)),e={cache:hA()},t.payload=e;return}e=e.return}}function jH(t,e,r){var n=Qn();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},$_(t)?EM(e,r):(r=dA(t,e,r,n),r!==null&&(Cn(r,t,n),OM(r,e,n)))}function TM(t,e,r){var n=Qn();Qm(t,e,r,n)}function Qm(t,e,r,n){var i={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if($_(t))EM(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,ei(s,a))return O_(t,e,i,0),St===null&&E_(),!1}catch(c){}if(r=dA(t,e,i,n),r!==null)return Cn(r,t,n),OM(r,e,n),!0}return!1}function kA(t,e,r,n){if(n={lane:2,revertLane:jA(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},$_(t)){if(e)throw Error(G(479))}else e=dA(t,r,n,2),e!==null&&Cn(e,t,2)}function $_(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function EM(t,e){td=o_=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function OM(t,e,r){if((r&4194048)!==0){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,fP(t,r)}}var mp={readContext:zr,use:C_,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};mp.useEffectEvent=Jt;var IM={readContext:zr,use:C_,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:zr,useEffect:dR,useImperativeHandle:function(t,e,r){r=r!=null?r.concat([t]):null,Uy(4194308,4,hM.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Uy(4194308,4,t,e)},useInsertionEffect:function(t,e){Uy(4,2,t,e)},useMemo:function(t,e){var r=sn();e=e===void 0?null:e;var n=t();if(Wu){ps(!0);try{t()}finally{ps(!1)}}return r.memoizedState=[n,e],n},useReducer:function(t,e,r){var n=sn();if(r!==void 0){var i=r(e);if(Wu){ps(!0);try{r(e)}finally{ps(!1)}}}else i=e;return n.memoizedState=n.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},n.queue=t,t=t.dispatch=jH.bind(null,Le,t),[n.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:function(t){t=NS(t);var e=t.queue,r=TM.bind(null,Le,e);return e.dispatch=r,[t.memoizedState,r]},useDebugValue:IA,useDeferredValue:function(t,e){var r=sn();return NA(r,t,e)},useTransition:function(){var t=NS(!1);return t=bM.bind(null,Le,t.queue,!0,!1),sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,r){var n=Le,i=sn();if(tt){if(r===void 0)throw Error(G(407));r=r()}else{if(r=e(),St===null)throw Error(G(349));(et&127)!==0||tM(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,dR(nM.bind(null,n,o,t),[t]),n.flags|=2048,ud(9,{destroy:void 0},rM.bind(null,n,o,r,e),null),r},useId:function(){var t=sn(),e=St.identifierPrefix;if(tt){var r=bo,n=vo;r=(n&~(1<<32-Xn(n)-1)).toString(32)+r,e="_"+e+"R_"+r,r=a_++,0<r&&(e+="H"+r.toString(32)),e+="_"}else r=RH++,e="_"+e+"r_"+r.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:CA,useFormState:uR,useActionState:uR,useOptimistic:function(t){var e=sn();e.memoizedState=e.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=r,e=kA.bind(null,Le,!0,r),r.dispatch=e,[t,e]},useMemoCache:TA,useCacheRefresh:function(){return sn().memoizedState=UH.bind(null,Le)},useEffectEvent:function(t){var e=sn(),r={impl:t};return e.memoizedState=r,function(){if((ut&2)!==0)throw Error(G(440));return r.impl.apply(void 0,arguments)}}},$A={readContext:zr,use:C_,useCallback:yM,useContext:zr,useEffect:OA,useImperativeHandle:gM,useInsertionEffect:mM,useLayoutEffect:pM,useMemo:_M,useReducer:Ly,useRef:dM,useState:function(){return Ly(ba)},useDebugValue:IA,useDeferredValue:function(t,e){var r=ir();return vM(r,yt.memoizedState,t,e)},useTransition:function(){var t=Ly(ba)[0],e=ir().memoizedState;return[typeof t=="boolean"?t:Ep(t),e]},useSyncExternalStore:eM,useId:SM,useHostTransitionStatus:CA,useFormState:cR,useActionState:cR,useOptimistic:function(t,e){var r=ir();return aM(r,yt,t,e)},useMemoCache:TA,useCacheRefresh:AM};$A.useEffectEvent=fM;var NM={readContext:zr,use:C_,useCallback:yM,useContext:zr,useEffect:OA,useImperativeHandle:gM,useInsertionEffect:mM,useLayoutEffect:pM,useMemo:_M,useReducer:U0,useRef:dM,useState:function(){return U0(ba)},useDebugValue:IA,useDeferredValue:function(t,e){var r=ir();return yt===null?NA(r,t,e):vM(r,yt.memoizedState,t,e)},useTransition:function(){var t=U0(ba)[0],e=ir().memoizedState;return[typeof t=="boolean"?t:Ep(t),e]},useSyncExternalStore:eM,useId:SM,useHostTransitionStatus:CA,useFormState:lR,useActionState:lR,useOptimistic:function(t,e){var r=ir();return yt!==null?aM(r,yt,t,e):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:TA,useCacheRefresh:AM};NM.useEffectEvent=fM;function j0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Pt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var $S={enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Qn(),i=xs(n);i.payload=e,r!=null&&(i.callback=r),e=ws(t,i,n),e!==null&&(Cn(e,t,n),Wm(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Qn(),i=xs(n);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ws(t,i,n),e!==null&&(Cn(e,t,n),Wm(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qn(),n=xs(r);n.tag=2,e!=null&&(n.callback=e),e=ws(t,n,r),e!==null&&(Cn(e,t,r),Wm(e,t,r))}};function fR(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!up(r,n)||!up(i,o):!0}function mR(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&$S.enqueueReplaceState(e,e.state,null)}function Yu(t,e){var r=e;if("ref"in e){r={};for(var n in e)n!=="ref"&&(r[n]=e[n])}if(t=t.defaultProps){r===e&&(r=Pt({},r));for(var i in t)r[i]===void 0&&(r[i]=t[i])}return r}function CM(t){Xy(t)}function kM(t){console.error(t)}function $M(t){Xy(t)}function s_(t,e){try{var r=t.onUncaughtError;r(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function pR(t,e,r){try{var n=t.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function RS(t,e,r){return r=xs(r),r.tag=3,r.payload={element:null},r.callback=function(){s_(t,e)},r}function RM(t){return t=xs(t),t.tag=3,t}function PM(t,e,r,n){var i=r.type.getDerivedStateFromError;if(typeof i=="function"){var o=n.value;t.payload=function(){return i(o)},t.callback=function(){pR(e,r,n)}}var a=r.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){pR(e,r,n),typeof i!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var s=n.stack;this.componentDidCatch(n.value,{componentStack:s!==null?s:""})})}function FH(t,e,r,n,i){if(r.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=r.alternate,e!==null&&gd(e,r,i,!0),r=ti.current,r!==null){switch(r.tag){case 31:case 13:return Ti===null?f_():r.alternate===null&&Wt===0&&(Wt=3),r.flags&=-257,r.flags|=65536,r.lanes=i,n===r_?r.flags|=16384:(e=r.updateQueue,e===null?r.updateQueue=new Set([n]):e.add(n),Y0(t,n,i)),!1;case 22:return r.flags|=65536,n===r_?r.flags|=16384:(e=r.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=e):(r=e.retryQueue,r===null?e.retryQueue=new Set([n]):r.add(n)),Y0(t,n,i)),!1}throw Error(G(435,r.tag))}return Y0(t,n,i),f_(),!1}if(tt)return e=ti.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=i,n!==bS&&(t=Error(G(422),{cause:n}),lp(Si(t,r)))):(n!==bS&&(e=Error(G(423),{cause:n}),lp(Si(e,r))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,n=Si(n,r),i=RS(t.stateNode,n,i),L0(t,i),Wt!==4&&(Wt=2)),!1;var o=Error(G(520),{cause:n});if(o=Si(o,r),rp===null?rp=[o]:rp.push(o),Wt!==4&&(Wt=2),e===null)return!0;n=Si(n,r),r=e;do{switch(r.tag){case 3:return r.flags|=65536,t=i&-i,r.lanes|=t,t=RS(r.stateNode,n,t),L0(r,t),!1;case 1:if(e=r.type,o=r.stateNode,(r.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ss===null||!Ss.has(o))))return r.flags|=65536,i&=-i,r.lanes|=i,i=RM(i),PM(i,t,r,n),L0(r,i),!1}r=r.return}while(r!==null);return!1}var RA=Error(G(461)),mr=!1;function Rr(t,e,r,n){e.child=t===null?KP(e,null,r,n):Ju(e,t.child,r,n)}function hR(t,e,r,n,i){r=r.render;var o=e.ref;if("ref"in n){var a={};for(var s in n)s!=="ref"&&(a[s]=n[s])}else a=n;return Ku(e),n=xA(t,e,r,a,o,i),s=wA(),t!==null&&!mr?(SA(t,e,i),xa(t,e,i)):(tt&&s&&mA(e),e.flags|=1,Rr(t,e,n,i),e.child)}function gR(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!fA(o)&&o.defaultProps===void 0&&r.compare===null?(e.tag=15,e.type=o,MM(t,e,o,n,i)):(t=zy(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!PA(t,i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:up,r(a,n)&&t.ref===e.ref)return xa(t,e,i)}return e.flags|=1,t=ha(o,n),t.ref=e.ref,t.return=e,e.child=t}function MM(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(up(o,n)&&t.ref===e.ref)if(mr=!1,e.pendingProps=n=o,PA(t,i))(t.flags&131072)!==0&&(mr=!0);else return e.lanes=t.lanes,xa(t,e,i)}return PS(t,e,r,n,i)}function zM(t,e,r,n){var i=n.children,o=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((e.flags&128)!==0){if(o=o!==null?o.baseLanes|r:r,t!==null){for(n=e.child=t.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~o}else n=0,e.child=null;return yR(t,e,o,r,n)}if((r&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Dy(e,o!==null?o.cachePool:null),o!==null?oR(e,o):OS(),YP(e);else return n=e.lanes=536870912,yR(t,e,o!==null?o.baseLanes|r:r,r,n)}else o!==null?(Dy(e,o.cachePool),oR(e,o),fs(e),e.memoizedState=null):(t!==null&&Dy(e,null),OS(),fs(e));return Rr(t,e,i,r),e.child}function Vm(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function yR(t,e,r,n,i){var o=gA();return o=o===null?null:{parent:fr._currentValue,pool:o},e.memoizedState={baseLanes:r,cachePool:o},t!==null&&Dy(e,null),OS(),YP(e),t!==null&&gd(t,e,n,!0),e.childLanes=i,null}function jy(t,e){return e=u_({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function _R(t,e,r){return Ju(e,t.child,null,r),t=jy(e,e.pendingProps),t.flags|=2,Hn(e),e.memoizedState=null,t}function BH(t,e,r){var n=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(tt){if(n.mode==="hidden")return t=jy(e,n),e.lanes=536870912,Vm(null,t);if(IS(e),(t=Rt)?(t=I2(t,Ai),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Is!==null?{id:vo,overflow:bo}:null,retryLane:536870912,hydrationErrors:null},r=FP(t),r.return=e,e.child=r,Mr=e,Rt=null)):t=null,t===null)throw Ns(e);return e.lanes=536870912,null}return jy(e,n)}var o=t.memoizedState;if(o!==null){var a=o.dehydrated;if(IS(e),i)if(e.flags&256)e.flags&=-257,e=_R(t,e,r);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(G(558));else if(mr||gd(t,e,r,!1),i=(r&t.childLanes)!==0,mr||i){if(n=St,n!==null&&(a=mP(n,r),a!==0&&a!==o.retryLane))throw o.retryLane=a,tc(t,a),Cn(n,t,a),RA;f_(),e=_R(t,e,r)}else t=o.treeContext,Rt=Ei(a.nextSibling),Mr=e,tt=!0,bs=null,Ai=!1,t!==null&&ZP(e,t),e=jy(e,n),e.flags|=4096;return e}return t=ha(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Fy(t,e){var r=e.ref;if(r===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(G(284));(t===null||t.ref!==r)&&(e.flags|=4194816)}}function PS(t,e,r,n,i){return Ku(e),r=xA(t,e,r,n,void 0,i),n=wA(),t!==null&&!mr?(SA(t,e,i),xa(t,e,i)):(tt&&n&&mA(e),e.flags|=1,Rr(t,e,r,i),e.child)}function vR(t,e,r,n,i,o){return Ku(e),e.updateQueue=null,r=QP(e,n,r,i),XP(t),n=wA(),t!==null&&!mr?(SA(t,e,o),xa(t,e,o)):(tt&&n&&mA(e),e.flags|=1,Rr(t,e,r,o),e.child)}function bR(t,e,r,n,i){if(Ku(e),e.stateNode===null){var o=Gl,a=r.contextType;typeof a=="object"&&a!==null&&(o=zr(a)),o=new r(n,o),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=$S,e.stateNode=o,o._reactInternals=e,o=e.stateNode,o.props=n,o.state=e.memoizedState,o.refs={},_A(e),a=r.contextType,o.context=typeof a=="object"&&a!==null?zr(a):Gl,o.state=e.memoizedState,a=r.getDerivedStateFromProps,typeof a=="function"&&(j0(e,r,a,n),o.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(a=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),a!==o.state&&$S.enqueueReplaceState(o,o.state,null),Xm(e,n,o,i),Ym(),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){o=e.stateNode;var s=e.memoizedProps,c=Yu(r,s);o.props=c;var u=o.context,l=r.contextType;a=Gl,typeof l=="object"&&l!==null&&(a=zr(l));var d=r.getDerivedStateFromProps;l=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function",s=e.pendingProps!==s,l||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s||u!==a)&&mR(e,o,n,a),cs=!1;var f=e.memoizedState;o.state=f,Xm(e,n,o,i),Ym(),u=e.memoizedState,s||f!==u||cs?(typeof d=="function"&&(j0(e,r,d,n),u=e.memoizedState),(c=cs||fR(e,r,c,n,f,u,a))?(l||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=a,n=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,TS(t,e),a=e.memoizedProps,l=Yu(r,a),o.props=l,d=e.pendingProps,f=o.context,u=r.contextType,c=Gl,typeof u=="object"&&u!==null&&(c=zr(u)),s=r.getDerivedStateFromProps,(u=typeof s=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&mR(e,o,n,c),cs=!1,f=e.memoizedState,o.state=f,Xm(e,n,o,i),Ym();var m=e.memoizedState;a!==d||f!==m||cs||t!==null&&t.dependencies!==null&&t_(t.dependencies)?(typeof s=="function"&&(j0(e,r,s,n),m=e.memoizedState),(l=cs||fR(e,r,l,n,f,m,c)||t!==null&&t.dependencies!==null&&t_(t.dependencies))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return o=n,Fy(t,e),n=(e.flags&128)!==0,o||n?(o=e.stateNode,r=n&&typeof r.getDerivedStateFromError!="function"?null:o.render(),e.flags|=1,t!==null&&n?(e.child=Ju(e,t.child,null,i),e.child=Ju(e,null,r,i)):Rr(t,e,r,i),e.memoizedState=o.state,t=e.child):t=xa(t,e,i),t}function xR(t,e,r,n){return Hu(),e.flags|=256,Rr(t,e,r,n),e.child}var F0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function B0(t){return{baseLanes:t,cachePool:qP()}}function Z0(t,e,r){return t=t!==null?t.childLanes&~r:0,e&&(t|=Jn),t}function DM(t,e,r){var n=e.pendingProps,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(nr.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(tt){if(i?ds(e):fs(e),(t=Rt)?(t=I2(t,Ai),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Is!==null?{id:vo,overflow:bo}:null,retryLane:536870912,hydrationErrors:null},r=FP(t),r.return=e,e.child=r,Mr=e,Rt=null)):t=null,t===null)throw Ns(e);return KS(t)?e.lanes=32:e.lanes=536870912,null}var s=n.children;return n=n.fallback,i?(fs(e),i=e.mode,s=u_({mode:"hidden",children:s},i),n=Zu(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n=e.child,n.memoizedState=B0(r),n.childLanes=Z0(t,a,r),e.memoizedState=F0,Vm(null,n)):(ds(e),MS(e,s))}var c=t.memoizedState;if(c!==null&&(s=c.dehydrated,s!==null)){if(o)e.flags&256?(ds(e),e.flags&=-257,e=V0(t,e,r)):e.memoizedState!==null?(fs(e),e.child=t.child,e.flags|=128,e=null):(fs(e),s=n.fallback,i=e.mode,n=u_({mode:"visible",children:n.children},i),s=Zu(s,i,r,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,Ju(e,t.child,null,r),n=e.child,n.memoizedState=B0(r),n.childLanes=Z0(t,a,r),e.memoizedState=F0,e=Vm(null,n));else if(ds(e),KS(s)){if(a=s.nextSibling&&s.nextSibling.dataset,a)var u=a.dgst;a=u,n=Error(G(419)),n.stack="",n.digest=a,lp({value:n,source:null,stack:null}),e=V0(t,e,r)}else if(mr||gd(t,e,r,!1),a=(r&t.childLanes)!==0,mr||a){if(a=St,a!==null&&(n=mP(a,r),n!==0&&n!==c.retryLane))throw c.retryLane=n,tc(t,n),Cn(a,t,n),RA;HS(s)||f_(),e=V0(t,e,r)}else HS(s)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Rt=Ei(s.nextSibling),Mr=e,tt=!0,bs=null,Ai=!1,t!==null&&ZP(e,t),e=MS(e,n.children),e.flags|=4096);return e}return i?(fs(e),s=n.fallback,i=e.mode,c=t.child,u=c.sibling,n=ha(c,{mode:"hidden",children:n.children}),n.subtreeFlags=c.subtreeFlags&65011712,u!==null?s=ha(u,s):(s=Zu(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,Vm(null,n),n=e.child,s=t.child.memoizedState,s===null?s=B0(r):(i=s.cachePool,i!==null?(c=fr._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=qP(),s={baseLanes:s.baseLanes|r,cachePool:i}),n.memoizedState=s,n.childLanes=Z0(t,a,r),e.memoizedState=F0,Vm(t.child,n)):(ds(e),r=t.child,t=r.sibling,r=ha(r,{mode:"visible",children:n.children}),r.return=e,r.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=r,e.memoizedState=null,r)}function MS(t,e){return e=u_({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function u_(t,e){return t=Kn(22,t,null,e),t.lanes=0,t}function V0(t,e,r){return Ju(e,t.child,null,r),t=MS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wR(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),wS(t.return,e,r)}function q0(t,e,r,n,i,o){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,treeForkCount:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i,a.treeForkCount=o)}function LM(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;n=n.children;var a=nr.current,s=(a&2)!==0;if(s?(a=a&1|2,e.flags|=128):a&=1,It(nr,a),Rr(t,e,n,r),n=tt?cp:0,!s&&t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wR(t,r,e);else if(t.tag===19)wR(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&i_(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),q0(e,!1,i,r,o,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&i_(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}q0(e,!0,r,null,o,n);break;case"together":q0(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function xa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,(r&e.childLanes)===0)if(t!==null){if(gd(t,e,r,!1),(r&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,r=ha(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ha(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function PA(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&t_(t)))}function ZH(t,e,r){switch(e.tag){case 3:Ky(e,e.stateNode.containerInfo),ls(e,fr,t.memoizedState.cache),Hu();break;case 27:case 5:cS(e);break;case 4:Ky(e,e.stateNode.containerInfo);break;case 10:ls(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,IS(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(ds(e),e.flags|=128,null):(r&e.child.childLanes)!==0?DM(t,e,r):(ds(e),t=xa(t,e,r),t!==null?t.sibling:null);ds(e);break;case 19:var i=(t.flags&128)!==0;if(n=(r&e.childLanes)!==0,n||(gd(t,e,r,!1),n=(r&e.childLanes)!==0),i){if(n)return LM(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(nr,nr.current),n)break;return null;case 22:return e.lanes=0,zM(t,e,r,e.pendingProps);case 24:ls(e,fr,t.memoizedState.cache)}return xa(t,e,r)}function UM(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps)mr=!0;else{if(!PA(t,r)&&(e.flags&128)===0)return mr=!1,ZH(t,e,r);mr=(t.flags&131072)!==0}else mr=!1,tt&&(e.flags&1048576)!==0&&BP(e,cp,e.index);switch(e.lanes=0,e.tag){case 16:e:{var n=e.pendingProps;if(t=ju(e.elementType),e.type=t,typeof t=="function")fA(t)?(n=Yu(t,n),e.tag=1,e=bR(null,e,t,n,r)):(e.tag=0,e=PS(null,e,t,n,r));else{if(t!=null){var i=t.$$typeof;if(i===XS){e.tag=11,e=hR(null,e,t,n,r);break e}else if(i===QS){e.tag=14,e=gR(null,e,t,n,r);break e}}throw e=sS(t)||t,Error(G(306,e,""))}}return e;case 0:return PS(t,e,e.type,e.pendingProps,r);case 1:return n=e.type,i=Yu(n,e.pendingProps),bR(t,e,n,i,r);case 3:e:{if(Ky(e,e.stateNode.containerInfo),t===null)throw Error(G(387));n=e.pendingProps;var o=e.memoizedState;i=o.element,TS(t,e),Xm(e,n,null,r);var a=e.memoizedState;if(n=a.cache,ls(e,fr,n),n!==o.cache&&SS(e,[fr],r,!0),Ym(),n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){e=xR(t,e,n,r);break e}else if(n!==i){i=Si(Error(G(424)),e),lp(i),e=xR(t,e,n,r);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rt=Ei(t.firstChild),Mr=e,tt=!0,bs=null,Ai=!0,r=KP(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Hu(),n===i){e=xa(t,e,r);break e}Rr(t,e,n,r)}e=e.child}return e;case 26:return Fy(t,e),t===null?(r=VR(e.type,null,e.pendingProps,null))?e.memoizedState=r:tt||(r=e.type,t=e.pendingProps,n=g_(vs.current).createElement(r),n[Pr]=e,n[kn]=t,Dr(n,r,t),Or(n),e.stateNode=n):e.memoizedState=VR(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return cS(e),t===null&&tt&&(n=e.stateNode=N2(e.type,e.pendingProps,vs.current),Mr=e,Ai=!0,i=Rt,Rs(e.type)?(JS=i,Rt=Ei(n.firstChild)):Rt=i),Rr(t,e,e.pendingProps.children,r),Fy(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&tt&&((i=n=Rt)&&(n=y7(n,e.type,e.pendingProps,Ai),n!==null?(e.stateNode=n,Mr=e,Rt=Ei(n.firstChild),Ai=!1,i=!0):i=!1),i||Ns(e)),cS(e),i=e.type,o=e.pendingProps,a=t!==null?t.memoizedProps:null,n=o.children,qS(i,o)?n=null:a!==null&&qS(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=xA(t,e,PH,null,null,r),gp._currentValue=i),Fy(t,e),Rr(t,e,n,r),e.child;case 6:return t===null&&tt&&((t=r=Rt)&&(r=_7(r,e.pendingProps,Ai),r!==null?(e.stateNode=r,Mr=e,Rt=null,t=!0):t=!1),t||Ns(e)),null;case 13:return DM(t,e,r);case 4:return Ky(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ju(e,null,n,r):Rr(t,e,n,r),e.child;case 11:return hR(t,e,e.type,e.pendingProps,r);case 7:return Rr(t,e,e.pendingProps,r),e.child;case 8:return Rr(t,e,e.pendingProps.children,r),e.child;case 12:return Rr(t,e,e.pendingProps.children,r),e.child;case 10:return n=e.pendingProps,ls(e,e.type,n.value),Rr(t,e,n.children,r),e.child;case 9:return i=e.type._context,n=e.pendingProps.children,Ku(e),i=zr(i),n=n(i),e.flags|=1,Rr(t,e,n,r),e.child;case 14:return gR(t,e,e.type,e.pendingProps,r);case 15:return MM(t,e,e.type,e.pendingProps,r);case 19:return LM(t,e,r);case 31:return BH(t,e,r);case 22:return zM(t,e,r,e.pendingProps);case 24:return Ku(e),n=zr(fr),t===null?(i=gA(),i===null&&(i=St,o=hA(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=r),i=o),e.memoizedState={parent:n,cache:i},_A(e),ls(e,fr,i)):((t.lanes&r)!==0&&(TS(t,e),Xm(e,null,null,r),Ym()),i=t.memoizedState,o=e.memoizedState,i.parent!==n?(i={parent:n,cache:n},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),ls(e,fr,n)):(n=o.cache,ls(e,fr,n),n!==i.cache&&SS(e,[fr],r,!0))),Rr(t,e,e.pendingProps.children,r),e.child;case 29:throw e.pendingProps}throw Error(G(156,e.tag))}function aa(t){t.flags|=4}function G0(t,e,r,n,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(c2())t.flags|=8192;else throw qu=r_,yA}else t.flags&=-16777217}function SR(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$2(e))if(c2())t.flags|=8192;else throw qu=r_,yA}function Ty(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?lP():536870912,t.lanes|=e,cd|=e)}function Dm(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function VH(t,e,r){var n=e.pendingProps;switch(pA(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return $t(e),null;case 3:return r=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ga(fr),nd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pl(e)?aa(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,D0())),$t(e),null;case 26:var i=e.type,o=e.memoizedState;return t===null?(aa(e),o!==null?($t(e),SR(e,o)):($t(e),G0(e,i,null,n,r))):o?o!==t.memoizedState?(aa(e),$t(e),SR(e,o)):($t(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&aa(e),$t(e),G0(e,i,t,n,r)),null;case 27:if(Jy(e),r=vs.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&aa(e);else{if(!n){if(e.stateNode===null)throw Error(G(166));return $t(e),null}t=wo.current,Pl(e)?X$(e,t):(t=N2(i,n,r),e.stateNode=t,aa(e))}return $t(e),null;case 5:if(Jy(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&aa(e);else{if(!n){if(e.stateNode===null)throw Error(G(166));return $t(e),null}if(o=wo.current,Pl(e))X$(e,o);else{var a=g_(vs.current);switch(o){case 1:o=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=a.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof n.is=="string"?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?o.multiple=!0:n.size&&(o.size=n.size);break;default:o=typeof n.is=="string"?a.createElement(i,{is:n.is}):a.createElement(i)}}o[Pr]=e,o[kn]=n;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)o.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=o;e:switch(Dr(o,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&aa(e)}}return $t(e),G0(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,r),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&aa(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(G(166));if(t=vs.current,Pl(e)){if(t=e.stateNode,r=e.memoizedProps,n=null,i=Mr,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}t[Pr]=e,t=!!(t.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||T2(t.nodeValue,r)),t||Ns(e,!0)}else t=g_(t).createTextNode(n),t[Pr]=e,e.stateNode=t}return $t(e),null;case 31:if(r=e.memoizedState,t===null||t.memoizedState!==null){if(n=Pl(e),r!==null){if(t===null){if(!n)throw Error(G(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(557));t[Pr]=e}else Hu(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;$t(e),t=!1}else r=D0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return e.flags&256?(Hn(e),e):(Hn(e),null);if((e.flags&128)!==0)throw Error(G(558))}return $t(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Pl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Pr]=e}else Hu(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;$t(e),i=!1}else i=D0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Hn(e),e):(Hn(e),null)}return Hn(e),(e.flags&128)!==0?(e.lanes=r,e):(r=n!==null,t=t!==null&&t.memoizedState!==null,r&&(n=e.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048)),r!==t&&r&&(e.child.flags|=8192),Ty(e,e.updateQueue),$t(e),null);case 4:return nd(),t===null&&FA(e.stateNode.containerInfo),$t(e),null;case 10:return ga(e.type),$t(e),null;case 19:if(Ir(nr),n=e.memoizedState,n===null)return $t(e),null;if(i=(e.flags&128)!==0,o=n.rendering,o===null)if(i)Dm(n,!1);else{if(Wt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=i_(t),o!==null){for(e.flags|=128,Dm(n,!1),t=o.updateQueue,e.updateQueue=t,Ty(e,t),e.subtreeFlags=0,t=r,r=e.child;r!==null;)jP(r,t),r=r.sibling;return It(nr,nr.current&1|2),tt&&la(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&Wn()>l_&&(e.flags|=128,i=!0,Dm(n,!1),e.lanes=4194304)}else{if(!i)if(t=i_(o),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Ty(e,t),Dm(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!tt)return $t(e),null}else 2*Wn()-n.renderingStartTime>l_&&r!==536870912&&(e.flags|=128,i=!0,Dm(n,!1),e.lanes=4194304);n.isBackwards?(o.sibling=e.child,e.child=o):(t=n.last,t!==null?t.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Wn(),t.sibling=null,r=nr.current,It(nr,i?r&1|2:r&1),tt&&la(e,n.treeForkCount),t):($t(e),null);case 22:case 23:return Hn(e),vA(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?(r&536870912)!==0&&(e.flags&128)===0&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),r=e.updateQueue,r!==null&&Ty(e,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==r&&(e.flags|=2048),t!==null&&Ir(Vu),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),ga(fr),$t(e),null;case 25:return null;case 30:return null}throw Error(G(156,e.tag))}function qH(t,e){switch(pA(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(fr),nd(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Jy(e),null;case 31:if(e.memoizedState!==null){if(Hn(e),e.alternate===null)throw Error(G(340));Hu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Hn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Hu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ir(nr),null;case 4:return nd(),null;case 10:return ga(e.type),null;case 22:case 23:return Hn(e),vA(),t!==null&&Ir(Vu),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ga(fr),null;case 25:return null;default:return null}}function jM(t,e){switch(pA(e),e.tag){case 3:ga(fr),nd();break;case 26:case 27:case 5:Jy(e);break;case 4:nd();break;case 31:e.memoizedState!==null&&Hn(e);break;case 13:Hn(e);break;case 19:Ir(nr);break;case 10:ga(e.type);break;case 22:case 23:Hn(e),vA(),t!==null&&Ir(Vu);break;case 24:ga(fr)}}function Op(t,e){try{var r=e.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var i=n.next;r=i;do{if((r.tag&t)===t){n=void 0;var o=r.create,a=r.inst;n=o(),a.destroy=n}r=r.next}while(r!==i)}}catch(s){pt(e,e.return,s)}}function Cs(t,e,r){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&t)===t){var a=n.inst,s=a.destroy;if(s!==void 0){a.destroy=void 0,i=e;var c=r,u=s;try{u()}catch(l){pt(i,c,l)}}}n=n.next}while(n!==o)}}catch(l){pt(e,e.return,l)}}function FM(t){var e=t.updateQueue;if(e!==null){var r=t.stateNode;try{WP(e,r)}catch(n){pt(t,t.return,n)}}}function BM(t,e,r){r.props=Yu(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(n){pt(t,e,n)}}function ep(t,e){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof r=="function"?t.refCleanup=r(n):r.current=n}}catch(i){pt(t,e,i)}}function xo(t,e){var r=t.ref,n=t.refCleanup;if(r!==null)if(typeof n=="function")try{n()}catch(i){pt(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(i){pt(t,e,i)}else r.current=null}function ZM(t){var e=t.type,r=t.memoizedProps,n=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(i){pt(t,t.return,i)}}function H0(t,e,r){try{var n=t.stateNode;d7(n,t.type,r,e),n[kn]=e}catch(i){pt(t,t.return,i)}}function VM(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rs(t.type)||t.tag===4}function K0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zS(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,e):(e=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,e.appendChild(t),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ma));else if(n!==4&&(n===27&&Rs(t.type)&&(r=t.stateNode,e=null),t=t.child,t!==null))for(zS(t,e,r),t=t.sibling;t!==null;)zS(t,e,r),t=t.sibling}function c_(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(n===27&&Rs(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(c_(t,e,r),t=t.sibling;t!==null;)c_(t,e,r),t=t.sibling}function qM(t){var e=t.stateNode,r=t.memoizedProps;try{for(var n=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Dr(e,n,r),e[Pr]=t,e[kn]=r}catch(o){pt(t,t.return,o)}}var da=!1,dr=!1,J0=!1,AR=typeof WeakSet=="function"?WeakSet:Set,Er=null;function GH(t,e){if(t=t.containerInfo,ZS=b_,t=$P(t),cA(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(b){r=null;break e}var a=0,s=-1,c=-1,u=0,l=0,d=t,f=null;t:for(;;){for(var m;d!==r||i!==0&&d.nodeType!==3||(s=a+i),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===r&&++u===i&&(s=a),f===o&&++l===n&&(c=a),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(VS={focusedElem:t,selectionRange:r},b_=!1,Er=e;Er!==null;)if(e=Er,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Er=t;else for(;Er!==null;){switch(e=Er,o=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)i=t[r],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&o!==null){t=void 0,r=e,i=o.memoizedProps,o=o.memoizedState,n=r.stateNode;try{var p=Yu(r.type,i);t=n.getSnapshotBeforeUpdate(p,o),n.__reactInternalSnapshotBeforeUpdate=t}catch(b){pt(r,r.return,b)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,r=t.nodeType,r===9)GS(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":GS(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(G(163))}if(t=e.sibling,t!==null){t.return=e.return,Er=t;break}Er=e.return}}function GM(t,e,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:ua(t,r),n&4&&Op(5,r);break;case 1:if(ua(t,r),n&4)if(t=r.stateNode,e===null)try{t.componentDidMount()}catch(a){pt(r,r.return,a)}else{var i=Yu(r.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){pt(r,r.return,a)}}n&64&&FM(r),n&512&&ep(r,r.return);break;case 3:if(ua(t,r),n&64&&(t=r.updateQueue,t!==null)){if(e=null,r.child!==null)switch(r.child.tag){case 27:case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}try{WP(t,e)}catch(a){pt(r,r.return,a)}}break;case 27:e===null&&n&4&&qM(r);case 26:case 5:ua(t,r),e===null&&n&4&&ZM(r),n&512&&ep(r,r.return);break;case 12:ua(t,r);break;case 31:ua(t,r),n&4&&JM(t,r);break;case 13:ua(t,r),n&4&&WM(t,r),n&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=t7.bind(null,r),v7(t,r))));break;case 22:if(n=r.memoizedState!==null||da,!n){e=e!==null&&e.memoizedState!==null||dr,i=da;var o=dr;da=n,(dr=e)&&!o?ca(t,r,(r.subtreeFlags&8772)!==0):ua(t,r),da=i,dr=o}break;case 30:break;default:ua(t,r)}}function HM(t){var e=t.alternate;e!==null&&(t.alternate=null,HM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&nA(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var jt=null,In=!1;function sa(t,e,r){for(r=r.child;r!==null;)KM(t,e,r),r=r.sibling}function KM(t,e,r){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(bp,r)}catch(o){}switch(r.tag){case 26:dr||xo(r,e),sa(t,e,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:dr||xo(r,e);var n=jt,i=In;Rs(r.type)&&(jt=r.stateNode,In=!1),sa(t,e,r),ip(r.stateNode),jt=n,In=i;break;case 5:dr||xo(r,e);case 6:if(n=jt,i=In,jt=null,sa(t,e,r),jt=n,In=i,jt!==null)if(In)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(r.stateNode)}catch(o){pt(r,e,o)}else try{jt.removeChild(r.stateNode)}catch(o){pt(r,e,o)}break;case 18:jt!==null&&(In?(t=jt,UR(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),md(t)):UR(jt,r.stateNode));break;case 4:n=jt,i=In,jt=r.stateNode.containerInfo,In=!0,sa(t,e,r),jt=n,In=i;break;case 0:case 11:case 14:case 15:Cs(2,r,e),dr||Cs(4,r,e),sa(t,e,r);break;case 1:dr||(xo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"&&BM(r,e,n)),sa(t,e,r);break;case 21:sa(t,e,r);break;case 22:dr=(n=dr)||r.memoizedState!==null,sa(t,e,r),dr=n;break;default:sa(t,e,r)}}function JM(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{md(t)}catch(r){pt(e,e.return,r)}}}function WM(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{md(t)}catch(r){pt(e,e.return,r)}}function HH(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new AR),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new AR),e;default:throw Error(G(435,t.tag))}}function Ey(t,e){var r=HH(t);e.forEach(function(n){if(!r.has(n)){r.add(n);var i=r7.bind(null,t,n);n.then(i,i)}})}function En(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n],o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 27:if(Rs(s.type)){jt=s.stateNode,In=!1;break e}break;case 5:jt=s.stateNode,In=!1;break e;case 3:case 4:jt=s.stateNode.containerInfo,In=!0;break e}s=s.return}if(jt===null)throw Error(G(160));KM(o,a,i),jt=null,In=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)YM(e,t),e=e.sibling}var Ji=null;function YM(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:En(e,t),On(t),n&4&&(Cs(3,t,t.return),Op(3,t),Cs(5,t,t.return));break;case 1:En(e,t),On(t),n&512&&(dr||r===null||xo(r,r.return)),n&64&&da&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var i=Ji;if(En(e,t),On(t),n&512&&(dr||r===null||xo(r,r.return)),n&4){var o=r!==null?r.memoizedState:null;if(n=t.memoizedState,r===null)if(n===null)if(t.stateNode===null){e:{n=t.type,r=t.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":o=i.getElementsByTagName("title")[0],(!o||o[Sp]||o[Pr]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(n),i.head.insertBefore(o,i.querySelector("head > title"))),Dr(o,n,r),o[Pr]=t,Or(o),n=o;break e;case"link":var a=GR("link","href",i).get(n+(r.href||""));if(a){for(var s=0;s<a.length;s++)if(o=a[s],o.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&o.getAttribute("rel")===(r.rel==null?null:r.rel)&&o.getAttribute("title")===(r.title==null?null:r.title)&&o.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){a.splice(s,1);break t}}o=i.createElement(n),Dr(o,n,r),i.head.appendChild(o);break;case"meta":if(a=GR("meta","content",i).get(n+(r.content||""))){for(s=0;s<a.length;s++)if(o=a[s],o.getAttribute("content")===(r.content==null?null:""+r.content)&&o.getAttribute("name")===(r.name==null?null:r.name)&&o.getAttribute("property")===(r.property==null?null:r.property)&&o.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&o.getAttribute("charset")===(r.charSet==null?null:r.charSet)){a.splice(s,1);break t}}o=i.createElement(n),Dr(o,n,r),i.head.appendChild(o);break;default:throw Error(G(468,n))}o[Pr]=t,Or(o),n=o}t.stateNode=n}else HR(i,t.type,t.stateNode);else t.stateNode=qR(i,n,t.memoizedProps);else o!==n?(o===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):o.count--,n===null?HR(i,t.type,t.stateNode):qR(i,n,t.memoizedProps)):n===null&&t.stateNode!==null&&H0(t,t.memoizedProps,r.memoizedProps)}break;case 27:En(e,t),On(t),n&512&&(dr||r===null||xo(r,r.return)),r!==null&&n&4&&H0(t,t.memoizedProps,r.memoizedProps);break;case 5:if(En(e,t),On(t),n&512&&(dr||r===null||xo(r,r.return)),t.flags&32){i=t.stateNode;try{od(i,"")}catch(p){pt(t,t.return,p)}}n&4&&t.stateNode!=null&&(i=t.memoizedProps,H0(t,i,r!==null?r.memoizedProps:i)),n&1024&&(J0=!0);break;case 6:if(En(e,t),On(t),n&4){if(t.stateNode===null)throw Error(G(162));n=t.memoizedProps,r=t.stateNode;try{r.nodeValue=n}catch(p){pt(t,t.return,p)}}break;case 3:if(Vy=null,i=Ji,Ji=y_(e.containerInfo),En(e,t),Ji=i,On(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{md(e.containerInfo)}catch(p){pt(t,t.return,p)}J0&&(J0=!1,XM(t));break;case 4:n=Ji,Ji=y_(t.stateNode.containerInfo),En(e,t),On(t),Ji=n;break;case 12:En(e,t),On(t);break;case 31:En(e,t),On(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ey(t,n)));break;case 13:En(e,t),On(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(R_=Wn()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ey(t,n)));break;case 22:i=t.memoizedState!==null;var c=r!==null&&r.memoizedState!==null,u=da,l=dr;if(da=u||i,dr=l||c,En(e,t),dr=l,da=u,On(t),n&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(r===null||c||da||dr||Fu(t)),r=null,e=t;;){if(e.tag===5||e.tag===26){if(r===null){c=r=e;try{if(o=c.stateNode,i)a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{s=c.stateNode;var d=c.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;s.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(p){pt(c,c.return,p)}}}else if(e.tag===6){if(r===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){pt(c,c.return,p)}}}else if(e.tag===18){if(r===null){c=e;try{var m=c.stateNode;i?jR(m,!0):jR(c.stateNode,!1)}catch(p){pt(c,c.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,Ey(t,r))));break;case 19:En(e,t),On(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ey(t,n)));break;case 30:break;case 21:break;default:En(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{for(var r,n=t.return;n!==null;){if(VM(n)){r=n;break}n=n.return}if(r==null)throw Error(G(160));switch(r.tag){case 27:var i=r.stateNode,o=K0(t);c_(t,o,i);break;case 5:var a=r.stateNode;r.flags&32&&(od(a,""),r.flags&=-33);var s=K0(t);c_(t,s,a);break;case 3:case 4:var c=r.stateNode.containerInfo,u=K0(t);zS(t,u,c);break;default:throw Error(G(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XM(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;XM(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ua(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)GM(t,e.alternate,e),e=e.sibling}function Fu(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Cs(4,e,e.return),Fu(e);break;case 1:xo(e,e.return);var r=e.stateNode;typeof r.componentWillUnmount=="function"&&BM(e,e.return,r),Fu(e);break;case 27:ip(e.stateNode);case 26:case 5:xo(e,e.return),Fu(e);break;case 22:e.memoizedState===null&&Fu(e);break;case 30:Fu(e);break;default:Fu(e)}t=t.sibling}}function ca(t,e,r){for(r=r&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,i=t,o=e,a=o.flags;switch(o.tag){case 0:case 11:case 15:ca(i,o,r),Op(4,o);break;case 1:if(ca(i,o,r),n=o,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(u){pt(n,n.return,u)}if(n=o,i=n.updateQueue,i!==null){var s=n.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)JP(c[i],s)}catch(u){pt(n,n.return,u)}}r&&a&64&&FM(o),ep(o,o.return);break;case 27:qM(o);case 26:case 5:ca(i,o,r),r&&n===null&&a&4&&ZM(o),ep(o,o.return);break;case 12:ca(i,o,r);break;case 31:ca(i,o,r),r&&a&4&&JM(i,o);break;case 13:ca(i,o,r),r&&a&4&&WM(i,o);break;case 22:o.memoizedState===null&&ca(i,o,r),ep(o,o.return);break;case 30:break;default:ca(i,o,r)}e=e.sibling}}function MA(t,e){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Tp(r))}function zA(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Tp(t))}function Ki(t,e,r,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)QM(t,e,r,n),e=e.sibling}function QM(t,e,r,n){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Ki(t,e,r,n),i&2048&&Op(9,e);break;case 1:Ki(t,e,r,n);break;case 3:Ki(t,e,r,n),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Tp(t)));break;case 12:if(i&2048){Ki(t,e,r,n),t=e.stateNode;try{var o=e.memoizedProps,a=o.id,s=o.onPostCommit;typeof s=="function"&&s(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){pt(e,e.return,c)}}else Ki(t,e,r,n);break;case 31:Ki(t,e,r,n);break;case 13:Ki(t,e,r,n);break;case 23:break;case 22:o=e.stateNode,a=e.alternate,e.memoizedState!==null?o._visibility&2?Ki(t,e,r,n):tp(t,e):o._visibility&2?Ki(t,e,r,n):(o._visibility|=2,zl(t,e,r,n,(e.subtreeFlags&10256)!==0||!1)),i&2048&&MA(a,e);break;case 24:Ki(t,e,r,n),i&2048&&zA(e.alternate,e);break;default:Ki(t,e,r,n)}}function zl(t,e,r,n,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var o=t,a=e,s=r,c=n,u=a.flags;switch(a.tag){case 0:case 11:case 15:zl(o,a,s,c,i),Op(8,a);break;case 23:break;case 22:var l=a.stateNode;a.memoizedState!==null?l._visibility&2?zl(o,a,s,c,i):tp(o,a):(l._visibility|=2,zl(o,a,s,c,i)),i&&u&2048&&MA(a.alternate,a);break;case 24:zl(o,a,s,c,i),i&&u&2048&&zA(a.alternate,a);break;default:zl(o,a,s,c,i)}e=e.sibling}}function tp(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var r=t,n=e,i=n.flags;switch(n.tag){case 22:tp(r,n),i&2048&&MA(n.alternate,n);break;case 24:tp(r,n),i&2048&&zA(n.alternate,n);break;default:tp(r,n)}e=e.sibling}}var qm=8192;function Ml(t,e,r){if(t.subtreeFlags&qm)for(t=t.child;t!==null;)e2(t,e,r),t=t.sibling}function e2(t,e,r){switch(t.tag){case 26:Ml(t,e,r),t.flags&qm&&t.memoizedState!==null&&k7(r,Ji,t.memoizedState,t.memoizedProps);break;case 5:Ml(t,e,r);break;case 3:case 4:var n=Ji;Ji=y_(t.stateNode.containerInfo),Ml(t,e,r),Ji=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=qm,qm=16777216,Ml(t,e,r),qm=n):Ml(t,e,r));break;default:Ml(t,e,r)}}function t2(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Lm(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];Er=n,n2(n,t)}t2(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)r2(t),t=t.sibling}function r2(t){switch(t.tag){case 0:case 11:case 15:Lm(t),t.flags&2048&&Cs(9,t,t.return);break;case 3:Lm(t);break;case 12:Lm(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,By(t)):Lm(t);break;default:Lm(t)}}function By(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];Er=n,n2(n,t)}t2(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Cs(8,e,e.return),By(e);break;case 22:r=e.stateNode,r._visibility&2&&(r._visibility&=-3,By(e));break;default:By(e)}t=t.sibling}}function n2(t,e){for(;Er!==null;){var r=Er;switch(r.tag){case 0:case 11:case 15:Cs(8,r,e);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Tp(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,Er=n;else e:for(r=t;Er!==null;){n=Er;var i=n.sibling,o=n.return;if(HM(n),n===r){Er=null;break e}if(i!==null){i.return=o,Er=i;break e}Er=o}}}var KH={getCacheForType:function(t){var e=zr(fr),r=e.data.get(t);return r===void 0&&(r=t(),e.data.set(t,r)),r},cacheSignal:function(){return zr(fr).controller.signal}},JH=typeof WeakMap=="function"?WeakMap:Map,ut=0,St=null,He=null,et=0,mt=0,Gn=null,gs=!1,_d=!1,DA=!1,wa=0,Wt=0,ks=0,Gu=0,LA=0,Jn=0,cd=0,rp=null,Nn=null,DS=!1,R_=0,i2=0,l_=1/0,d_=null,Ss=null,yr=0,As=null,ld=null,ya=0,LS=0,US=null,o2=null,np=0,jS=null;function Qn(){return(ut&2)!==0&&et!==0?et&-et:ke.T!==null?jA():pP()}function a2(){if(Jn===0)if((et&536870912)===0||tt){var t=gy;gy<<=1,(gy&3932160)===0&&(gy=262144),Jn=t}else Jn=536870912;return t=ti.current,t!==null&&(t.flags|=32),Jn}function Cn(t,e,r){(t===St&&(mt===2||mt===9)||t.cancelPendingCommit!==null)&&(dd(t,0),ys(t,et,Jn,!1)),wp(t,r),((ut&2)===0||t!==St)&&(t===St&&((ut&2)===0&&(Gu|=r),Wt===4&&ys(t,et,Jn,!1)),Ao(t))}function s2(t,e,r){if((ut&6)!==0)throw Error(G(327));var n=!r&&(e&127)===0&&(e&t.expiredLanes)===0||xp(t,e),i=n?XH(t,e):W0(t,e,!0),o=n;do{if(i===0){_d&&!n&&ys(t,e,0,!1);break}else{if(r=t.current.alternate,o&&!WH(r)){i=W0(t,e,!1),o=!1;continue}if(i===2){if(o=e,t.errorRecoveryDisabledLanes&o)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var s=t;i=rp;var c=s.current.memoizedState.isDehydrated;if(c&&(dd(s,a).flags|=256),a=W0(s,a,!1),a!==2){if(DA&&!c){s.errorRecoveryDisabledLanes|=o,Gu|=o,i=4;break e}o=Nn,Nn=i,o!==null&&(Nn===null?Nn=o:Nn.push.apply(Nn,o))}i=a}if(o=!1,i!==2)continue}}if(i===1){dd(t,0),ys(t,e,0,!0);break}e:{switch(n=t,o=i,o){case 0:case 1:throw Error(G(345));case 4:if((e&4194048)!==e)break;case 6:ys(n,e,Jn,!gs);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(G(329))}if((e&62914560)===e&&(i=R_+300-Wn(),10<i)){if(ys(n,e,Jn,!gs),w_(n,0,!0)!==0)break e;ya=e,n.timeoutHandle=O2(TR.bind(null,n,r,Nn,d_,DS,e,Jn,Gu,cd,gs,o,"Throttled",-0,0),i);break e}TR(n,r,Nn,d_,DS,e,Jn,Gu,cd,gs,o,null,-0,0)}}break}while(!0);Ao(t)}function TR(t,e,r,n,i,o,a,s,c,u,l,d,f,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ma},e2(e,o,d);var p=(o&62914560)===o?R_-Wn():(o&4194048)===o?i2-Wn():0;if(p=$7(d,p),p!==null){ya=o,t.cancelPendingCommit=p(OR.bind(null,t,e,o,r,n,i,a,s,c,l,d,null,f,m)),ys(t,o,a,!u);return}}OR(t,e,o,r,n,i,a,s,c)}function WH(t){for(var e=t;;){var r=e.tag;if((r===0||r===11||r===15)&&e.flags&16384&&(r=e.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!ei(o(),i))return!1}catch(a){return!1}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ys(t,e,r,n){e&=~LA,e&=~Gu,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var i=e;0<i;){var o=31-Xn(i),a=1<<o;n[o]=-1,i&=~a}r!==0&&dP(t,r,e)}function P_(){return(ut&6)===0?(Ip(0,!1),!1):!0}function UA(){if(He!==null){if(mt===0)var t=He.return;else t=He,pa=rc=null,AA(t),ed=null,dp=0,t=He;for(;t!==null;)jM(t.alternate,t),t=t.return;He=null}}function dd(t,e){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,p7(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ya=0,UA(),St=t,He=r=ha(t.current,null),et=e,mt=0,Gn=null,gs=!1,_d=xp(t,e),DA=!1,cd=Jn=LA=Gu=ks=Wt=0,Nn=rp=null,DS=!1,(e&8)!==0&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var i=31-Xn(n),o=1<<i;e|=t[i],n&=~o}return wa=e,E_(),r}function u2(t,e){Le=null,ke.H=mp,e===yd||e===I_?(e=nR(),mt=3):e===yA?(e=nR(),mt=4):mt=e===RA?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Gn=e,He===null&&(Wt=1,s_(t,Si(e,t.current)))}function c2(){var t=ti.current;return t===null?!0:(et&4194048)===et?Ti===null:(et&62914560)===et||(et&536870912)!==0?t===Ti:!1}function l2(){var t=ke.H;return ke.H=mp,t===null?mp:t}function d2(){var t=ke.A;return ke.A=KH,t}function f_(){Wt=4,gs||(et&4194048)!==et&&ti.current!==null||(_d=!0),(ks&134217727)===0&&(Gu&134217727)===0||St===null||ys(St,et,Jn,!1)}function W0(t,e,r){var n=ut;ut|=2;var i=l2(),o=d2();(St!==t||et!==e)&&(d_=null,dd(t,e)),e=!1;var a=Wt;e:do try{if(mt!==0&&He!==null){var s=He,c=Gn;switch(mt){case 8:UA(),a=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(e=!0);var u=mt;if(mt=0,Gn=null,Jl(t,s,c,u),r&&_d){a=0;break e}break;default:u=mt,mt=0,Gn=null,Jl(t,s,c,u)}}YH(),a=Wt;break}catch(l){u2(t,l)}while(!0);return e&&t.shellSuspendCounter++,pa=rc=null,ut=n,ke.H=i,ke.A=o,He===null&&(St=null,et=0,E_()),a}function YH(){for(;He!==null;)f2(He)}function XH(t,e){var r=ut;ut|=2;var n=l2(),i=d2();St!==t||et!==e?(d_=null,l_=Wn()+500,dd(t,e)):_d=xp(t,e);e:do try{if(mt!==0&&He!==null){e=He;var o=Gn;t:switch(mt){case 1:mt=0,Gn=null,Jl(t,e,o,1);break;case 2:case 9:if(rR(o)){mt=0,Gn=null,ER(e);break}e=function(){mt!==2&&mt!==9||St!==t||(mt=7),Ao(t)},o.then(e,e);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:rR(o)?(mt=0,Gn=null,ER(e)):(mt=0,Gn=null,Jl(t,e,o,7));break;case 5:var a=null;switch(He.tag){case 26:a=He.memoizedState;case 5:case 27:var s=He;if(a?$2(a):s.stateNode.complete){mt=0,Gn=null;var c=s.sibling;if(c!==null)He=c;else{var u=s.return;u!==null?(He=u,M_(u)):He=null}break t}}mt=0,Gn=null,Jl(t,e,o,5);break;case 6:mt=0,Gn=null,Jl(t,e,o,6);break;case 8:UA(),Wt=6;break e;default:throw Error(G(462))}}QH();break}catch(l){u2(t,l)}while(!0);return pa=rc=null,ke.H=n,ke.A=i,ut=r,He!==null?0:(St=null,et=0,E_(),Wt)}function QH(){for(;He!==null&&!wG();)f2(He)}function f2(t){var e=UM(t.alternate,t,wa);t.memoizedProps=t.pendingProps,e===null?M_(t):He=e}function ER(t){var e=t,r=e.alternate;switch(e.tag){case 15:case 0:e=vR(r,e,e.pendingProps,e.type,void 0,et);break;case 11:e=vR(r,e,e.pendingProps,e.type.render,e.ref,et);break;case 5:AA(e);default:jM(r,e),e=He=jP(e,wa),e=UM(r,e,wa)}t.memoizedProps=t.pendingProps,e===null?M_(t):He=e}function Jl(t,e,r,n){pa=rc=null,AA(e),ed=null,dp=0;var i=e.return;try{if(FH(t,i,e,r,et)){Wt=1,s_(t,Si(r,t.current)),He=null;return}}catch(o){if(i!==null)throw He=i,o;Wt=1,s_(t,Si(r,t.current)),He=null;return}e.flags&32768?(tt||n===1?t=!0:_d||(et&536870912)!==0?t=!1:(gs=t=!0,(n===2||n===9||n===3||n===6)&&(n=ti.current,n!==null&&n.tag===13&&(n.flags|=16384))),m2(e,t)):M_(e)}function M_(t){var e=t;do{if((e.flags&32768)!==0){m2(e,gs);return}t=e.return;var r=VH(e.alternate,e,wa);if(r!==null){He=r;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Wt===0&&(Wt=5)}function m2(t,e){do{var r=qH(t.alternate,t);if(r!==null){r.flags&=32767,He=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!e&&(t=t.sibling,t!==null)){He=t;return}He=t=r}while(t!==null);Wt=6,He=null}function OR(t,e,r,n,i,o,a,s,c){t.cancelPendingCommit=null;do z_();while(yr!==0);if((ut&6)!==0)throw Error(G(327));if(e!==null){if(e===t.current)throw Error(G(177));if(o=e.lanes|e.childLanes,o|=lA,$G(t,r,o,a,s,c),t===St&&(He=St=null,et=0),ld=e,As=t,ya=r,LS=o,US=i,o2=n,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,n7(Wy,function(){return _2(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||n){n=ke.T,ke.T=null,i=ct.p,ct.p=2,a=ut,ut|=4;try{GH(t,e,r)}finally{ut=a,ct.p=i,ke.T=n}}yr=1,p2(),h2(),g2()}}function p2(){if(yr===1){yr=0;var t=As,e=ld,r=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||r){r=ke.T,ke.T=null;var n=ct.p;ct.p=2;var i=ut;ut|=4;try{YM(e,t);var o=VS,a=$P(t.containerInfo),s=o.focusedElem,c=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&kP(s.ownerDocument.documentElement,s)){if(c!==null&&cA(s)){var u=c.start,l=c.end;if(l===void 0&&(l=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(l,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var m=f.getSelection(),p=s.textContent.length,b=Math.min(c.start,p),y=c.end===void 0?b:Math.min(c.end,p);!m.extend&&b>y&&(a=y,y=b,b=a);var h=J$(s,b),_=J$(s,y);if(h&&_&&(m.rangeCount!==1||m.anchorNode!==h.node||m.anchorOffset!==h.offset||m.focusNode!==_.node||m.focusOffset!==_.offset)){var v=d.createRange();v.setStart(h.node,h.offset),m.removeAllRanges(),b>y?(m.addRange(v),m.extend(_.node,_.offset)):(v.setEnd(_.node,_.offset),m.addRange(v))}}}}for(d=[],m=s;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<d.length;s++){var x=d[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}b_=!!ZS,VS=ZS=null}finally{ut=i,ct.p=n,ke.T=r}}t.current=e,yr=2}}function h2(){if(yr===2){yr=0;var t=As,e=ld,r=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||r){r=ke.T,ke.T=null;var n=ct.p;ct.p=2;var i=ut;ut|=4;try{GM(t,e.alternate,e)}finally{ut=i,ct.p=n,ke.T=r}}yr=3}}function g2(){if(yr===4||yr===3){yr=0,SG();var t=As,e=ld,r=ya,n=o2;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?yr=5:(yr=0,ld=As=null,y2(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Ss=null),rA(r),e=e.stateNode,Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(bp,e,void 0,(e.current.flags&128)===128)}catch(c){}if(n!==null){e=ke.T,i=ct.p,ct.p=2,ke.T=null;try{for(var o=t.onRecoverableError,a=0;a<n.length;a++){var s=n[a];o(s.value,{componentStack:s.stack})}}finally{ke.T=e,ct.p=i}}(ya&3)!==0&&z_(),Ao(t),i=t.pendingLanes,(r&261930)!==0&&(i&42)!==0?t===jS?np++:(np=0,jS=t):np=0,Ip(0,!1)}}function y2(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Tp(e)))}function z_(){return p2(),h2(),g2(),_2()}function _2(){if(yr!==5)return!1;var t=As,e=LS;LS=0;var r=rA(ya),n=ke.T,i=ct.p;try{ct.p=32>r?32:r,ke.T=null,r=US,US=null;var o=As,a=ya;if(yr=0,ld=As=null,ya=0,(ut&6)!==0)throw Error(G(331));var s=ut;if(ut|=4,r2(o.current),QM(o,o.current,a,r),ut=s,Ip(0,!1),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(bp,o)}catch(c){}return!0}finally{ct.p=i,ke.T=n,y2(t,e)}}function IR(t,e,r){e=Si(r,e),e=RS(t.stateNode,e,2),t=ws(t,e,2),t!==null&&(wp(t,2),Ao(t))}function pt(t,e,r){if(t.tag===3)IR(t,t,r);else for(;e!==null;){if(e.tag===3){IR(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ss===null||!Ss.has(n))){t=Si(r,t),r=RM(2),n=ws(e,r,2),n!==null&&(PM(r,n,e,t),wp(n,2),Ao(n));break}}e=e.return}}function Y0(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new JH;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(DA=!0,i.add(r),t=e7.bind(null,t,e,r),e.then(t,t))}function e7(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,St===t&&(et&r)===r&&(Wt===4||Wt===3&&(et&62914560)===et&&300>Wn()-R_?(ut&2)===0&&dd(t,0):LA|=r,cd===et&&(cd=0)),Ao(t)}function v2(t,e){e===0&&(e=lP()),t=tc(t,e),t!==null&&(wp(t,e),Ao(t))}function t7(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),v2(t,r)}function r7(t,e){var r=0;switch(t.tag){case 31:case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(G(314))}n!==null&&n.delete(e),v2(t,r)}function n7(t,e){return eA(t,e)}var m_=null,Dl=null,FS=!1,p_=!1,X0=!1,_s=0;function Ao(t){t!==Dl&&t.next===null&&(Dl===null?m_=Dl=t:Dl=Dl.next=t),p_=!0,FS||(FS=!0,o7())}function Ip(t,e){if(!X0&&p_){X0=!0;do for(var r=!1,n=m_;n!==null;){if(!e)if(t!==0){var i=n.pendingLanes;if(i===0)var o=0;else{var a=n.suspendedLanes,s=n.pingedLanes;o=(1<<31-Xn(42|t)+1)-1,o&=i&~(a&~s),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(r=!0,NR(n,o))}else o=et,o=w_(n,n===St?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(o&3)===0||xp(n,o)||(r=!0,NR(n,o));n=n.next}while(r);X0=!1}}function i7(){b2()}function b2(){p_=FS=!1;var t=0;_s!==0&&m7()&&(t=_s);for(var e=Wn(),r=null,n=m_;n!==null;){var i=n.next,o=x2(n,e);o===0?(n.next=null,r===null?m_=i:r.next=i,i===null&&(Dl=r)):(r=n,(t!==0||(o&3)!==0)&&(p_=!0)),n=i}yr!==0&&yr!==5||Ip(t,!1),_s!==0&&(_s=0)}function x2(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var a=31-Xn(o),s=1<<a,c=i[a];c===-1?((s&r)===0||(s&n)!==0)&&(i[a]=kG(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}if(e=St,r=et,r=w_(t,t===e?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,r===0||t===e&&(mt===2||mt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&O0(n),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||xp(t,r)){if(e=r&-r,e===t.callbackPriority)return e;switch(n!==null&&O0(n),rA(r)){case 2:case 8:r=uP;break;case 32:r=Wy;break;case 268435456:r=cP;break;default:r=Wy}return n=w2.bind(null,t),r=eA(r,n),t.callbackPriority=e,t.callbackNode=r,e}return n!==null&&n!==null&&O0(n),t.callbackPriority=2,t.callbackNode=null,2}function w2(t,e){if(yr!==0&&yr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(z_()&&t.callbackNode!==r)return null;var n=et;return n=w_(t,t===St?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(s2(t,n,e),x2(t,Wn()),t.callbackNode!=null&&t.callbackNode===r?w2.bind(null,t):null)}function NR(t,e){if(z_())return null;s2(t,e,!0)}function o7(){h7(function(){(ut&6)!==0?eA(sP,i7):b2()})}function jA(){if(_s===0){var t=ad;t===0&&(t=hy,hy<<=1,(hy&261888)===0&&(hy=256)),_s=t}return _s}function CR(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ry(""+t)}function kR(t,e){var r=e.ownerDocument.createElement("input");return r.name=e.name,r.value=e.value,t.id&&r.setAttribute("form",t.id),e.parentNode.insertBefore(r,e),t=new FormData(t),r.parentNode.removeChild(r),t}function a7(t,e,r,n,i){if(e==="submit"&&r&&r.stateNode===i){var o=CR((i[kn]||null).action),a=n.submitter;a&&(e=(e=a[kn]||null)?CR(e.formAction):a.getAttribute("formAction"),e!==null&&(o=e,a=null));var s=new S_("action","action",null,n,i);t.push({event:s,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(_s!==0){var c=a?kR(i,a):new FormData(i);kS(r,{pending:!0,data:c,method:i.method,action:o},null,c)}}else typeof o=="function"&&(s.preventDefault(),c=a?kR(i,a):new FormData(i),kS(r,{pending:!0,data:c,method:i.method,action:o},o,c))},currentTarget:i}]})}}for(Oy=0;Oy<vS.length;Oy++)Iy=vS[Oy],$R=Iy.toLowerCase(),RR=Iy[0].toUpperCase()+Iy.slice(1),Wi($R,"on"+RR);var Iy,$R,RR,Oy;Wi(PP,"onAnimationEnd");Wi(MP,"onAnimationIteration");Wi(zP,"onAnimationStart");Wi("dblclick","onDoubleClick");Wi("focusin","onFocus");Wi("focusout","onBlur");Wi(AH,"onTransitionRun");Wi(TH,"onTransitionStart");Wi(EH,"onTransitionCancel");Wi(DP,"onTransitionEnd");id("onMouseEnter",["mouseout","mouseover"]);id("onMouseLeave",["mouseout","mouseover"]);id("onPointerEnter",["pointerout","pointerover"]);id("onPointerLeave",["pointerout","pointerover"]);Xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pp));function S2(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(l){Xy(l)}i.currentTarget=null,o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(l){Xy(l)}i.currentTarget=null,o=c}}}}function Ge(t,e){var r=e[dS];r===void 0&&(r=e[dS]=new Set);var n=t+"__bubble";r.has(n)||(A2(e,t,2,!1),r.add(n))}function Q0(t,e,r){var n=0;e&&(n|=4),A2(r,t,n,e)}var Ny="_reactListening"+Math.random().toString(36).slice(2);function FA(t){if(!t[Ny]){t[Ny]=!0,hP.forEach(function(r){r!=="selectionchange"&&(s7.has(r)||Q0(r,!1,t),Q0(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ny]||(e[Ny]=!0,Q0("selectionchange",!1,e))}}function A2(t,e,r,n){switch(D2(e)){case 2:var i=M7;break;case 8:i=z7;break;default:i=qA}r=i.bind(null,e,r,t),i=void 0,!gS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function eS(t,e,r,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;s!==null;){if(a=jl(s),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){n=o=a;continue e}s=s.parentNode}}n=n.return}SP(function(){var u=o,l=oA(r),d=[];e:{var f=LP.get(t);if(f!==void 0){var m=S_,p=t;switch(t){case"keypress":if(My(r)===0)break e;case"keydown":case"keyup":m=rH;break;case"focusin":p="focus",m=$0;break;case"focusout":p="blur",m=$0;break;case"beforeblur":case"afterblur":m=$0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=j$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=VG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oH;break;case PP:case MP:case zP:m=HG;break;case DP:m=sH;break;case"scroll":case"scrollend":m=BG;break;case"wheel":m=cH;break;case"copy":case"cut":case"paste":m=JG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=B$;break;case"toggle":case"beforetoggle":m=dH}var b=(e&4)!==0,y=!b&&(t==="scroll"||t==="scrollend"),h=b?f!==null?f+"Capture":null:f;b=[];for(var _=u,v;_!==null;){var x=_;if(v=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||v===null||h===null||(x=ap(_,h),x!=null&&b.push(hp(_,x,v))),y)break;_=_.return}0<b.length&&(f=new m(f,p,null,r,l),d.push({event:f,listeners:b}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==hS&&(p=r.relatedTarget||r.fromElement)&&(jl(p)||p[pd]))break e;if((m||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=r.relatedTarget||r.toElement,m=u,p=p?jl(p):null,p!==null&&(y=vp(p),b=p.tag,p!==y||b!==5&&b!==27&&b!==6)&&(p=null)):(m=null,p=u),m!==p)){if(b=j$,x="onMouseLeave",h="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(b=B$,x="onPointerLeave",h="onPointerEnter",_="pointer"),y=m==null?f:Zm(m),v=p==null?f:Zm(p),f=new b(x,_+"leave",m,r,l),f.target=y,f.relatedTarget=v,x=null,jl(l)===u&&(b=new b(h,_+"enter",p,r,l),b.target=v,b.relatedTarget=y,x=b),y=x,m&&p)t:{for(b=u7,h=m,_=p,v=0,x=h;x;x=b(x))v++;x=0;for(var w=_;w;w=b(w))x++;for(;0<v-x;)h=b(h),v--;for(;0<x-v;)_=b(_),x--;for(;v--;){if(h===_||_!==null&&h===_.alternate){b=h;break t}h=b(h),_=b(_)}b=null}else b=null;m!==null&&PR(d,f,m,b,!1),p!==null&&y!==null&&PR(d,y,p,b,!0)}}e:{if(f=u?Zm(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=G$;else if(q$(f))if(NP)E=xH;else{E=vH;var S=_H}else m=f.nodeName,!m||m.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&iA(u.elementType)&&(E=G$):E=bH;if(E&&(E=E(t,u))){IP(d,E,r,l);break e}S&&S(t,f,u),t==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&pS(f,"number",f.value)}switch(S=u?Zm(u):window,t){case"focusin":(q$(S)||S.contentEditable==="true")&&(Zl=S,yS=u,Km=null);break;case"focusout":Km=yS=Zl=null;break;case"mousedown":_S=!0;break;case"contextmenu":case"mouseup":case"dragend":_S=!1,W$(d,r,l);break;case"selectionchange":if(SH)break;case"keydown":case"keyup":W$(d,r,l)}var g;if(uA)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Bl?EP(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(TP&&r.locale!=="ko"&&(Bl||I!=="onCompositionStart"?I==="onCompositionEnd"&&Bl&&(g=AP()):(hs=l,aA="value"in hs?hs.value:hs.textContent,Bl=!0)),S=h_(u,I),0<S.length&&(I=new F$(I,t,null,r,l),d.push({event:I,listeners:S}),g?I.data=g:(g=OP(r),g!==null&&(I.data=g)))),(g=mH?pH(t,r):hH(t,r))&&(I=h_(u,"onBeforeInput"),0<I.length&&(S=new F$("onBeforeInput","beforeinput",null,r,l),d.push({event:S,listeners:I}),S.data=g)),a7(d,t,u,r,l)}S2(d,e)})}function hp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function h_(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=ap(t,r),i!=null&&n.unshift(hp(t,i,o)),i=ap(t,e),i!=null&&n.push(hp(t,i,o))),t.tag===3)return n;t=t.return}return[]}function u7(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function PR(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,c=s.alternate,u=s.stateNode;if(s=s.tag,c!==null&&c===n)break;s!==5&&s!==26&&s!==27||u===null||(c=u,i?(u=ap(r,o),u!=null&&a.unshift(hp(r,u,c))):i||(u=ap(r,o),u!=null&&a.push(hp(r,u,c)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var c7=/\r\n?/g,l7=/\u0000|\uFFFD/g;function MR(t){return(typeof t=="string"?t:""+t).replace(c7,`
`).replace(l7,"")}function T2(t,e){return e=MR(e),MR(t)===e}function gt(t,e,r,n,i,o){switch(r){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||od(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&od(t,""+n);break;case"className":_y(t,"class",n);break;case"tabIndex":_y(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":_y(t,r,n);break;case"style":wP(t,n,o);break;case"data":if(e!=="object"){_y(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||r!=="href")){t.removeAttribute(r);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=Ry(""+n),t.setAttribute(r,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(r==="formAction"?(e!=="input"&&gt(t,e,"name",i.name,i,null),gt(t,e,"formEncType",i.formEncType,i,null),gt(t,e,"formMethod",i.formMethod,i,null),gt(t,e,"formTarget",i.formTarget,i,null)):(gt(t,e,"encType",i.encType,i,null),gt(t,e,"method",i.method,i,null),gt(t,e,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=Ry(""+n),t.setAttribute(r,n);break;case"onClick":n!=null&&(t.onclick=ma);break;case"onScroll":n!=null&&Ge("scroll",t);break;case"onScrollEnd":n!=null&&Ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(G(61));if(r=n.__html,r!=null){if(i.children!=null)throw Error(G(60));t.innerHTML=r}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}r=Ry(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""+n):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":n===!0?t.setAttribute(r,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,n):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(r,n):t.removeAttribute(r);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(r):t.setAttribute(r,n);break;case"popover":Ge("beforetoggle",t),Ge("toggle",t),$y(t,"popover",n);break;case"xlinkActuate":oa(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":oa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":oa(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":oa(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":oa(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":oa(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":oa(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":oa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":oa(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":$y(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=jG.get(r)||r,$y(t,r,n))}}function BS(t,e,r,n,i,o){switch(r){case"style":wP(t,n,o);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(G(61));if(r=n.__html,r!=null){if(i.children!=null)throw Error(G(60));t.innerHTML=r}}break;case"children":typeof n=="string"?od(t,n):(typeof n=="number"||typeof n=="bigint")&&od(t,""+n);break;case"onScroll":n!=null&&Ge("scroll",t);break;case"onScrollEnd":n!=null&&Ge("scrollend",t);break;case"onClick":n!=null&&(t.onclick=ma);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gP.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(i=r.endsWith("Capture"),e=r.slice(2,i?r.length-7:void 0),o=t[kn]||null,o=o!=null?o[r]:null,typeof o=="function"&&t.removeEventListener(e,o,i),typeof n=="function")){typeof o!="function"&&o!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(e,n,i);break e}r in t?t[r]=n:n===!0?t.setAttribute(r,""):$y(t,r,n)}}}function Dr(t,e,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",t),Ge("load",t);var n=!1,i=!1,o;for(o in r)if(r.hasOwnProperty(o)){var a=r[o];if(a!=null)switch(o){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(G(137,e));default:gt(t,e,o,a,r,null)}}i&&gt(t,e,"srcSet",r.srcSet,r,null),n&&gt(t,e,"src",r.src,r,null);return;case"input":Ge("invalid",t);var s=o=a=i=null,c=null,u=null;for(n in r)if(r.hasOwnProperty(n)){var l=r[n];if(l!=null)switch(n){case"name":i=l;break;case"type":a=l;break;case"checked":c=l;break;case"defaultChecked":u=l;break;case"value":o=l;break;case"defaultValue":s=l;break;case"children":case"dangerouslySetInnerHTML":if(l!=null)throw Error(G(137,e));break;default:gt(t,e,n,l,r,null)}}vP(t,o,s,c,u,a,i,!1);return;case"select":Ge("invalid",t),n=a=o=null;for(i in r)if(r.hasOwnProperty(i)&&(s=r[i],s!=null))switch(i){case"value":o=s;break;case"defaultValue":a=s;break;case"multiple":n=s;default:gt(t,e,i,s,r,null)}e=o,r=a,t.multiple=!!n,e!=null?Yl(t,!!n,e,!1):r!=null&&Yl(t,!!n,r,!0);return;case"textarea":Ge("invalid",t),o=i=n=null;for(a in r)if(r.hasOwnProperty(a)&&(s=r[a],s!=null))switch(a){case"value":n=s;break;case"defaultValue":i=s;break;case"children":o=s;break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(G(91));break;default:gt(t,e,a,s,r,null)}xP(t,n,i,o);return;case"option":for(c in r)if(r.hasOwnProperty(c)&&(n=r[c],n!=null))switch(c){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:gt(t,e,c,n,r,null)}return;case"dialog":Ge("beforetoggle",t),Ge("toggle",t),Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":Ge("load",t);break;case"video":case"audio":for(n=0;n<pp.length;n++)Ge(pp[n],t);break;case"image":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"embed":case"source":case"link":Ge("error",t),Ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&(n=r[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(G(137,e));default:gt(t,e,u,n,r,null)}return;default:if(iA(e)){for(l in r)r.hasOwnProperty(l)&&(n=r[l],n!==void 0&&BS(t,e,l,n,r,void 0));return}}for(s in r)r.hasOwnProperty(s)&&(n=r[s],n!=null&&gt(t,e,s,n,r,null))}function d7(t,e,r,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,s=null,c=null,u=null,l=null;for(m in r){var d=r[m];if(r.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=d;default:n.hasOwnProperty(m)||gt(t,e,m,null,n,d)}}for(var f in n){var m=n[f];if(d=r[f],n.hasOwnProperty(f)&&(m!=null||d!=null))switch(f){case"type":o=m;break;case"name":i=m;break;case"checked":u=m;break;case"defaultChecked":l=m;break;case"value":a=m;break;case"defaultValue":s=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(G(137,e));break;default:m!==d&&gt(t,e,f,m,n,d)}}mS(t,a,s,c,u,l,o,i);return;case"select":m=a=s=f=null;for(o in r)if(c=r[o],r.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":m=c;default:n.hasOwnProperty(o)||gt(t,e,o,null,n,c)}for(i in n)if(o=n[i],c=r[i],n.hasOwnProperty(i)&&(o!=null||c!=null))switch(i){case"value":f=o;break;case"defaultValue":s=o;break;case"multiple":a=o;default:o!==c&&gt(t,e,i,o,n,c)}e=s,r=a,n=m,f!=null?Yl(t,!!r,f,!1):!!n!=!!r&&(e!=null?Yl(t,!!r,e,!0):Yl(t,!!r,r?[]:"",!1));return;case"textarea":m=f=null;for(s in r)if(i=r[s],r.hasOwnProperty(s)&&i!=null&&!n.hasOwnProperty(s))switch(s){case"value":break;case"children":break;default:gt(t,e,s,null,n,i)}for(a in n)if(i=n[a],o=r[a],n.hasOwnProperty(a)&&(i!=null||o!=null))switch(a){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(G(91));break;default:i!==o&&gt(t,e,a,i,n,o)}bP(t,f,m);return;case"option":for(var p in r)if(f=r[p],r.hasOwnProperty(p)&&f!=null&&!n.hasOwnProperty(p))switch(p){case"selected":t.selected=!1;break;default:gt(t,e,p,null,n,f)}for(c in n)if(f=n[c],m=r[c],n.hasOwnProperty(c)&&f!==m&&(f!=null||m!=null))switch(c){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:gt(t,e,c,f,n,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in r)f=r[b],r.hasOwnProperty(b)&&f!=null&&!n.hasOwnProperty(b)&&gt(t,e,b,null,n,f);for(u in n)if(f=n[u],m=r[u],n.hasOwnProperty(u)&&f!==m&&(f!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(G(137,e));break;default:gt(t,e,u,f,n,m)}return;default:if(iA(e)){for(var y in r)f=r[y],r.hasOwnProperty(y)&&f!==void 0&&!n.hasOwnProperty(y)&&BS(t,e,y,void 0,n,f);for(l in n)f=n[l],m=r[l],!n.hasOwnProperty(l)||f===m||f===void 0&&m===void 0||BS(t,e,l,f,n,m);return}}for(var h in r)f=r[h],r.hasOwnProperty(h)&&f!=null&&!n.hasOwnProperty(h)&&gt(t,e,h,null,n,f);for(d in n)f=n[d],m=r[d],!n.hasOwnProperty(d)||f===m||f==null&&m==null||gt(t,e,d,f,n,m)}function zR(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f7(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var i=r[n],o=i.transferSize,a=i.initiatorType,s=i.duration;if(o&&s&&zR(a)){for(a=0,s=i.responseEnd,n+=1;n<r.length;n++){var c=r[n],u=c.startTime;if(u>s)break;var l=c.transferSize,d=c.initiatorType;l&&zR(d)&&(c=c.responseEnd,a+=l*(c<s?1:(s-u)/(c-u)))}if(--n,e+=8*(o+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ZS=null,VS=null;function g_(t){return t.nodeType===9?t:t.ownerDocument}function DR(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E2(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function qS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tS=null;function m7(){var t=window.event;return t&&t.type==="popstate"?t===tS?!1:(tS=t,!0):(tS=null,!1)}var O2=typeof setTimeout=="function"?setTimeout:void 0,p7=typeof clearTimeout=="function"?clearTimeout:void 0,LR=typeof Promise=="function"?Promise:void 0,h7=typeof queueMicrotask=="function"?queueMicrotask:typeof LR!="undefined"?function(t){return LR.resolve(null).then(t).catch(g7)}:O2;function g7(t){setTimeout(function(){throw t})}function Rs(t){return t==="head"}function UR(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"||r==="/&"){if(n===0){t.removeChild(i),md(e);return}n--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")n++;else if(r==="html")ip(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,ip(r);for(var o=r.firstChild;o;){var a=o.nextSibling,s=o.nodeName;o[Sp]||s==="SCRIPT"||s==="STYLE"||s==="LINK"&&o.rel.toLowerCase()==="stylesheet"||r.removeChild(o),o=a}}else r==="body"&&ip(t.ownerDocument.body);r=i}while(r);md(e)}function jR(t,e){var r=t;t=0;do{var n=r.nextSibling;if(r.nodeType===1?e?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(e?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=n}while(r)}function GS(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var r=e;switch(e=e.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":GS(r),nA(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function y7(t,e,r,n){for(;t.nodeType===1;){var i=r;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[Sp])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(o=t.getAttribute("rel"),o==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(o!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(o=t.getAttribute("src"),(o!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===o)return t}else return t;if(t=Ei(t.nextSibling),t===null)break}return null}function _7(t,e,r){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ei(t.nextSibling),t===null))return null;return t}function I2(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ei(t.nextSibling),t===null))return null;return t}function HS(t){return t.data==="$?"||t.data==="$~"}function KS(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function v7(t,e){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||r.readyState!=="loading")e();else{var n=function(){e(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var JS=null;function FR(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(e===0)return Ei(t.nextSibling);e--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||e++}t=t.nextSibling}return null}function BR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(e===0)return t;e--}else r!=="/$"&&r!=="/&"||e++}t=t.previousSibling}return null}function N2(t,e,r){switch(e=g_(r),t){case"html":if(t=e.documentElement,!t)throw Error(G(452));return t;case"head":if(t=e.head,!t)throw Error(G(453));return t;case"body":if(t=e.body,!t)throw Error(G(454));return t;default:throw Error(G(451))}}function ip(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);nA(t)}var Oi=new Map,ZR=new Set;function y_(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sa=ct.d;ct.d={f:b7,r:x7,D:w7,C:S7,L:A7,m:T7,X:O7,S:E7,M:I7};function b7(){var t=Sa.f(),e=P_();return t||e}function x7(t){var e=hd(t);e!==null&&e.tag===5&&e.type==="form"?wM(e):Sa.r(t)}var vd=typeof document=="undefined"?null:document;function C2(t,e,r){var n=vd;if(n&&typeof e=="string"&&e){var i=wi(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof r=="string"&&(i+='[crossorigin="'+r+'"]'),ZR.has(i)||(ZR.add(i),t={rel:t,crossOrigin:r,href:e},n.querySelector(i)===null&&(e=n.createElement("link"),Dr(e,"link",t),Or(e),n.head.appendChild(e)))}}function w7(t){Sa.D(t),C2("dns-prefetch",t,null)}function S7(t,e){Sa.C(t,e),C2("preconnect",t,e)}function A7(t,e,r){Sa.L(t,e,r);var n=vd;if(n&&t&&e){var i='link[rel="preload"][as="'+wi(e)+'"]';e==="image"&&r&&r.imageSrcSet?(i+='[imagesrcset="'+wi(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(i+='[imagesizes="'+wi(r.imageSizes)+'"]')):i+='[href="'+wi(t)+'"]';var o=i;switch(e){case"style":o=fd(t);break;case"script":o=bd(t)}Oi.has(o)||(t=Pt({rel:"preload",href:e==="image"&&r&&r.imageSrcSet?void 0:t,as:e},r),Oi.set(o,t),n.querySelector(i)!==null||e==="style"&&n.querySelector(Np(o))||e==="script"&&n.querySelector(Cp(o))||(e=n.createElement("link"),Dr(e,"link",t),Or(e),n.head.appendChild(e)))}}function T7(t,e){Sa.m(t,e);var r=vd;if(r&&t){var n=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+wi(n)+'"][href="'+wi(t)+'"]',o=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=bd(t)}if(!Oi.has(o)&&(t=Pt({rel:"modulepreload",href:t},e),Oi.set(o,t),r.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Cp(o)))return}n=r.createElement("link"),Dr(n,"link",t),Or(n),r.head.appendChild(n)}}}function E7(t,e,r){Sa.S(t,e,r);var n=vd;if(n&&t){var i=Wl(n).hoistableStyles,o=fd(t);e=e||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=n.querySelector(Np(o)))s.loading=5;else{t=Pt({rel:"stylesheet",href:t,"data-precedence":e},r),(r=Oi.get(o))&&BA(t,r);var c=a=n.createElement("link");Or(c),Dr(c,"link",t),c._p=new Promise(function(u,l){c.onload=u,c.onerror=l}),c.addEventListener("load",function(){s.loading|=1}),c.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Zy(a,e,n)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}}function O7(t,e){Sa.X(t,e);var r=vd;if(r&&t){var n=Wl(r).hoistableScripts,i=bd(t),o=n.get(i);o||(o=r.querySelector(Cp(i)),o||(t=Pt({src:t,async:!0},e),(e=Oi.get(i))&&ZA(t,e),o=r.createElement("script"),Or(o),Dr(o,"link",t),r.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}function I7(t,e){Sa.M(t,e);var r=vd;if(r&&t){var n=Wl(r).hoistableScripts,i=bd(t),o=n.get(i);o||(o=r.querySelector(Cp(i)),o||(t=Pt({src:t,async:!0,type:"module"},e),(e=Oi.get(i))&&ZA(t,e),o=r.createElement("script"),Or(o),Dr(o,"link",t),r.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}function VR(t,e,r,n){var i=(i=vs.current)?y_(i):null;if(!i)throw Error(G(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(e=fd(r.href),r=Wl(i).hoistableStyles,n=r.get(e),n||(n={type:"style",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=fd(r.href);var o=Wl(i).hoistableStyles,a=o.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,a),(o=i.querySelector(Np(t)))&&!o._p&&(a.instance=o,a.state.loading=5),Oi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Oi.set(t,r),o||N7(i,t,r,a.state))),e&&n===null)throw Error(G(528,""));return a}if(e&&n!==null)throw Error(G(529,""));return null;case"script":return e=r.async,r=r.src,typeof r=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=bd(r),r=Wl(i).hoistableScripts,n=r.get(e),n||(n={type:"script",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(G(444,t))}}function fd(t){return'href="'+wi(t)+'"'}function Np(t){return'link[rel="stylesheet"]['+t+"]"}function k2(t){return Pt({},t,{"data-precedence":t.precedence,precedence:null})}function N7(t,e,r,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),Dr(e,"link",r),Or(e),t.head.appendChild(e))}function bd(t){return'[src="'+wi(t)+'"]'}function Cp(t){return"script[async]"+t}function qR(t,e,r){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+wi(r.href)+'"]');if(n)return e.instance=n,Or(n),n;var i=Pt({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Or(n),Dr(n,"style",i),Zy(n,r.precedence,t),e.instance=n;case"stylesheet":i=fd(r.href);var o=t.querySelector(Np(i));if(o)return e.state.loading|=4,e.instance=o,Or(o),o;n=k2(r),(i=Oi.get(i))&&BA(n,i),o=(t.ownerDocument||t).createElement("link"),Or(o);var a=o;return a._p=new Promise(function(s,c){a.onload=s,a.onerror=c}),Dr(o,"link",n),e.state.loading|=4,Zy(o,r.precedence,t),e.instance=o;case"script":return o=bd(r.src),(i=t.querySelector(Cp(o)))?(e.instance=i,Or(i),i):(n=r,(i=Oi.get(o))&&(n=Pt({},r),ZA(n,i)),t=t.ownerDocument||t,i=t.createElement("script"),Or(i),Dr(i,"link",n),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(G(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(n=e.instance,e.state.loading|=4,Zy(n,r.precedence,t));return e.instance}function Zy(t,e,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,o=i,a=0;a<n.length;a++){var s=n[a];if(s.dataset.precedence===e)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(t,o.nextSibling):(e=r.nodeType===9?r.head:r,e.insertBefore(t,e.firstChild))}function BA(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ZA(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Vy=null;function GR(t,e,r){if(Vy===null){var n=new Map,i=Vy=new Map;i.set(r,n)}else i=Vy,n=i.get(r),n||(n=new Map,i.set(r,n));if(n.has(t))return n;for(n.set(t,null),r=r.getElementsByTagName(t),i=0;i<r.length;i++){var o=r[i];if(!(o[Sp]||o[Pr]||t==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var a=o.getAttribute(e)||"";a=t+a;var s=n.get(a);s?s.push(o):n.set(a,[o])}}return n}function HR(t,e,r){t=t.ownerDocument||t,t.head.insertBefore(r,e==="title"?t.querySelector("head > title"):null)}function C7(t,e,r){if(r===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function $2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function k7(t,e,r,n){if(r.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var i=fd(n.href),o=e.querySelector(Np(i));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=__.bind(t),e.then(t,t)),r.state.loading|=4,r.instance=o,Or(o);return}o=e.ownerDocument||e,n=k2(n),(i=Oi.get(i))&&BA(n,i),o=o.createElement("link"),Or(o);var a=o;a._p=new Promise(function(s,c){a.onload=s,a.onerror=c}),Dr(o,"link",n),r.instance=o}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,e),(e=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=__.bind(t),e.addEventListener("load",r),e.addEventListener("error",r))}}var rS=0;function $7(t,e){return t.stylesheets&&t.count===0&&qy(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var n=setTimeout(function(){if(t.stylesheets&&qy(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4+e);0<t.imgBytes&&rS===0&&(rS=62500*f7());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qy(t,t.stylesheets),t.unsuspend)){var o=t.unsuspend;t.unsuspend=null,o()}},(t.imgBytes>rS?50:800)+e);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function __(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qy(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var v_=null;function qy(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,v_=new Map,e.forEach(R7,t),v_=null,__.call(t))}function R7(t,e){if(!(e.state.loading&4)){var r=v_.get(t);if(r)var n=r.get(null);else{r=new Map,v_.set(t,r);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(r.set(a.dataset.precedence,a),n=a)}n&&r.set(null,n)}i=e.instance,a=i.getAttribute("data-precedence"),o=r.get(a)||n,o===n&&r.set(null,i),r.set(a,i),this.count++,n=__.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),o?o.parentNode.insertBefore(i,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var gp={$$typeof:fa,Provider:null,Consumer:null,_currentValue:Bu,_currentValue2:Bu,_threadCount:0};function P7(t,e,r,n,i,o,a,s,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I0(0),this.hiddenUpdates=I0(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function R2(t,e,r,n,i,o,a,s,c,u,l,d){return t=new P7(t,e,r,a,c,u,l,d,s),e=1,o===!0&&(e|=24),o=Kn(3,null,null,e),t.current=o,o.stateNode=t,e=hA(),e.refCount++,t.pooledCache=e,e.refCount++,o.memoizedState={element:n,isDehydrated:r,cache:e},_A(o),t}function P2(t){return t?(t=Gl,t):Gl}function M2(t,e,r,n,i,o){i=P2(i),n.context===null?n.context=i:n.pendingContext=i,n=xs(e),n.payload={element:r},o=o===void 0?null:o,o!==null&&(n.callback=o),r=ws(t,n,e),r!==null&&(Cn(r,t,e),Wm(r,t,e))}function KR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function VA(t,e){KR(t,e),(t=t.alternate)&&KR(t,e)}function z2(t){if(t.tag===13||t.tag===31){var e=tc(t,67108864);e!==null&&Cn(e,t,67108864),VA(t,67108864)}}function JR(t){if(t.tag===13||t.tag===31){var e=Qn();e=tA(e);var r=tc(t,e);r!==null&&Cn(r,t,e),VA(t,e)}}var b_=!0;function M7(t,e,r,n){var i=ke.T;ke.T=null;var o=ct.p;try{ct.p=2,qA(t,e,r,n)}finally{ct.p=o,ke.T=i}}function z7(t,e,r,n){var i=ke.T;ke.T=null;var o=ct.p;try{ct.p=8,qA(t,e,r,n)}finally{ct.p=o,ke.T=i}}function qA(t,e,r,n){if(b_){var i=WS(n);if(i===null)eS(t,e,n,x_,r),WR(t,n);else if(L7(i,t,e,r,n))n.stopPropagation();else if(WR(t,n),e&4&&-1<D7.indexOf(t)){for(;i!==null;){var o=hd(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var a=Uu(o.pendingLanes);if(a!==0){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var c=1<<31-Xn(a);s.entanglements[1]|=c,a&=~c}Ao(o),(ut&6)===0&&(l_=Wn()+500,Ip(0,!1))}}break;case 31:case 13:s=tc(o,2),s!==null&&Cn(s,o,2),P_(),VA(o,2)}if(o=WS(n),o===null&&eS(t,e,n,x_,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else eS(t,e,n,null,r)}}function WS(t){return t=oA(t),GA(t)}var x_=null;function GA(t){if(x_=null,t=jl(t),t!==null){var e=vp(t);if(e===null)t=null;else{var r=e.tag;if(r===13){if(t=rP(e),t!==null)return t;t=null}else if(r===31){if(t=nP(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return x_=t,null}function D2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(AG()){case sP:return 2;case uP:return 8;case Wy:case TG:return 32;case cP:return 268435456;default:return 32}default:return 32}}var YS=!1,Ts=null,Es=null,Os=null,yp=new Map,_p=new Map,ms=[],D7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WR(t,e){switch(t){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":yp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(e.pointerId)}}function Um(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=hd(e),e!==null&&z2(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function L7(t,e,r,n,i){switch(e){case"focusin":return Ts=Um(Ts,t,e,r,n,i),!0;case"dragenter":return Es=Um(Es,t,e,r,n,i),!0;case"mouseover":return Os=Um(Os,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return yp.set(o,Um(yp.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,_p.set(o,Um(_p.get(o)||null,t,e,r,n,i)),!0}return!1}function L2(t){var e=jl(t.target);if(e!==null){var r=vp(e);if(r!==null){if(e=r.tag,e===13){if(e=rP(r),e!==null){t.blockedOn=e,R$(t.priority,function(){JR(r)});return}}else if(e===31){if(e=nP(r),e!==null){t.blockedOn=e,R$(t.priority,function(){JR(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=WS(t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);hS=n,r.target.dispatchEvent(n),hS=null}else return e=hd(r),e!==null&&z2(e),t.blockedOn=r,!1;e.shift()}return!0}function YR(t,e,r){Gy(t)&&r.delete(e)}function U7(){YS=!1,Ts!==null&&Gy(Ts)&&(Ts=null),Es!==null&&Gy(Es)&&(Es=null),Os!==null&&Gy(Os)&&(Os=null),yp.forEach(YR),_p.forEach(YR)}function Cy(t,e){t.blockedOn===e&&(t.blockedOn=null,YS||(YS=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,U7)))}var ky=null;function XR(t){ky!==t&&(ky=t,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,function(){ky===t&&(ky=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],i=t[e+2];if(typeof n!="function"){if(GA(n||r)===null)continue;break}var o=hd(r);o!==null&&(t.splice(e,3),e-=3,kS(o,{pending:!0,data:i,method:r.method,action:n},n,i))}}))}function md(t){function e(c){return Cy(c,t)}Ts!==null&&Cy(Ts,t),Es!==null&&Cy(Es,t),Os!==null&&Cy(Os,t),yp.forEach(e),_p.forEach(e);for(var r=0;r<ms.length;r++){var n=ms[r];n.blockedOn===t&&(n.blockedOn=null)}for(;0<ms.length&&(r=ms[0],r.blockedOn===null);)L2(r),r.blockedOn===null&&ms.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var i=r[n],o=r[n+1],a=i[kn]||null;if(typeof o=="function")a||XR(r);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[kn]||null)s=a.formAction;else if(GA(i)!==null)continue}else s=a.action;typeof s=="function"?r[n+1]=s:(r.splice(n,3),n-=3),XR(r)}}}function U2(){function t(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function HA(t){this._internalRoot=t}D_.prototype.render=HA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));var r=e.current,n=Qn();M2(r,n,t,e,null,null)};D_.prototype.unmount=HA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;M2(t.current,2,null,t,null,null),P_(),e[pd]=null}};function D_(t){this._internalRoot=t}D_.prototype.unstable_scheduleHydration=function(t){if(t){var e=pP();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ms.length&&e!==0&&e<ms[r].priority;r++);ms.splice(r,0,t),r===0&&L2(t)}};var QR=eP.version;if(QR!=="19.2.3")throw Error(G(527,QR,"19.2.3"));ct.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=yG(e),t=t!==null?iP(t):null,t=t===null?null:t.stateNode,t};var j7={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ke,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(jm=__REACT_DEVTOOLS_GLOBAL_HOOK__,!jm.isDisabled&&jm.supportsFiber))try{bp=jm.inject(j7),Yn=jm}catch(t){}var jm;L_.createRoot=function(t,e){if(!tP(t))throw Error(G(299));var r=!1,n="",i=CM,o=kM,a=$M;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(o=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=R2(t,1,!1,null,null,r,n,null,i,o,a,U2),t[pd]=e.current,FA(t),new HA(e)};L_.hydrateRoot=function(t,e,r){if(!tP(t))throw Error(G(299));var n=!1,i="",o=CM,a=kM,s=$M,c=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onUncaughtError!==void 0&&(o=r.onUncaughtError),r.onCaughtError!==void 0&&(a=r.onCaughtError),r.onRecoverableError!==void 0&&(s=r.onRecoverableError),r.formState!==void 0&&(c=r.formState)),e=R2(t,1,!0,e,r!=null?r:null,n,i,c,o,a,s,U2),e.context=P2(null),r=e.current,n=Qn(),n=tA(n),i=xs(n),i.callback=null,ws(r,i,n),r=n,e.current.lanes=r,wp(e,r),Ao(e),t[pd]=e.current,FA(t),new D_(e)};L_.version="19.2.3"});var KA=ne((Fle,B2)=>{"use strict";function F2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F2)}catch(t){console.error(t)}}F2(),B2.exports=j2()});var V2=ne(U_=>{"use strict";var F7=Symbol.for("react.transitional.element"),B7=Symbol.for("react.fragment");function Z2(t,e,r){var n=null;if(r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),"key"in e){r={};for(var i in e)i!=="key"&&(r[i]=e[i])}else r=e;return e=r.ref,{$$typeof:F7,type:t,key:n,ref:e!==void 0?e:null,props:r}}U_.Fragment=B7;U_.jsx=Z2;U_.jsxs=Z2});var Ke=ne((Zle,q2)=>{"use strict";q2.exports=V2()});var Xz=ne((C_e,Xp)=>{function lJ(t){if(Array.isArray(t))return t}Xp.exports=lJ,Xp.exports.__esModule=!0,Xp.exports.default=Xp.exports});var Qz=ne((k_e,Qp)=>{function dJ(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}Qp.exports=dJ,Qp.exports.__esModule=!0,Qp.exports.default=Qp.exports});var eD=ne(($_e,eh)=>{function fJ(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}eh.exports=fJ,eh.exports.__esModule=!0,eh.exports.default=eh.exports});var rD=ne((R_e,th)=>{var tD=eD();function mJ(t,e){if(t){if(typeof t=="string")return tD(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tD(t,e):void 0}}th.exports=mJ,th.exports.__esModule=!0,th.exports.default=th.exports});var nD=ne((P_e,rh)=>{function pJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}rh.exports=pJ,rh.exports.__esModule=!0,rh.exports.default=rh.exports});var iD=ne((M_e,nh)=>{var hJ=Xz(),gJ=Qz(),yJ=rD(),_J=nD();function vJ(t,e){return hJ(t)||gJ(t,e)||yJ(t,e)||_J()}nh.exports=vJ,nh.exports.__esModule=!0,nh.exports.default=nh.exports});var oD=ne((z_e,ih)=>{function bJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}ih.exports=bJ,ih.exports.__esModule=!0,ih.exports.default=ih.exports});var DT=ne((D_e,Ra)=>{function zT(t){"@babel/helpers - typeof";return Ra.exports=zT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra.exports.__esModule=!0,Ra.exports.default=Ra.exports,zT(t)}Ra.exports=zT,Ra.exports.__esModule=!0,Ra.exports.default=Ra.exports});var sD=ne((L_e,oh)=>{var aD=DT().default;function xJ(t,e){if(aD(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(aD(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}oh.exports=xJ,oh.exports.__esModule=!0,oh.exports.default=oh.exports});var uD=ne((U_e,ah)=>{var wJ=DT().default,SJ=sD();function AJ(t){var e=SJ(t,"string");return wJ(e)=="symbol"?e:e+""}ah.exports=AJ,ah.exports.__esModule=!0,ah.exports.default=ah.exports});var lD=ne((j_e,sh)=>{var TJ=uD();function cD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TJ(n.key),n)}}function EJ(t,e,r){return e&&cD(t.prototype,e),r&&cD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}sh.exports=EJ,sh.exports.__esModule=!0,sh.exports.default=sh.exports});var LT=ne((bv,dD)=>{(function(t,e){typeof bv=="object"&&typeof dD!="undefined"?e(bv,iD(),oD(),lD()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.automationEvents={},t._slicedToArray,t._classCallCheck,t._createClass))})(bv,(function(t,e,r,n){"use strict";var i=function(L,k,U){return{endTime:k,insertTime:U,type:"exponentialRampToValue",value:L}},o=function(L,k,U){return{endTime:k,insertTime:U,type:"linearRampToValue",value:L}},a=function(L,k){return{startTime:k,type:"setValue",value:L}},s=function(L,k,U){return{duration:U,startTime:k,type:"setValueCurve",values:L}},c=function(L,k,U){var J=U.startTime,H=U.target,V=U.timeConstant;return H+(k-H)*Math.exp((J-L)/V)},u=function(L){return L.type==="exponentialRampToValue"},l=function(L){return L.type==="linearRampToValue"},d=function(L){return u(L)||l(L)},f=function(L){return L.type==="setValue"},m=function(L){return L.type==="setValueCurve"},p=function(L,k,U,J){var H=L[k];return H===void 0?J:d(H)||f(H)?H.value:m(H)?H.values[H.values.length-1]:c(U,p(L,k-1,H.startTime,J),H)},b=function(L,k,U,J,H){return U===void 0?[J.insertTime,H]:d(U)?[U.endTime,U.value]:f(U)?[U.startTime,U.value]:m(U)?[U.startTime+U.duration,U.values[U.values.length-1]]:[U.startTime,p(L,k-1,U.startTime,H)]},y=function(L){return L.type==="cancelAndHold"},h=function(L){return L.type==="cancelScheduledValues"},_=function(L){return y(L)||h(L)?L.cancelTime:u(L)||l(L)?L.endTime:L.startTime},v=function(L,k,U,J){var H=J.endTime,V=J.value;return U===V?V:0<U&&0<V||U<0&&V<0?U*Math.pow(V/U,(L-k)/(H-k)):0},x=function(L,k,U,J){var H=J.endTime,V=J.value;return U+(L-k)/(H-k)*(V-U)},w=function(L,k){var U=Math.floor(k),J=Math.ceil(k);return U===J?L[U]:(1-(k-U))*L[U]+(1-(J-k))*L[J]},E=function(L,k){var U=k.duration,J=k.startTime,H=k.values,V=(L-J)/U*(H.length-1);return w(H,V)},S=function(L){return L.type==="setTarget"},g=(function(){function j(L){r(this,j),this._automationEvents=[],this._currenTime=0,this._defaultValue=L}return n(j,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(k){var U=_(k);if(y(k)||h(k)){var J=this._automationEvents.findIndex(function(te){return h(k)&&m(te)?te.startTime+te.duration>=U:_(te)>=U}),H=this._automationEvents[J];if(J!==-1&&(this._automationEvents=this._automationEvents.slice(0,J)),y(k)){var V=this._automationEvents[this._automationEvents.length-1];if(H!==void 0&&d(H)){if(V!==void 0&&S(V))throw new Error("The internal list is malformed.");var _e=V===void 0?H.insertTime:m(V)?V.startTime+V.duration:_(V),Fe=V===void 0?this._defaultValue:m(V)?V.values[V.values.length-1]:V.value,Lt=u(H)?v(U,_e,Fe,H):x(U,_e,Fe,H),qt=u(H)?i(Lt,U,this._currenTime):o(Lt,U,this._currenTime);this._automationEvents.push(qt)}if(V!==void 0&&S(V)&&this._automationEvents.push(a(this.getValue(U),U)),V!==void 0&&m(V)&&V.startTime+V.duration>U){var Se=U-V.startTime,O=(V.values.length-1)/V.duration,T=Math.max(2,1+Math.ceil(Se*O)),M=Se/(T-1)*O,$=V.values.slice(0,T);if(M<1)for(var Ae=1;Ae<T;Ae+=1){var qe=M*Ae%1;$[Ae]=V.values[Ae-1]*(1-qe)+V.values[Ae]*qe}this._automationEvents[this._automationEvents.length-1]=s($,V.startTime,Se)}}}else{var Ve=this._automationEvents.findIndex(function(te){return _(te)>U}),wt=Ve===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ve-1];if(wt!==void 0&&m(wt)&&_(wt)+wt.duration>U)return!1;var Kt=u(k)?i(k.value,k.endTime,this._currenTime):l(k)?o(k.value,U,this._currenTime):k;if(Ve===-1)this._automationEvents.push(Kt);else{if(m(k)&&U+k.duration>_(this._automationEvents[Ve]))return!1;this._automationEvents.splice(Ve,0,Kt)}}return!0}},{key:"flush",value:function(k){var U=this._automationEvents.findIndex(function(V){return _(V)>k});if(U>1){var J=this._automationEvents.slice(U-1),H=J[0];S(H)&&J.unshift(a(p(this._automationEvents,U-2,H.startTime,this._defaultValue),H.startTime)),this._automationEvents=J}}},{key:"getValue",value:function(k){if(this._automationEvents.length===0)return this._defaultValue;var U=this._automationEvents.findIndex(function($){return _($)>k}),J=this._automationEvents[U],H=(U===-1?this._automationEvents.length:U)-1,V=this._automationEvents[H];if(V!==void 0&&S(V)&&(J===void 0||!d(J)||J.insertTime>k))return c(k,p(this._automationEvents,H-1,V.startTime,this._defaultValue),V);if(V!==void 0&&f(V)&&(J===void 0||!d(J)))return V.value;if(V!==void 0&&m(V)&&(J===void 0||!d(J)||V.startTime+V.duration>k))return k<V.startTime+V.duration?E(k,V):V.values[V.values.length-1];if(V!==void 0&&d(V)&&(J===void 0||!d(J)))return V.value;if(J!==void 0&&u(J)){var _e=b(this._automationEvents,H,V,J,this._defaultValue),Fe=e(_e,2),Lt=Fe[0],qt=Fe[1];return v(k,Lt,qt,J)}if(J!==void 0&&l(J)){var Se=b(this._automationEvents,H,V,J,this._defaultValue),O=e(Se,2),T=O[0],M=O[1];return x(k,T,M,J)}return this._defaultValue}}])})(),I=function(L){return{cancelTime:L,type:"cancelAndHold"}},N=function(L){return{cancelTime:L,type:"cancelScheduledValues"}},C=function(L,k){return{endTime:k,type:"exponentialRampToValue",value:L}},R=function(L,k){return{endTime:k,type:"linearRampToValue",value:L}},z=function(L,k,U){return{startTime:k,target:L,timeConstant:U,type:"setTarget"}};t.AutomationEventList=g,t.createCancelAndHoldAutomationEvent=I,t.createCancelScheduledValuesAutomationEvent=N,t.createExponentialRampToValueAutomationEvent=C,t.createLinearRampToValueAutomationEvent=R,t.createSetTargetAutomationEvent=z,t.createSetValueAutomationEvent=a,t.createSetValueCurveAutomationEvent=s}))});var XU=ne((d4e,YU)=>{"use strict";YU.exports=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e=="undefined"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var oj=ne((f4e,pE)=>{"use strict";var gY=/[\p{Lu}]/u,yY=/[\p{Ll}]/u,QU=/^[\p{Lu}](?![\p{Lu}])/gu,rj=/([\p{Alpha}\p{N}_]|$)/u,nj=/[_.\- ]+/,_Y=new RegExp("^"+nj.source),ej=new RegExp(nj.source+rj.source,"gu"),tj=new RegExp("\\d+"+rj.source,"gu"),vY=(t,e,r)=>{let n=!1,i=!1,o=!1;for(let a=0;a<t.length;a++){let s=t[a];n&&gY.test(s)?(t=t.slice(0,a)+"-"+t.slice(a),n=!1,o=i,i=!0,a++):i&&o&&yY.test(s)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),o=i,i=!1,n=!0):(n=e(s)===s&&r(s)!==s,o=i,i=r(s)===s&&e(s)!==s)}return t},bY=(t,e)=>(QU.lastIndex=0,t.replace(QU,r=>e(r))),xY=(t,e)=>(ej.lastIndex=0,tj.lastIndex=0,t.replace(ej,(r,n)=>e(n)).replace(tj,r=>e(r))),ij=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(o=>o.trim()).filter(o=>o.length).join("-"):t=t.trim(),t.length===0)return"";let r=e.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(e.locale),n=e.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=vY(t,r,n)),t=t.replace(_Y,""),e.preserveConsecutiveUppercase?t=bY(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),xY(t,n))};pE.exports=ij;pE.exports.default=ij});var j6=ne((sje,HE)=>{"use strict";var AX=Object.prototype.hasOwnProperty,mn="~";function Ah(){}Object.create&&(Ah.prototype=Object.create(null),new Ah().__proto__||(mn=!1));function TX(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function U6(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new TX(r,n||t,i),a=mn?mn+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],o]:t._events[a].push(o):(t._events[a]=o,t._eventsCount++),t}function db(t,e){--t._eventsCount===0?t._events=new Ah:delete t._events[e]}function Yr(){this._events=new Ah,this._eventsCount=0}Yr.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)AX.call(r,n)&&e.push(mn?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Yr.prototype.listeners=function(e){var r=mn?mn+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a};Yr.prototype.listenerCount=function(e){var r=mn?mn+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Yr.prototype.emit=function(e,r,n,i,o,a){var s=mn?mn+e:e;if(!this._events[s])return!1;var c=this._events[s],u=arguments.length,l,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,o),!0;case 6:return c.fn.call(c.context,r,n,i,o,a),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var f=c.length,m;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,i);break;default:if(!l)for(m=1,l=new Array(u-1);m<u;m++)l[m-1]=arguments[m];c[d].fn.apply(c[d].context,l)}}return!0};Yr.prototype.on=function(e,r,n){return U6(this,e,r,n,!1)};Yr.prototype.once=function(e,r,n){return U6(this,e,r,n,!0)};Yr.prototype.removeListener=function(e,r,n,i){var o=mn?mn+e:e;if(!this._events[o])return this;if(!r)return db(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!i||a.once)&&(!n||a.context===n)&&db(this,o);else{for(var s=0,c=[],u=a.length;s<u;s++)(a[s].fn!==r||i&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=c.length===1?c[0]:c:db(this,o)}return this};Yr.prototype.removeAllListeners=function(e){var r;return e?(r=mn?mn+e:e,this._events[r]&&db(this,r)):(this._events=new Ah,this._eventsCount=0),this};Yr.prototype.off=Yr.prototype.removeListener;Yr.prototype.addListener=Yr.prototype.on;Yr.prefixed=mn;Yr.EventEmitter=Yr;typeof HE!="undefined"&&(HE.exports=Yr)});var B6=ne((uje,F6)=>{"use strict";F6.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var V6=ne((cje,mb)=>{"use strict";var EX=B6(),fb=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Z6=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let o=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(c){i(c)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,s=r instanceof Error?r:new fb(a);typeof t.cancel=="function"&&t.cancel(),i(s)},e);EX(t.then(n,i),()=>{clearTimeout(o)})});mb.exports=Z6;mb.exports.default=Z6;mb.exports.TimeoutError=fb});var q6=ne(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});function OX(t,e,r){let n=0,i=t.length;for(;i>0;){let o=i/2|0,a=n+o;r(t[a],e)<=0?(n=++a,i-=o+1):i=o}return n}KE.default=OX});var G6=ne(WE=>{"use strict";Object.defineProperty(WE,"__esModule",{value:!0});var IX=q6(),JE=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=IX.default(this._queue,n,(o,a)=>a.priority-o.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};WE.default=JE});var hb=ne(XE=>{"use strict";Object.defineProperty(XE,"__esModule",{value:!0});var NX=j6(),H6=V6(),CX=G6(),pb=()=>{},kX=new H6.TimeoutError,YE=class extends NX{constructor(e){var r,n,i,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=pb,this._resolveIdle=pb,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:CX.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=pb,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=pb,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let o=async()=>{this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&r.timeout===void 0?e():H6.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(kX)});n(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(o,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};XE.default=YE});var Eh=ne((gje,K6)=>{"use strict";var RX="2.0.0",PX=Number.MAX_SAFE_INTEGER||9007199254740991,MX=16,zX=250,DX=["major","premajor","minor","preminor","patch","prepatch","prerelease"];K6.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:MX,MAX_SAFE_BUILD_LENGTH:zX,MAX_SAFE_INTEGER:PX,RELEASE_TYPES:DX,SEMVER_SPEC_VERSION:RX,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Oh=ne((yje,J6)=>{"use strict";var LX=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};J6.exports=LX});var Ff=ne((Bo,W6)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:tO,MAX_SAFE_BUILD_LENGTH:UX,MAX_LENGTH:jX}=Eh(),FX=Oh();Bo=W6.exports={};var BX=Bo.re=[],ZX=Bo.safeRe=[],de=Bo.src=[],VX=Bo.safeSrc=[],fe=Bo.t={},qX=0,rO="[a-zA-Z0-9-]",GX=[["\\s",1],["\\d",jX],[rO,UX]],HX=t=>{for(let[e,r]of GX)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},De=(t,e,r)=>{let n=HX(e),i=qX++;FX(t,i,e),fe[t]=i,de[i]=e,VX[i]=n,BX[i]=new RegExp(e,r?"g":void 0),ZX[i]=new RegExp(n,r?"g":void 0)};De("NUMERICIDENTIFIER","0|[1-9]\\d*");De("NUMERICIDENTIFIERLOOSE","\\d+");De("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${rO}*`);De("MAINVERSION",`(${de[fe.NUMERICIDENTIFIER]})\\.(${de[fe.NUMERICIDENTIFIER]})\\.(${de[fe.NUMERICIDENTIFIER]})`);De("MAINVERSIONLOOSE",`(${de[fe.NUMERICIDENTIFIERLOOSE]})\\.(${de[fe.NUMERICIDENTIFIERLOOSE]})\\.(${de[fe.NUMERICIDENTIFIERLOOSE]})`);De("PRERELEASEIDENTIFIER",`(?:${de[fe.NONNUMERICIDENTIFIER]}|${de[fe.NUMERICIDENTIFIER]})`);De("PRERELEASEIDENTIFIERLOOSE",`(?:${de[fe.NONNUMERICIDENTIFIER]}|${de[fe.NUMERICIDENTIFIERLOOSE]})`);De("PRERELEASE",`(?:-(${de[fe.PRERELEASEIDENTIFIER]}(?:\\.${de[fe.PRERELEASEIDENTIFIER]})*))`);De("PRERELEASELOOSE",`(?:-?(${de[fe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${de[fe.PRERELEASEIDENTIFIERLOOSE]})*))`);De("BUILDIDENTIFIER",`${rO}+`);De("BUILD",`(?:\\+(${de[fe.BUILDIDENTIFIER]}(?:\\.${de[fe.BUILDIDENTIFIER]})*))`);De("FULLPLAIN",`v?${de[fe.MAINVERSION]}${de[fe.PRERELEASE]}?${de[fe.BUILD]}?`);De("FULL",`^${de[fe.FULLPLAIN]}$`);De("LOOSEPLAIN",`[v=\\s]*${de[fe.MAINVERSIONLOOSE]}${de[fe.PRERELEASELOOSE]}?${de[fe.BUILD]}?`);De("LOOSE",`^${de[fe.LOOSEPLAIN]}$`);De("GTLT","((?:<|>)?=?)");De("XRANGEIDENTIFIERLOOSE",`${de[fe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);De("XRANGEIDENTIFIER",`${de[fe.NUMERICIDENTIFIER]}|x|X|\\*`);De("XRANGEPLAIN",`[v=\\s]*(${de[fe.XRANGEIDENTIFIER]})(?:\\.(${de[fe.XRANGEIDENTIFIER]})(?:\\.(${de[fe.XRANGEIDENTIFIER]})(?:${de[fe.PRERELEASE]})?${de[fe.BUILD]}?)?)?`);De("XRANGEPLAINLOOSE",`[v=\\s]*(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${de[fe.XRANGEIDENTIFIERLOOSE]})(?:${de[fe.PRERELEASELOOSE]})?${de[fe.BUILD]}?)?)?`);De("XRANGE",`^${de[fe.GTLT]}\\s*${de[fe.XRANGEPLAIN]}$`);De("XRANGELOOSE",`^${de[fe.GTLT]}\\s*${de[fe.XRANGEPLAINLOOSE]}$`);De("COERCEPLAIN",`(^|[^\\d])(\\d{1,${tO}})(?:\\.(\\d{1,${tO}}))?(?:\\.(\\d{1,${tO}}))?`);De("COERCE",`${de[fe.COERCEPLAIN]}(?:$|[^\\d])`);De("COERCEFULL",de[fe.COERCEPLAIN]+`(?:${de[fe.PRERELEASE]})?(?:${de[fe.BUILD]})?(?:$|[^\\d])`);De("COERCERTL",de[fe.COERCE],!0);De("COERCERTLFULL",de[fe.COERCEFULL],!0);De("LONETILDE","(?:~>?)");De("TILDETRIM",`(\\s*)${de[fe.LONETILDE]}\\s+`,!0);Bo.tildeTrimReplace="$1~";De("TILDE",`^${de[fe.LONETILDE]}${de[fe.XRANGEPLAIN]}$`);De("TILDELOOSE",`^${de[fe.LONETILDE]}${de[fe.XRANGEPLAINLOOSE]}$`);De("LONECARET","(?:\\^)");De("CARETTRIM",`(\\s*)${de[fe.LONECARET]}\\s+`,!0);Bo.caretTrimReplace="$1^";De("CARET",`^${de[fe.LONECARET]}${de[fe.XRANGEPLAIN]}$`);De("CARETLOOSE",`^${de[fe.LONECARET]}${de[fe.XRANGEPLAINLOOSE]}$`);De("COMPARATORLOOSE",`^${de[fe.GTLT]}\\s*(${de[fe.LOOSEPLAIN]})$|^$`);De("COMPARATOR",`^${de[fe.GTLT]}\\s*(${de[fe.FULLPLAIN]})$|^$`);De("COMPARATORTRIM",`(\\s*)${de[fe.GTLT]}\\s*(${de[fe.LOOSEPLAIN]}|${de[fe.XRANGEPLAIN]})`,!0);Bo.comparatorTrimReplace="$1$2$3";De("HYPHENRANGE",`^\\s*(${de[fe.XRANGEPLAIN]})\\s+-\\s+(${de[fe.XRANGEPLAIN]})\\s*$`);De("HYPHENRANGELOOSE",`^\\s*(${de[fe.XRANGEPLAINLOOSE]})\\s+-\\s+(${de[fe.XRANGEPLAINLOOSE]})\\s*$`);De("STAR","(<|>)?=?\\s*\\*");De("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");De("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var yb=ne((_je,Y6)=>{"use strict";var KX=Object.freeze({loose:!0}),JX=Object.freeze({}),WX=t=>t?typeof t!="object"?KX:t:JX;Y6.exports=WX});var nO=ne((vje,eF)=>{"use strict";var X6=/^[0-9]+$/,Q6=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=X6.test(t),n=X6.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},YX=(t,e)=>Q6(e,t);eF.exports={compareIdentifiers:Q6,rcompareIdentifiers:YX}});var Xr=ne((bje,rF)=>{"use strict";var _b=Oh(),{MAX_LENGTH:tF,MAX_SAFE_INTEGER:vb}=Eh(),{safeRe:bb,t:xb}=Ff(),XX=yb(),{compareIdentifiers:iO}=nO(),oO=class t{constructor(e,r){if(r=XX(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>tF)throw new TypeError(`version is longer than ${tF} characters`);_b("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?bb[xb.LOOSE]:bb[xb.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vb||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vb||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vb||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<vb)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(_b("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(_b("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return iO(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(_b("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return iO(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?bb[xb.PRERELEASELOOSE]:bb[xb.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),iO(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};rF.exports=oO});var Uc=ne((xje,iF)=>{"use strict";var nF=Xr(),QX=(t,e,r=!1)=>{if(t instanceof nF)return t;try{return new nF(t,e)}catch(n){if(!r)return null;throw n}};iF.exports=QX});var aF=ne((wje,oF)=>{"use strict";var eQ=Uc(),tQ=(t,e)=>{let r=eQ(t,e);return r?r.version:null};oF.exports=tQ});var uF=ne((Sje,sF)=>{"use strict";var rQ=Uc(),nQ=(t,e)=>{let r=rQ(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};sF.exports=nQ});var dF=ne((Aje,lF)=>{"use strict";var cF=Xr(),iQ=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new cF(t instanceof cF?t.version:t,r).inc(e,n,i).version}catch(o){return null}};lF.exports=iQ});var pF=ne((Tje,mF)=>{"use strict";var fF=Uc(),oQ=(t,e)=>{let r=fF(t,null,!0),n=fF(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,s=o?n:r,c=!!a.prerelease.length;if(!!s.prerelease.length&&!c){if(!s.patch&&!s.minor)return"major";if(s.compareMain(a)===0)return s.minor&&!s.patch?"minor":"patch"}let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};mF.exports=oQ});var gF=ne((Eje,hF)=>{"use strict";var aQ=Xr(),sQ=(t,e)=>new aQ(t,e).major;hF.exports=sQ});var _F=ne((Oje,yF)=>{"use strict";var uQ=Xr(),cQ=(t,e)=>new uQ(t,e).minor;yF.exports=cQ});var bF=ne((Ije,vF)=>{"use strict";var lQ=Xr(),dQ=(t,e)=>new lQ(t,e).patch;vF.exports=dQ});var wF=ne((Nje,xF)=>{"use strict";var fQ=Uc(),mQ=(t,e)=>{let r=fQ(t,e);return r&&r.prerelease.length?r.prerelease:null};xF.exports=mQ});var zi=ne((Cje,AF)=>{"use strict";var SF=Xr(),pQ=(t,e,r)=>new SF(t,r).compare(new SF(e,r));AF.exports=pQ});var EF=ne((kje,TF)=>{"use strict";var hQ=zi(),gQ=(t,e,r)=>hQ(e,t,r);TF.exports=gQ});var IF=ne(($je,OF)=>{"use strict";var yQ=zi(),_Q=(t,e)=>yQ(t,e,!0);OF.exports=_Q});var wb=ne((Rje,CF)=>{"use strict";var NF=Xr(),vQ=(t,e,r)=>{let n=new NF(t,r),i=new NF(e,r);return n.compare(i)||n.compareBuild(i)};CF.exports=vQ});var $F=ne((Pje,kF)=>{"use strict";var bQ=wb(),xQ=(t,e)=>t.sort((r,n)=>bQ(r,n,e));kF.exports=xQ});var PF=ne((Mje,RF)=>{"use strict";var wQ=wb(),SQ=(t,e)=>t.sort((r,n)=>wQ(n,r,e));RF.exports=SQ});var Ih=ne((zje,MF)=>{"use strict";var AQ=zi(),TQ=(t,e,r)=>AQ(t,e,r)>0;MF.exports=TQ});var Sb=ne((Dje,zF)=>{"use strict";var EQ=zi(),OQ=(t,e,r)=>EQ(t,e,r)<0;zF.exports=OQ});var aO=ne((Lje,DF)=>{"use strict";var IQ=zi(),NQ=(t,e,r)=>IQ(t,e,r)===0;DF.exports=NQ});var sO=ne((Uje,LF)=>{"use strict";var CQ=zi(),kQ=(t,e,r)=>CQ(t,e,r)!==0;LF.exports=kQ});var Ab=ne((jje,UF)=>{"use strict";var $Q=zi(),RQ=(t,e,r)=>$Q(t,e,r)>=0;UF.exports=RQ});var Tb=ne((Fje,jF)=>{"use strict";var PQ=zi(),MQ=(t,e,r)=>PQ(t,e,r)<=0;jF.exports=MQ});var uO=ne((Bje,FF)=>{"use strict";var zQ=aO(),DQ=sO(),LQ=Ih(),UQ=Ab(),jQ=Sb(),FQ=Tb(),BQ=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return zQ(t,r,n);case"!=":return DQ(t,r,n);case">":return LQ(t,r,n);case">=":return UQ(t,r,n);case"<":return jQ(t,r,n);case"<=":return FQ(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};FF.exports=BQ});var ZF=ne((Zje,BF)=>{"use strict";var ZQ=Xr(),VQ=Uc(),{safeRe:Eb,t:Ob}=Ff(),qQ=(t,e)=>{if(t instanceof ZQ)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Eb[Ob.COERCEFULL]:Eb[Ob.COERCE]);else{let c=e.includePrerelease?Eb[Ob.COERCERTLFULL]:Eb[Ob.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",s=e.includePrerelease&&r[6]?`+${r[6]}`:"";return VQ(`${n}.${i}.${o}${a}${s}`,e)};BF.exports=qQ});var qF=ne((Vje,VF)=>{"use strict";var cO=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};VF.exports=cO});var Di=ne((qje,JF)=>{"use strict";var GQ=/\s+/g,lO=class t{constructor(e,r){if(r=KQ(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof dO)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(GQ," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!HF(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&tee(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&QQ)|(this.options.loose&&eee))+":"+e,i=GF.get(n);if(i)return i;let o=this.options.loose,a=o?pn[Qr.HYPHENRANGELOOSE]:pn[Qr.HYPHENRANGE];e=e.replace(a,dee(this.options.includePrerelease)),Mt("hyphen replace",e),e=e.replace(pn[Qr.COMPARATORTRIM],WQ),Mt("comparator trim",e),e=e.replace(pn[Qr.TILDETRIM],YQ),Mt("tilde trim",e),e=e.replace(pn[Qr.CARETTRIM],XQ),Mt("caret trim",e);let s=e.split(" ").map(d=>ree(d,this.options)).join(" ").split(/\s+/).map(d=>lee(d,this.options));o&&(s=s.filter(d=>(Mt("loose invalid filter",d,this.options),!!d.match(pn[Qr.COMPARATORLOOSE])))),Mt("range list",s);let c=new Map,u=s.map(d=>new dO(d,this.options));for(let d of u){if(HF(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return GF.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>KF(n,r)&&e.set.some(i=>KF(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new JQ(e,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(fee(this.set[r],e,this.options))return!0;return!1}};JF.exports=lO;var HQ=qF(),GF=new HQ,KQ=yb(),dO=Nh(),Mt=Oh(),JQ=Xr(),{safeRe:pn,t:Qr,comparatorTrimReplace:WQ,tildeTrimReplace:YQ,caretTrimReplace:XQ}=Ff(),{FLAG_INCLUDE_PRERELEASE:QQ,FLAG_LOOSE:eee}=Eh(),HF=t=>t.value==="<0.0.0-0",tee=t=>t.value==="",KF=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},ree=(t,e)=>(t=t.replace(pn[Qr.BUILD],""),Mt("comp",t,e),t=oee(t,e),Mt("caret",t),t=nee(t,e),Mt("tildes",t),t=see(t,e),Mt("xrange",t),t=cee(t,e),Mt("stars",t),t),hn=t=>!t||t.toLowerCase()==="x"||t==="*",nee=(t,e)=>t.trim().split(/\s+/).map(r=>iee(r,e)).join(" "),iee=(t,e)=>{let r=e.loose?pn[Qr.TILDELOOSE]:pn[Qr.TILDE];return t.replace(r,(n,i,o,a,s)=>{Mt("tilde",t,n,i,o,a,s);let c;return hn(i)?c="":hn(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:hn(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:s?(Mt("replaceTilde pr",s),c=`>=${i}.${o}.${a}-${s} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Mt("tilde return",c),c})},oee=(t,e)=>t.trim().split(/\s+/).map(r=>aee(r,e)).join(" "),aee=(t,e)=>{Mt("caret",t,e);let r=e.loose?pn[Qr.CARETLOOSE]:pn[Qr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,s,c)=>{Mt("caret",t,i,o,a,s,c);let u;return hn(o)?u="":hn(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:hn(s)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:c?(Mt("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${s}-${c} <${o}.${a}.${+s+1}-0`:u=`>=${o}.${a}.${s}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${s}-${c} <${+o+1}.0.0-0`):(Mt("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${s}${n} <${o}.${a}.${+s+1}-0`:u=`>=${o}.${a}.${s}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${s} <${+o+1}.0.0-0`),Mt("caret return",u),u})},see=(t,e)=>(Mt("replaceXRanges",t,e),t.split(/\s+/).map(r=>uee(r,e)).join(" ")),uee=(t,e)=>{t=t.trim();let r=e.loose?pn[Qr.XRANGELOOSE]:pn[Qr.XRANGE];return t.replace(r,(n,i,o,a,s,c)=>{Mt("xRange",t,n,i,o,a,s,c);let u=hn(o),l=u||hn(a),d=l||hn(s),f=d;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&f?(l&&(a=0),s=0,i===">"?(i=">=",l?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):i==="<="&&(i="<",l?o=+o+1:a=+a+1),i==="<"&&(c="-0"),n=`${i+o}.${a}.${s}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Mt("xRange return",n),n})},cee=(t,e)=>(Mt("replaceStars",t,e),t.trim().replace(pn[Qr.STAR],"")),lee=(t,e)=>(Mt("replaceGTE0",t,e),t.trim().replace(pn[e.includePrerelease?Qr.GTE0PRE:Qr.GTE0],"")),dee=t=>(e,r,n,i,o,a,s,c,u,l,d,f)=>(hn(n)?r="":hn(i)?r=`>=${n}.0.0${t?"-0":""}`:hn(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,hn(u)?c="":hn(l)?c=`<${+u+1}.0.0-0`:hn(d)?c=`<${u}.${+l+1}.0-0`:f?c=`<=${u}.${l}.${d}-${f}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),fee=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Mt(t[n].semver),t[n].semver!==dO.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Nh=ne((Gje,t3)=>{"use strict";var Ch=Symbol("SemVer ANY"),pO=class t{static get ANY(){return Ch}constructor(e,r){if(r=WF(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),mO("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Ch?this.value="":this.value=this.operator+this.semver.version,mO("comp",this)}parse(e){let r=this.options.loose?YF[XF.COMPARATORLOOSE]:YF[XF.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new QF(n[2],this.options.loose):this.semver=Ch}toString(){return this.value}test(e){if(mO("Comparator.test",e,this.options.loose),this.semver===Ch||e===Ch)return!0;if(typeof e=="string")try{e=new QF(e,this.options)}catch(r){return!1}return fO(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new e3(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new e3(this.value,r).test(e.semver):(r=WF(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||fO(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||fO(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};t3.exports=pO;var WF=yb(),{safeRe:YF,t:XF}=Ff(),fO=uO(),mO=Oh(),QF=Xr(),e3=Di()});var kh=ne((Hje,r3)=>{"use strict";var mee=Di(),pee=(t,e,r)=>{try{e=new mee(e,r)}catch(n){return!1}return e.test(t)};r3.exports=pee});var i3=ne((Kje,n3)=>{"use strict";var hee=Di(),gee=(t,e)=>new hee(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));n3.exports=gee});var a3=ne((Jje,o3)=>{"use strict";var yee=Xr(),_ee=Di(),vee=(t,e,r)=>{let n=null,i=null,o=null;try{o=new _ee(e,r)}catch(a){return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new yee(n,r))}),n};o3.exports=vee});var u3=ne((Wje,s3)=>{"use strict";var bee=Xr(),xee=Di(),wee=(t,e,r)=>{let n=null,i=null,o=null;try{o=new xee(e,r)}catch(a){return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new bee(n,r))}),n};s3.exports=wee});var d3=ne((Yje,l3)=>{"use strict";var hO=Xr(),See=Di(),c3=Ih(),Aee=(t,e)=>{t=new See(t,e);let r=new hO("0.0.0");if(t.test(r)||(r=new hO("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let s=new hO(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!o||c3(s,o))&&(o=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||c3(r,o))&&(r=o)}return r&&t.test(r)?r:null};l3.exports=Aee});var m3=ne((Xje,f3)=>{"use strict";var Tee=Di(),Eee=(t,e)=>{try{return new Tee(t,e).range||"*"}catch(r){return null}};f3.exports=Eee});var Ib=ne((Qje,y3)=>{"use strict";var Oee=Xr(),g3=Nh(),{ANY:Iee}=g3,Nee=Di(),Cee=kh(),p3=Ih(),h3=Sb(),kee=Tb(),$ee=Ab(),Ree=(t,e,r,n)=>{t=new Oee(t,n),e=new Nee(e,n);let i,o,a,s,c;switch(r){case">":i=p3,o=kee,a=h3,s=">",c=">=";break;case"<":i=h3,o=$ee,a=p3,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Cee(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,f=null;if(l.forEach(m=>{m.semver===Iee&&(m=new g3(">=0.0.0")),d=d||m,f=f||m,i(m.semver,d.semver,n)?d=m:a(m.semver,f.semver,n)&&(f=m)}),d.operator===s||d.operator===c||(!f.operator||f.operator===s)&&o(t,f.semver))return!1;if(f.operator===c&&a(t,f.semver))return!1}return!0};y3.exports=Ree});var v3=ne((e6e,_3)=>{"use strict";var Pee=Ib(),Mee=(t,e,r)=>Pee(t,e,">",r);_3.exports=Mee});var x3=ne((t6e,b3)=>{"use strict";var zee=Ib(),Dee=(t,e,r)=>zee(t,e,"<",r);b3.exports=Dee});var A3=ne((r6e,S3)=>{"use strict";var w3=Di(),Lee=(t,e,r)=>(t=new w3(t,r),e=new w3(e,r),t.intersects(e,r));S3.exports=Lee});var E3=ne((n6e,T3)=>{"use strict";var Uee=kh(),jee=zi();T3.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((l,d)=>jee(l,d,r));for(let l of a)Uee(l,e,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let s=[];for(let[l,d]of n)l===d?s.push(l):!d&&l===a[0]?s.push("*"):d?l===a[0]?s.push(`<=${d}`):s.push(`${l} - ${d}`):s.push(`>=${l}`);let c=s.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var $3=ne((i6e,k3)=>{"use strict";var O3=Di(),yO=Nh(),{ANY:gO}=yO,$h=kh(),_O=zi(),Fee=(t,e,r={})=>{if(t===e)return!0;t=new O3(t,r),e=new O3(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=Zee(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},Bee=[new yO(">=0.0.0-0")],I3=[new yO(">=0.0.0")],Zee=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===gO){if(e.length===1&&e[0].semver===gO)return!0;r.includePrerelease?t=Bee:t=I3}if(e.length===1&&e[0].semver===gO){if(r.includePrerelease)return!0;e=I3}let n=new Set,i,o;for(let m of t)m.operator===">"||m.operator===">="?i=N3(i,m,r):m.operator==="<"||m.operator==="<="?o=C3(o,m,r):n.add(m.semver);if(n.size>1)return null;let a;if(i&&o){if(a=_O(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let m of n){if(i&&!$h(m,String(i),r)||o&&!$h(m,String(o),r))return null;for(let p of e)if(!$h(m,String(p),r))return!1;return!0}let s,c,u,l,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let m of e){if(l=l||m.operator===">"||m.operator===">=",u=u||m.operator==="<"||m.operator==="<=",i){if(f&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===f.major&&m.semver.minor===f.minor&&m.semver.patch===f.patch&&(f=!1),m.operator===">"||m.operator===">="){if(s=N3(i,m,r),s===m&&s!==i)return!1}else if(i.operator===">="&&!$h(i.semver,String(m),r))return!1}if(o){if(d&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===d.major&&m.semver.minor===d.minor&&m.semver.patch===d.patch&&(d=!1),m.operator==="<"||m.operator==="<="){if(c=C3(o,m,r),c===m&&c!==o)return!1}else if(o.operator==="<="&&!$h(o.semver,String(m),r))return!1}if(!m.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&l&&!i&&a!==0||f||d)},N3=(t,e,r)=>{if(!t)return e;let n=_O(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},C3=(t,e,r)=>{if(!t)return e;let n=_O(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};k3.exports=Fee});var z3=ne((o6e,M3)=>{"use strict";var vO=Ff(),R3=Eh(),Vee=Xr(),P3=nO(),qee=Uc(),Gee=aF(),Hee=uF(),Kee=dF(),Jee=pF(),Wee=gF(),Yee=_F(),Xee=bF(),Qee=wF(),ete=zi(),tte=EF(),rte=IF(),nte=wb(),ite=$F(),ote=PF(),ate=Ih(),ste=Sb(),ute=aO(),cte=sO(),lte=Ab(),dte=Tb(),fte=uO(),mte=ZF(),pte=Nh(),hte=Di(),gte=kh(),yte=i3(),_te=a3(),vte=u3(),bte=d3(),xte=m3(),wte=Ib(),Ste=v3(),Ate=x3(),Tte=A3(),Ete=E3(),Ote=$3();M3.exports={parse:qee,valid:Gee,clean:Hee,inc:Kee,diff:Jee,major:Wee,minor:Yee,patch:Xee,prerelease:Qee,compare:ete,rcompare:tte,compareLoose:rte,compareBuild:nte,sort:ite,rsort:ote,gt:ate,lt:ste,eq:ute,neq:cte,gte:lte,lte:dte,cmp:fte,coerce:mte,Comparator:pte,Range:hte,satisfies:gte,toComparators:yte,maxSatisfying:_te,minSatisfying:vte,minVersion:bte,validRange:xte,outside:wte,gtr:Ste,ltr:Ate,intersects:Tte,simplifyRange:Ete,subset:Ote,SemVer:Vee,re:vO.re,src:vO.src,tokens:vO.t,SEMVER_SPEC_VERSION:R3.SEMVER_SPEC_VERSION,RELEASE_TYPES:R3.RELEASE_TYPES,compareIdentifiers:P3.compareIdentifiers,rcompareIdentifiers:P3.rcompareIdentifiers}});var rB=ne((J6e,tB)=>{"use strict";var Q3=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,eB=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`;function Jte(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,o]of Object.entries(n))e[i]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},n[i]=e[i],t.set(o[0],o[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=Q3(),e.color.ansi16m=eB(),e.bgColor.ansi256=Q3(10),e.bgColor.ansi16m=eB(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,n,i)=>r===n&&n===i?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:r=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(r.toString(16));if(!n)return[0,0,0];let{colorString:i}=n.groups;i.length===3&&(i=i.split("").map(a=>a+a).join(""));let o=Number.parseInt(i,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(tB,"exports",{enumerable:!0,get:Jte})});var xV=ne(Dw=>{"use strict";Dw.byteLength=ace;Dw.toByteArray=uce;Dw.fromByteArray=dce;var ea=[],Gi=[],oce=typeof Uint8Array!="undefined"?Uint8Array:Array,yk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(vl=0,vV=yk.length;vl<vV;++vl)ea[vl]=yk[vl],Gi[yk.charCodeAt(vl)]=vl;var vl,vV;Gi[45]=62;Gi[95]=63;function bV(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function ace(t){var e=bV(t),r=e[0],n=e[1];return(r+n)*3/4-n}function sce(t,e,r){return(e+r)*3/4-r}function uce(t){var e,r=bV(t),n=r[0],i=r[1],o=new oce(sce(t,n,i)),a=0,s=i>0?n-4:n,c;for(c=0;c<s;c+=4)e=Gi[t.charCodeAt(c)]<<18|Gi[t.charCodeAt(c+1)]<<12|Gi[t.charCodeAt(c+2)]<<6|Gi[t.charCodeAt(c+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=Gi[t.charCodeAt(c)]<<2|Gi[t.charCodeAt(c+1)]>>4,o[a++]=e&255),i===1&&(e=Gi[t.charCodeAt(c)]<<10|Gi[t.charCodeAt(c+1)]<<4|Gi[t.charCodeAt(c+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function cce(t){return ea[t>>18&63]+ea[t>>12&63]+ea[t>>6&63]+ea[t&63]}function lce(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(cce(n));return i.join("")}function dce(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(lce(t,a,a+o>s?s:a+o));return n===1?(e=t[r-1],i.push(ea[e>>2]+ea[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ea[e>>10]+ea[e>>4&63]+ea[e<<2&63]+"=")),i.join("")}});var Nle={};na(Nle,{default:()=>Ile});module.exports=Hq(Nle);var Vt=require("obsidian");var Qk=require("obsidian");var Kq=["audio/webm; codecs=opus","audio/webm","audio/ogg","audio/mp4","audio/m4a","audio/wav","audio/flac"],Jq={"audio/webm; codecs=opus":"webm","audio/webm":"webm","audio/ogg":"ogg","audio/mp4":"mp4","audio/m4a":"m4a","audio/wav":"wav","audio/flac":"flac"};function u0(t){if(MediaRecorder.isTypeSupported(t))return t;for(let e of Kq)if(MediaRecorder.isTypeSupported(e))return e;throw new Error("No supported mime types found")}function sy(t){return Jq[t]}var uy=class{constructor(){this.data=[];this.startTime=null;this.defaultMimeType=u0("audio/webm; codecs=opus");this.bitRate=32e3;this.chosenMimeType=u0(this.defaultMimeType),this.chosenFormat=sy(this.chosenMimeType),this.fileExtension=this.chosenFormat}async startRecording(e){let r=e&&e!==""?{deviceId:{exact:e}}:!0;navigator.mediaDevices.getUserMedia({audio:r}).then(n=>{this.mediaRecorder=this.setupMediaRecorder(n),this.mediaRecorder.start(),this.startTime=Date.now()}).catch(n=>{new Qk.Notice("Scribe: Failed to access the microphone"),console.error("Error accessing microphone:",n)})}async handlePauseResume(){if(!this.mediaRecorder||this.mediaRecorder.state==="inactive")throw console.error("There is no mediaRecorder, cannot resume handlePauseResume"),new Error("There is no mediaRecorder, cannot handlePauseResume");this.mediaRecorder.state==="paused"?this.resumeRecording():this.mediaRecorder.state==="recording"&&this.pauseRecording()}async resumeRecording(){var e;if(!this.mediaRecorder||this.mediaRecorder.state==="inactive")throw console.error("There is no mediaRecorder, cannot resume resumeRecording"),new Error("There is no mediaRecorder, cannot resumeRecording");(e=this.mediaRecorder)==null||e.resume()}async pauseRecording(){var e;if(!this.mediaRecorder||this.mediaRecorder.state==="inactive")throw console.error("There is no mediaRecorder, cannot pauseRecording"),new Error("There is no mediaRecorder, cannot pauseRecording");(e=this.mediaRecorder)==null||e.pause()}stopRecording(){return new Promise((e,r)=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){let n=new Error("There is no mediaRecorder, cannot stopRecording");console.error(n.message),r(n);return}this.mediaRecorder.onstop=async()=>{var n;try{if((n=this.mediaRecorder)==null||n.stream.getTracks().forEach(o=>{o.stop()}),this.data.length===0)throw new Error("No audio data recorded.");let i=new Blob(this.data,{type:this.chosenMimeType});console.log("Scribe: Recording stopped, audio Blob created",i),this.mediaRecorder=null,this.startTime=null,e(i)}catch(i){console.error("Error during recording stop:",i),r(i)}},this.mediaRecorder.stop()})}setupMediaRecorder(e){let r=new MediaRecorder(e,{mimeType:this.chosenMimeType,audioBitsPerSecond:this.bitRate});return r.ondataavailable=n=>{this.data.push(n.data)},r}};var Aq=be(KA()),Tq=require("obsidian"),Ol=be(yi());var j_=be(yi()),xd=be(Ke());function G2({startTimeMs:t}){let[e,r]=(0,j_.useState)({minutes:0,seconds:0,milliseconds:0});return(0,j_.useEffect)(()=>{let n;return t&&!n?n=window.setInterval(()=>{let{minutes:i,seconds:o,milliseconds:a}=Z7(t);r({minutes:i,seconds:o,milliseconds:a})},10):(r({minutes:0,seconds:0,milliseconds:0}),n&&window.clearInterval(n)),()=>{n&&window.clearInterval(n)}},[t]),(0,xd.jsxs)("div",{className:"scribe-timer",children:[(0,xd.jsxs)("span",{className:"scribe-timer-digits",children:[JA(e.minutes,2),":"]}),(0,xd.jsxs)("span",{className:"scribe-timer-digits scribe-timer-millis",children:[JA(e.seconds,2),"."]}),(0,xd.jsx)("span",{className:"scribe-timer-digits scribe-timer-millis",children:JA(e.milliseconds,2)})]})}function Z7(t){let n=Date.now()-t,i=Math.floor(n/(1e3*60*60));n-=i*(1e3*60*60);let o=Math.floor(n/(1e3*60));n-=o*(1e3*60);let a=Math.floor(n/1e3);n-=a*1e3;let s=n;return s>=100&&(s=Math.floor(s/10)),{hours:i,minutes:o,seconds:a,milliseconds:s}}var JA=(t,e)=>{let r=t.toString();for(;r.length<e;)r=`0${r}`;return r};var Nr=be(Ke());function H2(){return(0,Nr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"lucide lucide-mic-vocal",children:[(0,Nr.jsx)("title",{children:"Microphone Icon"}),(0,Nr.jsx)("path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12"}),(0,Nr.jsx)("path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5"}),(0,Nr.jsx)("circle",{cx:16,cy:7,r:5})]})}function K2(){return(0,Nr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"lucide lucide-save",children:[(0,Nr.jsx)("title",{children:"Save Icon"}),(0,Nr.jsx)("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),(0,Nr.jsx)("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"})]})}function J2(){return(0,Nr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"lucide lucide-trash-2",children:[(0,Nr.jsx)("title",{children:"Trash / Delete Icon"}),(0,Nr.jsx)("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2M10 11v6M14 11v6"})]})}var W2=()=>(0,Nr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"lucide lucide-circle-alert",children:[(0,Nr.jsx)("title",{children:"Circle Alert Icon"}),(0,Nr.jsx)("circle",{cx:12,cy:12,r:10}),(0,Nr.jsx)("path",{d:"M12 8v4M12 16h.01"})]});var Ii=be(Ke());function Y2({active:t,isPaused:e,isScribing:r,recordingState:n,handleStart:i,handlePauseResume:o,handleReset:a,handleComplete:s}){return(0,Ii.jsx)("div",{className:"scribe-control-buttons-container",children:t?(0,Ii.jsxs)("div",{className:"scribe-active-buttons-container",children:[(0,Ii.jsxs)("div",{className:"scribe-buttons-row",children:[(0,Ii.jsxs)("button",{className:"scribe-btn",onClick:a,type:"button",disabled:r,children:[(0,Ii.jsx)(J2,{}),"Reset"]}),(0,Ii.jsxs)("button",{className:"scribe-btn scribe-btn-save",onClick:s,type:"button",disabled:r,children:[(0,Ii.jsx)(K2,{}),"Complete"]})]}),r&&(0,Ii.jsx)("h2",{children:"\u267D Scribe in progress"})]}):(0,Ii.jsxs)("button",{className:"scribe-btn scribe-btn-start",onClick:i,type:"button",children:[(0,Ii.jsx)(H2,{}),"Start"]})})}var Lk=be(yi());var t0=require("obsidian"),yq=be(KA());var X2=function(t,e){var r;return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return clearTimeout(r),r=setTimeout(function(){return t.apply(void 0,n)},e)}};var wd=be(yi()),F_=(t,e)=>{let r=(0,wd.useRef)(void 0);return(0,wd.useEffect)(()=>{r.current=t},[t]),(0,wd.useMemo)(()=>X2(()=>{var o;(o=r.current)==null||o.call(r)},e),[e])};function xe(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function D(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}var WA=function(){let{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return WA=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function kp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var $p=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch(e){}try{return new Error(JSON.stringify(t))}catch(e){}}return new Error(t)};var ae=class extends Error{},vr=class t extends ae{constructor(e,r,n,i){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=r;let o=r;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(e,r,n){let i=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e||!i)return new Ps({message:n,cause:$p(r)});let o=r==null?void 0:r.error;return e===400?new Sd(e,o,n,i):e===401?new Ad(e,o,n,i):e===403?new Td(e,o,n,i):e===404?new Ed(e,o,n,i):e===409?new Od(e,o,n,i):e===422?new Id(e,o,n,i):e===429?new Nd(e,o,n,i):e>=500?new Cd(e,o,n,i):new t(e,o,n,i)}},Yt=class extends vr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Ps=class extends vr{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},To=class extends Ps{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}},Sd=class extends vr{},Ad=class extends vr{},Td=class extends vr{},Ed=class extends vr{},Od=class extends vr{},Id=class extends vr{},Nd=class extends vr{},Cd=class extends vr{},kd=class extends ae{constructor(){super("Could not parse response content as the length limit was reached")}},$d=class extends ae{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},Eo=class extends Error{constructor(e){super(e)}};var q7=/^[a-z][a-z0-9+.-]*:/i,Q2=t=>q7.test(t),Kr=t=>(Kr=Array.isArray,Kr(t)),YA=Kr;function XA(t){return typeof t!="object"?{}:t!=null?t:{}}function ez(t){if(!t)return!0;for(let e in t)return!1;return!0}function tz(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Rp(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}var rz=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ae(`${t} must be an integer`);if(e<0)throw new ae(`${t} must be a positive integer`);return e};var nz=t=>{try{return JSON.parse(t)}catch(e){return}};var Oo=t=>new Promise(e=>setTimeout(e,t));var Ms="6.10.0";var az=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof navigator!="undefined";function G7(){return typeof Deno!="undefined"&&Deno.build!=null?"deno":typeof EdgeRuntime!="undefined"?"edge":Object.prototype.toString.call(typeof globalThis.process!="undefined"?globalThis.process:0)==="[object process]"?"node":"unknown"}var H7=()=>{var r,n,i,o,a;let t=G7();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ms,"X-Stainless-OS":oz(Deno.build.os),"X-Stainless-Arch":iz(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(n=(r=Deno.version)==null?void 0:r.deno)!=null?n:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ms,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ms,"X-Stainless-OS":oz((i=globalThis.process.platform)!=null?i:"unknown"),"X-Stainless-Arch":iz((o=globalThis.process.arch)!=null?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!=null?a:"unknown"};let e=K7();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ms,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ms,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function K7(){if(typeof navigator=="undefined"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let i=n[1]||0,o=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}var iz=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",oz=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),B_,sz=()=>B_!=null?B_:B_=H7();function uz(){if(typeof fetch!="undefined")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function QA(...t){let e=globalThis.ReadableStream;if(typeof e=="undefined")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Z_(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return QA({start(){},async pull(r){let{done:n,value:i}=await e.next();n?r.close():r.enqueue(i)},async cancel(){var r;await((r=e.return)==null?void 0:r.call(e))}})}function eT(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function cz(t){var n,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(n=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(n));return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}var lz=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var V_="RFC3986",tT=t=>String(t),q_={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:tT},rT="RFC1738";var G_=(t,e)=>{var r;return G_=(r=Object.hasOwn)!=null?r:Function.prototype.call.bind(Object.prototype.hasOwnProperty),G_(t,e)},Io=(()=>{let t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})();var nT=1024,dz=(t,e,r,n,i)=>{if(t.length===0)return t;let o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(s){return"%26%23"+parseInt(s.slice(2),16)+"%3B"});let a="";for(let s=0;s<o.length;s+=nT){let c=o.length>=nT?o.slice(s,s+nT):o,u=[];for(let l=0;l<c.length;++l){let d=c.charCodeAt(l);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===rT&&(d===40||d===41)){u[u.length]=c.charAt(l);continue}if(d<128){u[u.length]=Io[d];continue}if(d<2048){u[u.length]=Io[192|d>>6]+Io[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Io[224|d>>12]+Io[128|d>>6&63]+Io[128|d&63];continue}l+=1,d=65536+((d&1023)<<10|c.charCodeAt(l)&1023),u[u.length]=Io[240|d>>18]+Io[128|d>>12&63]+Io[128|d>>6&63]+Io[128|d&63]}a+=u.join("")}return a};function fz(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function iT(t,e){if(Kr(t)){let r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}var mz={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},pz=function(t,e){Array.prototype.push.apply(t,Kr(e)?e:[e])},H_,br={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:dz,encodeValuesOnly:!1,format:V_,formatter:tT,indices:!1,serializeDate(t){return(H_!=null?H_:H_=Function.prototype.call.bind(Date.prototype.toISOString))(t)},skipNulls:!1,strictNullHandling:!1};function Y7(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}var oT={};function hz(t,e,r,n,i,o,a,s,c,u,l,d,f,m,p,b,y,h){let _=t,v=h,x=0,w=!1;for(;(v=v.get(oT))!==void 0&&!w;){let N=v.get(t);if(x+=1,typeof N!="undefined"){if(N===x)throw new RangeError("Cyclic object value");w=!0}typeof v.get(oT)=="undefined"&&(x=0)}if(typeof u=="function"?_=u(e,_):_ instanceof Date?_=f==null?void 0:f(_):r==="comma"&&Kr(_)&&(_=iT(_,function(N){return N instanceof Date?f==null?void 0:f(N):N})),_===null){if(o)return c&&!b?c(e,br.encoder,y,"key",m):e;_=""}if(Y7(_)||fz(_)){if(c){let N=b?e:c(e,br.encoder,y,"key",m);return[(p==null?void 0:p(N))+"="+(p==null?void 0:p(c(_,br.encoder,y,"value",m)))]}return[(p==null?void 0:p(e))+"="+(p==null?void 0:p(String(_)))]}let E=[];if(typeof _=="undefined")return E;let S;if(r==="comma"&&Kr(_))b&&c&&(_=iT(_,c)),S=[{value:_.length>0?_.join(",")||null:void 0}];else if(Kr(u))S=u;else{let N=Object.keys(_);S=l?N.sort(l):N}let g=s?String(e).replace(/\./g,"%2E"):String(e),I=n&&Kr(_)&&_.length===1?g+"[]":g;if(i&&Kr(_)&&_.length===0)return I+"[]";for(let N=0;N<S.length;++N){let C=S[N],R=typeof C=="object"&&typeof C.value!="undefined"?C.value:_[C];if(a&&R===null)continue;let z=d&&s?C.replace(/\./g,"%2E"):C,j=Kr(_)?typeof r=="function"?r(I,z):I:I+(d?"."+z:"["+z+"]");h.set(t,x);let L=new WeakMap;L.set(oT,h),pz(E,hz(R,j,r,n,i,o,a,s,r==="comma"&&b&&Kr(_)?null:c,u,l,d,f,m,p,b,y,L))}return E}function X7(t=br){if(typeof t.allowEmptyArrays!="undefined"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys!="undefined"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder!="undefined"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=t.charset||br.charset;if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=V_;if(typeof t.format!="undefined"){if(!G_(q_,t.format))throw new TypeError("Unknown format option provided.");r=t.format}let n=q_[r],i=br.filter;(typeof t.filter=="function"||Kr(t.filter))&&(i=t.filter);let o;if(t.arrayFormat&&t.arrayFormat in mz?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=br.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let a=typeof t.allowDots=="undefined"?t.encodeDotInKeys?!0:br.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:br.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:br.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:br.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter=="undefined"?br.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:br.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:br.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:br.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:br.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:br.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:br.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:br.strictNullHandling}}function aT(t,e={}){let r=t,n=X7(e),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):Kr(n.filter)&&(o=n.filter,i=o);let a=[];if(typeof r!="object"||r===null)return"";let s=mz[n.arrayFormat],c=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);let u=new WeakMap;for(let f=0;f<i.length;++f){let m=i[f];n.skipNulls&&r[m]===null||pz(a,hz(r[m],m,s,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}let l=a.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),l.length>0?d+l:""}function gz(t){let e=0;for(let i of t)e+=i.length;let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}var K_;function Rd(t){let e;return(K_!=null?K_:(e=new globalThis.TextEncoder,K_=e.encode.bind(e)))(t)}var J_;function sT(t){let e;return(J_!=null?J_:(e=new globalThis.TextDecoder,J_=e.decode.bind(e)))(t)}var ri,ni,nc=class{constructor(){ri.set(this,void 0),ni.set(this,void 0),xe(this,ri,new Uint8Array,"f"),xe(this,ni,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Rd(e):e;xe(this,ri,gz([D(this,ri,"f"),r]),"f");let n=[],i;for(;(i=eK(D(this,ri,"f"),D(this,ni,"f")))!=null;){if(i.carriage&&D(this,ni,"f")==null){xe(this,ni,i.index,"f");continue}if(D(this,ni,"f")!=null&&(i.index!==D(this,ni,"f")+1||i.carriage)){n.push(sT(D(this,ri,"f").subarray(0,D(this,ni,"f")-1))),xe(this,ri,D(this,ri,"f").subarray(D(this,ni,"f")),"f"),xe(this,ni,null,"f");continue}let o=D(this,ni,"f")!==null?i.preceding-1:i.preceding,a=sT(D(this,ri,"f").subarray(0,o));n.push(a),xe(this,ri,D(this,ri,"f").subarray(i.index),"f"),xe(this,ni,null,"f")}return n}flush(){return D(this,ri,"f").length?this.decode(`
`):[]}};ri=new WeakMap,ni=new WeakMap;nc.NEWLINE_CHARS=new Set([`
`,"\r"]);nc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eK(t,e){for(let i=e!=null?e:0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function yz(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}var Y_={off:0,error:200,warn:300,info:400,debug:500},uT=(t,e,r)=>{if(t){if(tz(Y_,t))return t;or(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Y_))}`)}};function Pp(){}function W_(t,e,r){return!e||Y_[t]>Y_[r]?Pp:e[t].bind(e)}var tK={error:Pp,warn:Pp,info:Pp,debug:Pp},_z=new WeakMap;function or(t){var o;let e=t.logger,r=(o=t.logLevel)!=null?o:"off";if(!e)return tK;let n=_z.get(e);if(n&&n[0]===r)return n[1];let i={error:W_("error",e,r),warn:W_("warn",e,r),info:W_("info",e,r),debug:W_("debug",e,r)};return _z.set(e,[r,i]),i}var Aa=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Mp,No=class t{constructor(e,r,n){this.iterator=e,Mp.set(this,void 0),this.controller=r,xe(this,Mp,n,"f")}static fromSSEResponse(e,r,n){let i=!1,o=n?or(n):console;async function*a(){if(i)throw new ae("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{for await(let c of rK(e,r))if(!s){if(c.data.startsWith("[DONE]")){s=!0;continue}if(c.event===null||!c.event.startsWith("thread.")){let u;try{u=JSON.parse(c.data)}catch(l){throw o.error("Could not parse message into JSON:",c.data),o.error("From chunk:",c.raw),l}if(u&&u.error)throw new vr(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(c.data)}catch(l){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),l}if(c.event=="error")throw new vr(void 0,u.error,u.message,void 0);yield{event:c.event,data:u}}}s=!0}catch(c){if(kp(c))return;throw c}finally{s||r.abort()}}return new t(a,r,n)}static fromReadableStream(e,r,n){let i=!1;async function*o(){let s=new nc,c=eT(e);for await(let u of c)for(let l of s.decode(u))yield l;for(let u of s.flush())yield u}async function*a(){if(i)throw new ae("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{for await(let c of o())s||c&&(yield JSON.parse(c));s=!0}catch(c){if(kp(c))return;throw c}finally{s||r.abort()}}return new t(a,r,n)}[(Mp=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),i=o=>({next:()=>{if(o.length===0){let a=n.next();e.push(a),r.push(a)}return o.shift()}});return[new t(()=>i(e),this.controller,D(this,Mp,"f")),new t(()=>i(r),this.controller,D(this,Mp,"f"))]}toReadableStream(){let e=this,r;return QA({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:i,done:o}=await r.next();if(o)return n.close();let a=Rd(JSON.stringify(i)+`
`);n.enqueue(a)}catch(i){n.error(i)}},async cancel(){var n;await((n=r.return)==null?void 0:n.call(r))}})}};async function*rK(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator!="undefined"&&globalThis.navigator.product==="ReactNative"?new ae("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ae("Attempted to iterate over a response with no body");let r=new cT,n=new nc,i=eT(t.body);for await(let o of nK(i))for(let a of n.decode(o)){let s=r.decode(a);s&&(yield s)}for(let o of n.flush()){let a=r.decode(o);a&&(yield a)}}async function*nK(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?Rd(r):r,i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),e=i;let o;for(;(o=yz(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}var cT=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=iK(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}};function iK(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function X_(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{var d;if(e.options.stream)return or(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):No.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let s=r.headers.get("content-type"),c=(d=s==null?void 0:s.split(";")[0])==null?void 0:d.trim();if((c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))){let f=await r.json();return lT(f,r)}return await r.text()})();return or(t).debug(`[${n}] response parsed`,Aa({retryOfRequestLogID:i,url:r.url,status:r.status,body:a,durationMs:Date.now()-o})),a}function lT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var zp,ic=class t extends Promise{constructor(e,r,n=X_){super(i=>{i(null)}),this.responsePromise=r,this.parseResponse=n,zp.set(this,void 0),xe(this,zp,e,"f")}_thenUnwrap(e){return new t(D(this,zp,"f"),this.responsePromise,async(r,n)=>lT(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(D(this,zp,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};zp=new WeakMap;var Q_,Dp=class{constructor(e,r,n,i){Q_.set(this,void 0),xe(this,Q_,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new ae("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await D(this,Q_,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Q_=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},Lp=class extends ic{constructor(e,r,n){super(e,r,async(i,o)=>new n(i,o.response,await X_(i,o),o.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},Co=class extends Dp{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageRequestOptions(){return null}},je=class extends Dp{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var n;let e=this.getPaginatedItems(),r=(n=e[e.length-1])==null?void 0:n.id;return r?{...this.options,query:{...XA(this.options.query),after:r}}:null}},Ta=class extends Dp{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.last_id;return e?{...this.options,query:{...XA(this.options.query),after:e}}:null}};var mT=()=>{var t;if(typeof File=="undefined"){let{process:e}=globalThis,r=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Pd(t,e,r){return mT(),new File(t,e!=null?e:"unknown_file",r)}function Up(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var ev=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",pT=async(t,e)=>dT(t.body)?{...t,body:await bz(t.body,e)}:t,ii=async(t,e)=>({...t,body:await bz(t.body,e)}),vz=new WeakMap;function aK(t){let e=typeof t=="function"?t:t.fetch,r=vz.get(e);if(r)return r;let n=(async()=>{try{let i="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new i(o).text()}catch(i){return!0}})();return vz.set(e,n),n}var bz=async(t,e)=>{if(!await aK(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,i])=>fT(r,n,i))),r},xz=t=>t instanceof Blob&&"name"in t,sK=t=>typeof t=="object"&&t!==null&&(t instanceof Response||ev(t)||xz(t)),dT=t=>{if(sK(t))return!0;if(Array.isArray(t))return t.some(dT);if(t&&typeof t=="object"){for(let e in t)if(dT(t[e]))return!0}return!1},fT=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response)t.append(e,Pd([await r.blob()],Up(r)));else if(ev(r))t.append(e,Pd([await new Response(Z_(r)).blob()],Up(r)));else if(xz(r))t.append(e,r,Up(r));else if(Array.isArray(r))await Promise.all(r.map(n=>fT(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>fT(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var wz=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",uK=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&wz(t),cK=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function zs(t,e,r){if(mT(),t=await t,uK(t))return t instanceof File?t:Pd([await t.arrayBuffer()],t.name);if(cK(t)){let i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Pd(await hT(i),e,r)}let n=await hT(t);if(e||(e=Up(t)),!(r!=null&&r.type)){let i=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(r={...r,type:i})}return Pd(n,e,r)}async function hT(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(wz(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(ev(t))for await(let n of t)e.push(...await hT(n));else{let n=(r=t==null?void 0:t.constructor)==null?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${lK(t)}`)}return e}function lK(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}var q=class{constructor(e){this._client=e}};function Az(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Sz=Object.freeze(Object.create(null)),fK=(t=Az)=>function(r,...n){if(r.length===1)return r[0];let i=!1,o=[],a=r.reduce((l,d,f)=>{var b,y,h;/[?#]/.test(d)&&(i=!0);let m=n[f],p=(i?encodeURIComponent:t)(""+m);return f!==n.length&&(m==null||typeof m=="object"&&m.toString===((h=Object.getPrototypeOf((y=Object.getPrototypeOf((b=m.hasOwnProperty)!=null?b:Sz))!=null?y:Sz))==null?void 0:h.toString))&&(p=m+"",o.push({start:l.length+d.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),l+d+(f===n.length?"":p)},""),s=a.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=c.exec(s))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((l,d)=>l.start-d.start),o.length>0){let l=0,d=o.reduce((f,m)=>{let p=" ".repeat(m.start-l),b="^".repeat(m.length);return l=m.start+m.length,f+p+b},"");throw new ae(`Path parameters result in path with invalid segments:
${o.map(f=>f.error).join(`
`)}
${a}
${d}`)}return a},Z=fK(Az);var oc=class extends q{list(e,r={},n){return this._client.getAPIList(Z`/chat/completions/${e}/messages`,je,{query:r,...n})}};function jp(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Tz(t,e){let r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),r}function Fp(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function ac(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Ez(t,e){return!e||!gT(e)?{...t,choices:t.choices.map(r=>(Iz(r.message.tool_calls),{...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:Bp(t,e)}function Bp(t,e){let r=t.choices.map(n=>{var i,o;if(n.finish_reason==="length")throw new kd;if(n.finish_reason==="content_filter")throw new $d;return Iz(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:(o=(i=n.message.tool_calls)==null?void 0:i.map(a=>gK(e,a)))!=null?o:void 0}:void 0,parsed:n.message.content&&!n.message.refusal?hK(e,n.message.content):null}}});return{...t,choices:r}}function hK(t,e){var r,n;return((r=t.response_format)==null?void 0:r.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function gK(t,e){var n;let r=(n=t.tools)==null?void 0:n.find(i=>{var o;return jp(i)&&((o=i.function)==null?void 0:o.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ac(r)?r.$parseRaw(e.function.arguments):r!=null&&r.function.strict?JSON.parse(e.function.arguments):null}}}function Oz(t,e){var n;if(!t||!("tools"in t)||!t.tools)return!1;let r=(n=t.tools)==null?void 0:n.find(i=>{var o;return jp(i)&&((o=i.function)==null?void 0:o.name)===e.function.name});return jp(r)&&(ac(r)||(r==null?void 0:r.function.strict)||!1)}function gT(t){var e,r;return Fp(t.response_format)?!0:(r=(e=t.tools)==null?void 0:e.some(n=>ac(n)||n.type==="function"&&n.function.strict===!0))!=null?r:!1}function Iz(t){for(let e of t||[])if(e.type!=="function")throw new ae(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Nz(t){for(let e of t!=null?t:[]){if(e.type!=="function")throw new ae(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ae(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Md=t=>(t==null?void 0:t.role)==="assistant",yT=t=>(t==null?void 0:t.role)==="tool";var _T,tv,rv,Zp,Vp,nv,qp,Ea,Gp,iv,ov,zd,Cz,Ds=class{constructor(){_T.add(this),this.controller=new AbortController,tv.set(this,void 0),rv.set(this,()=>{}),Zp.set(this,()=>{}),Vp.set(this,void 0),nv.set(this,()=>{}),qp.set(this,()=>{}),Ea.set(this,{}),Gp.set(this,!1),iv.set(this,!1),ov.set(this,!1),zd.set(this,!1),xe(this,tv,new Promise((e,r)=>{xe(this,rv,e,"f"),xe(this,Zp,r,"f")}),"f"),xe(this,Vp,new Promise((e,r)=>{xe(this,nv,e,"f"),xe(this,qp,r,"f")}),"f"),D(this,tv,"f").catch(()=>{}),D(this,Vp,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},D(this,_T,"m",Cz).bind(this))},0)}_connected(){this.ended||(D(this,rv,"f").call(this),this._emit("connect"))}get ended(){return D(this,Gp,"f")}get errored(){return D(this,iv,"f")}get aborted(){return D(this,ov,"f")}abort(){this.controller.abort()}on(e,r){return(D(this,Ea,"f")[e]||(D(this,Ea,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=D(this,Ea,"f")[e];if(!n)return this;let i=n.findIndex(o=>o.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(D(this,Ea,"f")[e]||(D(this,Ea,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{xe(this,zd,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){xe(this,zd,!0,"f"),await D(this,Vp,"f")}_emit(e,...r){if(D(this,Gp,"f"))return;e==="end"&&(xe(this,Gp,!0,"f"),D(this,nv,"f").call(this));let n=D(this,Ea,"f")[e];if(n&&(D(this,Ea,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){let i=r[0];!D(this,zd,"f")&&!(n!=null&&n.length)&&Promise.reject(i),D(this,Zp,"f").call(this,i),D(this,qp,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=r[0];!D(this,zd,"f")&&!(n!=null&&n.length)&&Promise.reject(i),D(this,Zp,"f").call(this,i),D(this,qp,"f").call(this,i),this._emit("end")}}_emitFinal(){}};tv=new WeakMap,rv=new WeakMap,Zp=new WeakMap,Vp=new WeakMap,nv=new WeakMap,qp=new WeakMap,Ea=new WeakMap,Gp=new WeakMap,iv=new WeakMap,ov=new WeakMap,zd=new WeakMap,_T=new WeakSet,Cz=function(e){if(xe(this,iv,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Yt),e instanceof Yt)return xe(this,ov,!0,"f"),this._emit("abort",e);if(e instanceof ae)return this._emit("error",e);if(e instanceof Error){let r=new ae(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new ae(String(e)))};function kz(t){return typeof t.parse=="function"}var un,vT,av,bT,xT,wT,$z,Rz,yK=10,Dd=class extends Ds{constructor(){super(...arguments),un.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);let r=(n=e.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),yT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Md(e)&&e.tool_calls)for(let n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ae("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),D(this,un,"m",vT).call(this)}async finalMessage(){return await this.done(),D(this,un,"m",av).call(this)}async finalFunctionToolCall(){return await this.done(),D(this,un,"m",bT).call(this)}async finalFunctionToolCallResult(){return await this.done(),D(this,un,"m",xT).call(this)}async totalUsage(){return await this.done(),D(this,un,"m",wT).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let r=D(this,un,"m",av).call(this);r&&this._emit("finalMessage",r);let n=D(this,un,"m",vT).call(this);n&&this._emit("finalContent",n);let i=D(this,un,"m",bT).call(this);i&&this._emit("finalFunctionToolCall",i);let o=D(this,un,"m",xT).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",D(this,un,"m",wT).call(this))}async _createChatCompletion(e,r,n){let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),D(this,un,"m",$z).call(this,r);let o=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Bp(o,r))}async _runChatCompletion(e,r,n){for(let i of r.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,r,n)}async _runTools(e,r,n){var m,p,b;let i="tool",{tool_choice:o="auto",stream:a,...s}=r,c=typeof o!="string"&&o.type==="function"&&((m=o==null?void 0:o.function)==null?void 0:m.name),{maxChatCompletions:u=yK}=n||{},l=r.tools.map(y=>{if(ac(y)){if(!y.$callback)throw new ae("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),d={};for(let y of l)y.type==="function"&&(d[y.function.name||y.function.function.name]=y.function);let f="tools"in r?l.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(let y of r.messages)this._addMessage(y,!1);for(let y=0;y<u;++y){let _=(p=(await this._createChatCompletion(e,{...s,tool_choice:o,tools:f,messages:[...this.messages]},n)).choices[0])==null?void 0:p.message;if(!_)throw new ae("missing message in ChatCompletion response");if(!((b=_.tool_calls)!=null&&b.length))return;for(let v of _.tool_calls){if(v.type!=="function")continue;let x=v.id,{name:w,arguments:E}=v.function,S=d[w];if(S){if(c&&c!==w){let C=`Invalid tool_call: ${JSON.stringify(w)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:C});continue}}else{let C=`Invalid tool_call: ${JSON.stringify(w)}. Available options are: ${Object.keys(d).map(R=>JSON.stringify(R)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:C});continue}let g;try{g=kz(S)?await S.parse(E):E}catch(C){let R=C instanceof Error?C.message:String(C);this._addMessage({role:i,tool_call_id:x,content:R});continue}let I=await S.function(g,this),N=D(this,un,"m",Rz).call(this,I);if(this._addMessage({role:i,tool_call_id:x,content:N}),c)return}}}};un=new WeakSet,vT=function(){var e;return(e=D(this,un,"m",av).call(this).content)!=null?e:null},av=function(){var r,n;let e=this.messages.length;for(;e-- >0;){let i=this.messages[e];if(Md(i))return{...i,content:(r=i.content)!=null?r:null,refusal:(n=i.refusal)!=null?n:null}}throw new ae("stream ended without producing a ChatCompletionMessage with role=assistant")},bT=function(){var e,r;for(let n=this.messages.length-1;n>=0;n--){let i=this.messages[n];if(Md(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(r=i.tool_calls.filter(o=>o.type==="function").at(-1))==null?void 0:r.function}},xT=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if(yT(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>{var i;return n.role==="assistant"&&((i=n.tool_calls)==null?void 0:i.some(o=>o.type==="function"&&o.id===r.tool_call_id))}))return r.content}},wT=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},$z=function(e){if(e.n!=null&&e.n>1)throw new ae("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Rz=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var Hp=class t extends Dd{static runTools(e,r,n){let i=new t,o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,o)),i}_addMessage(e,r=!0){super._addMessage(e,r),Md(e)&&e.content&&this._emit("content",e.content)}};var Cr={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},ST=class extends Error{},AT=class extends Error{};function _K(t,e=Cr.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return vK(t.trim(),e)}var vK=(t,e)=>{let r=t.length,n=0,i=f=>{throw new ST(`${f} at position ${n}`)},o=f=>{throw new AT(`${f} at position ${n}`)},a=()=>(d(),n>=r&&i("Unexpected end of input"),t[n]==='"'?s():t[n]==="{"?c():t[n]==="["?u():t.substring(n,n+4)==="null"||Cr.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Cr.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Cr.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Cr.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Cr.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Cr.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):l()),s=()=>{let f=n,m=!1;for(n++;n<r&&(t[n]!=='"'||m&&t[n-1]==="\\");)m=t[n]==="\\"?!m:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(f,++n-Number(m)))}catch(p){o(String(p))}else if(Cr.STR&e)try{return JSON.parse(t.substring(f,n-Number(m))+'"')}catch(p){return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{n++,d();let f={};try{for(;t[n]!=="}";){if(d(),n>=r&&Cr.OBJ&e)return f;let m=s();d(),n++;try{let p=a();Object.defineProperty(f,m,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Cr.OBJ&e)return f;throw p}d(),t[n]===","&&n++}}catch(m){if(Cr.OBJ&e)return f;i("Expected '}' at end of object")}return n++,f},u=()=>{n++;let f=[];try{for(;t[n]!=="]";)f.push(a()),d(),t[n]===","&&n++}catch(m){if(Cr.ARR&e)return f;i("Expected ']' at end of array")}return n++,f},l=()=>{if(n===0){t==="-"&&Cr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(Cr.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch(p){}o(String(m))}}let f=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Cr.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(f,n))}catch(m){t.substring(f,n)==="-"&&Cr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(p){o(String(p))}}},d=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return a()},TT=t=>_K(t,Cr.ALL^Cr.NUM);var xr,Oa,Ld,Ls,ET,sv,OT,IT,NT,uv,CT,Pz,sc=class t extends Dd{constructor(e){super(),xr.add(this),Oa.set(this,void 0),Ld.set(this,void 0),Ls.set(this,void 0),xe(this,Oa,e,"f"),xe(this,Ld,[],"f")}get currentChatCompletionSnapshot(){return D(this,Ls,"f")}static fromReadableStream(e){let r=new t(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){let i=new t(r);return i._run(()=>i._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,r,n){var a;super._createChatCompletion;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),D(this,xr,"m",ET).call(this);let o=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let s of o)D(this,xr,"m",OT).call(this,s);if((a=o.controller.signal)!=null&&a.aborted)throw new Yt;return this._addChatCompletion(D(this,xr,"m",uv).call(this))}async _fromReadableStream(e,r){var a;let n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),D(this,xr,"m",ET).call(this),this._connected();let i=No.fromReadableStream(e,this.controller),o;for await(let s of i)o&&o!==s.id&&this._addChatCompletion(D(this,xr,"m",uv).call(this)),D(this,xr,"m",OT).call(this,s),o=s.id;if((a=i.controller.signal)!=null&&a.aborted)throw new Yt;return this._addChatCompletion(D(this,xr,"m",uv).call(this))}[(Oa=new WeakMap,Ld=new WeakMap,Ls=new WeakMap,xr=new WeakSet,ET=function(){this.ended||xe(this,Ls,void 0,"f")},sv=function(r){let n=D(this,Ld,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},D(this,Ld,"f")[r.index]=n,n)},OT=function(r){var i,o,a,s,c,u,l,d,f,m,p,b,y,h,_,v,x,w,E,S;if(this.ended)return;let n=D(this,xr,"m",Pz).call(this,r);this._emit("chunk",r,n);for(let g of r.choices){let I=n.choices[g.index];g.delta.content!=null&&((i=I.message)==null?void 0:i.role)==="assistant"&&((o=I.message)!=null&&o.content)&&(this._emit("content",g.delta.content,I.message.content),this._emit("content.delta",{delta:g.delta.content,snapshot:I.message.content,parsed:I.message.parsed})),g.delta.refusal!=null&&((a=I.message)==null?void 0:a.role)==="assistant"&&((s=I.message)!=null&&s.refusal)&&this._emit("refusal.delta",{delta:g.delta.refusal,snapshot:I.message.refusal}),((c=g.logprobs)==null?void 0:c.content)!=null&&((u=I.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(l=g.logprobs)==null?void 0:l.content,snapshot:(f=(d=I.logprobs)==null?void 0:d.content)!=null?f:[]}),((m=g.logprobs)==null?void 0:m.refusal)!=null&&((p=I.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(b=g.logprobs)==null?void 0:b.refusal,snapshot:(h=(y=I.logprobs)==null?void 0:y.refusal)!=null?h:[]});let N=D(this,xr,"m",sv).call(this,I);I.finish_reason&&(D(this,xr,"m",NT).call(this,I),N.current_tool_call_index!=null&&D(this,xr,"m",IT).call(this,I,N.current_tool_call_index));for(let C of(_=g.delta.tool_calls)!=null?_:[])N.current_tool_call_index!==C.index&&(D(this,xr,"m",NT).call(this,I),N.current_tool_call_index!=null&&D(this,xr,"m",IT).call(this,I,N.current_tool_call_index)),N.current_tool_call_index=C.index;for(let C of(v=g.delta.tool_calls)!=null?v:[]){let R=(x=I.message.tool_calls)==null?void 0:x[C.index];R!=null&&R.type&&((R==null?void 0:R.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(w=R.function)==null?void 0:w.name,index:C.index,arguments:R.function.arguments,parsed_arguments:R.function.parsed_arguments,arguments_delta:(S=(E=C.function)==null?void 0:E.arguments)!=null?S:""}):(R==null||R.type,void 0))}}},IT=function(r,n){var a,s,c;if(D(this,xr,"m",sv).call(this,r).done_tool_calls.has(n))return;let o=(a=r.message.tool_calls)==null?void 0:a[n];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){let u=(c=(s=D(this,Oa,"f"))==null?void 0:s.tools)==null?void 0:c.find(l=>jp(l)&&l.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:n,arguments:o.function.arguments,parsed_arguments:ac(u)?u.$parseRaw(o.function.arguments):u!=null&&u.function.strict?JSON.parse(o.function.arguments):null})}else o.type},NT=function(r){var i,o;let n=D(this,xr,"m",sv).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;let a=D(this,xr,"m",CT).call(this);this._emit("content.done",{content:r.message.content,parsed:a?a.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(i=r.logprobs)!=null&&i.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(o=r.logprobs)!=null&&o.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},uv=function(){if(this.ended)throw new ae("stream has ended, this shouldn't happen");let r=D(this,Ls,"f");if(!r)throw new ae("request ended without sending any chunks");return xe(this,Ls,void 0,"f"),xe(this,Ld,[],"f"),bK(r,D(this,Oa,"f"))},CT=function(){var n;let r=(n=D(this,Oa,"f"))==null?void 0:n.response_format;return Fp(r)?r:null},Pz=function(r){var l,d,f,m,p,b;var n,i,o,a;let s=D(this,Ls,"f"),{choices:c,...u}=r;s?Object.assign(s,u):s=xe(this,Ls,{...u,choices:[]},"f");for(let{delta:y,finish_reason:h,index:_,logprobs:v=null,...x}of r.choices){let w=s.choices[_];if(w||(w=s.choices[_]={finish_reason:h,index:_,message:{},logprobs:v,...x}),v)if(!w.logprobs)w.logprobs=Object.assign({},v);else{let{content:R,refusal:z,...j}=v;Object.assign(w.logprobs,j),R&&((l=(n=w.logprobs).content)!=null||(n.content=[]),w.logprobs.content.push(...R)),z&&((d=(i=w.logprobs).refusal)!=null||(i.refusal=[]),w.logprobs.refusal.push(...z))}if(h&&(w.finish_reason=h,D(this,Oa,"f")&&gT(D(this,Oa,"f")))){if(h==="length")throw new kd;if(h==="content_filter")throw new $d}if(Object.assign(w,x),!y)continue;let{content:E,refusal:S,function_call:g,role:I,tool_calls:N,...C}=y;if(Object.assign(w.message,C),S&&(w.message.refusal=(w.message.refusal||"")+S),I&&(w.message.role=I),g&&(w.message.function_call?(g.name&&(w.message.function_call.name=g.name),g.arguments&&((f=(o=w.message.function_call).arguments)!=null||(o.arguments=""),w.message.function_call.arguments+=g.arguments)):w.message.function_call=g),E&&(w.message.content=(w.message.content||"")+E,!w.message.refusal&&D(this,xr,"m",CT).call(this)&&(w.message.parsed=TT(w.message.content))),N){w.message.tool_calls||(w.message.tool_calls=[]);for(let{index:R,id:z,type:j,function:L,...k}of N){let U=(m=(a=w.message.tool_calls)[R])!=null?m:a[R]={};Object.assign(U,k),z&&(U.id=z),j&&(U.type=j),L&&((b=U.function)!=null||(U.function={name:(p=L.name)!=null?p:"",arguments:""})),L!=null&&L.name&&(U.function.name=L.name),L!=null&&L.arguments&&(U.function.arguments+=L.arguments,Oz(D(this,Oa,"f"),U)&&(U.function.parsed_arguments=TT(U.function.arguments)))}}}return s},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("chunk",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new No(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function bK(t,e){let{id:r,choices:n,created:i,model:o,system_fingerprint:a,...s}=t,c={...s,id:r,choices:n.map(({message:u,finish_reason:l,index:d,logprobs:f,...m})=>{var v,x,w;if(!l)throw new ae(`missing finish_reason for choice ${d}`);let{content:p=null,function_call:b,tool_calls:y,...h}=u,_=u.role;if(!_)throw new ae(`missing role for choice ${d}`);if(b){let{arguments:E,name:S}=b;if(E==null)throw new ae(`missing function_call.arguments for choice ${d}`);if(!S)throw new ae(`missing function_call.name for choice ${d}`);return{...m,message:{content:p,function_call:{arguments:E,name:S},role:_,refusal:(v=u.refusal)!=null?v:null},finish_reason:l,index:d,logprobs:f}}return y?{...m,index:d,finish_reason:l,logprobs:f,message:{...h,role:_,content:p,refusal:(x=u.refusal)!=null?x:null,tool_calls:y.map((E,S)=>{let{function:g,type:I,id:N,...C}=E,{arguments:R,name:z,...j}=g||{};if(N==null)throw new ae(`missing choices[${d}].tool_calls[${S}].id
${cv(t)}`);if(I==null)throw new ae(`missing choices[${d}].tool_calls[${S}].type
${cv(t)}`);if(z==null)throw new ae(`missing choices[${d}].tool_calls[${S}].function.name
${cv(t)}`);if(R==null)throw new ae(`missing choices[${d}].tool_calls[${S}].function.arguments
${cv(t)}`);return{...C,id:N,type:I,function:{...j,name:z,arguments:R}}})}}:{...m,message:{...h,content:p,role:_,refusal:(w=u.refusal)!=null?w:null},finish_reason:l,index:d,logprobs:f}}),created:i,model:o,object:"chat.completion",...a?{system_fingerprint:a}:{}};return Ez(c,e)}function cv(t){return JSON.stringify(t)}var Kp=class t extends sc{static fromReadableStream(e){let r=new t(null);return r._run(()=>r._fromReadableStream(e)),r}static runTools(e,r,n){let i=new t(r),o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,o)),i}};var Ia=class extends q{constructor(){super(...arguments),this.messages=new oc(this._client)}create(e,r){var n;return this._client.post("/chat/completions",{body:e,...r,stream:(n=e.stream)!=null?n:!1})}retrieve(e,r){return this._client.get(Z`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(Z`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/chat/completions",je,{query:e,...r})}delete(e,r){return this._client.delete(Z`/chat/completions/${e}`,r)}parse(e,r){return Nz(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>Bp(n,e))}runTools(e,r){return e.stream?Kp.runTools(this._client,e,r):Hp.runTools(this._client,e,r)}stream(e,r){return sc.createChatCompletion(this._client,e,r)}};Ia.Messages=oc;var Us=class extends q{constructor(){super(...arguments),this.completions=new Ia(this._client)}};Us.Completions=Ia;var Mz=Symbol("brand.privateNullableHeaders");function*wK(t){if(!t)return;if(Mz in t){let{values:n,nulls:i}=t;yield*n.entries();for(let o of i)yield[o,null];return}let e=!1,r;t instanceof Headers?r=t.entries():YA(t)?r=t:(e=!0,r=Object.entries(t!=null?t:{}));for(let n of r){let i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let o=YA(n[1])?n[1]:[n[1]],a=!1;for(let s of o)s!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,s])}}var ee=t=>{let e=new Headers,r=new Set;for(let n of t){let i=new Set;for(let[o,a]of wK(n)){let s=o.toLowerCase();i.has(s)||(e.delete(o),i.add(s)),a===null?(e.delete(o),r.add(s)):(e.append(o,a),r.delete(s))}}return{[Mz]:!0,values:e,nulls:r}};var Ud=class extends q{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:ee([{Accept:"application/octet-stream"},r==null?void 0:r.headers]),__binaryResponse:!0})}};var jd=class extends q{create(e,r){var n;return this._client.post("/audio/transcriptions",ii({body:e,...r,stream:(n=e.stream)!=null?n:!1,__metadata:{model:e.model}},this._client))}};var Fd=class extends q{create(e,r){return this._client.post("/audio/translations",ii({body:e,...r,__metadata:{model:e.model}},this._client))}};var ko=class extends q{constructor(){super(...arguments),this.transcriptions=new jd(this._client),this.translations=new Fd(this._client),this.speech=new Ud(this._client)}};ko.Transcriptions=jd;ko.Translations=Fd;ko.Speech=Ud;var uc=class extends q{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(Z`/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/batches",je,{query:e,...r})}cancel(e,r){return this._client.post(Z`/batches/${e}/cancel`,r)}};var Bd=class extends q{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,r){return this._client.get(Z`/assistants/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,r,n){return this._client.post(Z`/assistants/${e}`,{body:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e={},r){return this._client.getAPIList("/assistants",je,{query:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,r){return this._client.delete(Z`/assistants/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var Zd=class extends q{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var Vd=class extends q{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var js=class extends q{constructor(){super(...arguments),this.sessions=new Zd(this._client),this.transcriptionSessions=new Vd(this._client)}};js.Sessions=Zd;js.TranscriptionSessions=Vd;var qd=class extends q{create(e,r){return this._client.post("/chatkit/sessions",{body:e,...r,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}cancel(e,r){return this._client.post(Z`/chatkit/sessions/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};var Gd=class extends q{retrieve(e,r){return this._client.get(Z`/chatkit/threads/${e}`,{...r,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}list(e={},r){return this._client.getAPIList("/chatkit/threads",Ta,{query:e,...r,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}delete(e,r){return this._client.delete(Z`/chatkit/threads/${e}`,{...r,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}listItems(e,r={},n){return this._client.getAPIList(Z`/chatkit/threads/${e}/items`,Ta,{query:r,...n,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}};var Fs=class extends q{constructor(){super(...arguments),this.sessions=new qd(this._client),this.threads=new Gd(this._client)}};Fs.Sessions=qd;Fs.Threads=Gd;var Hd=class extends q{create(e,r,n){return this._client.post(Z`/threads/${e}/messages`,{body:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,r,n){let{thread_id:i}=r;return this._client.get(Z`/threads/${i}/messages/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,r,n){let{thread_id:i,...o}=r;return this._client.post(Z`/threads/${i}/messages/${e}`,{body:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r={},n){return this._client.getAPIList(Z`/threads/${e}/messages`,je,{query:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,r,n){let{thread_id:i}=r;return this._client.delete(Z`/threads/${i}/messages/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};var Kd=class extends q{retrieve(e,r,n){let{thread_id:i,run_id:o,...a}=r;return this._client.get(Z`/threads/${i}/runs/${o}/steps/${e}`,{query:a,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r,n){let{thread_id:i,...o}=r;return this._client.getAPIList(Z`/threads/${i}/runs/${e}/steps`,je,{query:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};var zz=t=>{if(typeof Buffer!="undefined"){let e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(t),r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return Array.from(new Float32Array(n.buffer))}};var Bs=t=>{var e,r,n,i,o,a;if(typeof globalThis.process!="undefined")return(n=(r=(e=globalThis.process.env)==null?void 0:e[t])==null?void 0:r.trim())!=null?n:void 0;if(typeof globalThis.Deno!="undefined")return(a=(o=(i=globalThis.Deno.env)==null?void 0:i.get)==null?void 0:o.call(i,t))==null?void 0:a.trim()};var Lr,lc,kT,$o,lv,Yi,dc,Jd,cc,mv,oi,dv,fv,Yp,Jp,Wp,Dz,Lz,Uz,jz,Fz,Bz,Zz,Na=class extends Ds{constructor(){super(...arguments),Lr.add(this),kT.set(this,[]),$o.set(this,{}),lv.set(this,{}),Yi.set(this,void 0),dc.set(this,void 0),Jd.set(this,void 0),cc.set(this,void 0),mv.set(this,void 0),oi.set(this,void 0),dv.set(this,void 0),fv.set(this,void 0),Yp.set(this,void 0)}[(kT=new WeakMap,$o=new WeakMap,lv=new WeakMap,Yi=new WeakMap,dc=new WeakMap,Jd=new WeakMap,cc=new WeakMap,mv=new WeakMap,oi=new WeakMap,dv=new WeakMap,fv=new WeakMap,Yp=new WeakMap,Lr=new WeakSet,Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("event",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let r=new lc;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){var o;let n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=No.fromReadableStream(e,this.controller);for await(let a of i)D(this,Lr,"m",Jp).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new Yt;return this._addRun(D(this,Lr,"m",Wp).call(this))}toReadableStream(){return new No(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,i){let o=new lc;return o._run(()=>o._runToolAssistantStream(e,r,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,r,n,i){var c;let o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let a={...n,stream:!0},s=await e.submitToolOutputs(r,a,{...i,signal:this.controller.signal});this._connected();for await(let u of s)D(this,Lr,"m",Jp).call(this,u);if((c=s.controller.signal)!=null&&c.aborted)throw new Yt;return this._addRun(D(this,Lr,"m",Wp).call(this))}static createThreadAssistantStream(e,r,n){let i=new lc;return i._run(()=>i._threadAssistantStream(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,r,n,i){let o=new lc;return o._run(()=>o._runAssistantStream(e,r,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return D(this,dv,"f")}currentRun(){return D(this,fv,"f")}currentMessageSnapshot(){return D(this,Yi,"f")}currentRunStepSnapshot(){return D(this,Yp,"f")}async finalRunSteps(){return await this.done(),Object.values(D(this,$o,"f"))}async finalMessages(){return await this.done(),Object.values(D(this,lv,"f"))}async finalRun(){if(await this.done(),!D(this,dc,"f"))throw Error("Final run was not received.");return D(this,dc,"f")}async _createThreadAssistantStream(e,r,n){var s;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o={...r,stream:!0},a=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(let c of a)D(this,Lr,"m",Jp).call(this,c);if((s=a.controller.signal)!=null&&s.aborted)throw new Yt;return this._addRun(D(this,Lr,"m",Wp).call(this))}async _createAssistantStream(e,r,n,i){var c;let o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let a={...n,stream:!0},s=await e.create(r,a,{...i,signal:this.controller.signal});this._connected();for await(let u of s)D(this,Lr,"m",Jp).call(this,u);if((c=s.controller.signal)!=null&&c.aborted)throw new Yt;return this._addRun(D(this,Lr,"m",Wp).call(this))}static accumulateDelta(e,r){for(let[n,i]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=i;continue}let o=e[n];if(o==null){e[n]=i;continue}if(n==="index"||n==="type"){e[n]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(Rp(o)&&Rp(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(a=>typeof a=="string"||typeof a=="number")){o.push(...i);continue}for(let a of i){if(!Rp(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);let s=a.index;if(s==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof s!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${s}`);let c=o[s];c==null?o.push(a):o[s]=this.accumulateDelta(c,a)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${o}`);e[n]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,i){return await this._createAssistantStream(r,e,n,i)}async _runToolAssistantStream(e,r,n,i){return await this._createToolAssistantStream(r,e,n,i)}};lc=Na,Jp=function(e){if(!this.ended)switch(xe(this,dv,e,"f"),D(this,Lr,"m",Uz).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":D(this,Lr,"m",Zz).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":D(this,Lr,"m",Lz).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":D(this,Lr,"m",Dz).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},Wp=function(){if(this.ended)throw new ae("stream has ended, this shouldn't happen");if(!D(this,dc,"f"))throw Error("Final run has not been received");return D(this,dc,"f")},Dz=function(e){let[r,n]=D(this,Lr,"m",Fz).call(this,e,D(this,Yi,"f"));xe(this,Yi,r,"f"),D(this,lv,"f")[r.id]=r;for(let i of n){let o=r.content[i.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(let i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,a=r.content[i.index];if(a&&a.type=="text")this._emit("textDelta",o,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=D(this,Jd,"f")){if(D(this,cc,"f"))switch(D(this,cc,"f").type){case"text":this._emit("textDone",D(this,cc,"f").text,D(this,Yi,"f"));break;case"image_file":this._emit("imageFileDone",D(this,cc,"f").image_file,D(this,Yi,"f"));break}xe(this,Jd,i.index,"f")}xe(this,cc,r.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(D(this,Jd,"f")!==void 0){let i=e.data.content[D(this,Jd,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,D(this,Yi,"f"));break;case"text":this._emit("textDone",i.text,D(this,Yi,"f"));break}}D(this,Yi,"f")&&this._emit("messageDone",e.data),xe(this,Yi,void 0,"f")}},Lz=function(e){let r=D(this,Lr,"m",jz).call(this,e);switch(xe(this,Yp,r,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(let o of n.step_details.tool_calls)o.index==D(this,mv,"f")?this._emit("toolCallDelta",o,r.step_details.tool_calls[o.index]):(D(this,oi,"f")&&this._emit("toolCallDone",D(this,oi,"f")),xe(this,mv,o.index,"f"),xe(this,oi,r.step_details.tool_calls[o.index],"f"),D(this,oi,"f")&&this._emit("toolCallCreated",D(this,oi,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":xe(this,Yp,void 0,"f"),e.data.step_details.type=="tool_calls"&&D(this,oi,"f")&&(this._emit("toolCallDone",D(this,oi,"f")),xe(this,oi,void 0,"f")),this._emit("runStepDone",e.data,r);break;case"thread.run.step.in_progress":break}},Uz=function(e){D(this,kT,"f").push(e),this._emit("event",e)},jz=function(e){switch(e.event){case"thread.run.step.created":return D(this,$o,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=D(this,$o,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let i=lc.accumulateDelta(r,n.delta);D(this,$o,"f")[e.data.id]=i}return D(this,$o,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":D(this,$o,"f")[e.data.id]=e.data;break}if(D(this,$o,"f")[e.data.id])return D(this,$o,"f")[e.data.id];throw new Error("No snapshot available")},Fz=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(let o of i.delta.content)if(o.index in r.content){let a=r.content[o.index];r.content[o.index]=D(this,Lr,"m",Bz).call(this,o,a)}else r.content[o.index]=o,n.push(o);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Bz=function(e,r){return lc.accumulateDelta(r,e)},Zz=function(e){switch(xe(this,fv,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":xe(this,dc,e.data,"f"),D(this,oi,"f")&&(this._emit("toolCallDone",D(this,oi,"f")),xe(this,oi,void 0,"f"));break;case"thread.run.cancelling":break}};var fc=class extends q{constructor(){super(...arguments),this.steps=new Kd(this._client)}create(e,r,n){var a;let{include:i,...o}=r;return this._client.post(Z`/threads/${e}/runs`,{query:{include:i},body:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:(a=r.stream)!=null?a:!1})}retrieve(e,r,n){let{thread_id:i}=r;return this._client.get(Z`/threads/${i}/runs/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,r,n){let{thread_id:i,...o}=r;return this._client.post(Z`/threads/${i}/runs/${e}`,{body:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r={},n){return this._client.getAPIList(Z`/threads/${e}/runs`,je,{query:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(e,r,n){let{thread_id:i}=r;return this._client.post(Z`/threads/${i}/runs/${e}/cancel`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,r,n){let i=await this.create(e,r,n);return await this.poll(i.id,{thread_id:e},n)}createAndStream(e,r,n){return Na.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){var o,a;let i=ee([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(a=(o=n==null?void 0:n.pollIntervalMs)==null?void 0:o.toString())!=null?a:void 0}]);for(;;){let{data:s,response:c}=await this.retrieve(e,r,{...n,headers:{...n==null?void 0:n.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(n!=null&&n.pollIntervalMs)u=n.pollIntervalMs;else{let l=c.headers.get("openai-poll-after-ms");if(l){let d=parseInt(l);isNaN(d)||(u=d)}}await Oo(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,r,n){return Na.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n){var a;let{thread_id:i,...o}=r;return this._client.post(Z`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:(a=r.stream)!=null?a:!1})}async submitToolOutputsAndPoll(e,r,n){let i=await this.submitToolOutputs(e,r,n);return await this.poll(i.id,r,n)}submitToolOutputsStream(e,r,n){return Na.createToolAssistantStream(e,this._client.beta.threads.runs,r,n)}};fc.Steps=Kd;var Zs=class extends q{constructor(){super(...arguments),this.runs=new fc(this._client),this.messages=new Hd(this._client)}create(e={},r){return this._client.post("/threads",{body:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,r){return this._client.get(Z`/threads/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,r,n){return this._client.post(Z`/threads/${e}`,{body:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,r){return this._client.delete(Z`/threads/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}createAndRun(e,r){var n;return this._client.post("/threads/runs",{body:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(n=e.stream)!=null?n:!1})}async createAndRunPoll(e,r){let n=await this.createAndRun(e,r);return await this.runs.poll(n.id,{thread_id:n.thread_id},r)}createAndRunStream(e,r){return Na.createThreadAssistantStream(e,this._client.beta.threads,r)}};Zs.Runs=fc;Zs.Messages=Hd;var Xi=class extends q{constructor(){super(...arguments),this.realtime=new js(this._client),this.chatkit=new Fs(this._client),this.assistants=new Bd(this._client),this.threads=new Zs(this._client)}};Xi.Realtime=js;Xi.ChatKit=Fs;Xi.Assistants=Bd;Xi.Threads=Zs;var mc=class extends q{create(e,r){var n;return this._client.post("/completions",{body:e,...r,stream:(n=e.stream)!=null?n:!1})}};var Wd=class extends q{retrieve(e,r,n){let{container_id:i}=r;return this._client.get(Z`/containers/${i}/files/${e}/content`,{...n,headers:ee([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}};var pc=class extends q{constructor(){super(...arguments),this.content=new Wd(this._client)}create(e,r,n){return this._client.post(Z`/containers/${e}/files`,ii({body:r,...n},this._client))}retrieve(e,r,n){let{container_id:i}=r;return this._client.get(Z`/containers/${i}/files/${e}`,n)}list(e,r={},n){return this._client.getAPIList(Z`/containers/${e}/files`,je,{query:r,...n})}delete(e,r,n){let{container_id:i}=r;return this._client.delete(Z`/containers/${i}/files/${e}`,{...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}};pc.Content=Wd;var Vs=class extends q{constructor(){super(...arguments),this.files=new pc(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(Z`/containers/${e}`,r)}list(e={},r){return this._client.getAPIList("/containers",je,{query:e,...r})}delete(e,r){return this._client.delete(Z`/containers/${e}`,{...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}};Vs.Files=pc;var Yd=class extends q{create(e,r,n){let{include:i,...o}=r;return this._client.post(Z`/conversations/${e}/items`,{query:{include:i},body:o,...n})}retrieve(e,r,n){let{conversation_id:i,...o}=r;return this._client.get(Z`/conversations/${i}/items/${e}`,{query:o,...n})}list(e,r={},n){return this._client.getAPIList(Z`/conversations/${e}/items`,Ta,{query:r,...n})}delete(e,r,n){let{conversation_id:i}=r;return this._client.delete(Z`/conversations/${i}/items/${e}`,n)}};var qs=class extends q{constructor(){super(...arguments),this.items=new Yd(this._client)}create(e={},r){return this._client.post("/conversations",{body:e,...r})}retrieve(e,r){return this._client.get(Z`/conversations/${e}`,r)}update(e,r,n){return this._client.post(Z`/conversations/${e}`,{body:r,...n})}delete(e,r){return this._client.delete(Z`/conversations/${e}`,r)}};qs.Items=Yd;var hc=class extends q{create(e,r){let n=!!e.encoding_format,i=n?e.encoding_format:"base64";n&&or(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...r});return n?o:(or(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(a=>(a&&a.data&&a.data.forEach(s=>{let c=s.embedding;s.embedding=zz(c)}),a)))}};var Xd=class extends q{retrieve(e,r,n){let{eval_id:i,run_id:o}=r;return this._client.get(Z`/evals/${i}/runs/${o}/output_items/${e}`,n)}list(e,r,n){let{eval_id:i,...o}=r;return this._client.getAPIList(Z`/evals/${i}/runs/${e}/output_items`,je,{query:o,...n})}};var gc=class extends q{constructor(){super(...arguments),this.outputItems=new Xd(this._client)}create(e,r,n){return this._client.post(Z`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){let{eval_id:i}=r;return this._client.get(Z`/evals/${i}/runs/${e}`,n)}list(e,r={},n){return this._client.getAPIList(Z`/evals/${e}/runs`,je,{query:r,...n})}delete(e,r,n){let{eval_id:i}=r;return this._client.delete(Z`/evals/${i}/runs/${e}`,n)}cancel(e,r,n){let{eval_id:i}=r;return this._client.post(Z`/evals/${i}/runs/${e}`,n)}};gc.OutputItems=Xd;var Gs=class extends q{constructor(){super(...arguments),this.runs=new gc(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(Z`/evals/${e}`,r)}update(e,r,n){return this._client.post(Z`/evals/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/evals",je,{query:e,...r})}delete(e,r){return this._client.delete(Z`/evals/${e}`,r)}};Gs.Runs=gc;var yc=class extends q{create(e,r){return this._client.post("/files",ii({body:e,...r},this._client))}retrieve(e,r){return this._client.get(Z`/files/${e}`,r)}list(e={},r){return this._client.getAPIList("/files",je,{query:e,...r})}delete(e,r){return this._client.delete(Z`/files/${e}`,r)}content(e,r){return this._client.get(Z`/files/${e}/content`,{...r,headers:ee([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=1800*1e3}={}){let i=new Set(["processed","error","deleted"]),o=Date.now(),a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await Oo(r),a=await this.retrieve(e),Date.now()-o>n)throw new To({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}};var Qd=class extends q{};var ef=class extends q{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};var _c=class extends q{constructor(){super(...arguments),this.graders=new ef(this._client)}};_c.Graders=ef;var tf=class extends q{create(e,r,n){return this._client.getAPIList(Z`/fine_tuning/checkpoints/${e}/permissions`,Co,{body:r,method:"post",...n})}retrieve(e,r={},n){return this._client.get(Z`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}delete(e,r,n){let{fine_tuned_model_checkpoint:i}=r;return this._client.delete(Z`/fine_tuning/checkpoints/${i}/permissions/${e}`,n)}};var vc=class extends q{constructor(){super(...arguments),this.permissions=new tf(this._client)}};vc.Permissions=tf;var rf=class extends q{list(e,r={},n){return this._client.getAPIList(Z`/fine_tuning/jobs/${e}/checkpoints`,je,{query:r,...n})}};var bc=class extends q{constructor(){super(...arguments),this.checkpoints=new rf(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(Z`/fine_tuning/jobs/${e}`,r)}list(e={},r){return this._client.getAPIList("/fine_tuning/jobs",je,{query:e,...r})}cancel(e,r){return this._client.post(Z`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return this._client.getAPIList(Z`/fine_tuning/jobs/${e}/events`,je,{query:r,...n})}pause(e,r){return this._client.post(Z`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(Z`/fine_tuning/jobs/${e}/resume`,r)}};bc.Checkpoints=rf;var Qi=class extends q{constructor(){super(...arguments),this.methods=new Qd(this._client),this.jobs=new bc(this._client),this.checkpoints=new vc(this._client),this.alpha=new _c(this._client)}};Qi.Methods=Qd;Qi.Jobs=bc;Qi.Checkpoints=vc;Qi.Alpha=_c;var nf=class extends q{};var Hs=class extends q{constructor(){super(...arguments),this.graderModels=new nf(this._client)}};Hs.GraderModels=nf;var xc=class extends q{createVariation(e,r){return this._client.post("/images/variations",ii({body:e,...r},this._client))}edit(e,r){var n;return this._client.post("/images/edits",ii({body:e,...r,stream:(n=e.stream)!=null?n:!1},this._client))}generate(e,r){var n;return this._client.post("/images/generations",{body:e,...r,stream:(n=e.stream)!=null?n:!1})}};var wc=class extends q{retrieve(e,r){return this._client.get(Z`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",Co,e)}delete(e,r){return this._client.delete(Z`/models/${e}`,r)}};var Sc=class extends q{create(e,r){return this._client.post("/moderations",{body:e,...r})}};var of=class extends q{accept(e,r,n){return this._client.post(Z`/realtime/calls/${e}/accept`,{body:r,...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}hangup(e,r){return this._client.post(Z`/realtime/calls/${e}/hangup`,{...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}refer(e,r,n){return this._client.post(Z`/realtime/calls/${e}/refer`,{body:r,...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}reject(e,r={},n){return this._client.post(Z`/realtime/calls/${e}/reject`,{body:r,...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}};var af=class extends q{create(e,r){return this._client.post("/realtime/client_secrets",{body:e,...r})}};var Ca=class extends q{constructor(){super(...arguments),this.clientSecrets=new af(this._client),this.calls=new of(this._client)}};Ca.ClientSecrets=af;Ca.Calls=of;function Vz(t,e){return!e||!QK(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:$T(t,e)}function $T(t,e){let r=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:rJ(e,i)};if(i.type==="message"){let o=i.content.map(a=>a.type==="output_text"?{...a,parsed:XK(e,a.text)}:a);return{...i,content:o}}return i}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||pv(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(let i of n.output)if(i.type==="message"){for(let o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),n}function XK(t,e){var r,n,i,o;return((n=(r=t.text)==null?void 0:r.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((o=t.text)==null?void 0:o.format).$parseRaw(e):JSON.parse(e)}function QK(t){var e;return!!Fp((e=t.text)==null?void 0:e.format)}function eJ(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function tJ(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function rJ(t,e){var n;let r=tJ((n=t.tools)!=null?n:[],e.name);return{...e,...e,parsed_arguments:eJ(r)?r.$parseRaw(e.arguments):r!=null&&r.strict?JSON.parse(e.arguments):null}}function pv(t){let e=[];for(let r of t.output)if(r.type==="message")for(let n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}var sf,hv,Ks,gv,qz,Gz,Hz,Kz,yv=class t extends Ds{constructor(e){super(),sf.add(this),hv.set(this,void 0),Ks.set(this,void 0),gv.set(this,void 0),xe(this,hv,e,"f")}static createResponse(e,r,n){let i=new t(r);return i._run(()=>i._createOrRetrieveResponse(e,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,r,n){var s,c;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),D(this,sf,"m",qz).call(this);let o,a=null;"response_id"in r?(o=await e.responses.retrieve(r.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=(s=r.starting_after)!=null?s:null):o=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(let u of o)D(this,sf,"m",Gz).call(this,u,a);if((c=o.controller.signal)!=null&&c.aborted)throw new Yt;return D(this,sf,"m",Hz).call(this)}[(hv=new WeakMap,Ks=new WeakMap,gv=new WeakMap,sf=new WeakSet,qz=function(){this.ended||xe(this,Ks,void 0,"f")},Gz=function(r,n){if(this.ended)return;let i=(a,s)=>{(n==null||s.sequence_number>n)&&this._emit(a,s)},o=D(this,sf,"m",Kz).call(this,r);switch(i("event",r),r.type){case"response.output_text.delta":{let a=o.output[r.output_index];if(!a)throw new ae(`missing output at index ${r.output_index}`);if(a.type==="message"){let s=a.content[r.content_index];if(!s)throw new ae(`missing content at index ${r.content_index}`);if(s.type!=="output_text")throw new ae(`expected content to be 'output_text', got ${s.type}`);i("response.output_text.delta",{...r,snapshot:s.text})}break}case"response.function_call_arguments.delta":{let a=o.output[r.output_index];if(!a)throw new ae(`missing output at index ${r.output_index}`);a.type==="function_call"&&i("response.function_call_arguments.delta",{...r,snapshot:a.arguments});break}default:i(r.type,r);break}},Hz=function(){if(this.ended)throw new ae("stream has ended, this shouldn't happen");let r=D(this,Ks,"f");if(!r)throw new ae("request ended without sending any events");xe(this,Ks,void 0,"f");let n=nJ(r,D(this,hv,"f"));return xe(this,gv,n,"f"),n},Kz=function(r){var i;let n=D(this,Ks,"f");if(!n){if(r.type!=="response.created")throw new ae(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=xe(this,Ks,r.response,"f"),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{let o=n.output[r.output_index];if(!o)throw new ae(`missing output at index ${r.output_index}`);let a=o.type,s=r.part;a==="message"&&s.type!=="reasoning_text"?o.content.push(s):a==="reasoning"&&s.type==="reasoning_text"&&(o.content||(o.content=[]),o.content.push(s));break}case"response.output_text.delta":{let o=n.output[r.output_index];if(!o)throw new ae(`missing output at index ${r.output_index}`);if(o.type==="message"){let a=o.content[r.content_index];if(!a)throw new ae(`missing content at index ${r.content_index}`);if(a.type!=="output_text")throw new ae(`expected content to be 'output_text', got ${a.type}`);a.text+=r.delta}break}case"response.function_call_arguments.delta":{let o=n.output[r.output_index];if(!o)throw new ae(`missing output at index ${r.output_index}`);o.type==="function_call"&&(o.arguments+=r.delta);break}case"response.reasoning_text.delta":{let o=n.output[r.output_index];if(!o)throw new ae(`missing output at index ${r.output_index}`);if(o.type==="reasoning"){let a=(i=o.content)==null?void 0:i[r.content_index];if(!a)throw new ae(`missing content at index ${r.content_index}`);if(a.type!=="reasoning_text")throw new ae(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=r.delta}break}case"response.completed":{xe(this,Ks,r.response,"f");break}}return n},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("event",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=D(this,gv,"f");if(!e)throw new ae("stream ended without producing a ChatCompletion");return e}};function nJ(t,e){return Vz(t,e)}var uf=class extends q{list(e,r={},n){return this._client.getAPIList(Z`/responses/${e}/input_items`,je,{query:r,...n})}};var cf=class extends q{count(e={},r){return this._client.post("/responses/input_tokens",{body:e,...r})}};var ka=class extends q{constructor(){super(...arguments),this.inputItems=new uf(this._client),this.inputTokens=new cf(this._client)}create(e,r){var n;return this._client.post("/responses",{body:e,...r,stream:(n=e.stream)!=null?n:!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&pv(i),i))}retrieve(e,r={},n){var i;return this._client.get(Z`/responses/${e}`,{query:r,...n,stream:(i=r==null?void 0:r.stream)!=null?i:!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&pv(o),o))}delete(e,r){return this._client.delete(Z`/responses/${e}`,{...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>$T(n,e))}stream(e,r){return yv.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(Z`/responses/${e}/cancel`,r)}compact(e={},r){return this._client.post("/responses/compact",{body:e,...r})}};ka.InputItems=uf;ka.InputTokens=cf;var lf=class extends q{create(e,r,n){return this._client.post(Z`/uploads/${e}/parts`,ii({body:r,...n},this._client))}};var Js=class extends q{constructor(){super(...arguments),this.parts=new lf(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(Z`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(Z`/uploads/${e}/complete`,{body:r,...n})}};Js.Parts=lf;var Jz=async t=>{let e=await Promise.allSettled(t),r=e.filter(i=>i.status==="rejected");if(r.length){for(let i of r)console.error(i.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}let n=[];for(let i of e)i.status==="fulfilled"&&n.push(i.value);return n};var df=class extends q{create(e,r,n){return this._client.post(Z`/vector_stores/${e}/file_batches`,{body:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,r,n){let{vector_store_id:i}=r;return this._client.get(Z`/vector_stores/${i}/file_batches/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(e,r,n){let{vector_store_id:i}=r;return this._client.post(Z`/vector_stores/${i}/file_batches/${e}/cancel`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,r,n){let i=await this.create(e,r);return await this.poll(e,i.id,n)}listFiles(e,r,n){let{vector_store_id:i,...o}=r;return this._client.getAPIList(Z`/vector_stores/${i}/file_batches/${e}/files`,je,{query:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async poll(e,r,n){var o,a;let i=ee([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(a=(o=n==null?void 0:n.pollIntervalMs)==null?void 0:o.toString())!=null?a:void 0}]);for(;;){let{data:s,response:c}=await this.retrieve(r,{vector_store_id:e},{...n,headers:i}).withResponse();switch(s.status){case"in_progress":let u=5e3;if(n!=null&&n.pollIntervalMs)u=n.pollIntervalMs;else{let l=c.headers.get("openai-poll-after-ms");if(l){let d=parseInt(l);isNaN(d)||(u=d)}}await Oo(u);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},i){var f;if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let o=(f=i==null?void 0:i.maxConcurrency)!=null?f:5,a=Math.min(o,r.length),s=this._client,c=r.values(),u=[...n];async function l(m){for(let p of m){let b=await s.files.create({file:p,purpose:"assistants"},i);u.push(b.id)}}let d=Array(a).fill(c).map(l);return await Jz(d),await this.createAndPoll(e,{file_ids:u})}};var ff=class extends q{create(e,r,n){return this._client.post(Z`/vector_stores/${e}/files`,{body:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,r,n){let{vector_store_id:i}=r;return this._client.get(Z`/vector_stores/${i}/files/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,r,n){let{vector_store_id:i,...o}=r;return this._client.post(Z`/vector_stores/${i}/files/${e}`,{body:o,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e,r={},n){return this._client.getAPIList(Z`/vector_stores/${e}/files`,je,{query:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,r,n){let{vector_store_id:i}=r;return this._client.delete(Z`/vector_stores/${i}/files/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(e,r,n){let i=await this.create(e,r,n);return await this.poll(e,i.id,n)}async poll(e,r,n){var o,a;let i=ee([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(a=(o=n==null?void 0:n.pollIntervalMs)==null?void 0:o.toString())!=null?a:void 0}]);for(;;){let s=await this.retrieve(r,{vector_store_id:e},{...n,headers:i}).withResponse(),c=s.data;switch(c.status){case"in_progress":let u=5e3;if(n!=null&&n.pollIntervalMs)u=n.pollIntervalMs;else{let l=s.response.headers.get("openai-poll-after-ms");if(l){let d=parseInt(l);isNaN(d)||(u=d)}}await Oo(u);break;case"failed":case"completed":return c}}}async upload(e,r,n){let i=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:i.id},n)}async uploadAndPoll(e,r,n){let i=await this.upload(e,r,n);return await this.poll(e,i.id,n)}content(e,r,n){let{vector_store_id:i}=r;return this._client.getAPIList(Z`/vector_stores/${i}/files/${e}/content`,Co,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};var $a=class extends q{constructor(){super(...arguments),this.files=new ff(this._client),this.fileBatches=new df(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,r){return this._client.get(Z`/vector_stores/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,r,n){return this._client.post(Z`/vector_stores/${e}`,{body:r,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(e={},r){return this._client.getAPIList("/vector_stores",je,{query:e,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,r){return this._client.delete(Z`/vector_stores/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}search(e,r,n){return this._client.getAPIList(Z`/vector_stores/${e}/search`,Co,{body:r,method:"post",...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};$a.Files=ff;$a.FileBatches=df;var Ac=class extends q{create(e,r){return this._client.post("/videos",pT({body:e,...r},this._client))}retrieve(e,r){return this._client.get(Z`/videos/${e}`,r)}list(e={},r){return this._client.getAPIList("/videos",Ta,{query:e,...r})}delete(e,r){return this._client.delete(Z`/videos/${e}`,r)}downloadContent(e,r={},n){return this._client.get(Z`/videos/${e}/content`,{query:r,...n,headers:ee([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}remix(e,r,n){return this._client.post(Z`/videos/${e}/remix`,pT({body:r,...n},this._client))}};var mf,Wz,_v,Tc=class extends q{constructor(){super(...arguments),mf.add(this)}async unwrap(e,r,n=this._client.webhookSecret,i=300){return await this.verifySignature(e,r,n,i),JSON.parse(e)}async verifySignature(e,r,n=this._client.webhookSecret,i=300){if(typeof crypto=="undefined"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");D(this,mf,"m",Wz).call(this,n);let o=ee([r]).values,a=D(this,mf,"m",_v).call(this,o,"webhook-signature"),s=D(this,mf,"m",_v).call(this,o,"webhook-timestamp"),c=D(this,mf,"m",_v).call(this,o,"webhook-id"),u=parseInt(s,10);if(isNaN(u))throw new Eo("Invalid webhook timestamp format");let l=Math.floor(Date.now()/1e3);if(l-u>i)throw new Eo("Webhook timestamp is too old");if(u>l+i)throw new Eo("Webhook timestamp is too new");let d=a.split(" ").map(b=>b.startsWith("v1,")?b.substring(3):b),f=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),m=c?`${c}.${s}.${e}`:`${s}.${e}`,p=await crypto.subtle.importKey("raw",f,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let b of d)try{let y=Buffer.from(b,"base64");if(await crypto.subtle.verify("HMAC",p,y,new TextEncoder().encode(m)))return}catch(y){continue}throw new Eo("The given webhook signature does not match the expected signature")}};mf=new WeakSet,Wz=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},_v=function(e,r){if(!e)throw new Error("Headers are required");let n=e.get(r);if(n==null)throw new Error(`Missing required header: ${r}`);return n};var RT,PT,vv,Yz,Te=class{constructor({baseURL:e=Bs("OPENAI_BASE_URL"),apiKey:r=Bs("OPENAI_API_KEY"),organization:n=(s=>(s=Bs("OPENAI_ORG_ID"))!=null?s:null)(),project:i=(c=>(c=Bs("OPENAI_PROJECT_ID"))!=null?c:null)(),webhookSecret:o=(u=>(u=Bs("OPENAI_WEBHOOK_SECRET"))!=null?u:null)(),...a}={}){var f,m,p,b,y,h;if(RT.add(this),vv.set(this,void 0),this.completions=new mc(this),this.chat=new Us(this),this.embeddings=new hc(this),this.files=new yc(this),this.images=new xc(this),this.audio=new ko(this),this.moderations=new Sc(this),this.models=new wc(this),this.fineTuning=new Qi(this),this.graders=new Hs(this),this.vectorStores=new $a(this),this.webhooks=new Tc(this),this.beta=new Xi(this),this.batches=new uc(this),this.uploads=new Js(this),this.responses=new ka(this),this.realtime=new Ca(this),this.conversations=new qs(this),this.evals=new Gs(this),this.containers=new Vs(this),this.videos=new Ac(this),r===void 0)throw new ae("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let l={apiKey:r,organization:n,project:i,webhookSecret:o,...a,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&az())throw new ae(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=(f=l.timeout)!=null?f:PT.DEFAULT_TIMEOUT,this.logger=(m=l.logger)!=null?m:console;let d="warn";this.logLevel=d,this.logLevel=(b=(p=uT(l.logLevel,"ClientOptions.logLevel",this))!=null?p:uT(Bs("OPENAI_LOG"),"process.env['OPENAI_LOG']",this))!=null?b:d,this.fetchOptions=l.fetchOptions,this.maxRetries=(y=l.maxRetries)!=null?y:2,this.fetch=(h=l.fetch)!=null?h:uz(),xe(this,vv,lz,"f"),this._options=l,this.apiKey=typeof r=="string"?r:"Missing Key",this.organization=n,this.project=i,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){}async authHeaders(e){return ee([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return aT(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ms}`}defaultIdempotencyKey(){return`stainless-node-retry-${WA()}`}makeStatusError(e,r,n,i){return vr.generate(e,r,n,i)}async _callApiKey(){let e=this._options.apiKey;if(typeof e!="function")return!1;let r;try{r=await e()}catch(n){throw n instanceof ae?n:new ae(`Failed to get token from 'apiKey' function: ${n.message}`,{cause:n})}if(typeof r!="string"||!r)throw new ae(`Expected 'apiKey' function argument to return a string but it returned ${r}`);return this.apiKey=r,!0}buildURL(e,r,n){let i=!D(this,RT,"m",Yz).call(this)&&n||this.baseURL,o=Q2(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return ez(a)||(r={...a,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}request(e,r=null){return new ic(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){var h,_,v;let i=await e,o=(h=i.maxRetries)!=null?h:this.maxRetries;r==null&&(r=o),await this.prepareOptions(i);let{req:a,url:s,timeout:c}=await this.buildRequest(i,{retryCount:o-r});await this.prepareRequest(a,{url:s,options:i});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),l=n===void 0?"":`, retryOf: ${n}`,d=Date.now();if(or(this).debug(`[${u}] sending request`,Aa({retryOfRequestLogID:n,method:i.method,url:s,options:i,headers:a.headers})),(_=i.signal)!=null&&_.aborted)throw new Yt;let f=new AbortController,m=await this.fetchWithTimeout(s,a,c,f).catch($p),p=Date.now();if(m instanceof globalThis.Error){let x=`retrying, ${r} attempts remaining`;if((v=i.signal)!=null&&v.aborted)throw new Yt;let w=kp(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(r)return or(this).info(`[${u}] connection ${w?"timed out":"failed"} - ${x}`),or(this).debug(`[${u}] connection ${w?"timed out":"failed"} (${x})`,Aa({retryOfRequestLogID:n,url:s,durationMs:p-d,message:m.message})),this.retryRequest(i,r,n!=null?n:u);throw or(this).info(`[${u}] connection ${w?"timed out":"failed"} - error; no more retries left`),or(this).debug(`[${u}] connection ${w?"timed out":"failed"} (error; no more retries left)`,Aa({retryOfRequestLogID:n,url:s,durationMs:p-d,message:m.message})),w?new To:new Ps({cause:m})}let b=[...m.headers.entries()].filter(([x])=>x==="x-request-id").map(([x,w])=>", "+x+": "+JSON.stringify(w)).join(""),y=`[${u}${l}${b}] ${a.method} ${s} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${p-d}ms`;if(!m.ok){let x=await this.shouldRetry(m);if(r&&x){let N=`retrying, ${r} attempts remaining`;return await cz(m.body),or(this).info(`${y} - ${N}`),or(this).debug(`[${u}] response error (${N})`,Aa({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:p-d})),this.retryRequest(i,r,n!=null?n:u,m.headers)}let w=x?"error; no more retries left":"error; not retryable";or(this).info(`${y} - ${w}`);let E=await m.text().catch(N=>$p(N).message),S=nz(E),g=S?void 0:E;throw or(this).debug(`[${u}] response error (${w})`,Aa({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,message:g,durationMs:Date.now()-d})),this.makeStatusError(m.status,S,g,m.headers)}return or(this).info(y),or(this).debug(`[${u}] response start`,Aa({retryOfRequestLogID:n,url:m.url,status:m.status,headers:m.headers,durationMs:p-d})),{response:m,options:i,controller:f,requestLogID:u,retryOfRequestLogID:n,startTime:d}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new Lp(this,n,e)}async fetchWithTimeout(e,r,n,i){let{signal:o,method:a,...s}=r||{};o&&o.addEventListener("abort",()=>i.abort());let c=setTimeout(()=>i.abort(),n),u=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||typeof s.body=="object"&&s.body!==null&&Symbol.asyncIterator in s.body,l={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...s};a&&(l.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,l)}finally{clearTimeout(c)}}async shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,i){var c;let o,a=i==null?void 0:i.get("retry-after-ms");if(a){let u=parseFloat(a);Number.isNaN(u)||(o=u)}let s=i==null?void 0:i.get("retry-after");if(s&&!o){let u=parseFloat(s);Number.isNaN(u)?o=Date.parse(s)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){let u=(c=e.maxRetries)!=null?c:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,u)}return await Oo(o),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let o=r-e,a=Math.min(.5*Math.pow(2,o),8),s=1-Math.random()*.25;return a*s*1e3}async buildRequest(e,{retryCount:r=0}={}){var m,p,b;let n={...e},{method:i,path:o,query:a,defaultBaseURL:s}=n,c=this.buildURL(o,a,s);"timeout"in n&&rz("timeout",n.timeout),n.timeout=(m=n.timeout)!=null?m:this.timeout;let{bodyHeaders:u,body:l}=this.buildBody({options:n}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:r});return{req:{method:i,headers:d,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"},...l&&{body:l},...(p=this.fetchOptions)!=null?p:{},...(b=n.fetchOptions)!=null?b:{}},url:c,timeout:n.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:i}){let o={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);let a=ee([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...sz(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=ee([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Z_(e)}:D(this,vv,"f").call(this,{body:e,headers:n})}};PT=Te,vv=new WeakMap,RT=new WeakSet,Yz=function(){return this.baseURL!=="https://api.openai.com/v1"};Te.OpenAI=PT;Te.DEFAULT_TIMEOUT=6e5;Te.OpenAIError=ae;Te.APIError=vr;Te.APIConnectionError=Ps;Te.APIConnectionTimeoutError=To;Te.APIUserAbortError=Yt;Te.NotFoundError=Ed;Te.ConflictError=Od;Te.RateLimitError=Nd;Te.BadRequestError=Sd;Te.AuthenticationError=Ad;Te.InternalServerError=Cd;Te.PermissionDeniedError=Td;Te.UnprocessableEntityError=Id;Te.InvalidWebhookSignatureError=Eo;Te.toFile=zs;Te.Completions=mc;Te.Chat=Us;Te.Embeddings=hc;Te.Files=yc;Te.Images=xc;Te.Audio=ko;Te.Moderations=Sc;Te.Models=wc;Te.FineTuning=Qi;Te.Graders=Hs;Te.VectorStores=$a;Te.Webhooks=Tc;Te.Beta=Xi;Te.Batches=uc;Te.Uploads=Js;Te.Responses=ka;Te.Realtime=Ca;Te.Conversations=qs;Te.Evals=Gs;Te.Containers=Vs;Te.Videos=Ac;var Rn=be(LT());var fD=()=>new DOMException("","AbortError");var mD=t=>(e,r,[n,i,o],a)=>{t(e[i],[r,n,o],s=>s[0]===r&&s[1]===n,a)};var pD=t=>(e,r,n)=>{let i=[];for(let o=0;o<n.numberOfInputs;o+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:r})};var hD=t=>(e,r)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:r})};var Ro=new WeakSet,xv=new WeakMap,pf=new WeakMap,wv=new WeakMap,uh=new WeakMap,hf=new WeakMap,Sv=new WeakMap,ch=new WeakMap,lh=new WeakMap,dh=new WeakMap;var gD={construct(){return gD}},yD=t=>{try{let e=new Proxy(t,gD);new e}catch(e){return!1}return!0};var _D=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,UT=(t,e)=>{let r=[],n=t.replace(/^[\s]+/,""),i=n.match(_D);for(;i!==null;){let o=i[1].slice(1,-1),a=i[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());r.push(a),n=n.slice(i[0].length).replace(/^[\s]+/,""),i=n.match(_D)}return[r.join(";"),n]};var vD=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},bD=t=>{if(!yD(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},xD=(t,e,r,n,i,o,a,s,c,u,l,d,f)=>{let m=0;return(p,b,y={credentials:"omit"})=>{let h=l.get(p);if(h!==void 0&&h.has(b))return Promise.resolve();let _=u.get(p);if(_!==void 0){let w=_.get(b);if(w!==void 0)return w}let v=o(p),x=v.audioWorklet===void 0?i(b).then(([w,E])=>{let[S,g]=UT(w,E),I=`${S};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${g}
})})(window,'_AWGS')`;return r(I)}).then(()=>{let w=f._AWGS.pop();if(w===void 0)throw new SyntaxError;n(v.currentTime,v.sampleRate,()=>w(class{},void 0,(E,S)=>{if(E.trim()==="")throw e();let g=lh.get(v);if(g!==void 0){if(g.has(E))throw e();bD(S),vD(S.parameterDescriptors),g.set(E,S)}else bD(S),vD(S.parameterDescriptors),lh.set(v,new Map([[E,S]]))},v.sampleRate,void 0,void 0))}):Promise.all([i(b),Promise.resolve(t(d,d))]).then(([[w,E],S])=>{let g=m+1;m=g;let[I,N]=UT(w,E),j=`${I};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${S?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${S?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${S?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${g}',class extends AudioWorkletProcessor{process(){return !1}})`,L=new Blob([j],{type:"application/javascript; charset=utf-8"}),k=URL.createObjectURL(L);return v.audioWorklet.addModule(k,y).then(()=>{if(s(v))return v;let U=a(v);return U.audioWorklet.addModule(k,y).then(()=>U)}).then(U=>{if(c===null)throw new SyntaxError;try{new c(U,`__sac${g}`)}catch(J){throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(k))});return _===void 0?u.set(p,new Map([[b,x]])):_.set(b,x),x.then(()=>{let w=l.get(p);w===void 0?l.set(p,new Set([b])):w.add(b)}).finally(()=>{let w=u.get(p);w!==void 0&&w.delete(b)}),x}};var pr=(t,e)=>{let r=t.get(e);if(r===void 0)throw new Error("A value with the given key could not be found.");return r};var Ws=(t,e)=>{let r=Array.from(t).filter(e);if(r.length>1)throw Error("More than one element was found.");if(r.length===0)throw Error("No element was found.");let[n]=r;return t.delete(n),n};var Av=(t,e,r,n)=>{let i=pr(t,e),o=Ws(i,a=>a[0]===r&&a[1]===n);return i.size===0&&t.delete(e),o};var Po=t=>pr(Sv,t);var eo=t=>{if(Ro.has(t))throw new Error("The AudioNode is already stored.");Ro.add(t),Po(t).forEach(e=>e(!0))};var Tv=t=>"port"in t;var Mo=t=>{if(!Ro.has(t))throw new Error("The AudioNode is not stored.");Ro.delete(t),Po(t).forEach(e=>e(!1))};var fh=(t,e)=>{!Tv(t)&&e.every(r=>r.size===0)&&Mo(t)};var wD=(t,e,r,n,i,o,a,s,c,u,l,d,f)=>{let m=new WeakMap;return(p,b,y,h,_)=>{let{activeInputs:v,passiveInputs:x}=o(b),{outputs:w}=o(p),E=s(p),S=g=>{let I=c(b),N=c(p);if(g){let C=Av(x,p,y,h);t(v,p,C,!1),!_&&!d(p)&&r(N,I,y,h),f(b)&&eo(b)}else{let C=n(v,p,y,h);e(x,h,C,!1),!_&&!d(p)&&i(N,I,y,h);let R=a(b);if(R===0)l(b)&&fh(b,v);else{let z=m.get(b);z!==void 0&&clearTimeout(z),m.set(b,setTimeout(()=>{l(b)&&fh(b,v)},R*1e3))}}};return u(w,[b,y,h],g=>g[0]===b&&g[1]===y&&g[2]===h,!0)?(E.add(S),l(p)?t(v,p,[y,h,S],!0):e(x,h,[p,y,S],!0),!0):!1}};var SD=t=>(e,r,[n,i,o],a)=>{let s=e.get(n);s===void 0?e.set(n,new Set([[i,r,o]])):t(s,[i,r,o],c=>c[0]===i&&c[1]===r,a)};var AD=t=>(e,r)=>{let n=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.connect(n).connect(e.destination);let i=()=>{r.removeEventListener("ended",i),r.disconnect(n),n.disconnect()};r.addEventListener("ended",i)};var TD=t=>(e,r)=>{t(e).add(r)};var OJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ED=(t,e,r,n,i,o)=>class extends t{constructor(s,c){let u=i(s),l={...OJ,...c},d=n(u,l),f=o(u)?e():null;super(s,!1,d,f),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(s){this._nativeAnalyserNode.fftSize=s}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(s){let c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=s,!(s>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,r()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(s){let c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=s,!(this._nativeAnalyserNode.maxDecibels>s))throw this._nativeAnalyserNode.minDecibels=c,r()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(s){this._nativeAnalyserNode.smoothingTimeConstant=s}getByteFrequencyData(s){this._nativeAnalyserNode.getByteFrequencyData(s)}getByteTimeDomainData(s){this._nativeAnalyserNode.getByteTimeDomainData(s)}getFloatFrequencyData(s){this._nativeAnalyserNode.getFloatFrequencyData(s)}getFloatTimeDomainData(s){this._nativeAnalyserNode.getFloatTimeDomainData(s)}};var ot=(t,e)=>t.context===e;var OD=(t,e,r)=>()=>{let n=new WeakMap,i=async(o,a)=>{let s=e(o);if(!ot(s,a)){let u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant};s=t(a,u)}return n.set(a,s),await r(o,a,s),s};return{render(o,a){let s=n.get(a);return s!==void 0?Promise.resolve(s):i(o,a)}}};var gf=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch(e){return!1}return!0};var Ni=()=>new DOMException("","IndexSizeError");var yf=t=>{t.getChannelData=(e=>r=>{try{return e.call(t,r)}catch(n){throw n.code===12?Ni():n}})(t.getChannelData)};var IJ={numberOfChannels:1},ID=(t,e,r,n,i,o,a,s)=>{let c=null;return class ND{constructor(l){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:d,numberOfChannels:f,sampleRate:m}={...IJ,...l};c===null&&(c=new i(1,1,44100));let p=n!==null&&e(o,o)?new n({length:d,numberOfChannels:f,sampleRate:m}):c.createBuffer(f,d,m);if(p.numberOfChannels===0)throw r();return typeof p.copyFromChannel!="function"?(a(p),yf(p)):e(gf,()=>gf(p))||s(p),t.add(p),p}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===ND.prototype||t.has(l)}}};var ar=-34028234663852886e22,Xt=-ar;var cn=t=>Ro.has(t);var NJ={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},CD=(t,e,r,n,i,o,a,s)=>class extends t{constructor(u,l){let d=o(u),f={...NJ,...l},m=i(d,f),p=a(d),b=p?e():null;super(u,!1,m,b),this._audioBufferSourceNodeRenderer=b,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=m,this._onended=null,this._playbackRate=r(this,p,m.playbackRate,Xt,ar)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){let l=typeof u=="function"?s(this,u):null;this._nativeAudioBufferSourceNode.onended=l;let d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===l?u:d}get playbackRate(){return this._playbackRate}start(u=0,l=0,d){if(this._nativeAudioBufferSourceNode.start(u,l,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[u,l]:[u,l,d]),this.context.state!=="closed"){eo(this);let f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),cn(this)&&Mo(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}};var kD=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=null,s=null,c=async(u,l)=>{let d=r(u),f=ot(d,l);if(!f){let m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(l,m),a!==null&&d.start(...a),s!==null&&d.stop(s)}return o.set(l,d),f?await t(l,u.playbackRate,d.playbackRate):await n(l,u.playbackRate,d.playbackRate),await i(u,l,d),d};return{set start(u){a=u},set stop(u){s=u},render(u,l){let d=o.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var $D=t=>"playbackRate"in t;var RD=t=>"frequency"in t&&"gain"in t;var PD=t=>"offset"in t;var MD=t=>!("frequency"in t)&&"gain"in t;var zD=t=>"detune"in t&&"frequency"in t&&!("gain"in t);var DD=t=>"pan"in t;var wr=t=>pr(xv,t);var Ys=t=>pr(wv,t);var Ev=(t,e)=>{let{activeInputs:r}=wr(t);r.forEach(i=>i.forEach(([o])=>{e.includes(t)||Ev(o,[...e,t])}));let n=$D(t)?[t.playbackRate]:Tv(t)?Array.from(t.parameters.values()):RD(t)?[t.Q,t.detune,t.frequency,t.gain]:PD(t)?[t.offset]:MD(t)?[t.gain]:zD(t)?[t.detune,t.frequency]:DD(t)?[t.pan]:[];for(let i of n){let o=Ys(i);o!==void 0&&o.activeInputs.forEach(([a])=>Ev(a,e))}cn(t)&&Mo(t)};var Xs=t=>{Ev(t.destination,[])};var Ov=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback");var LD=(t,e,r,n,i,o,a,s,c)=>class extends t{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(l)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?r():p}if(d===null)throw n();if(!Ov(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&d.sampleRate!==l.sampleRate)throw r();super(d,2);let{latencyHint:f}=l,{sampleRate:m}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:f==="balanced"?512/m:f==="interactive"||f===void 0?256/m:f==="playback"?1024/m:Math.max(2,Math.min(128,Math.round(f*m/128)))*128/m,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";let p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Xs(this)}))}createMediaElementSource(l){return new i(this,{mediaElement:l})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(l){return new a(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new s(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,d)=>{let f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?l():this.resume().then(l,d)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?e():l})}};var UD=(t,e,r,n,i,o,a,s)=>class extends t{constructor(u,l){let d=o(u),f=a(d),m=i(d,l,f),p=f?e(s):null;super(u,!1,m,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=m}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw r();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var jD=t=>{let e=new WeakMap,r=async(n,i)=>{let o=i.destination;return e.set(i,o),await t(n,i,o),o};return{render(n,i){let o=e.get(i);return o!==void 0?Promise.resolve(o):r(n,i)}}};var FD=(t,e,r,n,i,o,a,s)=>(c,u)=>{let l=u.listener,d=()=>{let w=new Float32Array(1),E=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),S=a(u),g=!1,I=[0,0,-1,0,1,0],N=[0,0,0],C=()=>{if(g)return;g=!0;let L=n(u,256,9,0);L.onaudioprocess=({inputBuffer:k})=>{let U=[o(k,w,0),o(k,w,1),o(k,w,2),o(k,w,3),o(k,w,4),o(k,w,5)];U.some((H,V)=>H!==I[V])&&(l.setOrientation(...U),I=U);let J=[o(k,w,6),o(k,w,7),o(k,w,8)];J.some((H,V)=>H!==N[V])&&(l.setPosition(...J),N=J)},E.connect(L)},R=L=>k=>{k!==I[L]&&(I[L]=k,l.setOrientation(...I))},z=L=>k=>{k!==N[L]&&(N[L]=k,l.setPosition(...N))},j=(L,k,U)=>{let J=r(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k});J.connect(E,0,L),J.start(),Object.defineProperty(J.offset,"defaultValue",{get(){return k}});let H=t({context:c},S,J.offset,Xt,ar);return s(H,"value",V=>()=>V.call(H),V=>_e=>{try{V.call(H,_e)}catch(Fe){if(Fe.code!==9)throw Fe}C(),S&&U(_e)}),H.cancelAndHoldAtTime=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.cancelAndHoldAtTime),H.cancelScheduledValues=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.cancelScheduledValues),H.exponentialRampToValueAtTime=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.exponentialRampToValueAtTime),H.linearRampToValueAtTime=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.linearRampToValueAtTime),H.setTargetAtTime=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.setTargetAtTime),H.setValueAtTime=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.setValueAtTime),H.setValueCurveAtTime=(V=>S?()=>{throw i()}:(..._e)=>{let Fe=V.apply(H,_e);return C(),Fe})(H.setValueCurveAtTime),H};return{forwardX:j(0,0,R(0)),forwardY:j(1,0,R(1)),forwardZ:j(2,-1,R(2)),positionX:j(6,0,z(0)),positionY:j(7,0,z(1)),positionZ:j(8,0,z(2)),upX:j(3,0,R(3)),upY:j(4,1,R(4)),upZ:j(5,0,R(5))}},{forwardX:f,forwardY:m,forwardZ:p,positionX:b,positionY:y,positionZ:h,upX:_,upY:v,upZ:x}=l.forwardX===void 0?d():l;return{get forwardX(){return f},get forwardY(){return m},get forwardZ(){return p},get positionX(){return b},get positionY(){return y},get positionZ(){return h},get upX(){return _},get upY(){return v},get upZ(){return x}}};var Ec=t=>"context"in t;var Qs=t=>Ec(t[0]);var to=(t,e,r,n)=>{for(let i of t)if(r(i)){if(n)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0};var jT=(t,e,[r,n],i)=>{to(t,[e,r,n],o=>o[0]===e&&o[1]===r,i)};var FT=(t,[e,r,n],i)=>{let o=t.get(e);o===void 0?t.set(e,new Set([[r,n]])):to(o,[r,n],a=>a[0]===r,i)};var Ci=t=>"inputs"in t;var _f=(t,e,r,n)=>{if(Ci(e)){let i=e.inputs[n];return t.connect(i,r,0),[i,r,0]}return t.connect(e,r,n),[e,r,n]};var BT=(t,e,r)=>{for(let n of t)if(n[0]===e&&n[1]===r)return t.delete(n),n;return null};var BD=(t,e,r)=>Ws(t,n=>n[0]===e&&n[1]===r);var ZT=(t,e)=>{if(!Po(t).delete(e))throw new Error("Missing the expected event listener.")};var VT=(t,e,r)=>{let n=pr(t,e),i=Ws(n,o=>o[0]===r);return n.size===0&&t.delete(e),i};var vf=(t,e,r,n)=>{Ci(e)?t.disconnect(e.inputs[n],r,0):t.disconnect(e,r,n)};var _t=t=>pr(pf,t);var Oc=t=>pr(uh,t);var Pa=t=>ch.has(t);var bf=t=>!Ro.has(t);var qT=(t,e)=>new Promise(r=>{if(e!==null)r(!0);else{let n=t.createScriptProcessor(256,1,1),i=t.createGain(),o=t.createBuffer(1,2,44100),a=o.getChannelData(0);a[0]=1,a[1]=1;let s=t.createBufferSource();s.buffer=o,s.loop=!0,s.connect(n).connect(t.destination),s.connect(i),s.disconnect(i),n.onaudioprocess=c=>{let u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?r(!0):r(!1),s.stop(),n.onaudioprocess=null,s.disconnect(n),n.disconnect(t.destination)},s.start()}});var Iv=(t,e)=>{let r=new Map;for(let n of t)for(let i of n){let o=r.get(i);r.set(i,o===void 0?1:o+1)}r.forEach((n,i)=>e(i,n))};var Ic=t=>"context"in t;var ZD=t=>{let e=new Map;t.connect=(r=>(n,i=0,o=0)=>{let a=Ic(n)?r(n,i,o):r(n,i),s=e.get(n);return s===void 0?e.set(n,[{input:o,output:i}]):s.every(c=>c.input!==o||c.output!==i)&&s.push({input:o,output:i}),a})(t.connect.bind(t)),t.disconnect=(r=>(n,i,o)=>{if(r.apply(t),n===void 0)e.clear();else if(typeof n=="number")for(let[a,s]of e){let c=s.filter(u=>u.output!==n);c.length===0?e.delete(a):e.set(a,c)}else if(e.has(n))if(i===void 0)e.delete(n);else{let a=e.get(n);if(a!==void 0){let s=a.filter(c=>c.output!==i&&(c.input!==o||o===void 0));s.length===0?e.delete(n):e.set(n,s)}}for(let[a,s]of e)s.forEach(c=>{Ic(a)?t.connect(a,c.output,c.input):t.connect(a,c.output)})})(t.disconnect)};var CJ=(t,e,r,n)=>{let{activeInputs:i,passiveInputs:o}=Ys(e),{outputs:a}=wr(t),s=Po(t),c=u=>{let l=_t(t),d=Oc(e);if(u){let f=VT(o,t,r);jT(i,t,f,!1),!n&&!Pa(t)&&l.connect(d,r)}else{let f=BD(i,t,r);FT(o,f,!1),!n&&!Pa(t)&&l.disconnect(d,r)}};return to(a,[e,r],u=>u[0]===e&&u[1]===r,!0)?(s.add(c),cn(t)?jT(i,t,[r,c],!0):FT(o,[t,r,c],!0),!0):!1},kJ=(t,e,r,n)=>{let{activeInputs:i,passiveInputs:o}=wr(e),a=BT(i[n],t,r);return a===null?[Av(o,t,r,n)[2],!1]:[a[2],!0]},$J=(t,e,r)=>{let{activeInputs:n,passiveInputs:i}=Ys(e),o=BT(n,t,r);return o===null?[VT(i,t,r)[1],!1]:[o[2],!0]},GT=(t,e,r,n,i)=>{let[o,a]=kJ(t,r,n,i);if(o!==null&&(ZT(t,o),a&&!e&&!Pa(t)&&vf(_t(t),_t(r),n,i)),cn(r)){let{activeInputs:s}=wr(r);fh(r,s)}},HT=(t,e,r,n)=>{let[i,o]=$J(t,r,n);i!==null&&(ZT(t,i),o&&!e&&!Pa(t)&&_t(t).disconnect(Oc(r),n))},RJ=(t,e)=>{let r=wr(t),n=[];for(let i of r.outputs)Qs(i)?GT(t,e,...i):HT(t,e,...i),n.push(i[0]);return r.outputs.clear(),n},PJ=(t,e,r)=>{let n=wr(t),i=[];for(let o of n.outputs)o[1]===r&&(Qs(o)?GT(t,e,...o):HT(t,e,...o),i.push(o[0]),n.outputs.delete(o));return i},MJ=(t,e,r,n,i)=>{let o=wr(t);return Array.from(o.outputs).filter(a=>a[0]===r&&(n===void 0||a[1]===n)&&(i===void 0||a[2]===i)).map(a=>(Qs(a)?GT(t,e,...a):HT(t,e,...a),o.outputs.delete(a),a[0]))},VD=(t,e,r,n,i,o,a,s,c,u,l,d,f,m,p,b)=>class extends u{constructor(h,_,v,x){super(v),this._context=h,this._nativeAudioNode=v;let w=l(h);d(w)&&r(qT,()=>qT(w,b))!==!0&&ZD(v),pf.set(this,v),Sv.set(this,new Set),h.state!=="closed"&&_&&eo(this),t(this,x,v)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(h){this._nativeAudioNode.channelCount=h}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(h){this._nativeAudioNode.channelCountMode=h}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(h){this._nativeAudioNode.channelInterpretation=h}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(h,_=0,v=0){if(_<0||_>=this._nativeAudioNode.numberOfOutputs)throw i();let x=l(this._context),w=p(x);if(f(h)||m(h))throw o();if(Ec(h)){let g=_t(h);try{let N=_f(this._nativeAudioNode,g,_,v),C=bf(this);(w||C)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!C&&bf(h)&&eo(h)}catch(N){throw N.code===12?o():N}if(e(this,h,_,v,w)){let N=c([this],h);Iv(N,n(w))}return h}let E=Oc(h);if(E.name==="playbackRate"&&E.maxValue===1024)throw a();try{this._nativeAudioNode.connect(E,_),(w||bf(this))&&this._nativeAudioNode.disconnect(E,_)}catch(g){throw g.code===12?o():g}if(CJ(this,h,_,w)){let g=c([this],h);Iv(g,n(w))}}disconnect(h,_,v){let x,w=l(this._context),E=p(w);if(h===void 0)x=RJ(this,E);else if(typeof h=="number"){if(h<0||h>=this.numberOfOutputs)throw i();x=PJ(this,E,h)}else{if(_!==void 0&&(_<0||_>=this.numberOfOutputs)||Ec(h)&&v!==void 0&&(v<0||v>=h.numberOfInputs))throw i();if(x=MJ(this,E,h,_,v),x.length===0)throw o()}for(let S of x){let g=c([this],S);Iv(g,s)}}};var qD=be(LT()),GD=(t,e,r,n,i,o,a,s,c,u,l,d,f)=>(m,p,b,y=null,h=null)=>{let _=b.value,v=new qD.AutomationEventList(_),x=p?n(v):null,w={get defaultValue(){return _},get maxValue(){return y===null?b.maxValue:y},get minValue(){return h===null?b.minValue:h},get value(){return b.value},set value(E){b.value=E,w.setValueAtTime(E,m.context.currentTime)},cancelAndHoldAtTime(E){if(typeof b.cancelAndHoldAtTime=="function")x===null&&v.flush(m.context.currentTime),v.add(i(E)),b.cancelAndHoldAtTime(E);else{let S=Array.from(v).pop();x===null&&v.flush(m.context.currentTime),v.add(i(E));let g=Array.from(v).pop();b.cancelScheduledValues(E),S!==g&&g!==void 0&&(g.type==="exponentialRampToValue"?b.exponentialRampToValueAtTime(g.value,g.endTime):g.type==="linearRampToValue"?b.linearRampToValueAtTime(g.value,g.endTime):g.type==="setValue"?b.setValueAtTime(g.value,g.startTime):g.type==="setValueCurve"&&b.setValueCurveAtTime(g.values,g.startTime,g.duration))}return w},cancelScheduledValues(E){return x===null&&v.flush(m.context.currentTime),v.add(o(E)),b.cancelScheduledValues(E),w},exponentialRampToValueAtTime(E,S){if(E===0)throw new RangeError;if(!Number.isFinite(S)||S<0)throw new RangeError;let g=m.context.currentTime;return x===null&&v.flush(g),Array.from(v).length===0&&(v.add(u(_,g)),b.setValueAtTime(_,g)),v.add(a(E,S)),b.exponentialRampToValueAtTime(E,S),w},linearRampToValueAtTime(E,S){let g=m.context.currentTime;return x===null&&v.flush(g),Array.from(v).length===0&&(v.add(u(_,g)),b.setValueAtTime(_,g)),v.add(s(E,S)),b.linearRampToValueAtTime(E,S),w},setTargetAtTime(E,S,g){return x===null&&v.flush(m.context.currentTime),v.add(c(E,S,g)),b.setTargetAtTime(E,S,g),w},setValueAtTime(E,S){return x===null&&v.flush(m.context.currentTime),v.add(u(E,S)),b.setValueAtTime(E,S),w},setValueCurveAtTime(E,S,g){let I=E instanceof Float32Array?E:new Float32Array(E);if(d!==null&&d.name==="webkitAudioContext"){let N=S+g,C=m.context.sampleRate,R=Math.ceil(S*C),z=Math.floor(N*C),j=z-R,L=new Float32Array(j);for(let U=0;U<j;U+=1){let J=(I.length-1)/g*((R+U)/C-S),H=Math.floor(J),V=Math.ceil(J);L[U]=H===V?I[H]:(1-(J-H))*I[H]+(1-(V-J))*I[V]}x===null&&v.flush(m.context.currentTime),v.add(l(L,S,g)),b.setValueCurveAtTime(L,S,g);let k=z/C;k<N&&f(w,L[L.length-1],k),f(w,I[I.length-1],N)}else x===null&&v.flush(m.context.currentTime),v.add(l(I,S,g)),b.setValueCurveAtTime(I,S,g);return w}};return r.set(w,b),e.set(w,m),t(w,x),w};var HD=t=>({replay(e){for(let r of t)if(r.type==="exponentialRampToValue"){let{endTime:n,value:i}=r;e.exponentialRampToValueAtTime(i,n)}else if(r.type==="linearRampToValue"){let{endTime:n,value:i}=r;e.linearRampToValueAtTime(i,n)}else if(r.type==="setTarget"){let{startTime:n,target:i,timeConstant:o}=r;e.setTargetAtTime(i,n,o)}else if(r.type==="setValue"){let{startTime:n,value:i}=r;e.setValueAtTime(i,n)}else if(r.type==="setValueCurve"){let{duration:n,startTime:i,values:o}=r;e.setValueCurveAtTime(o,i,n)}else throw new Error("Can't apply an unknown automation.")}});var xf=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,r=null){return this._map.forEach((n,i)=>e.call(r,n,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var zJ={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},KD=(t,e,r,n,i,o,a,s,c,u,l,d,f,m)=>class extends e{constructor(b,y,h){var _;let v=s(b),x=c(v),w=l({...zJ,...h});f(w);let E=lh.get(v),S=E==null?void 0:E.get(y),g=x||v.state!=="closed"?v:(_=a(v))!==null&&_!==void 0?_:v,I=i(g,x?null:b.baseLatency,u,y,S,w),N=x?n(y,w,S):null;super(b,!0,I,N);let C=[];I.parameters.forEach((z,j)=>{let L=r(this,x,z);C.push([j,L])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new xf(C),x&&t(v,this);let{activeInputs:R}=o(this);d(I,R)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(b){let y=typeof b=="function"?m(this,b):null;this._nativeAudioWorkletNode.onprocessorerror=y;let h=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=h!==null&&h===y?b:h}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function wf(t,e,r,n,i){if(typeof t.copyFromChannel=="function")e[r].byteLength===0&&(e[r]=new Float32Array(128)),t.copyFromChannel(e[r],n,i);else{let o=t.getChannelData(n);if(e[r].byteLength===0)e[r]=o.slice(i,i+128);else{let a=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[r].set(a)}}}var Nv=(t,e,r,n,i)=>{typeof t.copyToChannel=="function"?e[r].byteLength!==0&&t.copyToChannel(e[r],n,i):e[r].byteLength!==0&&t.getChannelData(n).set(e[r],i)};var Sf=(t,e)=>{let r=[];for(let n=0;n<t;n+=1){let i=[],o=typeof e=="number"?e:e[n];for(let a=0;a<o;a+=1)i.push(new Float32Array(128));r.push(i)}return r};var JD=(t,e)=>{let r=pr(dh,t),n=_t(e);return pr(r,n)};var DJ=async(t,e,r,n,i,o,a)=>{let s=e===null?Math.ceil(t.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,u=i.reduce((y,h)=>y+h,0),l=u===0?null:r.createBuffer(u,s,r.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");let d=wr(t),f=await JD(r,t),m=Sf(n.numberOfInputs,n.channelCount),p=Sf(n.numberOfOutputs,i),b=Array.from(t.parameters.keys()).reduce((y,h)=>({...y,[h]:new Float32Array(128)}),{});for(let y=0;y<s;y+=128){if(n.numberOfInputs>0&&e!==null)for(let h=0;h<n.numberOfInputs;h+=1)for(let _=0;_<n.channelCount;_+=1)wf(e,m[h],_,_,y);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:h},_)=>{wf(e,b,h,c+_,y)});for(let h=0;h<n.numberOfInputs;h+=1)for(let _=0;_<i[h];_+=1)p[h][_].byteLength===0&&(p[h][_]=new Float32Array(128));try{let h=m.map((v,x)=>d.activeInputs[x].size===0?[]:v),_=a(y/r.sampleRate,r.sampleRate,()=>f.process(h,p,b));if(l!==null)for(let v=0,x=0;v<n.numberOfOutputs;v+=1){for(let w=0;w<i[v];w+=1)Nv(l,p[v],w,x+w,y);x+=i[v]}if(!_)break}catch(h){t.dispatchEvent(new ErrorEvent("processorerror",{colno:h.colno,filename:h.filename,lineno:h.lineno,message:h.message}));break}}return l},WD=(t,e,r,n,i,o,a,s,c,u,l,d,f,m,p,b)=>(y,h,_)=>{let v=new WeakMap,x=null,w=async(E,S)=>{let g=l(E),I=null,N=ot(g,S),C=Array.isArray(h.outputChannelCount)?h.outputChannelCount:Array.from(h.outputChannelCount);if(d===null){let R=C.reduce((k,U)=>k+U,0),z=i(S,{channelCount:Math.max(1,R),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,R)}),j=[];for(let k=0;k<E.numberOfOutputs;k+=1)j.push(n(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[k]}));let L=a(S,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1});L.connect=e.bind(null,j),L.disconnect=c.bind(null,j),I=[z,j,L]}else N||(g=new d(S,y));if(v.set(S,I===null?g:I[2]),I!==null){if(x===null){if(_===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");let U=E.channelCount*E.numberOfInputs,J=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length,H=U+J;x=DJ(E,H===0?null:await(async()=>{let _e=new f(H,Math.ceil(E.context.length/128)*128,S.sampleRate),Fe=[],Lt=[];for(let O=0;O<h.numberOfInputs;O+=1)Fe.push(a(_e,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1})),Lt.push(i(_e,{channelCount:h.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:h.channelCount}));let qt=await Promise.all(Array.from(E.parameters.values()).map(async O=>{let T=o(_e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:O.value});return await m(_e,O,T.offset),T})),Se=n(_e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+J)});for(let O=0;O<h.numberOfInputs;O+=1){Fe[O].connect(Lt[O]);for(let T=0;T<h.channelCount;T+=1)Lt[O].connect(Se,T,O*h.channelCount+T)}for(let[O,T]of qt.entries())T.connect(Se,0,U+O),T.start(0);return Se.connect(_e.destination),await Promise.all(Fe.map(O=>p(E,_e,O))),b(_e)})(),S,h,C,_,u)}let R=await x,z=r(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[j,L,k]=I;R!==null&&(z.buffer=R,z.start(0)),z.connect(j);for(let U=0,J=0;U<E.numberOfOutputs;U+=1){let H=L[U];for(let V=0;V<C[U];V+=1)j.connect(H,J+V,V);J+=C[U]}return k}if(N)for(let[R,z]of E.parameters.entries())await t(S,z,g.parameters.get(R));else for(let[R,z]of E.parameters.entries())await m(S,z,g.parameters.get(R));return await p(E,S,g),g};return{render(E,S){s(S,E);let g=v.get(S);return g!==void 0?Promise.resolve(g):w(E,S)}}};var YD=(t,e,r,n,i,o,a,s,c,u,l,d,f,m,p,b,y,h,_,v)=>class extends p{constructor(w,E){super(w,E),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(S,g)=>t(this,S,g)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(w,E,S){return new r({length:E,numberOfChannels:w,sampleRate:S})}createBufferSource(){return new n(this)}createChannelMerger(w=6){return new o(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new a(this,{numberOfOutputs:w})}createConstantSource(){return new s(this)}createConvolver(){return new c(this)}createDelay(w=1){return new l(this,{maxDelayTime:w})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(w,E){return new m(this,{feedback:E,feedforward:w})}createOscillator(){return new b(this)}createPanner(){return new y(this)}createPeriodicWave(w,E,S={disableNormalization:!1}){return new h(this,{...S,imag:E,real:w})}createStereoPanner(){return new _(this)}createWaveShaper(){return new v(this)}decodeAudioData(w,E,S){return u(this._nativeContext,w).then(g=>(typeof E=="function"&&E(g),g),g=>{throw typeof S=="function"&&S(g),g})}};var LJ={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},XD=(t,e,r,n,i,o,a,s)=>class extends t{constructor(u,l){let d=o(u),f={...LJ,...l},m=i(d,f),p=a(d),b=p?r():null;super(u,!1,m,b),this._Q=e(this,p,m.Q,Xt,ar),this._detune=e(this,p,m.detune,1200*Math.log2(Xt),-1200*Math.log2(Xt)),this._frequency=e(this,p,m.frequency,u.sampleRate/2,0),this._gain=e(this,p,m.gain,40*Math.log10(Xt),ar),this._nativeBiquadFilterNode=m,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,d)}catch(f){throw f.code===11?n():f}if(u.length!==l.length||l.length!==d.length)throw n()}};var QD=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=async(s,c)=>{let u=r(s),l=ot(u,c);if(!l){let d={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(c,d)}return o.set(c,u),l?(await t(c,s.Q,u.Q),await t(c,s.detune,u.detune),await t(c,s.frequency,u.frequency),await t(c,s.gain,u.gain)):(await n(c,s.Q,u.Q),await n(c,s.detune,u.detune),await n(c,s.frequency,u.frequency),await n(c,s.gain,u.gain)),await i(s,c,u),u};return{render(s,c){let u=o.get(c);return u!==void 0?Promise.resolve(u):a(s,c)}}};var e4=(t,e)=>(r,n)=>{let i=e.get(r);if(i!==void 0)return i;let o=t.get(r);if(o!==void 0)return o;try{let a=n();return a instanceof Promise?(t.set(r,a),a.catch(()=>!1).then(s=>(t.delete(r),e.set(r,s),s))):(e.set(r,a),a)}catch(a){return e.set(r,!1),!1}};var UJ={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},t4=(t,e,r,n,i)=>class extends t{constructor(a,s){let c=n(a),u={...UJ,...s},l=r(c,u),d=i(c)?e():null;super(a,!1,l,d)}};var r4=(t,e,r)=>()=>{let n=new WeakMap,i=async(o,a)=>{let s=e(o);if(!ot(s,a)){let u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs};s=t(a,u)}return n.set(a,s),await r(o,a,s),s};return{render(o,a){let s=n.get(a);return s!==void 0?Promise.resolve(s):i(o,a)}}};var jJ={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},n4=(t,e,r,n,i,o)=>class extends t{constructor(s,c){let u=n(s),l=o({...jJ,...c}),d=r(u,l),f=i(u)?e():null;super(s,!1,d,f)}};var i4=(t,e,r)=>()=>{let n=new WeakMap,i=async(o,a)=>{let s=e(o);if(!ot(s,a)){let u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs};s=t(a,u)}return n.set(a,s),await r(o,a,s),s};return{render(o,a){let s=n.get(a);return s!==void 0?Promise.resolve(s):i(o,a)}}};var o4=t=>(e,r,n)=>t(r,e,n);var a4=t=>(e,r,n=0,i=0)=>{let o=e[n];if(o===void 0)throw t();return Ic(r)?o.connect(r,0,i):o.connect(r,0)};var s4=t=>(e,r)=>{let n=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return n.buffer=i,n.loop=!0,n.connect(r),n.start(),()=>{n.stop(),n.disconnect(r)}};var FJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},u4=(t,e,r,n,i,o,a)=>class extends t{constructor(c,u){let l=i(c),d={...FJ,...u},f=n(l,d),m=o(l),p=m?r():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,m,f.offset,Xt,ar),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?a(this,c):null;this._nativeConstantSourceNode.onended=u;let l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){eo(this);let u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),cn(this)&&Mo(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}};var c4=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=null,s=null,c=async(u,l)=>{let d=r(u),f=ot(d,l);if(!f){let m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(l,m),a!==null&&d.start(a),s!==null&&d.stop(s)}return o.set(l,d),f?await t(l,u.offset,d.offset):await n(l,u.offset,d.offset),await i(u,l,d),d};return{set start(u){a=u},set stop(u){s=u},render(u,l){let d=o.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var l4=t=>e=>(t[0]=e,t[0]);var BJ={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},d4=(t,e,r,n,i,o)=>class extends t{constructor(s,c){let u=n(s),l={...BJ,...c},d=r(u,l),m=i(u)?e():null;super(s,!1,d,m),this._isBufferNullified=!1,this._nativeConvolverNode=d,l.buffer!==null&&o(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(s){if(this._nativeConvolverNode.buffer=s,s===null&&this._nativeConvolverNode.buffer!==null){let c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(s){this._nativeConvolverNode.normalize=s}};var f4=(t,e,r)=>()=>{let n=new WeakMap,i=async(o,a)=>{let s=e(o);if(!ot(s,a)){let u={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize};s=t(a,u)}return n.set(a,s),Ci(s)?await r(o,a,s.inputs[0]):await r(o,a,s),s};return{render(o,a){let s=n.get(a);return s!==void 0?Promise.resolve(s):i(o,a)}}};var m4=(t,e)=>(r,n,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(r,n,i)}catch(o){throw o.name==="SyntaxError"?t():o}};var p4=()=>new DOMException("","DataCloneError");var KT=t=>{let{port1:e,port2:r}=new MessageChannel;return new Promise(n=>{let i=()=>{r.onmessage=null,e.close(),r.close(),n()};r.onmessage=()=>i();try{e.postMessage(t,[t])}catch(o){}finally{i()}})};var h4=(t,e,r,n,i,o,a,s,c,u,l)=>(d,f)=>{let m=a(d)?d:o(d);if(i.has(f)){let p=r();return Promise.reject(p)}try{i.add(f)}catch(p){}return e(c,()=>c(m))?m.decodeAudioData(f).then(p=>(KT(f).catch(()=>{}),e(s,()=>s(p))||l(p),t.add(p),p)):new Promise((p,b)=>{let y=async()=>{try{await KT(f)}catch(_){}},h=_=>{b(_),y()};try{m.decodeAudioData(f,_=>{typeof _.copyFromChannel!="function"&&(u(_),yf(_)),t.add(_),y().then(()=>p(_))},_=>{h(_===null?n():_)})}catch(_){h(_)}})};var g4=(t,e,r,n,i,o,a,s)=>(c,u)=>{let l=e.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");let d=o(c.context),f=s(d);if(l===u){if(e.delete(c),!f&&a(c)){let m=n(c),{outputs:p}=r(c);for(let b of p)if(Qs(b)){let y=n(b[0]);t(m,y,b[1],b[2])}else{let y=i(b[0]);m.connect(y,b[1])}}}else e.set(c,l-u)};var ZJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},y4=(t,e,r,n,i,o,a)=>class extends t{constructor(c,u){let l=i(c),d={...ZJ,...u},f=n(l,d),m=o(l),p=m?r(d.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,m,f.delayTime),a(this,d.maxDelayTime)}get delayTime(){return this._delayTime}};var _4=(t,e,r,n,i)=>o=>{let a=new WeakMap,s=async(c,u)=>{let l=r(c),d=ot(l,u);if(!d){let f={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:o};l=e(u,f)}return a.set(u,l),d?await t(u,c.delayTime,l.delayTime):await n(u,c.delayTime,l.delayTime),await i(c,u,l),l};return{render(c,u){let l=a.get(u);return l!==void 0?Promise.resolve(l):s(c,u)}}};var v4=t=>(e,r,n,i)=>t(e[i],o=>o[0]===r&&o[1]===n);var b4=t=>(e,r)=>{t(e).delete(r)};var x4=t=>"delayTime"in t;var w4=(t,e,r)=>function n(i,o){let a=Ec(o)?o:r(t,o);if(x4(a))return[];if(i[0]===a)return[i];if(i.includes(a))return[];let{outputs:s}=e(a);return Array.from(s).map(c=>n([...i,a],c[0])).reduce((c,u)=>c.concat(u),[])};var Cv=(t,e,r)=>{let n=e[r];if(n===void 0)throw t();return n},S4=t=>(e,r=void 0,n=void 0,i=0)=>r===void 0?e.forEach(o=>o.disconnect()):typeof r=="number"?Cv(t,e,r).disconnect():Ic(r)?n===void 0?e.forEach(o=>o.disconnect(r)):i===void 0?Cv(t,e,n).disconnect(r,0):Cv(t,e,n).disconnect(r,0,i):n===void 0?e.forEach(o=>o.disconnect(r)):Cv(t,e,n).disconnect(r,0);var VJ={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},A4=(t,e,r,n,i,o,a,s)=>class extends t{constructor(u,l){let d=o(u),f={...VJ,...l},m=n(d,f),p=a(d),b=p?r():null;super(u,!1,m,b),this._attack=e(this,p,m.attack),this._knee=e(this,p,m.knee),this._nativeDynamicsCompressorNode=m,this._ratio=e(this,p,m.ratio),this._release=e(this,p,m.release),this._threshold=e(this,p,m.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){let l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){let l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var T4=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=async(s,c)=>{let u=r(s),l=ot(u,c);if(!l){let d={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(c,d)}return o.set(c,u),l?(await t(c,s.attack,u.attack),await t(c,s.knee,u.knee),await t(c,s.ratio,u.ratio),await t(c,s.release,u.release),await t(c,s.threshold,u.threshold)):(await n(c,s.attack,u.attack),await n(c,s.knee,u.knee),await n(c,s.ratio,u.ratio),await n(c,s.release,u.release),await n(c,s.threshold,u.threshold)),await i(s,c,u),u};return{render(s,c){let u=o.get(c);return u!==void 0?Promise.resolve(u):a(s,c)}}};var E4=()=>new DOMException("","EncodingError");var O4=t=>e=>new Promise((r,n)=>{if(t===null){n(new SyntaxError);return}let i=t.document.head;if(i===null)n(new SyntaxError);else{let o=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(a),c=t.onerror,u=()=>{t.onerror=c,URL.revokeObjectURL(s)};t.onerror=(l,d,f,m,p)=>{if(d===s||d===t.location.href&&f===1&&m===1)return u(),n(p),!1;if(c!==null)return c(l,d,f,m,p)},o.onerror=()=>{u(),n(new SyntaxError)},o.onload=()=>{u(),r()},o.src=s,o.type="module",i.appendChild(o)}});var I4=t=>class{constructor(r){this._nativeEventTarget=r,this._listeners=new WeakMap}addEventListener(r,n,i){if(n!==null){let o=this._listeners.get(n);o===void 0&&(o=t(this,n),typeof n=="function"&&this._listeners.set(n,o)),this._nativeEventTarget.addEventListener(r,o,i)}}dispatchEvent(r){return this._nativeEventTarget.dispatchEvent(r)}removeEventListener(r,n,i){let o=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(r,o===void 0?null:o,i)}};var N4=t=>(e,r,n)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*r)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}};var C4=t=>async e=>{try{let r=await fetch(e);if(r.ok)return[await r.text(),r.url]}catch(r){}throw t()};var qJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},k4=(t,e,r,n,i,o)=>class extends t{constructor(s,c){let u=i(s),l={...qJ,...c},d=n(u,l),f=o(u),m=f?r():null;super(s,!1,d,m),this._gain=e(this,f,d.gain,Xt,ar)}get gain(){return this._gain}};var $4=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=async(s,c)=>{let u=r(s),l=ot(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(c,d)}return o.set(c,u),l?await t(c,s.gain,u.gain):await n(c,s.gain,u.gain),await i(s,c,u),u};return{render(s,c){let u=o.get(c);return u!==void 0?Promise.resolve(u):a(s,c)}}};var R4=(t,e)=>r=>e(t,r);var P4=t=>e=>{let r=t(e);if(r.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return r.renderer};var M4=t=>e=>{var r;return(r=t.get(e))!==null&&r!==void 0?r:0};var z4=t=>e=>{let r=t(e);if(r.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return r.renderer};var D4=t=>e=>t.get(e);var Ft=()=>new DOMException("","InvalidStateError");var L4=t=>e=>{let r=t.get(e);if(r===void 0)throw Ft();return r};var U4=(t,e)=>r=>{let n=t.get(r);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),t.set(r,n),n};var j4=t=>e=>{let r=t.get(e);if(r===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return r};var Af=()=>new DOMException("","InvalidAccessError");var F4=t=>{t.getFrequencyResponse=(e=>(r,n,i)=>{if(r.length!==n.length||n.length!==i.length)throw Af();return e.call(t,r,n,i)})(t.getFrequencyResponse)};var GJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},B4=(t,e,r,n,i,o)=>class extends t{constructor(s,c){let u=n(s),l=i(u),d={...GJ,...c},f=e(u,l?null:s.baseLatency,d),m=l?r(d.feedback,d.feedforward):null;super(s,!1,f,m),F4(f),this._nativeIIRFilterNode=f,o(this,1)}getFrequencyResponse(s,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(s,c,u)}};var kv=(t,e,r,n,i,o,a,s,c,u,l)=>{let d=u.length,f=s;for(let m=0;m<d;m+=1){let p=r[0]*u[m];for(let b=1;b<i;b+=1){let y=f-b&c-1;p+=r[b]*o[y],p-=t[b]*a[y]}for(let b=i;b<n;b+=1)p+=r[b]*o[f-b&c-1];for(let b=i;b<e;b+=1)p-=t[b]*a[f-b&c-1];o[f]=u[m],a[f]=p,f=f+1&c-1,l[m]=p}return f};var HJ=(t,e,r,n)=>{let i=r instanceof Float64Array?r:new Float64Array(r),o=n instanceof Float64Array?n:new Float64Array(n),a=i.length,s=o.length,c=Math.min(a,s);if(i[0]!==1){for(let p=0;p<a;p+=1)o[p]/=i[0];for(let p=1;p<s;p+=1)i[p]/=i[0]}let u=32,l=new Float32Array(u),d=new Float32Array(u),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),m=t.numberOfChannels;for(let p=0;p<m;p+=1){let b=t.getChannelData(p),y=f.getChannelData(p);l.fill(0),d.fill(0),kv(i,a,o,s,c,l,d,0,u,b,y)}return f},Z4=(t,e,r,n,i)=>(o,a)=>{let s=new WeakMap,c=null,u=async(l,d)=>{let f=null,m=e(l),p=ot(m,d);if(d.createIIRFilter===void 0?f=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(m=d.createIIRFilter(a,o)),s.set(d,f===null?m:f),f!==null){if(c===null){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");let y=new r(l.context.destination.channelCount,l.context.length,d.sampleRate);c=(async()=>{await n(l,y,y.destination);let h=await i(y);return HJ(h,d,o,a)})()}let b=await c;return f.buffer=b,f.start(0),f}return await n(l,d,m),m};return{render(l,d){let f=s.get(d);return f!==void 0?Promise.resolve(f):u(l,d)}}};var V4=(t,e,r,n,i,o)=>a=>(s,c)=>{let u=t.get(s);if(u===void 0){if(!a&&o(s)){let l=n(s),{outputs:d}=r(s);for(let f of d)if(Qs(f)){let m=n(f[0]);e(l,m,f[1],f[2])}else{let m=i(f[0]);l.disconnect(m,f[1])}}t.set(s,c)}else t.set(s,u+c)};var q4=(t,e)=>r=>{let n=t.get(r);return e(n)||e(r)};var G4=(t,e)=>r=>t.has(r)||e(r);var H4=(t,e)=>r=>t.has(r)||e(r);var K4=(t,e)=>r=>{let n=t.get(r);return e(n)||e(r)};var J4=t=>e=>t!==null&&e instanceof t;var W4=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode;var Y4=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam;var X4=(t,e)=>r=>t(r)||e(r);var Q4=t=>e=>t!==null&&e instanceof t;var eL=t=>t!==null&&t.isSecureContext;var tL=(t,e,r,n)=>class extends t{constructor(o,a){let s=r(o),c=e(s,a);if(n(s))throw TypeError();super(o,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var KJ={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},rL=(t,e,r,n)=>class extends t{constructor(o,a){let s=r(o);if(n(s))throw new TypeError;let c={...KJ,...a},u=e(s,c);super(o,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var nL=(t,e,r,n)=>class extends t{constructor(o,a){let s=r(o),c=e(s,a);if(n(s))throw new TypeError;super(o,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var iL=(t,e,r)=>class extends t{constructor(i,o){let a=r(i),s=e(a,o);super(i,!0,s,null)}};var oL=(t,e,r,n,i)=>class extends n{constructor(a={}){if(i===null)throw new Error("Missing the native AudioContext constructor.");let s;try{s=new i(a)}catch(l){throw l.code===12&&l.message==="sampleRate is not in range"?e():l}if(s===null)throw r();if(!Ov(a.latencyHint))throw new TypeError(`The provided value '${a.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(a.sampleRate!==void 0&&s.sampleRate!==a.sampleRate)throw e();super(s,2);let{latencyHint:c}=a,{sampleRate:u}=s;if(this._baseLatency=typeof s.baseLatency=="number"?s.baseLatency:c==="balanced"?512/u:c==="interactive"||c===void 0?256/u:c==="playback"?1024/u:Math.max(2,Math.min(128,Math.round(c*u/128)))*128/u,this._nativeAudioContext=s,i.name==="webkitAudioContext"?(this._nativeGainNode=s.createGain(),this._nativeOscillatorNode=s.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(s.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,s.state==="running"){this._state="suspended";let l=()=>{this._state==="suspended"&&(this._state=null),s.removeEventListener("statechange",l)};s.addEventListener("statechange",l)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Xs(this)}))}resume(){return this._state==="suspended"?new Promise((a,s)=>{let c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?a():this.resume().then(a,s)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(a=>{throw a===void 0||a.code===15?t():a})}suspend(){return this._nativeAudioContext.suspend().catch(a=>{throw a===void 0?t():a})}};var aL=(t,e,r,n,i,o)=>class extends r{constructor(s,c){super(s),this._nativeContext=s,hf.set(this,s),n(s)&&i.set(s,new Set),this._destination=new t(this,c),this._listener=e(this,s),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(s){let c=typeof s=="function"?o(this,s):null;this._nativeContext.onstatechange=c;let u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?s:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var ro=t=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let r=t.decodeAudioData(e.buffer,()=>{});return r===void 0?!1:(r.catch(()=>{}),!0)}catch(r){}return!1};var JJ={numberOfChannels:1},sL=(t,e,r,n,i)=>class extends n{constructor(a){let{length:s,numberOfChannels:c,sampleRate:u}={...JJ,...a},l=r(c,s,u);t(ro,()=>ro(l))||l.addEventListener("statechange",(()=>{let d=0,f=m=>{this._state==="running"&&(d>0?(l.removeEventListener("statechange",f),m.stopImmediatePropagation(),this._waitForThePromiseToSettle(m)):d+=1)};return f})()),super(l,c),this._length=s,this._nativeOfflineAudioContext=l,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Xs(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}};var uL=(t,e)=>(r,n,i)=>{let o=new Set;return r.connect=(a=>(s,c=0,u=0)=>{let l=o.size===0;if(e(s))return a.call(r,s,c,u),t(o,[s,c,u],d=>d[0]===s&&d[1]===c&&d[2]===u,!0),l&&n(),s;a.call(r,s,c),t(o,[s,c],d=>d[0]===s&&d[1]===c,!0),l&&n()})(r.connect),r.disconnect=(a=>(s,c,u)=>{let l=o.size>0;if(s===void 0)a.apply(r),o.clear();else if(typeof s=="number"){a.call(r,s);for(let f of o)f[1]===s&&o.delete(f)}else{e(s)?a.call(r,s,c,u):a.call(r,s,c);for(let f of o)f[0]===s&&(c===void 0||f[1]===c)&&(u===void 0||f[2]===u)&&o.delete(f)}let d=o.size===0;l&&d&&i()})(r.disconnect),r};var at=(t,e,r)=>{let n=e[r];n!==void 0&&n!==t[r]&&(t[r]=n)};var Je=(t,e)=>{at(t,e,"channelCount"),at(t,e,"channelCountMode"),at(t,e,"channelInterpretation")};var JT=t=>typeof t.getFloatTimeDomainData=="function";var cL=t=>{t.getFloatTimeDomainData=e=>{let r=new Uint8Array(e.length);t.getByteTimeDomainData(r);let n=Math.max(r.length,t.fftSize);for(let i=0;i<n;i+=1)e[i]=(r[i]-128)*.0078125;return e}};var lL=(t,e)=>(r,n)=>{let i=r.createAnalyser();if(Je(i,n),!(n.maxDecibels>n.minDecibels))throw e();return at(i,n,"fftSize"),at(i,n,"maxDecibels"),at(i,n,"minDecibels"),at(i,n,"smoothingTimeConstant"),t(JT,()=>JT(i))||cL(i),i};var dL=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null;var lt=(t,e,r)=>{let n=e[r];n!==void 0&&n!==t[r].value&&(t[r].value=n)};var fL=t=>{t.start=(e=>{let r=!1;return(n=0,i=0,o)=>{if(r)throw Ft();e.call(t,n,i,o),r=!0}})(t.start)};var Tf=t=>{t.start=(e=>(r=0,n=0,i)=>{if(typeof i=="number"&&i<0||n<0||r<0)throw new RangeError("The parameters can't be negative.");e.call(t,r,n,i)})(t.start)};var Ef=t=>{t.stop=(e=>(r=0)=>{if(r<0)throw new RangeError("The parameter can't be negative.");e.call(t,r)})(t.stop)};var mL=(t,e,r,n,i,o,a,s,c,u,l)=>(d,f)=>{let m=d.createBufferSource();return Je(m,f),lt(m,f,"playbackRate"),at(m,f,"buffer"),at(m,f,"loop"),at(m,f,"loopEnd"),at(m,f,"loopStart"),e(r,()=>r(d))||fL(m),e(n,()=>n(d))||c(m),e(i,()=>i(d))||u(m,d),e(o,()=>o(d))||Tf(m),e(a,()=>a(d))||l(m,d),e(s,()=>s(d))||Ef(m),t(d,m),m};var pL=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;var hL=(t,e)=>(r,n,i)=>{let o=r.destination;if(o.channelCount!==n)try{o.channelCount=n}catch(s){}i&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:n});let a=t(r,{channelCount:n,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(a,"channelCount",s=>()=>s.call(a),s=>c=>{s.call(a,c);try{o.channelCount=c}catch(u){if(c>o.maxChannelCount)throw u}}),e(a,"channelCountMode",s=>()=>s.call(a),s=>c=>{s.call(a,c),o.channelCountMode=c}),e(a,"channelInterpretation",s=>()=>s.call(a),s=>c=>{s.call(a,c),o.channelInterpretation=c}),Object.defineProperty(a,"maxChannelCount",{get:()=>o.maxChannelCount}),a.connect(o),a};var gL=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null;var yL=t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}};var _L=(t,e,r,n,i)=>(o,a,s,c,u,l)=>{if(s!==null)try{let d=new s(o,c,l),f=new Map,m=null;if(Object.defineProperties(d,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>m,set:p=>{typeof m=="function"&&d.removeEventListener("processorerror",m),m=typeof p=="function"?p:null,typeof m=="function"&&d.addEventListener("processorerror",m)}}}),d.addEventListener=(p=>(...b)=>{if(b[0]==="processorerror"){let y=typeof b[1]=="function"?b[1]:typeof b[1]=="object"&&b[1]!==null&&typeof b[1].handleEvent=="function"?b[1].handleEvent:null;if(y!==null){let h=f.get(b[1]);h!==void 0?b[1]=h:(b[1]=_=>{_.type==="error"?(Object.defineProperties(_,{type:{value:"processorerror"}}),y(_)):y(new ErrorEvent(b[0],{..._}))},f.set(y,b[1]))}}return p.call(d,"error",b[1],b[2]),p.call(d,...b)})(d.addEventListener),d.removeEventListener=(p=>(...b)=>{if(b[0]==="processorerror"){let y=f.get(b[1]);y!==void 0&&(f.delete(b[1]),b[1]=y)}return p.call(d,"error",b[1],b[2]),p.call(d,b[0],b[1],b[2])})(d.removeEventListener),l.numberOfOutputs!==0){let p=r(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(o.destination),i(d,()=>p.disconnect(),()=>p.connect(o.destination))}return d}catch(d){throw d.code===11?n():d}if(u===void 0)throw n();return yL(l),e(o,a,u,l)};var $v=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))));var vL=t=>new Promise((e,r)=>{let{port1:n,port2:i}=new MessageChannel;n.onmessage=({data:o})=>{n.close(),i.close(),e(o)},n.onmessageerror=({data:o})=>{n.close(),i.close(),r(o)},i.postMessage(t)});var bL=async(t,e)=>{let r=await vL(e);return new t(r)};var xL=(t,e,r,n)=>{let i=dh.get(t);i===void 0&&(i=new WeakMap,dh.set(t,i));let o=bL(r,n);return i.set(e,o),o};var wL=(t,e,r,n,i,o,a,s,c,u,l,d,f)=>(m,p,b,y)=>{if(y.numberOfInputs===0&&y.numberOfOutputs===0)throw c();let h=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h.some(te=>te<1))throw c();if(h.length!==y.numberOfOutputs)throw e();if(y.channelCountMode!=="explicit")throw c();let _=y.channelCount*y.numberOfInputs,v=h.reduce((te,ce)=>te+ce,0),x=b.parameterDescriptors===void 0?0:b.parameterDescriptors.length;if(_+x>6||v>6)throw c();let w=new MessageChannel,E=[],S=[];for(let te=0;te<y.numberOfInputs;te+=1)E.push(a(m,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),S.push(i(m,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));let g=[];if(b.parameterDescriptors!==void 0)for(let{defaultValue:te,maxValue:ce,minValue:it,name:dt}of b.parameterDescriptors){let Qe=o(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:y.parameterData[dt]!==void 0?y.parameterData[dt]:te===void 0?0:te});Object.defineProperties(Qe.offset,{defaultValue:{get:()=>te===void 0?0:te},maxValue:{get:()=>ce===void 0?Xt:ce},minValue:{get:()=>it===void 0?ar:it}}),g.push(Qe)}let I=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_+x)}),N=$v(p,m.sampleRate),C=s(m,N,_+x,Math.max(1,v)),R=i(m,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),z=[];for(let te=0;te<y.numberOfOutputs;te+=1)z.push(n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:h[te]}));for(let te=0;te<y.numberOfInputs;te+=1){E[te].connect(S[te]);for(let ce=0;ce<y.channelCount;ce+=1)S[te].connect(I,ce,te*y.channelCount+ce)}let j=new xf(b.parameterDescriptors===void 0?[]:b.parameterDescriptors.map(({name:te},ce)=>{let it=g[ce];return it.connect(I,0,_+ce),it.start(0),[te,it.offset]}));I.connect(C);let L=y.channelInterpretation,k=null,U=y.numberOfOutputs===0?[C]:z,J={get bufferSize(){return N},get channelCount(){return y.channelCount},set channelCount(te){throw r()},get channelCountMode(){return y.channelCountMode},set channelCountMode(te){throw r()},get channelInterpretation(){return L},set channelInterpretation(te){for(let ce of E)ce.channelInterpretation=te;L=te},get context(){return C.context},get inputs(){return E},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return k},set onprocessorerror(te){typeof k=="function"&&J.removeEventListener("processorerror",k),k=typeof te=="function"?te:null,typeof k=="function"&&J.addEventListener("processorerror",k)},get parameters(){return j},get port(){return w.port2},addEventListener(...te){return C.addEventListener(te[0],te[1],te[2])},connect:t.bind(null,U),disconnect:u.bind(null,U),dispatchEvent(...te){return C.dispatchEvent(te[0])},removeEventListener(...te){return C.removeEventListener(te[0],te[1],te[2])}},H=new Map;w.port1.addEventListener=(te=>(...ce)=>{if(ce[0]==="message"){let it=typeof ce[1]=="function"?ce[1]:typeof ce[1]=="object"&&ce[1]!==null&&typeof ce[1].handleEvent=="function"?ce[1].handleEvent:null;if(it!==null){let dt=H.get(ce[1]);dt!==void 0?ce[1]=dt:(ce[1]=Qe=>{l(m.currentTime,m.sampleRate,()=>it(Qe))},H.set(it,ce[1]))}}return te.call(w.port1,ce[0],ce[1],ce[2])})(w.port1.addEventListener),w.port1.removeEventListener=(te=>(...ce)=>{if(ce[0]==="message"){let it=H.get(ce[1]);it!==void 0&&(H.delete(ce[1]),ce[1]=it)}return te.call(w.port1,ce[0],ce[1],ce[2])})(w.port1.removeEventListener);let V=null;Object.defineProperty(w.port1,"onmessage",{get:()=>V,set:te=>{typeof V=="function"&&w.port1.removeEventListener("message",V),V=typeof te=="function"?te:null,typeof V=="function"&&(w.port1.addEventListener("message",V),w.port1.start())}}),b.prototype.port=w.port1;let _e=null;xL(m,J,b,y).then(te=>_e=te);let Lt=Sf(y.numberOfInputs,y.channelCount),qt=Sf(y.numberOfOutputs,h),Se=b.parameterDescriptors===void 0?[]:b.parameterDescriptors.reduce((te,{name:ce})=>({...te,[ce]:new Float32Array(128)}),{}),O=!0,T=()=>{y.numberOfOutputs>0&&C.disconnect(R);for(let te=0,ce=0;te<y.numberOfOutputs;te+=1){let it=z[te];for(let dt=0;dt<h[te];dt+=1)R.disconnect(it,ce+dt,dt);ce+=h[te]}},M=new Map;C.onaudioprocess=({inputBuffer:te,outputBuffer:ce})=>{if(_e!==null){let it=d(J);for(let dt=0;dt<N;dt+=128){for(let Qe=0;Qe<y.numberOfInputs;Qe+=1)for(let W=0;W<y.channelCount;W+=1)wf(te,Lt[Qe],W,W,dt);b.parameterDescriptors!==void 0&&b.parameterDescriptors.forEach(({name:Qe},W)=>{wf(te,Se,Qe,_+W,dt)});for(let Qe=0;Qe<y.numberOfInputs;Qe+=1)for(let W=0;W<h[Qe];W+=1)qt[Qe][W].byteLength===0&&(qt[Qe][W]=new Float32Array(128));try{let Qe=Lt.map((cr,we)=>{if(it[we].size>0)return M.set(we,N/128),cr;let Ie=M.get(we);return Ie===void 0?[]:(cr.every(me=>me.every(oe=>oe===0))&&(Ie===1?M.delete(we):M.set(we,Ie-1)),cr)});O=l(m.currentTime+dt/m.sampleRate,m.sampleRate,()=>_e.process(Qe,qt,Se));for(let cr=0,we=0;cr<y.numberOfOutputs;cr+=1){for(let he=0;he<h[cr];he+=1)Nv(ce,qt[cr],he,we+he,dt);we+=h[cr]}}catch(Qe){O=!1,J.dispatchEvent(new ErrorEvent("processorerror",{colno:Qe.colno,filename:Qe.filename,lineno:Qe.lineno,message:Qe.message}))}if(!O){for(let Qe=0;Qe<y.numberOfInputs;Qe+=1){E[Qe].disconnect(S[Qe]);for(let W=0;W<y.channelCount;W+=1)S[dt].disconnect(I,W,Qe*y.channelCount+W)}if(b.parameterDescriptors!==void 0){let Qe=b.parameterDescriptors.length;for(let W=0;W<Qe;W+=1){let cr=g[W];cr.disconnect(I,0,_+W),cr.stop()}}I.disconnect(C),C.onaudioprocess=null,$?T():Ve();break}}}};let $=!1,Ae=a(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),qe=()=>C.connect(Ae).connect(m.destination),Ve=()=>{C.disconnect(Ae),Ae.disconnect()},wt=()=>{if(O){Ve(),y.numberOfOutputs>0&&C.connect(R);for(let te=0,ce=0;te<y.numberOfOutputs;te+=1){let it=z[te];for(let dt=0;dt<h[te];dt+=1)R.connect(it,ce+dt,dt);ce+=h[te]}}$=!0},Kt=()=>{O&&(qe(),T()),$=!1};return qe(),f(J,wt,Kt)};var WT=(t,e)=>{let r=t.createBiquadFilter();return Je(r,e),lt(r,e,"Q"),lt(r,e,"detune"),lt(r,e,"frequency"),lt(r,e,"gain"),at(r,e,"type"),r};var SL=(t,e)=>(r,n)=>{let i=r.createChannelMerger(n.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(r,i),Je(i,n),i};var AL=t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:r=>{if(r!==e)throw Ft()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:r=>{if(r!=="explicit")throw Ft()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:r=>{if(r!=="discrete")throw Ft()}})};var Of=(t,e)=>{let r=t.createChannelSplitter(e.numberOfOutputs);return Je(r,e),AL(r),r};var TL=(t,e,r,n,i)=>(o,a)=>{if(o.createConstantSource===void 0)return r(o,a);let s=o.createConstantSource();return Je(s,a),lt(s,a,"offset"),e(n,()=>n(o))||Tf(s),e(i,()=>i(o))||Ef(s),t(o,s),s};var ki=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t);var EL=(t,e,r,n)=>(i,{offset:o,...a})=>{let s=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=r(i,{...a,gain:o}),l=s.getChannelData(0);l[0]=1,l[1]=1,c.buffer=s,c.loop=!0;let d={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(p){u.channelCount=p},get channelCountMode(){return u.channelCountMode},set channelCountMode(p){u.channelCountMode=p},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(p){u.channelInterpretation=p},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(u),m=()=>c.disconnect(u);return t(i,c),n(ki(d,u),f,m)};var OL=(t,e)=>(r,n)=>{let i=r.createConvolver();if(Je(i,n),n.disableNormalization===i.normalize&&(i.normalize=!n.disableNormalization),at(i,n,"buffer"),n.channelCount>2||(e(i,"channelCount",o=>()=>o.call(i),o=>a=>{if(a>2)throw t();return o.call(i,a)}),n.channelCountMode==="max"))throw t();return e(i,"channelCountMode",o=>()=>o.call(i),o=>a=>{if(a==="max")throw t();return o.call(i,a)}),i};var YT=(t,e)=>{let r=t.createDelay(e.maxDelayTime);return Je(r,e),lt(r,e,"delayTime"),r};var IL=t=>(e,r)=>{let n=e.createDynamicsCompressor();if(Je(n,r),r.channelCount>2||r.channelCountMode==="max")throw t();return lt(n,r,"attack"),lt(n,r,"knee"),lt(n,r,"ratio"),lt(n,r,"release"),lt(n,r,"threshold"),n};var ln=(t,e)=>{let r=t.createGain();return Je(r,e),lt(r,e,"gain"),r};var NL=t=>(e,r,n)=>{if(e.createIIRFilter===void 0)return t(e,r,n);let i=e.createIIRFilter(n.feedforward,n.feedback);return Je(i,n),i};function WJ(t,e){let r=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/r,(t[1]*e[0]-t[0]*e[1])/r]}function YJ(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function CL(t,e){let r=[0,0];for(let n=t.length-1;n>=0;n-=1)r=YJ(r,e),r[0]+=t[n];return r}var kL=(t,e,r,n)=>(i,o,{channelCount:a,channelCountMode:s,channelInterpretation:c,feedback:u,feedforward:l})=>{let d=$v(o,i.sampleRate),f=u instanceof Float64Array?u:new Float64Array(u),m=l instanceof Float64Array?l:new Float64Array(l),p=f.length,b=m.length,y=Math.min(p,b);if(p===0||p>20)throw n();if(f[0]===0)throw e();if(b===0||b>20)throw n();if(m[0]===0)throw e();if(f[0]!==1){for(let g=0;g<b;g+=1)m[g]/=f[0];for(let g=1;g<p;g+=1)f[g]/=f[0]}let h=r(i,d,a,a);h.channelCount=a,h.channelCountMode=s,h.channelInterpretation=c;let _=32,v=[],x=[],w=[];for(let g=0;g<a;g+=1){v.push(0);let I=new Float32Array(_),N=new Float32Array(_);I.fill(0),N.fill(0),x.push(I),w.push(N)}h.onaudioprocess=g=>{let I=g.inputBuffer,N=g.outputBuffer,C=I.numberOfChannels;for(let R=0;R<C;R+=1){let z=I.getChannelData(R),j=N.getChannelData(R);v[R]=kv(f,p,m,b,y,x[R],w[R],v[R],_,z,j)}};let E=i.sampleRate/2;return ki({get bufferSize(){return d},get channelCount(){return h.channelCount},set channelCount(g){h.channelCount=g},get channelCountMode(){return h.channelCountMode},set channelCountMode(g){h.channelCountMode=g},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(g){h.channelInterpretation=g},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},addEventListener(...g){return h.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return h.dispatchEvent(g[0])},getFrequencyResponse(g,I,N){if(g.length!==I.length||I.length!==N.length)throw t();let C=g.length;for(let R=0;R<C;R+=1){let z=-Math.PI*(g[R]/E),j=[Math.cos(z),Math.sin(z)],L=CL(m,j),k=CL(f,j),U=WJ(L,k);I[R]=Math.sqrt(U[0]*U[0]+U[1]*U[1]),N[R]=Math.atan2(U[1],U[0])}},removeEventListener(...g){return h.removeEventListener(g[0],g[1],g[2])}},h)};var $L=(t,e)=>t.createMediaElementSource(e.mediaElement);var RL=(t,e)=>{let r=t.createMediaStreamDestination();return Je(r,e),r.numberOfOutputs===1&&Object.defineProperty(r,"numberOfOutputs",{get:()=>0}),r};var PL=(t,{mediaStream:e})=>{let r=e.getAudioTracks();r.sort((o,a)=>o.id<a.id?-1:o.id>a.id?1:0);let n=r.slice(0,1),i=t.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(i,"mediaStream",{value:e}),i};var ML=(t,e)=>(r,{mediaStreamTrack:n})=>{if(typeof r.createMediaStreamTrackSource=="function")return r.createMediaStreamTrackSource(n);let i=new MediaStream([n]),o=r.createMediaStreamSource(i);if(n.kind!=="audio")throw t();if(e(r))throw new TypeError;return o};var zL=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null;var DL=(t,e,r,n,i,o)=>(a,s)=>{let c=a.createOscillator();return Je(c,s),lt(c,s,"detune"),lt(c,s,"frequency"),s.periodicWave!==void 0?c.setPeriodicWave(s.periodicWave):at(c,s,"type"),e(r,()=>r(a))||Tf(c),e(n,()=>n(a))||o(c,a),e(i,()=>i(a))||Ef(c),t(a,c),c};var LL=t=>(e,r)=>{let n=e.createPanner();return n.orientationX===void 0?t(e,r):(Je(n,r),lt(n,r,"orientationX"),lt(n,r,"orientationY"),lt(n,r,"orientationZ"),lt(n,r,"positionX"),lt(n,r,"positionY"),lt(n,r,"positionZ"),at(n,r,"coneInnerAngle"),at(n,r,"coneOuterAngle"),at(n,r,"coneOuterGain"),at(n,r,"distanceModel"),at(n,r,"maxDistance"),at(n,r,"panningModel"),at(n,r,"refDistance"),at(n,r,"rolloffFactor"),n)};var UL=(t,e,r,n,i,o,a,s,c,u)=>(l,{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:m,distanceModel:p,maxDistance:b,orientationX:y,orientationY:h,orientationZ:_,panningModel:v,positionX:x,positionY:w,positionZ:E,refDistance:S,rolloffFactor:g,...I})=>{let N=l.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw a();Je(N,I);let C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},R=r(l,{...C,channelInterpretation:"speakers",numberOfInputs:6}),z=n(l,{...I,gain:1}),j=n(l,{...C,gain:1}),L=n(l,{...C,gain:0}),k=n(l,{...C,gain:0}),U=n(l,{...C,gain:0}),J=n(l,{...C,gain:0}),H=n(l,{...C,gain:0}),V=i(l,256,6,1),_e=o(l,{...C,curve:new Float32Array([1,1]),oversample:"none"}),Fe=[y,h,_],Lt=[x,w,E],qt=new Float32Array(1);V.onaudioprocess=({inputBuffer:M})=>{let $=[c(M,qt,0),c(M,qt,1),c(M,qt,2)];$.some((qe,Ve)=>qe!==Fe[Ve])&&(N.setOrientation(...$),Fe=$);let Ae=[c(M,qt,3),c(M,qt,4),c(M,qt,5)];Ae.some((qe,Ve)=>qe!==Lt[Ve])&&(N.setPosition(...Ae),Lt=Ae)},Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0});let Se={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(M){if(M>2)throw a();z.channelCount=M,N.channelCount=M},get channelCountMode(){return N.channelCountMode},set channelCountMode(M){if(M==="max")throw a();z.channelCountMode=M,N.channelCountMode=M},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(M){z.channelInterpretation=M,N.channelInterpretation=M},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(M){N.coneInnerAngle=M},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(M){N.coneOuterAngle=M},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(M){if(M<0||M>1)throw e();N.coneOuterGain=M},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(M){N.distanceModel=M},get inputs(){return[z]},get maxDistance(){return N.maxDistance},set maxDistance(M){if(M<0)throw new RangeError;N.maxDistance=M},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return L.gain},get orientationZ(){return k.gain},get panningModel(){return N.panningModel},set panningModel(M){N.panningModel=M},get positionX(){return U.gain},get positionY(){return J.gain},get positionZ(){return H.gain},get refDistance(){return N.refDistance},set refDistance(M){if(M<0)throw new RangeError;N.refDistance=M},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(M){if(M<0)throw new RangeError;N.rolloffFactor=M},addEventListener(...M){return z.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return z.dispatchEvent(M[0])},removeEventListener(...M){return z.removeEventListener(M[0],M[1],M[2])}};d!==Se.coneInnerAngle&&(Se.coneInnerAngle=d),f!==Se.coneOuterAngle&&(Se.coneOuterAngle=f),m!==Se.coneOuterGain&&(Se.coneOuterGain=m),p!==Se.distanceModel&&(Se.distanceModel=p),b!==Se.maxDistance&&(Se.maxDistance=b),y!==Se.orientationX.value&&(Se.orientationX.value=y),h!==Se.orientationY.value&&(Se.orientationY.value=h),_!==Se.orientationZ.value&&(Se.orientationZ.value=_),v!==Se.panningModel&&(Se.panningModel=v),x!==Se.positionX.value&&(Se.positionX.value=x),w!==Se.positionY.value&&(Se.positionY.value=w),E!==Se.positionZ.value&&(Se.positionZ.value=E),S!==Se.refDistance&&(Se.refDistance=S),g!==Se.rolloffFactor&&(Se.rolloffFactor=g),(Fe[0]!==1||Fe[1]!==0||Fe[2]!==0)&&N.setOrientation(...Fe),(Lt[0]!==0||Lt[1]!==0||Lt[2]!==0)&&N.setPosition(...Lt);let O=()=>{z.connect(N),t(z,_e,0,0),_e.connect(j).connect(R,0,0),_e.connect(L).connect(R,0,1),_e.connect(k).connect(R,0,2),_e.connect(U).connect(R,0,3),_e.connect(J).connect(R,0,4),_e.connect(H).connect(R,0,5),R.connect(V).connect(l.destination)},T=()=>{z.disconnect(N),s(z,_e,0,0),_e.disconnect(j),j.disconnect(R),_e.disconnect(L),L.disconnect(R),_e.disconnect(k),k.disconnect(R),_e.disconnect(U),U.disconnect(R),_e.disconnect(J),J.disconnect(R),_e.disconnect(H),H.disconnect(R),R.disconnect(V),V.disconnect(l.destination)};return u(ki(Se,N),O,T)};var jL=t=>(e,{disableNormalization:r,imag:n,real:i})=>{let o=n instanceof Float32Array?n:new Float32Array(n),a=i instanceof Float32Array?i:new Float32Array(i),s=e.createPeriodicWave(a,o,{disableNormalization:r});if(Array.from(n).length<2)throw t();return s};var If=(t,e,r,n)=>t.createScriptProcessor(e,r,n);var FL=(t,e)=>(r,n)=>{let i=n.channelCountMode;if(i==="clamped-max")throw e();if(r.createStereoPanner===void 0)return t(r,n);let o=r.createStereoPanner();return Je(o,n),lt(o,n,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:a=>{if(a!==i)throw e()}}),o};var BL=(t,e,r,n,i,o)=>{let s=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},d=(p,b,y,h)=>{let _=new Float32Array(16385),v=new Float32Array(16385);for(let I=0;I<16385;I+=1){let N=I/16384*c;_[I]=Math.cos(N),v[I]=Math.sin(N)}let x=r(p,{...u,gain:0}),w=n(p,{...l,curve:_}),E=n(p,{...l,curve:s}),S=r(p,{...u,gain:0}),g=n(p,{...l,curve:v});return{connectGraph(){b.connect(x),b.connect(E.inputs===void 0?E:E.inputs[0]),b.connect(S),E.connect(y),y.connect(w.inputs===void 0?w:w.inputs[0]),y.connect(g.inputs===void 0?g:g.inputs[0]),w.connect(x.gain),g.connect(S.gain),x.connect(h,0,0),S.connect(h,0,1)},disconnectGraph(){b.disconnect(x),b.disconnect(E.inputs===void 0?E:E.inputs[0]),b.disconnect(S),E.disconnect(y),y.disconnect(w.inputs===void 0?w:w.inputs[0]),y.disconnect(g.inputs===void 0?g:g.inputs[0]),w.disconnect(x.gain),g.disconnect(S.gain),x.disconnect(h,0,0),S.disconnect(h,0,1)}}},f=(p,b,y,h)=>{let _=new Float32Array(16385),v=new Float32Array(16385),x=new Float32Array(16385),w=new Float32Array(16385),E=Math.floor(16385/2);for(let U=0;U<16385;U+=1)if(U>E){let J=(U-E)/(16384-E)*c;_[U]=Math.cos(J),v[U]=Math.sin(J),x[U]=0,w[U]=1}else{let J=U/(16384-E)*c;_[U]=1,v[U]=0,x[U]=Math.cos(J),w[U]=Math.sin(J)}let S=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),g=r(p,{...u,gain:0}),I=n(p,{...l,curve:_}),N=r(p,{...u,gain:0}),C=n(p,{...l,curve:v}),R=n(p,{...l,curve:s}),z=r(p,{...u,gain:0}),j=n(p,{...l,curve:x}),L=r(p,{...u,gain:0}),k=n(p,{...l,curve:w});return{connectGraph(){b.connect(S),b.connect(R.inputs===void 0?R:R.inputs[0]),S.connect(g,0),S.connect(N,0),S.connect(z,1),S.connect(L,1),R.connect(y),y.connect(I.inputs===void 0?I:I.inputs[0]),y.connect(C.inputs===void 0?C:C.inputs[0]),y.connect(j.inputs===void 0?j:j.inputs[0]),y.connect(k.inputs===void 0?k:k.inputs[0]),I.connect(g.gain),C.connect(N.gain),j.connect(z.gain),k.connect(L.gain),g.connect(h,0,0),z.connect(h,0,0),N.connect(h,0,1),L.connect(h,0,1)},disconnectGraph(){b.disconnect(S),b.disconnect(R.inputs===void 0?R:R.inputs[0]),S.disconnect(g,0),S.disconnect(N,0),S.disconnect(z,1),S.disconnect(L,1),R.disconnect(y),y.disconnect(I.inputs===void 0?I:I.inputs[0]),y.disconnect(C.inputs===void 0?C:C.inputs[0]),y.disconnect(j.inputs===void 0?j:j.inputs[0]),y.disconnect(k.inputs===void 0?k:k.inputs[0]),I.disconnect(g.gain),C.disconnect(N.gain),j.disconnect(z.gain),k.disconnect(L.gain),g.disconnect(h,0,0),z.disconnect(h,0,0),N.disconnect(h,0,1),L.disconnect(h,0,1)}}},m=(p,b,y,h,_)=>{if(b===1)return d(p,y,h,_);if(b===2)return f(p,y,h,_);throw i()};return(p,{channelCount:b,channelCountMode:y,pan:h,..._})=>{if(y==="max")throw i();let v=t(p,{..._,channelCount:1,channelCountMode:y,numberOfInputs:2}),x=r(p,{..._,channelCount:b,channelCountMode:y,gain:1}),w=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:h}),{connectGraph:E,disconnectGraph:S}=m(p,b,x,w,v);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});let g={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(R){x.channelCount!==R&&(I&&S(),{connectGraph:E,disconnectGraph:S}=m(p,R,x,w,v),I&&E()),x.channelCount=R},get channelCountMode(){return x.channelCountMode},set channelCountMode(R){if(R==="clamped-max"||R==="max")throw i();x.channelCountMode=R},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(R){x.channelInterpretation=R},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return w.gain},addEventListener(...R){return x.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return x.dispatchEvent(R[0])},removeEventListener(...R){return x.removeEventListener(R[0],R[1],R[2])}},I=!1,N=()=>{E(),I=!0},C=()=>{S(),I=!1};return o(ki(g,v),N,C)}};var ZL=(t,e,r,n,i,o,a)=>(s,c)=>{let u=s.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&s.createGain().gain.automationRate===void 0)return r(s,c);Je(u,c);let l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw e();at(u,{curve:l},"curve"),at(u,c,"oversample");let d=null,f=!1;return a(u,"curve",b=>()=>b.call(u),b=>y=>(b.call(u,y),f&&(n(y)&&d===null?d=t(s,u):!n(y)&&d!==null&&(d(),d=null)),y)),i(u,()=>{f=!0,n(u.curve)&&(d=t(s,u))},()=>{f=!1,d!==null&&(d(),d=null)})};var VL=(t,e,r,n,i)=>(o,{curve:a,oversample:s,...c})=>{let u=o.createWaveShaper(),l=o.createWaveShaper();Je(u,c),Je(l,c);let d=r(o,{...c,gain:1}),f=r(o,{...c,gain:-1}),m=r(o,{...c,gain:1}),p=r(o,{...c,gain:-1}),b=null,y=!1,h=null,_={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(w){d.channelCount=w,f.channelCount=w,u.channelCount=w,m.channelCount=w,l.channelCount=w,p.channelCount=w},get channelCountMode(){return u.channelCountMode},set channelCountMode(w){d.channelCountMode=w,f.channelCountMode=w,u.channelCountMode=w,m.channelCountMode=w,l.channelCountMode=w,p.channelCountMode=w},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(w){d.channelInterpretation=w,f.channelInterpretation=w,u.channelInterpretation=w,m.channelInterpretation=w,l.channelInterpretation=w,p.channelInterpretation=w},get context(){return u.context},get curve(){return h},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)u.curve=w,l.curve=w;else{let E=w.length,S=new Float32Array(E+2-E%2),g=new Float32Array(E+2-E%2);S[0]=w[0],g[0]=-w[E-1];let I=Math.ceil((E+1)/2),N=(E+1)/2-1;for(let C=1;C<I;C+=1){let R=C/I*N,z=Math.floor(R),j=Math.ceil(R);S[C]=z===j?w[z]:(1-(R-z))*w[z]+(1-(j-R))*w[j],g[C]=z===j?-w[E-1-z]:-((1-(R-z))*w[E-1-z])-(1-(j-R))*w[E-1-j]}S[I]=E%2===1?w[I-1]:(w[I-2]+w[I-1])/2,u.curve=S,l.curve=g}h=w,y&&(n(h)&&b===null?b=t(o,d):b!==null&&(b(),b=null))},get inputs(){return[d]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(w){u.oversample=w,l.oversample=w},addEventListener(...w){return d.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return d.dispatchEvent(w[0])},removeEventListener(...w){return d.removeEventListener(w[0],w[1],w[2])}};a!==null&&(_.curve=a instanceof Float32Array?a:new Float32Array(a)),s!==_.oversample&&(_.oversample=s);let v=()=>{d.connect(u).connect(m),d.connect(f).connect(l).connect(p).connect(m),y=!0,n(h)&&(b=t(o,d))},x=()=>{d.disconnect(u),u.disconnect(m),d.disconnect(f),f.disconnect(l),l.disconnect(p),p.disconnect(m),y=!1,b!==null&&(b(),b=null)};return i(ki(_,m),v,x)};var Ur=()=>new DOMException("","NotSupportedError");var XJ={numberOfChannels:1},qL=(t,e,r,n,i)=>class extends t{constructor(a,s,c){let u;if(typeof a=="number"&&s!==void 0&&c!==void 0)u={length:s,numberOfChannels:a,sampleRate:c};else if(typeof a=="object")u=a;else throw new Error("The given parameters are not valid.");let{length:l,numberOfChannels:d,sampleRate:f}={...XJ,...u},m=n(d,l,f);e(ro,()=>ro(m))||m.addEventListener("statechange",(()=>{let p=0,b=y=>{this._state==="running"&&(p>0?(m.removeEventListener("statechange",b),y.stopImmediatePropagation(),this._waitForThePromiseToSettle(y)):p+=1)};return b})()),super(m,d),this._length=l,this._nativeOfflineAudioContext=m,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(r()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Xs(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}};var QJ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},GL=(t,e,r,n,i,o,a)=>class extends t{constructor(c,u){let l=i(c),d={...QJ,...u},f=r(l,d),m=o(l),p=m?n():null,b=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,m,f.detune,153600,-153600),this._frequency=e(this,m,f.frequency,b,-b),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?a(this,c):null;this._nativeOscillatorNode.onended=u;let l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){eo(this);let u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),cn(this)&&Mo(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}};var HL=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=null,s=null,c=null,u=async(l,d)=>{let f=r(l),m=ot(f,d);if(!m){let p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:a===null?void 0:a,type:f.type};f=e(d,p),s!==null&&f.start(s),c!==null&&f.stop(c)}return o.set(d,f),m?(await t(d,l.detune,f.detune),await t(d,l.frequency,f.frequency)):(await n(d,l.detune,f.detune),await n(d,l.frequency,f.frequency)),await i(l,d,f),f};return{set periodicWave(l){a=l},set start(l){s=l},set stop(l){c=l},render(l,d){let f=o.get(d);return f!==void 0?Promise.resolve(f):u(l,d)}}};var eW={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},KL=(t,e,r,n,i,o,a)=>class extends t{constructor(c,u){let l=i(c),d={...eW,...u},f=r(l,d),m=o(l),p=m?n():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,m,f.orientationX,Xt,ar),this._orientationY=e(this,m,f.orientationY,Xt,ar),this._orientationZ=e(this,m,f.orientationZ,Xt,ar),this._positionX=e(this,m,f.positionX,Xt,ar),this._positionY=e(this,m,f.positionY,Xt,ar),this._positionZ=e(this,m,f.positionZ,Xt,ar),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}};var JL=(t,e,r,n,i,o,a,s,c,u)=>()=>{let l=new WeakMap,d=null,f=async(m,p)=>{let b=null,y=o(m),h={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation},_={...h,coneInnerAngle:y.coneInnerAngle,coneOuterAngle:y.coneOuterAngle,coneOuterGain:y.coneOuterGain,distanceModel:y.distanceModel,maxDistance:y.maxDistance,panningModel:y.panningModel,refDistance:y.refDistance,rolloffFactor:y.rolloffFactor},v=ot(y,p);if("bufferSize"in y)b=n(p,{...h,gain:1});else if(!v){let x={..._,orientationX:y.orientationX.value,orientationY:y.orientationY.value,orientationZ:y.orientationZ.value,positionX:y.positionX.value,positionY:y.positionY.value,positionZ:y.positionZ.value};y=i(p,x)}if(l.set(p,b===null?y:b),b!==null){if(d===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");let C=new a(6,m.context.length,p.sampleRate),R=e(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});R.connect(C.destination),d=(async()=>{let z=await Promise.all([m.orientationX,m.orientationY,m.orientationZ,m.positionX,m.positionY,m.positionZ].map(async(j,L)=>{let k=r(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:L===0?1:0});return await s(C,j,k.offset),k}));for(let j=0;j<6;j+=1)z[j].connect(R,0,j),z[j].start(0);return u(C)})()}let x=await d,w=n(p,{...h,gain:1});await c(m,p,w);let E=[];for(let C=0;C<x.numberOfChannels;C+=1)E.push(x.getChannelData(C));let S=[E[0][0],E[1][0],E[2][0]],g=[E[3][0],E[4][0],E[5][0]],I=n(p,{...h,gain:1}),N=i(p,{..._,orientationX:S[0],orientationY:S[1],orientationZ:S[2],positionX:g[0],positionY:g[1],positionZ:g[2]});w.connect(I).connect(N.inputs[0]),N.connect(b);for(let C=128;C<x.length;C+=128){let R=[E[0][C],E[1][C],E[2][C]],z=[E[3][C],E[4][C],E[5][C]];if(R.some((j,L)=>j!==S[L])||z.some((j,L)=>j!==g[L])){S=R,g=z;let j=C/p.sampleRate;I.gain.setValueAtTime(0,j),I=n(p,{...h,gain:0}),N=i(p,{..._,orientationX:S[0],orientationY:S[1],orientationZ:S[2],positionX:g[0],positionY:g[1],positionZ:g[2]}),I.gain.setValueAtTime(1,j),w.connect(I).connect(N.inputs[0]),N.connect(b)}}return b}return v?(await t(p,m.orientationX,y.orientationX),await t(p,m.orientationY,y.orientationY),await t(p,m.orientationZ,y.orientationZ),await t(p,m.positionX,y.positionX),await t(p,m.positionY,y.positionY),await t(p,m.positionZ,y.positionZ)):(await s(p,m.orientationX,y.orientationX),await s(p,m.orientationY,y.orientationY),await s(p,m.orientationZ,y.orientationZ),await s(p,m.positionX,y.positionX),await s(p,m.positionY,y.positionY),await s(p,m.positionZ,y.positionZ)),Ci(y)?await c(m,p,y.inputs[0]):await c(m,p,y),y};return{render(m,p){let b=l.get(p);return b!==void 0?Promise.resolve(b):f(m,p)}}};var tW={disableNormalization:!1},WL=(t,e,r,n)=>class YL{constructor(o,a){let s=e(o),c=n({...tW,...a}),u=t(s,c);return r.add(u),u}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===YL.prototype||r.has(o)}};var XL=(t,e)=>(r,n,i)=>(t(n).replay(i),e(n,r,i));var QL=(t,e,r)=>async(n,i,o)=>{let a=t(n);await Promise.all(a.activeInputs.map((s,c)=>Array.from(s).map(async([u,l])=>{let f=await e(u).render(u,i),m=n.context.destination;!r(u)&&(n!==m||!r(n))&&f.connect(o,l,c)})).reduce((s,c)=>[...s,...c],[]))};var eU=(t,e,r)=>async(n,i,o)=>{let a=e(n);await Promise.all(Array.from(a.activeInputs).map(async([s,c])=>{let l=await t(s).render(s,i);r(s)||l.connect(o,c)}))};var tU=(t,e,r,n)=>i=>t(ro,()=>ro(i))?Promise.resolve(t(n,n)).then(o=>{if(!o){let a=r(i,512,0,1);i.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>i.currentTime,a.connect(i.destination)}return i.startRendering()}):new Promise(o=>{let a=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=s=>{a.disconnect(),o(s.renderedBuffer)},a.connect(i.destination),i.startRendering()});var rU=t=>(e,r)=>{t.set(e,r)};var nU=t=>(e,r)=>t.set(e,r);var iU=(t,e,r,n,i,o,a,s)=>(c,u)=>r(c).render(c,u).then(()=>Promise.all(Array.from(n(u)).map(l=>r(l).render(l,u)))).then(()=>i(u)).then(l=>(typeof l.copyFromChannel!="function"?(a(l),yf(l)):e(o,()=>o(l))||s(l),t.add(l),l));var rW={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},oU=(t,e,r,n,i,o)=>class extends t{constructor(s,c){let u=i(s),l={...rW,...c},d=r(u,l),f=o(u),m=f?n():null;super(s,!1,d,m),this._pan=e(this,f,d.pan)}get pan(){return this._pan}};var aU=(t,e,r,n,i)=>()=>{let o=new WeakMap,a=async(s,c)=>{let u=r(s),l=ot(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(c,d)}return o.set(c,u),l?await t(c,s.pan,u.pan):await n(c,s.pan,u.pan),Ci(u)?await i(s,c,u.inputs[0]):await i(s,c,u),u};return{render(s,c){let u=o.get(c);return u!==void 0?Promise.resolve(u):a(s,c)}}};var sU=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch(e){return!1}return!0};var uU=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;let r=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),i=URL.createObjectURL(r),o=!1,a=!1;try{await n.audioWorklet.addModule(i);let s=new t(n,"a",{numberOfOutputs:0}),c=n.createOscillator();s.port.onmessage=()=>o=!0,s.onprocessorerror=()=>a=!0,c.connect(s),c.start(0),await n.startRendering(),await new Promise(u=>setTimeout(u))}catch(s){}finally{URL.revokeObjectURL(i)}return o&&!a};var cU=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);let r=new e(1,1,44100),n=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{r.oncomplete=()=>{n.disconnect(),i(r.currentTime!==0)},r.startRendering()})};var XT=()=>new DOMException("","UnknownError");var nW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},lU=(t,e,r,n,i,o,a)=>class extends t{constructor(c,u){let l=i(c),d={...nW,...u},f=r(l,d),p=o(l)?n():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}};var dU=(t,e,r)=>()=>{let n=new WeakMap,i=async(o,a)=>{let s=e(o);if(!ot(s,a)){let u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample};s=t(a,u)}return n.set(a,s),Ci(s)?await r(o,a,s.inputs[0]):await r(o,a,s),s};return{render(o,a){let s=n.get(a);return s!==void 0?Promise.resolve(s):i(o,a)}}};var fU=()=>typeof window=="undefined"?null:window;var mU=(t,e)=>r=>{r.copyFromChannel=(n,i,o=0)=>{let a=t(o),s=t(i);if(s>=r.numberOfChannels)throw e();let c=r.length,u=r.getChannelData(s),l=n.length;for(let d=a<0?-a:0;d+a<c&&d<l;d+=1)n[d]=u[d+a]},r.copyToChannel=(n,i,o=0)=>{let a=t(o),s=t(i);if(s>=r.numberOfChannels)throw e();let c=r.length,u=r.getChannelData(s),l=n.length;for(let d=a<0?-a:0;d+a<c&&d<l;d+=1)u[d+a]=n[d]}};var pU=t=>e=>{e.copyFromChannel=(r=>(n,i,o=0)=>{let a=t(o),s=t(i);if(a<e.length)return r.call(e,n,s,a)})(e.copyFromChannel),e.copyToChannel=(r=>(n,i,o=0)=>{let a=t(o),s=t(i);if(a<e.length)return r.call(e,n,s,a)})(e.copyToChannel)};var hU=t=>(e,r)=>{let n=r.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),t(e,"buffer",i=>()=>{let o=i.call(e);return o===n?null:o},i=>o=>i.call(e,o===null?n:o))};var gU=(t,e)=>(r,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let i=r.createBufferSource();e(n,()=>{let s=n.numberOfInputs;for(let c=0;c<s;c+=1)i.connect(n,0,c)},()=>i.disconnect(n))};var QT=(t,e,r)=>t.copyFromChannel===void 0?t.getChannelData(r)[0]:(t.copyFromChannel(e,r),e[0]);var eE=t=>{if(t===null)return!1;let e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0};var Nf=(t,e,r,n)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);let{get:o,set:a}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:r(o),set:n(a)})};var yU=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)});var _U=t=>({...t,channelCount:t.numberOfOutputs});var vU=t=>{let{imag:e,real:r}=t;return e===void 0?r===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(r,()=>0),real:r}:r===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:r}};var tE=(t,e,r)=>{try{t.setValueAtTime(e,r)}catch(n){if(n.code!==9)throw n;tE(t,e,r+1e-7)}};var bU=t=>{let e=t.createBufferSource();e.start();try{e.start()}catch(r){return!0}return!1};var xU=t=>{let e=t.createBufferSource(),r=t.createBuffer(1,1,44100);e.buffer=r;try{e.start(0,1)}catch(n){return!1}return!0};var wU=t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch(r){return!1}return!0};var Rv=t=>{let e=t.createOscillator();try{e.start(-1)}catch(r){return r instanceof RangeError}return!1};var rE=t=>{let e=t.createBuffer(1,1,44100),r=t.createBufferSource();r.buffer=e,r.start(),r.stop();try{return r.stop(),!0}catch(n){return!1}};var Pv=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(r){return r instanceof RangeError}return!1};var SU=t=>{let{port1:e,port2:r}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),r.close()}};var AU=t=>{t.start=(e=>(r=0,n=0,i)=>{let o=t.buffer,a=o===null?n:Math.min(o.duration,n);o!==null&&a>o.duration-.5/t.context.sampleRate?e.call(t,r,0,0):e.call(t,r,a,i)})(t.start)};var nE=(t,e)=>{let r=e.createGain();t.connect(r);let n=(i=>()=>{i.call(t,r),t.removeEventListener("ended",n)})(t.disconnect);t.addEventListener("ended",n),ki(t,r),t.stop=(i=>{let o=!1;return(a=0)=>{if(o)try{i.call(t,a)}catch(s){r.gain.setValueAtTime(0,a)}else i.call(t,a),o=!0}})(t.stop)};var Nc=(t,e)=>r=>{let n={value:t};return Object.defineProperties(r,{currentTarget:n,target:n}),typeof e=="function"?e.call(t,r):e.handleEvent.call(t,r)};var iW=mD(to),oW=SD(to),aW=v4(Ws),EU=new WeakMap,sW=M4(EU),$i=e4(new Map,new WeakMap),zo=fU(),OU=lL($i,Ni),iE=P4(wr),jr=QL(wr,iE,Pa),uW=OD(OU,_t,jr),Nt=L4(hf),Ma=zL(zo),vt=Q4(Ma),IU=new WeakMap,NU=I4(Nc),Cf=pL(zo),oE=J4(Cf),aE=W4(zo),CU=Y4(zo),mh=gL(zo),sr=VD(pD(xv),wD(iW,oW,_f,aW,vf,wr,sW,Po,_t,to,cn,Pa,bf),$i,V4(ch,vf,wr,_t,Oc,cn),Ni,Af,Ur,g4(_f,ch,wr,_t,Oc,Nt,cn,vt),w4(IU,wr,pr),NU,Nt,oE,aE,CU,vt,mh),cW=ED(sr,uW,Ni,OU,Nt,vt);var sE=new WeakSet,TU=dL(zo),kU=l4(new Uint32Array(1)),uE=mU(kU,Ni),cE=pU(kU),lW=ID(sE,$i,Ur,TU,Ma,sU(TU),uE,cE);var Mv=AD(ln),$U=eU(iE,Ys,Pa),Do=o4($U),kf=mL(Mv,$i,bU,xU,wU,Rv,rE,Pv,AU,hU(Nf),nE),Lo=XL(z4(Ys),$U),dW=kD(Do,kf,_t,Lo,jr),no=GD(hD(wv),IU,uh,HD,Rn.createCancelAndHoldAutomationEvent,Rn.createCancelScheduledValuesAutomationEvent,Rn.createExponentialRampToValueAutomationEvent,Rn.createLinearRampToValueAutomationEvent,Rn.createSetTargetAutomationEvent,Rn.createSetValueAutomationEvent,Rn.createSetValueCurveAutomationEvent,Cf,tE),fW=CD(sr,dW,no,Ft,kf,Nt,vt,Nc);var mW=UD(sr,jD,Ni,Ft,hL(ln,Nf),Nt,vt,jr),pW=QD(Do,WT,_t,Lo,jr),Cc=nU(EU),hW=XD(sr,no,pW,Af,WT,Nt,vt,Cc),eu=uL(to,aE),gW=gU(Ft,eu),tu=SL(Cf,gW),yW=r4(tu,_t,jr),_W=t4(sr,yW,tu,Nt,vt),vW=i4(Of,_t,jr),bW=n4(sr,vW,Of,Nt,vt,_U),xW=EL(Mv,kf,ln,eu),$f=TL(Mv,$i,xW,Rv,Pv),wW=c4(Do,$f,_t,Lo,jr),SW=u4(sr,no,wW,$f,Nt,vt,Nc),RU=OL(Ur,Nf),AW=f4(RU,_t,jr),TW=d4(sr,AW,RU,Nt,vt,Cc),EW=_4(Do,YT,_t,Lo,jr),OW=y4(sr,no,EW,YT,Nt,vt,Cc),PU=IL(Ur),IW=T4(Do,PU,_t,Lo,jr),NW=A4(sr,no,IW,PU,Ur,Nt,vt,Cc),CW=$4(Do,ln,_t,Lo,jr),kW=k4(sr,no,CW,ln,Nt,vt),$W=kL(Af,Ft,If,Ur),zv=tU($i,ln,If,cU(ln,Ma)),RW=Z4(kf,_t,Ma,jr,zv),PW=NL($W),MW=B4(sr,PW,RW,Nt,vt,Cc),zW=FD(no,tu,$f,If,Ur,QT,vt,Nf),MU=new WeakMap,lE=aL(mW,zW,NU,vt,MU,Nc),zU=DL(Mv,$i,Rv,rE,Pv,nE),DW=HL(Do,zU,_t,Lo,jr),LW=GL(sr,no,zU,DW,Nt,vt,Nc),DU=s4(kf),UW=VL(DU,Ft,ln,eE,eu),Dv=ZL(DU,Ft,UW,eE,eu,Cf,Nf),jW=UL(_f,Ft,tu,ln,If,Dv,Ur,vf,QT,eu),LU=LL(jW),FW=JL(Do,tu,$f,ln,LU,_t,Ma,Lo,jr,zv),BW=KL(sr,no,LU,FW,Nt,vt,Cc),ZW=jL(Ni),VW=WL(ZW,Nt,new WeakSet,vU),qW=BL(tu,Of,ln,Dv,Ur,eu),UU=FL(qW,Ur),GW=aU(Do,UU,_t,Lo,jr),HW=oU(sr,no,UU,GW,Nt,vt),KW=dU(Dv,_t,jr),JW=lU(sr,Ft,Dv,KW,Nt,vt,Cc),jU=eL(zo),dE=N4(zo),FU=new WeakMap,WW=U4(FU,Ma),YW=jU?xD($i,Ur,O4(zo),dE,C4(fD),Nt,WW,vt,mh,new WeakMap,new WeakMap,uU(mh,Ma),zo):void 0,XW=X4(oE,vt),QW=h4(sE,$i,p4,E4,new WeakSet,Nt,XW,gf,ro,uE,cE),BU=YD(YW,cW,lW,fW,hW,_W,bW,SW,TW,QW,OW,NW,kW,MW,lE,LW,BW,VW,HW,JW),eY=tL(sr,$L,Nt,vt),tY=rL(sr,RL,Nt,vt),rY=nL(sr,PL,Nt,vt),nY=ML(Ft,vt),iY=iL(sr,nY,Nt),ZU=LD(BU,Ft,Ur,XT,eY,tY,rY,iY,Cf);var fE=j4(MU),oY=TD(fE),VU=a4(Ni),aY=b4(fE),qU=S4(Ni),GU=new WeakMap,sY=R4(GU,pr),uY=wL(VU,Ni,Ft,tu,Of,$f,ln,If,Ur,qU,dE,sY,eu),cY=_L(Ft,uY,ln,Ur,eu),lY=WD(Do,VU,kf,tu,Of,$f,ln,aY,qU,dE,_t,mh,Ma,Lo,jr,zv),dY=D4(FU),fY=rU(GU),VDe=jU?KD(oY,sr,no,lY,cY,wr,dY,Nt,vt,mh,yU,fY,SU,Nc):void 0;var qDe=oL(Ft,Ur,XT,lE,Cf);var HU=m4(Ur,Ma),KU=iU(sE,$i,iE,fE,zv,gf,uE,cE),GDe=sL($i,Ft,HU,lE,KU);var HDe=qL(BU,$i,Ft,HU,KU);var KDe=q4(hf,oE),JDe=G4(pf,aE),WDe=H4(uh,CU),YDe=K4(hf,vt);async function mE(t,e){try{let r=new ZU,n;try{n=await r.decodeAudioData(t)}catch(c){return console.warn("decodeAudioData failed (possibly iOS/WebKit length limit?). Falling back to returning original file buffer.",c),[await zs(t,JU(0,"webm"))]}let i=mY(r,n),o=Math.floor(e/4),a=Math.ceil(i.length/o),s=[];for(let c=0;c<a;c++){let u=c*o,l=Math.min((c+1)*o,i.length),d=r.createBuffer(1,l-u,i.sampleRate),f=d.getChannelData(0),m=i.getChannelData(0);f.set(m.slice(u,l));let p=pY(d),b=await zs(p,JU(c,"wav"));s.push(b)}return s}catch(r){throw console.error("Error in audioDataToChunkedFiles:",r),r}}function mY(t,e){let r=e.numberOfChannels;if(r===1)return e;let n=e.length,i=e.sampleRate,o=t.createBuffer(1,n,i),a=o.getChannelData(0);for(let s=0;s<n;s++){let c=0;for(let u=0;u<r;u++)c+=e.getChannelData(u)[s];a[s]=c/r}return o}function pY(t){let e=t.numberOfChannels,r=t.sampleRate,n=t.length*e*2,i=new ArrayBuffer(44+n),o=new DataView(i);Lv(o,0,"RIFF"),o.setUint32(4,36+n,!0),Lv(o,8,"WAVE"),Lv(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,e,!0),o.setUint32(24,r,!0),o.setUint32(28,r*e*2,!0),o.setUint16(32,e*2,!0),o.setUint16(34,16,!0),Lv(o,36,"data"),o.setUint32(40,n,!0);let a=44;for(let s=0;s<t.length;s++)for(let c=0;c<e;c++){let u=t.getChannelData(c)[s]*32767;o.setInt16(a,(u<0,u),!0),a+=2}return i}function Lv(t,e,r){for(let n=0;n<r.length;n++)t.setUint8(e+n,r.charCodeAt(n))}function JU(t,e){return`audio_${t.toString().padStart(3,"0")}.${e}`}function ph(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function Uo(t){if(!t||typeof t!="object")return t;let e;return t.constructor.name===To.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Yt.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="AbortError"):"status"in t&&t.status===400&&"message"in t&&typeof t.message=="string"&&t.message.includes("tool_calls")?e=ph(t,"INVALID_TOOL_RESULTS"):"status"in t&&t.status===401?e=ph(t,"MODEL_AUTHENTICATION"):"status"in t&&t.status===429?e=ph(t,"MODEL_RATE_LIMIT"):"status"in t&&t.status===404?e=ph(t,"MODEL_NOT_FOUND"):e=t,e}var hY=Object.defineProperty,le=(t,e)=>{for(var r in e)hY(t,r,{get:e[r],enumerable:!0})};function Pn(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function Rf(t){return Pn(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function Pf(t){return Pn(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function WU(t){return Pn(t)&&t.source_type==="text"&&"text"in t&&typeof t.text=="string"}function Uv(t){return Pn(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function jv(t){if(Pn(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function hh(t){let e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);let r=e[0].trim(),n=e[1].trim();if(r===""||n==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);let i={};for(let o of t.split(";").slice(1)){let a=o.split("=");if(a.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);let s=a[0].trim(),c=a[1].trim();if(s==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);i[s]=c}return{type:r,subtype:n,parameters:i}}function ru({dataUrl:t,asTypedArray:e=!1}){let r=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/),n;if(r){n=r[1].toLowerCase();let i=e?Uint8Array.from(atob(r[2]),o=>o.charCodeAt(0)):r[2];return{mime_type:n,data:i}}}function Mf(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function Fv(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}var aj=be(XU(),1),wY=be(oj(),1);function sj(t,e){return(e==null?void 0:e[t])||(0,aj.default)(t)}function uj(t,e,r){let n={};for(let i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}var SY={};le(SY,{Serializable:()=>jo,get_lc_unique_name:()=>Bv});function cj(t){return Array.isArray(t)?[...t]:{...t}}function AY(t,e){let r=cj(t);for(let[n,i]of Object.entries(e)){let[o,...a]=n.split(".").reverse(),s=r;for(let c of a.reverse()){if(s[c]===void 0)break;s[c]=cj(s[c]),s=s[c]}s[o]!==void 0&&(s[o]={lc:1,type:"secret",id:[i]})}return r}function Bv(t){let e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var jo=class lj{constructor(e,...r){A(this,"lc_serializable",!1);A(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([n])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(n)})):this.lc_kwargs=e!=null?e:{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Bv(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof lj||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,o)=>(i[o]=o in this?this[o]:this.lc_kwargs[o],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let o=this,a=n,[s,...c]=i.split(".").reverse();for(let u of c.reverse()){if(!(u in o)||o[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof o[u]=="object"&&o[u]!=null?a[u]={}:Array.isArray(o[u])&&(a[u]=[])),o=o[u],a=a[u]}s in o&&o[s]!==void 0&&(a[s]=a[s]||o[s])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:uj(Object.keys(r).length?AY(n,r):n,sj,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function ge(t,e){return Ne(t)&&t.type===e}function Ne(t){return typeof t=="object"&&t!==null}function Mn(t){return Array.isArray(t)}function se(t){return typeof t=="string"}function ai(t){return typeof t=="number"}function Zv(t){return t instanceof Uint8Array}function hE(t){try{return JSON.parse(t)}catch(e){return}}var za=t=>t();function TY(t){if(t.type==="char_location"&&se(t.document_title)&&ai(t.start_char_index)&&ai(t.end_char_index)&&se(t.cited_text)){let{document_title:e,start_char_index:r,end_char_index:n,cited_text:i,...o}=t;return{...o,type:"citation",source:"char",title:e!=null?e:void 0,startIndex:r,endIndex:n,citedText:i}}if(t.type==="page_location"&&se(t.document_title)&&ai(t.start_page_number)&&ai(t.end_page_number)&&se(t.cited_text)){let{document_title:e,start_page_number:r,end_page_number:n,cited_text:i,...o}=t;return{...o,type:"citation",source:"page",title:e!=null?e:void 0,startIndex:r,endIndex:n,citedText:i}}if(t.type==="content_block_location"&&se(t.document_title)&&ai(t.start_block_index)&&ai(t.end_block_index)&&se(t.cited_text)){let{document_title:e,start_block_index:r,end_block_index:n,cited_text:i,...o}=t;return{...o,type:"citation",source:"block",title:e!=null?e:void 0,startIndex:r,endIndex:n,citedText:i}}if(t.type==="web_search_result_location"&&se(t.url)&&se(t.title)&&se(t.encrypted_index)&&se(t.cited_text)){let{url:e,title:r,encrypted_index:n,cited_text:i,...o}=t;return{...o,type:"citation",source:"url",url:e,title:r,startIndex:Number(n),endIndex:Number(n),citedText:i}}if(t.type==="search_result_location"&&se(t.source)&&se(t.title)&&ai(t.start_block_index)&&ai(t.end_block_index)&&se(t.cited_text)){let{source:e,title:r,start_block_index:n,end_block_index:i,cited_text:o,...a}=t;return{...a,type:"citation",source:"search",url:e,title:r!=null?r:void 0,startIndex:n,endIndex:i,citedText:o}}}function fj(t){var e;if(ge(t,"document")&&Ne(t.source)&&"type"in t.source){if(t.source.type==="base64"&&se(t.source.media_type)&&se(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&se(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&se(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&se(t.source.data))return{type:"file",mimeType:String((e=t.source.media_type)!=null?e:"text/plain"),data:t.source.data}}else if(ge(t,"image")&&Ne(t.source)&&"type"in t.source){if(t.source.type==="base64"&&se(t.source.media_type)&&se(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&se(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&se(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function mj(t){function*e(){for(let r of t){let n=fj(r);n?yield n:yield r}}return Array.from(e())}function dj(t){function*e(){var n;let r=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(let i of r){if(ge(i,"text")&&se(i.text)){let{text:o,citations:a,...s}=i;if(Mn(a)&&a.length){let c=a.reduce((u,l)=>{let d=TY(l);return d?[...u,d]:u},[]);yield{...s,type:"text",text:o,annotations:c};continue}else{yield{...s,type:"text",text:o};continue}}else if(ge(i,"thinking")&&se(i.thinking)){let{thinking:o,signature:a,...s}=i;yield{...s,type:"reasoning",reasoning:o,signature:a};continue}else if(ge(i,"redacted_thinking")){yield{type:"non_standard",value:i};continue}else if(ge(i,"tool_use")&&se(i.name)&&se(i.id)){yield{type:"tool_call",id:i.id,name:i.name,args:i.input};continue}else if(ge(i,"input_json_delta")){if(EY(t)&&((n=t.tool_call_chunks)!=null&&n.length)){let o=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:o.id,name:o.name,args:o.args,index:o.index};continue}}else if(ge(i,"server_tool_use")&&se(i.name)&&se(i.id)){let{name:o,id:a}=i;if(o==="web_search"){let s=za(()=>{if(typeof i.input=="string")return i.input;if(Ne(i.input)&&se(i.input.query))return i.input.query;if(se(i.partial_json)){let c=hE(i.partial_json);if(c!=null&&c.query)return c.query}return""});yield{id:a,type:"server_tool_call",name:"web_search",args:{query:s}};continue}else if(i.name==="code_execution"){let s=za(()=>{if(typeof i.input=="string")return i.input;if(Ne(i.input)&&se(i.input.code))return i.input.code;if(se(i.partial_json)){let c=hE(i.partial_json);if(c!=null&&c.code)return c.code}return""});yield{id:a,type:"server_tool_call",name:"code_execution",args:{code:s}};continue}}else if(ge(i,"web_search_tool_result")&&se(i.tool_use_id)&&Mn(i.content)){let{content:o,tool_use_id:a}=i,s=o.reduce((c,u)=>ge(u,"web_search_result")?[...c,u.url]:c,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:a,status:"success",output:{urls:s}};continue}else if(ge(i,"code_execution_tool_result")&&se(i.tool_use_id)&&Ne(i.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(ge(i,"mcp_tool_use")){yield{id:i.id,type:"server_tool_call",name:"mcp_tool_use",args:i.input};continue}else if(ge(i,"mcp_tool_result")&&se(i.tool_use_id)&&Ne(i.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(ge(i,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:i.input};continue}else if(ge(i,"search_result")){yield{id:i.id,type:"non_standard",value:i};continue}else if(ge(i,"tool_result")){yield{id:i.id,type:"non_standard",value:i};continue}else{let o=fj(i);if(o){yield o;continue}}yield{type:"non_standard",value:i}}}return Array.from(e())}var pj={translateContent:dj,translateContentChunk:dj};function EY(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function OY(t){var e;return Rf(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:Pf(t)?{type:t.type,mimeType:(e=t.mime_type)!=null?e:"application/octet-stream",data:t.data,metadata:t.metadata}:Uv(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function hj(t){return t.map(OY)}function gj(t){return!!(ge(t,"image_url")&&Ne(t.image_url)||ge(t,"input_audio")&&Ne(t.input_audio)||ge(t,"file")&&Ne(t.file))}function yj(t){if(ge(t,"image_url")&&Ne(t.image_url)&&se(t.image_url.url)){let e=ru({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(ge(t,"input_audio")&&Ne(t.input_audio)&&se(t.input_audio.data)&&se(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(ge(t,"file")&&Ne(t.file)&&se(t.file.data)){let e=ru({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(se(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function IY(t){var r;let e=[];typeof t.content=="string"?e.push({type:"text",text:t.content}):e.push(...Vv(t.content));for(let n of(r=t.tool_calls)!=null?r:[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function NY(t){var r;let e=[];typeof t.content=="string"?e.push({type:"text",text:t.content}):e.push(...Vv(t.content));for(let n of(r=t.tool_calls)!=null?r:[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function Vv(t){let e=[];for(let r of t)gj(r)?e.push(yj(r)):e.push(r);return e}function CY(t){if(t.type==="url_citation"){let{url:e,title:r,start_index:n,end_index:i}=t;return{type:"citation",url:e,title:r,startIndex:n,endIndex:i}}if(t.type==="file_citation"){let{file_id:e,filename:r,index:n}=t;return{type:"citation",title:r,startIndex:n,endIndex:n,fileId:e}}return t}function _j(t){function*e(){var n,i,o;Ne((n=t.additional_kwargs)==null?void 0:n.reasoning)&&Mn(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((s,c)=>Ne(c)&&se(c.text)?`${s}${c.text}`:s,"")});let r=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(let a of r)if(ge(a,"text")){let{text:s,annotations:c,...u}=a;Array.isArray(c)?yield{...u,type:"text",text:String(s),annotations:c.map(CY)}:yield{...u,type:"text",text:String(s)}}for(let a of(i=t.tool_calls)!=null?i:[])yield{type:"tool_call",id:a.id,name:a.name,args:a.args};if(Ne(t.additional_kwargs)&&Mn(t.additional_kwargs.tool_outputs))for(let a of t.additional_kwargs.tool_outputs){if(ge(a,"web_search_call")){yield{id:a.id,type:"server_tool_call",name:"web_search",args:{query:a.query}};continue}else if(ge(a,"file_search_call")){yield{id:a.id,type:"server_tool_call",name:"file_search",args:{query:a.query}};continue}else if(ge(a,"computer_call")){yield{type:"non_standard",value:a};continue}else if(ge(a,"code_interpreter_call")){if(se(a.code)&&(yield{id:a.id,type:"server_tool_call",name:"code_interpreter",args:{code:a.code}}),Mn(a.outputs)){let s=za(()=>{if(a.status!=="in_progress"){if(a.status==="completed")return 0;if(a.status==="incomplete")return 127;if(a.status!=="interpreting"&&a.status==="failed")return 1}});for(let c of a.outputs)if(ge(c,"logs")){yield{type:"server_tool_call_result",toolCallId:(o=a.id)!=null?o:"",status:"success",output:{type:"code_interpreter_output",returnCode:s!=null?s:0,stderr:[0,void 0].includes(s)?void 0:String(c.logs),stdout:[0,void 0].includes(s)?String(c.logs):void 0}};continue}}continue}else if(ge(a,"mcp_call")){yield{id:a.id,type:"server_tool_call",name:"mcp_call",args:a.input};continue}else if(ge(a,"mcp_list_tools")){yield{id:a.id,type:"server_tool_call",name:"mcp_list_tools",args:a.input};continue}else if(ge(a,"mcp_approval_request")){yield{type:"non_standard",value:a};continue}else if(ge(a,"image_generation_call")){yield{type:"non_standard",value:a};continue}Ne(a)&&(yield{type:"non_standard",value:a})}}return Array.from(e())}function kY(t){function*e(){var r;yield*_j(t);for(let n of(r=t.tool_call_chunks)!=null?r:[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}var vj={translateContent:t=>typeof t.content=="string"?IY(t):_j(t),translateContentChunk:t=>typeof t.content=="string"?NY(t):kY(t)};function bj(t,e="pretty"){return e==="pretty"?$Y(t):JSON.stringify(t)}function $Y(t){let e=[],r=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,n=Math.floor((80-r.length)/2),i="=".repeat(n),o=r.length%2===0?i:`${i}=`;if(e.push(`${i}${r}${o}`),t.type==="ai"){let a=t;if(a.tool_calls&&a.tool_calls.length>0){e.push("Tool Calls:");for(let s of a.tool_calls){e.push(`  ${s.name} (${s.id})`),e.push(` Call ID: ${s.id}`),e.push("  Args:");for(let[c,u]of Object.entries(s.args))e.push(`    ${c}: ${typeof u=="object"?JSON.stringify(u):u}`)}}}if(t.type==="tool"){let a=t;a.name&&e.push(`Name: ${a.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}var gE=Symbol.for("langchain.message");function Jr(t,e){var r;return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>Pn(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?(r=kc(t,e))!=null?r:[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>Pn(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function qv(t,e){return t==="error"||e==="error"?"error":"success"}function RY(t,e){function r(n,i){if(typeof n!="object"||n===null||n===void 0)return n;if(i>=e)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(a=>r(a,i+1));let o={};for(let a of Object.keys(n))o[a]=r(n[a],i+1);return o}return JSON.stringify(r(t,0),null,2)}var xj,Fr=class extends jo{constructor(e){var n;let r=typeof e=="string"||Array.isArray(e)?{content:e}:e;r.additional_kwargs||(r.additional_kwargs={}),r.response_metadata||(r.response_metadata={});super(r);A(this,"lc_namespace",["langchain_core","messages"]);A(this,"lc_serializable",!0);A(this,xj,!0);A(this,"id");A(this,"name");A(this,"content");A(this,"additional_kwargs");A(this,"response_metadata");this.name=r.name,r.content===void 0&&r.contentBlocks!==void 0?(this.content=r.contentBlocks,this.response_metadata={output_version:"v1",...r.response_metadata}):r.content!==void 0?(this.content=(n=r.content)!=null?n:[],this.response_metadata=r.response_metadata):(this.content=[],this.response_metadata=r.response_metadata),this.additional_kwargs=r.additional_kwargs,this.id=r.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){let e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[hj,Vv,mj].reduce((i,o)=>o(i),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&gE in e&&e[gE]===!0&&Fv(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(xj=gE,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let r=RY(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${r}`}toFormattedString(e="pretty"){return bj(this,e)}};function wj(t){return Array.isArray(t)&&t.every(e=>typeof e.index=="number")}function Bt(t={},e={}){let r={...t};for(let[n,i]of Object.entries(e))if(r[n]==null)r[n]=i;else{if(i==null)continue;if(typeof r[n]!=typeof i||Array.isArray(r[n])!==Array.isArray(i))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof r[n]=="string"){if(n==="type")continue;["id","name","output_version","model_provider"].includes(n)?i&&(r[n]=i):r[n]+=i}else if(typeof r[n]=="object"&&!Array.isArray(r[n]))r[n]=Bt(r[n],i);else if(Array.isArray(r[n]))r[n]=kc(r[n],i);else{if(r[n]===i)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return r}function kc(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{let r=[...t];for(let n of e)if(typeof n=="object"&&n!==null&&"index"in n&&typeof n.index=="number"){let i=r.findIndex(o=>{let a=typeof o=="object",s="index"in o&&o.index===n.index,c="id"in o&&"id"in n&&(o==null?void 0:o.id)===(n==null?void 0:n.id),u=!("id"in o)||!(o!=null&&o.id)||!("id"in n)||!(n!=null&&n.id);return a&&s&&(c||u)});i!==-1&&typeof r[i]=="object"&&r[i]!==null?r[i]=Bt(r[i],n):r.push(n)}else{if(typeof n=="object"&&n!==null&&"text"in n&&n.text==="")continue;r.push(n)}return r}}}function Gv(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return kc(t,e);if(typeof t=="object"&&typeof e=="object")return Bt(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}var dn=class Sj extends Fr{static isInstance(e){if(!super.isInstance(e))return!1;let r=Object.getPrototypeOf(e);for(;r!==null;){if(r===Sj.prototype)return!0;r=Object.getPrototypeOf(r)}return!1}};function Hv(t){return typeof t.role=="string"}function si(t){return typeof(t==null?void 0:t._getType)=="function"}function zf(t){return dn.isInstance(t)}function Kv(t,e){return Bt(t!=null?t:{},e!=null?e:{})}function Aj(t,e){var n,i,o,a,s,c,u,l,d,f;let r={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(r.audio=((n=t==null?void 0:t.audio)!=null?n:0)+((i=e==null?void 0:e.audio)!=null?i:0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(r.image=((o=t==null?void 0:t.image)!=null?o:0)+((a=e==null?void 0:e.image)!=null?a:0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(r.video=((s=t==null?void 0:t.video)!=null?s:0)+((c=e==null?void 0:e.video)!=null?c:0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(r.document=((u=t==null?void 0:t.document)!=null?u:0)+((l=e==null?void 0:e.document)!=null?l:0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(r.text=((d=t==null?void 0:t.text)!=null?d:0)+((f=e==null?void 0:e.text)!=null?f:0)),r}function PY(t,e){var n,i,o,a;let r={...Aj(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(r.cache_read=((n=t==null?void 0:t.cache_read)!=null?n:0)+((i=e==null?void 0:e.cache_read)!=null?i:0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(r.cache_creation=((o=t==null?void 0:t.cache_creation)!=null?o:0)+((a=e==null?void 0:e.cache_creation)!=null?a:0)),r}function MY(t,e){var n,i;let r={...Aj(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(r.reasoning=((n=t==null?void 0:t.reasoning)!=null?n:0)+((i=e==null?void 0:e.reasoning)!=null?i:0)),r}function Jv(t,e){var r,n,i,o,a,s;return{input_tokens:((r=t==null?void 0:t.input_tokens)!=null?r:0)+((n=e==null?void 0:e.input_tokens)!=null?n:0),output_tokens:((i=t==null?void 0:t.output_tokens)!=null?i:0)+((o=e==null?void 0:e.output_tokens)!=null?o:0),total_tokens:((a=t==null?void 0:t.total_tokens)!=null?a:0)+((s=e==null?void 0:e.total_tokens)!=null?s:0),input_token_details:PY(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:MY(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var zY={};le(zY,{ToolMessage:()=>Wr,ToolMessageChunk:()=>nu,defaultToolCallParser:()=>yh,isDirectToolOutput:()=>gh,isToolMessage:()=>yE,isToolMessageChunk:()=>_E});function gh(t){return t!=null&&typeof t=="object"&&"lc_direct_tool_output"in t&&t.lc_direct_tool_output===!0}var Wr=class extends Fr{constructor(e,r,n){let i=typeof e=="string"||Array.isArray(e)?{content:e,name:n,tool_call_id:r}:e;super(i);A(this,"lc_direct_tool_output",!0);A(this,"type","tool");A(this,"status");A(this,"tool_call_id");A(this,"metadata");A(this,"artifact");this.tool_call_id=i.tool_call_id,this.artifact=i.artifact,this.status=i.status,this.metadata=i.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},nu=class extends dn{constructor(e){super(e);A(this,"type","tool");A(this,"tool_call_id");A(this,"status");A(this,"artifact");this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){var n;let r=this.constructor;return new r({content:Jr(this.content,e.content),additional_kwargs:Bt(this.additional_kwargs,e.additional_kwargs),response_metadata:Bt(this.response_metadata,e.response_metadata),artifact:Gv(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:(n=this.id)!=null?n:e.id,status:qv(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function yh(t){let e=[],r=[];for(let n of t)if(n.function){let i=n.function.name;try{let o=JSON.parse(n.function.arguments);e.push({name:i||"",args:o||{},id:n.id})}catch(o){r.push({name:i,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[e,r]}function yE(t){return typeof t=="object"&&t!==null&&"getType"in t&&typeof t.getType=="function"&&t.getType()==="tool"}function _E(t){return t._getType()==="tool"}var Ri=class Tj extends Fr{constructor(r,n){(typeof r=="string"||Array.isArray(r))&&(r={content:r,role:n});super(r);A(this,"type","generic");A(this,"role");this.role=r.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Tj}static isInstance(r){return super.isInstance(r)&&r.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},Da=class extends dn{constructor(e,r){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:r});super(e);A(this,"type","generic");A(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){var n;let r=this.constructor;return new r({content:Jr(this.content,e.content),additional_kwargs:Bt(this.additional_kwargs,e.additional_kwargs),response_metadata:Bt(this.response_metadata,e.response_metadata),role:this.role,id:(n=this.id)!=null?n:e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function Ej(t){return t._getType()==="generic"}function Oj(t){return t._getType()==="generic"}var $c=class extends Fr{constructor(e){super(e);A(this,"type","function");A(this,"name");this.name=e.name}static lc_name(){return"FunctionMessage"}},La=class extends dn{constructor(){super(...arguments);A(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){var n,i;let r=this.constructor;return new r({content:Jr(this.content,e.content),additional_kwargs:Bt(this.additional_kwargs,e.additional_kwargs),response_metadata:Bt(this.response_metadata,e.response_metadata),name:(n=this.name)!=null?n:"",id:(i=this.id)!=null?i:e.id})}};function Ij(t){return t._getType()==="function"}function Nj(t){return t._getType()==="function"}var zn=class extends Fr{constructor(e){super(e);A(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},Ua=class extends dn{constructor(e){super(e);A(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){var n;let r=this.constructor;return new r({content:Jr(this.content,e.content),additional_kwargs:Bt(this.additional_kwargs,e.additional_kwargs),response_metadata:Bt(this.response_metadata,e.response_metadata),id:(n=this.id)!=null?n:e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function Cj(t){return t.getType()==="human"}function kj(t){return t.getType()==="human"}var Rc=class extends Fr{constructor(e){super({...e,content:[]});A(this,"type","remove");A(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}};var fn=class Wv extends Fr{constructor(r){super(r);A(this,"type","system")}static lc_name(){return"SystemMessage"}concat(r){if(typeof r=="string")return new Wv({...this,content:Jr(this.content,r)});if(Wv.isInstance(r))return new Wv({...this,additional_kwargs:{...this.additional_kwargs,...r.additional_kwargs},response_metadata:{...this.response_metadata,...r.response_metadata},content:Jr(this.content,r.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(r){return super.isInstance(r)&&r.type==="system"}},Pi=class extends dn{constructor(e){super(e);A(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){var n;let r=this.constructor;return new r({content:Jr(this.content,e.content),additional_kwargs:Bt(this.additional_kwargs,e.additional_kwargs),response_metadata:Bt(this.response_metadata,e.response_metadata),id:(n=this.id)!=null?n:e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function $j(t){return t._getType()==="system"}function Rj(t){return t._getType()==="system"}function Yv(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function iu(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}function Pj(t){return!!(t&&typeof t=="object"&&"toolCall"in t&&t.toolCall!=null&&typeof t.toolCall=="object"&&"id"in t.toolCall&&typeof t.toolCall.id=="string")}var Df=class extends Error{constructor(e,r){super(e);A(this,"output");this.output=r}};function _h(t,e=Pc){t=t.trim();let r=t.indexOf("```");if(r===-1)return e(t);let n=t.substring(r+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));let i=n.indexOf("```"),o=n;return i!==-1&&(o=n.substring(0,i)),e(o.trim())}function DY(t){try{return JSON.parse(t)}catch(l){}let e=t.trim();if(e.length===0)throw new Error("Unexpected end of JSON input");let r=0;function n(){for(;r<e.length&&/\s/.test(e[r]);)r+=1}function i(){if(e[r]!=='"')throw new Error(`Expected '"' at position ${r}, got '${e[r]}'`);r+=1;let l="",d=!1;for(;r<e.length;){let f=e[r];if(d){if(f==="n")l+=`
`;else if(f==="t")l+="	";else if(f==="r")l+="\r";else if(f==="\\")l+="\\";else if(f==='"')l+='"';else if(f==="b")l+="\b";else if(f==="f")l+="\f";else if(f==="/")l+="/";else if(f==="u"){let m=e.substring(r+1,r+5);if(/^[0-9A-Fa-f]{0,4}$/.test(m))m.length===4?l+=String.fromCharCode(Number.parseInt(m,16)):l+=`u${m}`,r+=m.length;else throw new Error(`Invalid unicode escape sequence '\\u${m}' at position ${r}`)}else throw new Error(`Invalid escape sequence '\\${f}' at position ${r}`);d=!1}else if(f==="\\")d=!0;else{if(f==='"')return r+=1,l;l+=f}r+=1}return d&&(l+="\\"),l}function o(){let l=r,d="";if(e[r]==="-"&&(d+="-",r+=1),r<e.length&&e[r]==="0"&&(d+="0",r+=1,e[r]>="0"&&e[r]<="9"))throw new Error(`Invalid number at position ${l}`);if(r<e.length&&e[r]>="1"&&e[r]<="9")for(;r<e.length&&e[r]>="0"&&e[r]<="9";)d+=e[r],r+=1;if(r<e.length&&e[r]===".")for(d+=".",r+=1;r<e.length&&e[r]>="0"&&e[r]<="9";)d+=e[r],r+=1;if(r<e.length&&(e[r]==="e"||e[r]==="E"))for(d+=e[r],r+=1,r<e.length&&(e[r]==="+"||e[r]==="-")&&(d+=e[r],r+=1);r<e.length&&e[r]>="0"&&e[r]<="9";)d+=e[r],r+=1;if(d==="-")return-0;let f=Number.parseFloat(d);if(Number.isNaN(f))throw r=l,new Error(`Invalid number '${d}' at position ${l}`);return f}function a(){if(n(),r>=e.length)throw new Error(`Unexpected end of input at position ${r}`);let l=e[r];if(l==="{")return c();if(l==="[")return s();if(l==='"')return i();if("null".startsWith(e.substring(r,r+4)))return r+=Math.min(4,e.length-r),null;if("true".startsWith(e.substring(r,r+4)))return r+=Math.min(4,e.length-r),!0;if("false".startsWith(e.substring(r,r+5)))return r+=Math.min(5,e.length-r),!1;if(l==="-"||l>="0"&&l<="9")return o();throw new Error(`Unexpected character '${l}' at position ${r}`)}function s(){if(e[r]!=="[")throw new Error(`Expected '[' at position ${r}, got '${e[r]}'`);let l=[];if(r+=1,n(),r>=e.length)return l;if(e[r]==="]")return r+=1,l;for(;r<e.length;){if(n(),r>=e.length||(l.push(a()),n(),r>=e.length))return l;if(e[r]==="]")return r+=1,l;if(e[r]===","){r+=1;continue}throw new Error(`Expected ',' or ']' at position ${r}, got '${e[r]}'`)}return l}function c(){if(e[r]!=="{")throw new Error(`Expected '{' at position ${r}, got '${e[r]}'`);let l={};if(r+=1,n(),r>=e.length)return l;if(e[r]==="}")return r+=1,l;for(;r<e.length;){if(n(),r>=e.length)return l;let d=i();if(n(),r>=e.length)return l;if(e[r]!==":")throw new Error(`Expected ':' at position ${r}, got '${e[r]}'`);if(r+=1,n(),r>=e.length||(l[d]=a(),n(),r>=e.length))return l;if(e[r]==="}")return r+=1,l;if(e[r]===","){r+=1;continue}throw new Error(`Expected ',' or '}' at position ${r}, got '${e[r]}'`)}return l}let u=a();if(n(),r<e.length)throw new Error(`Unexpected character '${e[r]}' at position ${r}`);return u}function Pc(t){try{return typeof t=="undefined"?null:DY(t)}catch(e){return null}}function vE(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function LY(t){if(Ne(t.document)&&Ne(t.document.source)){let e=Ne(t.document)&&se(t.document.format)?t.document.format:"",r=vE(e);if(Ne(t.document.source)){if(Ne(t.document.source.s3Location)&&se(t.document.source.s3Location.uri))return{type:"file",mimeType:r,fileId:t.document.source.s3Location.uri};if(Zv(t.document.source.bytes))return{type:"file",mimeType:r,data:t.document.source.bytes};if(se(t.document.source.text))return{type:"file",mimeType:r,data:Buffer.from(t.document.source.text).toString("base64")};if(Mn(t.document.source.content)){let n=t.document.source.content.reduce((i,o)=>Ne(o)&&se(o.text)?i+o.text:i,"");return{type:"file",mimeType:r,data:n}}}}return{type:"non_standard",value:t}}function UY(t){if(ge(t,"image")&&Ne(t.image)){let e=Ne(t.image)&&se(t.image.format)?t.image.format:"",r=vE(e);if(Ne(t.image.source)){if(Ne(t.image.source.s3Location)&&se(t.image.source.s3Location.uri))return{type:"image",mimeType:r,fileId:t.image.source.s3Location.uri};if(Zv(t.image.source.bytes))return{type:"image",mimeType:r,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function jY(t){if(ge(t,"video")&&Ne(t.video)){let e=Ne(t.video)&&se(t.video.format)?t.video.format:"",r=vE(e);if(Ne(t.video.source)){if(Ne(t.video.source.s3Location)&&se(t.video.source.s3Location.uri))return{type:"video",mimeType:r,fileId:t.video.source.s3Location.uri};if(Zv(t.video.source.bytes))return{type:"video",mimeType:r,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function Mj(t){function*e(){let r=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(let n of r){if(ge(n,"cache_point")){yield{type:"non_standard",value:n};continue}else if(ge(n,"citations_content")&&Ne(n.citationsContent)){let i=Mn(n.citationsContent.content)?n.citationsContent.content.reduce((a,s)=>Ne(s)&&se(s.text)?a+s.text:a,""):"",o=Mn(n.citationsContent.citations)?n.citationsContent.citations.reduce((a,s)=>{if(Ne(s)){let c=Mn(s.sourceContent)?s.sourceContent.reduce((l,d)=>Ne(d)&&se(d.text)?l+d.text:l,""):"",u=za(()=>{if(Ne(s.location)){let l=s.location.documentChar||s.location.documentPage||s.location.documentChunk;if(Ne(l))return{source:ai(l.documentIndex)?l.documentIndex.toString():void 0,startIndex:ai(l.start)?l.start:void 0,endIndex:ai(l.end)?l.end:void 0}}return{}});a.push({type:"citation",citedText:c,...u})}return a},[]):[];yield{type:"text",text:i,annotations:o};continue}else if(ge(n,"document")&&Ne(n.document)){yield LY(n);continue}else if(ge(n,"guard_content")){yield{type:"non_standard",value:n};continue}else if(ge(n,"image")&&Ne(n.image)){yield UY(n);continue}else if(ge(n,"reasoning_content")&&se(n.reasoningText)){yield{type:"reasoning",reasoning:n.reasoningText};continue}else if(ge(n,"text")&&se(n.text)){yield{type:"text",text:n.text};continue}else if(ge(n,"tool_result")){yield{type:"non_standard",value:n};continue}else{if(ge(n,"tool_call"))continue;if(ge(n,"video")&&Ne(n.video)){yield jY(n);continue}}yield{type:"non_standard",value:n}}}return Array.from(e())}var zj={translateContent:Mj,translateContentChunk:Mj};function Dj(t){function*e(){let r=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(let n of r){if(ge(n,"text")&&se(n.text)){yield{type:"text",text:n.text};continue}else if(ge(n,"inlineData")&&Ne(n.inlineData)&&se(n.inlineData.mimeType)&&se(n.inlineData.data)){yield{type:"file",mimeType:n.inlineData.mimeType,data:n.inlineData.data};continue}else if(ge(n,"functionCall")&&Ne(n.functionCall)&&se(n.functionCall.name)&&Ne(n.functionCall.args)){yield{type:"tool_call",id:t.id,name:n.functionCall.name,args:n.functionCall.args};continue}else if(ge(n,"functionResponse")){yield{type:"non_standard",value:n};continue}else if(ge(n,"fileData")&&Ne(n.fileData)&&se(n.fileData.mimeType)&&se(n.fileData.fileUri)){yield{type:"file",mimeType:n.fileData.mimeType,fileId:n.fileData.fileUri};continue}else if(ge(n,"executableCode")){yield{type:"non_standard",value:n};continue}else if(ge(n,"codeExecutionResult")){yield{type:"non_standard",value:n};continue}yield{type:"non_standard",value:n}}}return Array.from(e())}var Lj={translateContent:Dj,translateContentChunk:Dj};function Uj(t){function*e(){let r=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(let n of r){if(ge(n,"reasoning")&&se(n.reasoning)){let i=za(()=>{var a;let o=r.indexOf(n);if(Mn((a=t.additional_kwargs)==null?void 0:a.signatures)&&o>=0)return t.additional_kwargs.signatures.at(o)});se(i)?yield{type:"reasoning",reasoning:n.reasoning,signature:i}:yield{type:"reasoning",reasoning:n.reasoning};continue}else if(ge(n,"text")&&se(n.text)){yield{type:"text",text:n.text};continue}else if(ge(n,"image_url")){if(se(n.image_url))if(n.image_url.startsWith("data:")){let i=/^data:([^;]+);base64,(.+)$/,o=n.image_url.match(i);o?yield{type:"image",data:o[2],mimeType:o[1]}:yield{type:"image",url:n.image_url}}else yield{type:"image",url:n.image_url};continue}else if(ge(n,"media")&&se(n.mimeType)&&se(n.data)){yield{type:"file",mimeType:n.mimeType,data:n.data};continue}yield{type:"non_standard",value:n}}}return Array.from(e())}var jj={translateContent:Uj,translateContentChunk:Uj};var Fj;(Fj=globalThis.lc_block_translators_registry)!=null||(globalThis.lc_block_translators_registry=new Map([["anthropic",pj],["bedrock-converse",zj],["google-genai",Lj],["google-vertexai",jj],["openai",vj]]));function bE(t){return globalThis.lc_block_translators_registry.get(t)}var Qt=class extends Fr{constructor(e){var n,i,o,a,s;let r;if(typeof e=="string"||Array.isArray(e))r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{r=e;let c=(n=r.additional_kwargs)==null?void 0:n.tool_calls,u=r.tool_calls;c!=null&&c.length>0&&(u===void 0||u.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(c!=null&&u===void 0){let[l,d]=yh(c);r.tool_calls=l!=null?l:[],r.invalid_tool_calls=d!=null?d:[]}else r.tool_calls=(i=r.tool_calls)!=null?i:[],r.invalid_tool_calls=(o=r.invalid_tool_calls)!=null?o:[]}catch(l){r.tool_calls=[],r.invalid_tool_calls=[]}if(r.response_metadata!==void 0&&"output_version"in r.response_metadata&&r.response_metadata.output_version==="v1"&&(r.contentBlocks=r.content,r.content=void 0),r.contentBlocks!==void 0){r.contentBlocks.push(...r.tool_calls.map(d=>({type:"tool_call",id:d.id,name:d.name,args:d.args})));let l=r.contentBlocks.filter(d=>d.type==="tool_call").filter(d=>{var f;return!((f=r.tool_calls)!=null&&f.some(m=>m.id===d.id&&m.name===d.name))});l.length>0&&(r.tool_calls=l.map(d=>({type:"tool_call",id:d.id,name:d.name,args:d.args})))}}super(r);A(this,"type","ai");A(this,"tool_calls",[]);A(this,"invalid_tool_calls",[]);A(this,"usage_metadata");typeof r!="string"&&(this.tool_calls=(a=r.tool_calls)!=null?a:this.tool_calls,this.invalid_tool_calls=(s=r.invalid_tool_calls)!=null?s:this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){let r=bE(this.response_metadata.model_provider);if(r)return r.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls){let r=this.tool_calls.filter(n=>!e.some(i=>i.id===n.id&&i.name===n.name));e.push(...r.map(n=>({...n,type:"tool_call",id:n.id,name:n.name,args:n.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function ou(t){return t._getType()==="ai"}function vh(t){return t._getType()==="ai"}var Sr=class extends dn{constructor(e){var n,i,o,a,s;let r;typeof e=="string"||Array.isArray(e)?r={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]}:e.tool_call_chunks===void 0||e.tool_call_chunks.length===0?r={...e,tool_calls:(n=e.tool_calls)!=null?n:[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}:r={...e,...Xv((i=e.tool_call_chunks)!=null?i:[]),usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};super(r);A(this,"type","ai");A(this,"tool_calls",[]);A(this,"invalid_tool_calls",[]);A(this,"tool_call_chunks",[]);A(this,"usage_metadata");this.tool_call_chunks=(o=r.tool_call_chunks)!=null?o:this.tool_call_chunks,this.tool_calls=(a=r.tool_calls)!=null?a:this.tool_calls,this.invalid_tool_calls=(s=r.invalid_tool_calls)!=null?s:this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){let r=bE(this.response_metadata.model_provider);if(r)return r.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){let r=this.content.filter(n=>n.type==="tool_call").map(n=>n.id);for(let n of this.tool_calls)n.id&&!r.includes(n.id)&&e.push({...n,type:"tool_call",id:n.id,name:n.name,args:n.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var i;let r={content:Jr(this.content,e.content),additional_kwargs:Bt(this.additional_kwargs,e.additional_kwargs),response_metadata:Kv(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:(i=this.id)!=null?i:e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let o=kc(this.tool_call_chunks,e.tool_call_chunks);o!==void 0&&o.length>0&&(r.tool_call_chunks=o)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(r.usage_metadata=Jv(this.usage_metadata,e.usage_metadata));let n=this.constructor;return new n(r)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};var Qv=t=>t();function FY(t){return iu(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function BY(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function xE(t){let e,r;if(BY(t)){let n=t.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?e="user":n==="AIMessage"||n==="AIMessageChunk"?e="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?e="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?e="function":n==="ToolMessage"||n==="ToolMessageChunk"?e="tool":e="unknown",r=t.kwargs}else{let{type:n,...i}=t;e=n,r=i}if(e==="human"||e==="user")return new zn(r);if(e==="ai"||e==="assistant"){let{tool_calls:n,...i}=r;if(!Array.isArray(n))return new Qt(r);let o=n.map(FY);return new Qt({...i,tool_calls:o})}else{if(e==="system")return new fn(r);if(e==="developer")return new fn({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in r)return new Wr({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});if(e==="remove"&&"id"in r&&typeof r.id=="string")return new Rc({...r,id:r.id});throw Yv(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function au(t){if(typeof t=="string")return new zn(t);if(si(t))return t;if(Array.isArray(t)){let[e,r]=t;return xE({type:e,content:r})}else if(Hv(t)){let{role:e,...r}=t;return xE({...r,type:e})}else return xE(t)}function Lf(t,e="Human",r="AI"){let n=[];for(let i of t){let o;if(i._getType()==="human")o=e;else if(i._getType()==="ai")o=r;else if(i._getType()==="system")o="System";else if(i._getType()==="tool")o="Tool";else if(i._getType()==="generic")o=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);let a=i.name?`${i.name}, `:"",s=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);n.push(`${o}: ${a}${s}`)}return n.join(`
`)}function ZY(t){if(t.data!==void 0)return t;{let e=t;return{type:e.type,data:{content:e.text,role:e.role,name:void 0,tool_call_id:void 0}}}}function bh(t){let e=ZY(t);switch(e.type){case"human":return new zn(e.data);case"ai":return new Qt(e.data);case"system":return new fn(e.data);case"function":if(e.data.name===void 0)throw new Error("Name must be defined for function messages");return new $c(e.data);case"tool":if(e.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new Wr(e.data);case"generic":if(e.data.role===void 0)throw new Error("Role must be defined for chat messages");return new Ri(e.data);default:throw new Error(`Got unexpected type: ${e.type}`)}}function Bj(t){return t.map(bh)}function Zj(t){return t.map(e=>e.toDict())}function Mc(t){var r;let e=t._getType();if(e==="human")return new Ua({...t});if(e==="ai"){let n={...t};return"tool_calls"in n&&(n={...n,tool_call_chunks:(r=n.tool_calls)==null?void 0:r.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Sr({...n})}else{if(e==="system")return new Pi({...t});if(e==="function")return new La({...t});if(Ri.isInstance(t))return new Da({...t});throw new Error("Unknown message type.")}}function Xv(t){var i,o,a;let e=t.reduce((s,c)=>{let u=s.findIndex(([l])=>"id"in c&&c.id&&"index"in c&&c.index!==void 0?c.id===l.id&&c.index===l.index:"id"in c&&c.id?c.id===l.id:"index"in c&&c.index!==void 0?c.index===l.index:!1);return u!==-1?s[u].push(c):s.push([c]),s},[]),r=[],n=[];for(let s of e){let c=null,u=(o=(i=s[0])==null?void 0:i.name)!=null?o:"",l=s.map(m=>m.args||"").join("").trim(),d=l.length?l:"{}",f=(a=s[0])==null?void 0:a.id;try{if(c=Pc(d),!f||c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:u,args:c,id:f,type:"tool_call"})}catch(m){n.push({name:u,args:d,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:t,tool_calls:r,invalid_tool_calls:n}}var Vj=Symbol.for("ls:tracing_async_local_storage"),su=Symbol.for("lc:context_variables"),qj=t=>{globalThis[Vj]=t},uu=()=>globalThis[Vj];var VY={};le(VY,{getEnv:()=>tb,getEnvironmentVariable:()=>er,getRuntimeEnvironment:()=>SE,isBrowser:()=>Gj,isDeno:()=>eb,isJsDom:()=>Kj,isNode:()=>Jj,isWebWorker:()=>Hj});var Gj=()=>typeof window!="undefined"&&typeof window.document!="undefined",Hj=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Kj=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&navigator.userAgent.includes("jsdom"),eb=()=>typeof Deno!="undefined",Jj=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!eb(),tb=()=>{let t;return Gj()?t="browser":Jj()?t="node":Hj()?t="webworker":Kj()?t="jsdom":eb()?t="deno":t="other",t},wE;function SE(){return wE===void 0&&(wE={library:"langchain-js",runtime:tb()}),wE}function er(t){var e;try{return typeof process!="undefined"?(e=process.env)==null?void 0:e[t]:eb()?Deno==null?void 0:Deno.env.get(t):void 0}catch(r){return}}var Wj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function qY(t){return typeof t=="string"&&Wj.test(t)}var cu=qY;function GY(t){if(!cu(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Yj=GY;var Br=[];for(rb=0;rb<256;++rb)Br.push((rb+256).toString(16).slice(1));var rb;function Uf(t,e=0){return(Br[t[e+0]]+Br[t[e+1]]+Br[t[e+2]]+Br[t[e+3]]+"-"+Br[t[e+4]]+Br[t[e+5]]+"-"+Br[t[e+6]]+Br[t[e+7]]+"-"+Br[t[e+8]]+Br[t[e+9]]+"-"+Br[t[e+10]]+Br[t[e+11]]+Br[t[e+12]]+Br[t[e+13]]+Br[t[e+14]]+Br[t[e+15]]).toLowerCase()}var nb,HY=new Uint8Array(16);function xh(){if(!nb&&(nb=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nb(HY)}function KY(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var JY="6ba7b810-9dad-11d1-80b4-00c04fd430c8",WY="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function AE(t,e,r){function n(i,o,a,s){var c;if(typeof i=="string"&&(i=KY(i)),typeof o=="string"&&(o=Yj(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){s=s||0;for(var l=0;l<16;++l)a[s+l]=u[l];return a}return Uf(u)}try{n.name=t}catch(i){}return n.DNS=JY,n.URL=WY,n}var YY=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),TE={randomUUID:YY};function XY(t,e,r){if(TE.randomUUID&&!e&&!t)return TE.randomUUID();t=t||{};var n=t.random||(t.rng||xh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return Uf(n)}var io=XY;function QY(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function EE(t,e){return t<<e|t>>>32-e}function eX(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[c*64+l*4]<<24|t[c*64+l*4+1]<<16|t[c*64+l*4+2]<<8|t[c*64+l*4+3];s[c]=u}s[a-1][14]=(t.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<a;++d){for(var f=new Uint32Array(80),m=0;m<16;++m)f[m]=s[d][m];for(var p=16;p<80;++p)f[p]=EE(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var b=r[0],y=r[1],h=r[2],_=r[3],v=r[4],x=0;x<80;++x){var w=Math.floor(x/20),E=EE(b,5)+QY(w,y,h,_)+v+e[w]+f[x]>>>0;v=_,_=h,h=EE(y,30)>>>0,y=b,b=E}r[0]=r[0]+b>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+_>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Xj=eX;var tX=AE("v5",80,Xj),zc=tX;var Qj=null,e6=null,oo=0;function rX(t,e,r){t=t||{};var n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||xh)(),a=t.msecs!==void 0?t.msecs:Date.now(),s=t.seq!==void 0?t.seq:null,c=e6,u=Qj;return a>oo&&t.msecs===void 0&&(oo=a,s!==null&&(c=null,u=null)),s!==null&&(s>2147483647&&(s=2147483647),c=s>>>19&4095,u=s&524287),(c===null||u===null)&&(c=o[6]&127,c=c<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>oo&&s===null?++u>524287&&(u=0,++c>4095&&(c=0,oo++)):oo=a,e6=c,Qj=u,i[n++]=oo/1099511627776&255,i[n++]=oo/4294967296&255,i[n++]=oo/16777216&255,i[n++]=oo/65536&255,i[n++]=oo/256&255,i[n++]=oo&255,i[n++]=c>>>4&15|112,i[n++]=c&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||Uf(i)}var Mi=rX;var nX={};le(nX,{BaseCallbackHandler:()=>Dc,callbackHandlerPrefersStreaming:()=>wh,isBaseCallbackHandler:()=>OE});var iX=class{};function wh(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var Dc=class extends iX{constructor(e){var r,n,i,o,a,s,c;super();A(this,"lc_serializable",!1);A(this,"lc_kwargs");A(this,"ignoreLLM",!1);A(this,"ignoreChain",!1);A(this,"ignoreAgent",!1);A(this,"ignoreRetriever",!1);A(this,"ignoreCustomEvent",!1);A(this,"raiseError",!1);A(this,"awaitHandlers",er("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=(r=e.ignoreLLM)!=null?r:this.ignoreLLM,this.ignoreChain=(n=e.ignoreChain)!=null?n:this.ignoreChain,this.ignoreAgent=(i=e.ignoreAgent)!=null?i:this.ignoreAgent,this.ignoreRetriever=(o=e.ignoreRetriever)!=null?o:this.ignoreRetriever,this.ignoreCustomEvent=(a=e.ignoreCustomEvent)!=null?a:this.ignoreCustomEvent,this.raiseError=(s=e.raiseError)!=null?s:this.raiseError,this.awaitHandlers=this.raiseError||((c=e._awaitHandler)!=null?c:this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Bv(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return jo.prototype.toJSON.call(this)}toJSONNotImplemented(){return jo.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends Dc{constructor(){super();A(this,"name",Mi());Object.assign(this,e)}}return new r}},OE=t=>{let e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};var r6="gen_ai.operation.name",n6="gen_ai.system",IE="gen_ai.request.model",i6="gen_ai.response.model",NE="gen_ai.usage.input_tokens",CE="gen_ai.usage.output_tokens",kE="gen_ai.usage.total_tokens",o6="gen_ai.request.max_tokens",a6="gen_ai.request.temperature",s6="gen_ai.request.top_p",u6="gen_ai.request.frequency_penalty",c6="gen_ai.request.presence_penalty",l6="gen_ai.response.finish_reasons",d6="gen_ai.prompt",f6="gen_ai.completion",m6="gen_ai.request.extra_query",p6="gen_ai.request.extra_body",h6="gen_ai.serialized.name",g6="gen_ai.serialized.signature",y6="gen_ai.serialized.doc",_6="gen_ai.response.id",v6="gen_ai.response.service_tier",b6="gen_ai.response.system_fingerprint",x6="gen_ai.usage.input_token_details",w6="gen_ai.usage.output_token_details",S6="langsmith.trace.session_id",A6="langsmith.trace.session_name",T6="langsmith.span.kind",E6="langsmith.trace.name",O6="langsmith.metadata",$E="langsmith.span.tags";var I6="langsmith.request.streaming",N6="langsmith.request.headers";var aX=(...t)=>fetch(...t),C6=Symbol.for("ls:fetch_implementation");var k6=()=>{let t=globalThis[C6];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},$6=t=>async(...e)=>{var n;if(t||hr("DEBUG")==="true"){let[i,o]=e;console.log(`\u2192 ${(o==null?void 0:o.method)||"GET"} ${i}`)}let r=await((n=globalThis[C6])!=null?n:aX)(...e);return(t||hr("DEBUG")==="true")&&console.log(`\u2190 ${r.status} ${r.statusText} ${r.url}`),r};var Sh=()=>{var t,e;return(e=(t=hr("PROJECT"))!=null?t:ui("LANGCHAIN_SESSION"))!=null?e:"default"};var R6={};function jf(t){R6[t]||(console.warn(t),R6[t]=!0)}var sX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Me(t,e){if(!sX.test(t)){let r=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(r)}return t}function ib(t){let e=typeof t=="string"?Date.parse(t):t;return Mi({msecs:e,seq:0})}var ob="0.3.87";var Fo,uX=()=>typeof window!="undefined"&&typeof window.document!="undefined",cX=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",lX=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&navigator.userAgent.includes("jsdom"),P6=()=>typeof Deno!="undefined",dX=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!P6(),ME=()=>Fo||(typeof Bun!="undefined"?Fo="bun":uX()?Fo="browser":dX()?Fo="node":cX()?Fo="webworker":lX()?Fo="jsdom":P6()?Fo="deno":Fo="other",Fo),RE;function ab(){if(RE===void 0){let t=ME(),e=mX();RE={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:ob,...e}}return RE}function zE(){let t=fX(),e={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[n,i]of Object.entries(t))typeof i=="string"&&!r.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[n]=i);return e}function fX(){let t={};try{if(typeof process!="undefined"&&process.env)for(let[e,r]of Object.entries(process.env))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&r!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof r=="string"?t[e]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2):t[e]=r)}catch(e){}return t}function ui(t){var e;try{return typeof process!="undefined"?(e=process.env)==null?void 0:e[t]:void 0}catch(r){return}}function hr(t){return ui(`LANGSMITH_${t}`)||ui(`LANGCHAIN_${t}`)}var PE;function mX(){if(PE!==void 0)return PE;let t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let r of t){let n=ui(r);n!==void 0&&(e[r]=n)}return PE=e,e}function sb(){return ui("OTEL_ENABLED")==="true"||hr("OTEL_ENABLED")==="true"}var UE=class{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...r){!this.hasWarned&&sb()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let n;if(r.length===1&&typeof r[0]=="function"?n=r[0]:r.length===2&&typeof r[1]=="function"?n=r[1]:r.length===3&&typeof r[2]=="function"&&(n=r[2]),typeof n=="function")return n()}},jE=class{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new UE})}getTracer(e,r){return this.mockTracer}getActiveSpan(){}setSpan(e,r){return e}getSpan(e){}setSpanContext(e,r){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}},FE=class{active(){return{}}with(e,r){return r()}},DE=Symbol.for("ls:otel_trace"),LE=Symbol.for("ls:otel_context"),M6=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),pX=new jE,hX=new FE,BE=class{getTraceInstance(){var e;return(e=globalThis[DE])!=null?e:pX}getContextInstance(){var e;return(e=globalThis[LE])!=null?e:hX}initializeGlobalInstances(e){globalThis[DE]===void 0&&(globalThis[DE]=e.trace),globalThis[LE]===void 0&&(globalThis[LE]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[M6]=e}getDefaultOTLPTracerComponents(){var e;return(e=globalThis[M6])!=null?e:void 0}},ZE=new BE;function ub(){return ZE.getTraceInstance()}function z6(){return ZE.getContextInstance()}function D6(){return ZE.getDefaultOTLPTracerComponents()}var gX={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function yX(t){return gX[t]||t}var cb=class{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,r){for(let n of e)try{if(!n.run)continue;if(n.operation==="post"){let i=this.createSpanForRun(n,n.run,r.get(n.id));i&&!n.run.end_time&&this.spans.set(n.id,i)}else this.updateSpanForRun(n,n.run)}catch(i){console.error(`Error processing operation ${n.id}:`,i)}}createSpanForRun(e,r,n){let i=n&&ub().getSpan(n);if(i)try{return this.finishSpanSetup(i,r,e)}catch(o){console.error(`Failed to create span for run ${e.id}:`,o);return}}finishSpanSetup(e,r,n){return this.setSpanAttributes(e,r,n),r.error?(e.setStatus({code:2}),e.recordException(new Error(r.error))):e.setStatus({code:1}),r.end_time&&e.end(new Date(r.end_time)),e}updateSpanForRun(e,r){try{let n=this.spans.get(e.id);if(!n){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(n,r,e),r.error?(n.setStatus({code:2}),n.recordException(new Error(r.error))):n.setStatus({code:1});let i=r.end_time;i&&(n.end(new Date(i)),this.spans.delete(e.id))}catch(n){console.error(`Failed to update span for run ${e.id}:`,n)}}extractModelName(e){var r;if((r=e.extra)!=null&&r.metadata){let n=e.extra.metadata;if(n.ls_model_name)return n.ls_model_name;if(n.invocation_params){let i=n.invocation_params;if(i.model)return i.model;if(i.model_name)return i.model_name}}}setSpanAttributes(e,r,n){var s;if("run_type"in r&&r.run_type){e.setAttribute(T6,r.run_type);let c=yX(r.run_type||"chain");e.setAttribute(r6,c)}"name"in r&&r.name&&e.setAttribute(E6,r.name),"session_id"in r&&r.session_id&&e.setAttribute(S6,r.session_id),"session_name"in r&&r.session_name&&e.setAttribute(A6,r.session_name),this.setGenAiSystem(e,r);let i=this.extractModelName(r);i&&e.setAttribute(IE,i),"prompt_tokens"in r&&typeof r.prompt_tokens=="number"&&e.setAttribute(NE,r.prompt_tokens),"completion_tokens"in r&&typeof r.completion_tokens=="number"&&e.setAttribute(CE,r.completion_tokens),"total_tokens"in r&&typeof r.total_tokens=="number"&&e.setAttribute(kE,r.total_tokens),this.setInvocationParameters(e,r);let o=((s=r.extra)==null?void 0:s.metadata)||{};for(let[c,u]of Object.entries(o))u!=null&&e.setAttribute(`${O6}.${c}`,String(u));let a=r.tags;if(a&&Array.isArray(a)?e.setAttribute($E,a.join(", ")):a&&e.setAttribute($E,String(a)),"serialized"in r&&typeof r.serialized=="object"){let c=r.serialized;c.name&&e.setAttribute(h6,String(c.name)),c.signature&&e.setAttribute(g6,String(c.signature)),c.doc&&e.setAttribute(y6,String(c.doc))}this.setIOAttributes(e,n)}setGenAiSystem(e,r){let n="langchain",i=this.extractModelName(r);if(i){let o=i.toLowerCase();o.includes("anthropic")||o.startsWith("claude")?n="anthropic":o.includes("bedrock")?n="aws.bedrock":o.includes("azure")&&o.includes("openai")?n="az.ai.openai":o.includes("azure")&&o.includes("inference")?n="az.ai.inference":o.includes("cohere")?n="cohere":o.includes("deepseek")?n="deepseek":o.includes("gemini")?n="gemini":o.includes("groq")?n="groq":o.includes("watson")||o.includes("ibm")?n="ibm.watsonx.ai":o.includes("mistral")?n="mistral_ai":o.includes("gpt")||o.includes("openai")?n="openai":o.includes("perplexity")||o.includes("sonar")?n="perplexity":o.includes("vertex")?n="vertex_ai":(o.includes("xai")||o.includes("grok"))&&(n="xai")}e.setAttribute(n6,n)}setInvocationParameters(e,r){var i,o;if(!((o=(i=r.extra)==null?void 0:i.metadata)!=null&&o.invocation_params))return;let n=r.extra.metadata.invocation_params;n.max_tokens!==void 0&&e.setAttribute(o6,n.max_tokens),n.temperature!==void 0&&e.setAttribute(a6,n.temperature),n.top_p!==void 0&&e.setAttribute(s6,n.top_p),n.frequency_penalty!==void 0&&e.setAttribute(u6,n.frequency_penalty),n.presence_penalty!==void 0&&e.setAttribute(c6,n.presence_penalty)}setIOAttributes(e,r){if(r.run.inputs)try{let n=r.run.inputs;typeof n=="object"&&n!==null&&(n.model&&Array.isArray(n.messages)&&e.setAttribute(IE,n.model),n.stream!==void 0&&e.setAttribute(I6,n.stream),n.extra_headers&&e.setAttribute(N6,JSON.stringify(n.extra_headers)),n.extra_query&&e.setAttribute(m6,JSON.stringify(n.extra_query)),n.extra_body&&e.setAttribute(p6,JSON.stringify(n.extra_body))),e.setAttribute(d6,JSON.stringify(n))}catch(n){console.debug(`Failed to process inputs for run ${r.id}`,n)}if(r.run.outputs)try{let n=r.run.outputs,i=this.getUnifiedRunTokens(n);if(i&&(e.setAttribute(NE,i[0]),e.setAttribute(CE,i[1]),e.setAttribute(kE,i[0]+i[1])),n&&typeof n=="object"){if(n.model&&e.setAttribute(i6,String(n.model)),n.id&&e.setAttribute(_6,n.id),n.choices&&Array.isArray(n.choices)){let o=n.choices.map(a=>a.finish_reason).filter(a=>a).map(String);o.length>0&&e.setAttribute(l6,o.join(", "))}if(n.service_tier&&e.setAttribute(v6,n.service_tier),n.system_fingerprint&&e.setAttribute(b6,n.system_fingerprint),n.usage_metadata&&typeof n.usage_metadata=="object"){let o=n.usage_metadata;o.input_token_details&&e.setAttribute(x6,JSON.stringify(o.input_token_details)),o.output_token_details&&e.setAttribute(w6,JSON.stringify(o.output_token_details))}}e.setAttribute(f6,JSON.stringify(n))}catch(n){console.debug(`Failed to process outputs for run ${r.id}`,n)}}getUnifiedRunTokens(e){if(!e)return null;let r=this.extractUnifiedRunTokens(e.usage_metadata);if(r)return r;let n=Object.keys(e);for(let a of n){let s=e[a];if(!(!s||typeof s!="object")&&(r=this.extractUnifiedRunTokens(s.usage_metadata),r||s.lc===1&&s.kwargs&&typeof s.kwargs=="object"&&(r=this.extractUnifiedRunTokens(s.kwargs.usage_metadata),r)))return r}let i=e.generations||[];if(!Array.isArray(i))return null;let o=Array.isArray(i[0])?i.flat():i;for(let a of o)if(typeof a=="object"&&a.message&&typeof a.message=="object"&&a.message.kwargs&&typeof a.message.kwargs=="object"&&(r=this.extractUnifiedRunTokens(a.message.kwargs.usage_metadata),r))return r;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}};var _X=Object.prototype.toString,vX=t=>_X.call(t)==="[object Error]",bX=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function VE(t){if(!(t&&vX(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;let{message:r,stack:n}=t;return r==="Load failed"?n===void 0||"__sentry_captured__"in t:r.startsWith("error sending request for url")?!0:bX.has(r)}function xX(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function lb(t,e,{min:r=0,allowInfinity:n=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<r)throw new TypeError(`Expected \`${t}\` to be \u2265 ${r}.`)}}var qE=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function wX(t,e){let r=Math.max(1,t+1),n=e.randomize?Math.random()+1:1,i=Math.round(n*e.minTimeout*e.factor**(r-1));return i=Math.min(i,e.maxTimeout),i}function L6(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function SX({error:t,attemptNumber:e,retriesConsumed:r,startTime:n,options:i}){var m,p,b,y;let o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof qE)throw o.originalError;let a=Number.isFinite(i.retries)?Math.max(0,i.retries-r):i.retries,s=(m=i.maxRetryTime)!=null?m:Number.POSITIVE_INFINITY,c=Object.freeze({error:o,attemptNumber:e,retriesLeft:a,retriesConsumed:r});if(await i.onFailedAttempt(c),L6(n,s)<=0)throw o;let u=await i.shouldConsumeRetry(c),l=L6(n,s);if(l<=0||a<=0)throw o;if(o instanceof TypeError&&!VE(o)){if(u)throw o;return(p=i.signal)==null||p.throwIfAborted(),!1}if(!await i.shouldRetry(c))throw o;if(!u)return(b=i.signal)==null||b.throwIfAborted(),!1;let d=wX(r,i),f=Math.min(d,l);return f>0&&await new Promise((h,_)=>{var w,E;let v=()=>{var S;clearTimeout(x),(S=i.signal)==null||S.removeEventListener("abort",v),_(i.signal.reason)},x=setTimeout(()=>{var S;(S=i.signal)==null||S.removeEventListener("abort",v),h()},f);i.unref&&((w=x.unref)==null||w.call(x)),(E=i.signal)==null||E.addEventListener("abort",v,{once:!0})}),(y=i.signal)==null||y.throwIfAborted(),!0}async function GE(t,e={}){var o,a,s,c,u,l,d,f,m,p,b,y;if(e={...e},xX(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");(o=e.retries)!=null||(e.retries=10),(a=e.factor)!=null||(e.factor=2),(s=e.minTimeout)!=null||(e.minTimeout=1e3),(c=e.maxTimeout)!=null||(e.maxTimeout=Number.POSITIVE_INFINITY),(u=e.maxRetryTime)!=null||(e.maxRetryTime=Number.POSITIVE_INFINITY),(l=e.randomize)!=null||(e.randomize=!1),(d=e.onFailedAttempt)!=null||(e.onFailedAttempt=()=>{}),(f=e.shouldRetry)!=null||(e.shouldRetry=()=>!0),(m=e.shouldConsumeRetry)!=null||(e.shouldConsumeRetry=()=>!0),lb("factor",e.factor,{min:0,allowInfinity:!1}),lb("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),lb("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),lb("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(p=e.signal)==null||p.throwIfAborted();let r=0,n=0,i=performance.now();for(;!Number.isFinite(e.retries)||n<=e.retries;){r++;try{(b=e.signal)==null||b.throwIfAborted();let h=await t(r);return(y=e.signal)==null||y.throwIfAborted(),h}catch(h){await SX({error:h,attemptNumber:r,retriesConsumed:n,startTime:i,options:e})&&n++}}throw new Error("Retry attempts exhausted without throwing an error.")}var gb=be(hb(),1),$X=[408,425,429,500,502,503,504],Th=class{constructor(e){var r,n;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=(r=e.maxConcurrency)!=null?r:1/0,this.maxRetries=(n=e.maxRetries)!=null?n:6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,"default"in gb.default?this.queue=new gb.default.default({concurrency:this.maxConcurrency}):this.queue=new gb.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...r){return this.callWithOptions({},e,...r)}callWithOptions(e,r,...n){var s;let i=(s=e.sizeBytes)!=null?s:0;if(this.maxQueueSizeBytes!==void 0&&i>0&&this.queueSizeBytes+i>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${i} bytes.`));i>0&&(this.queueSizeBytes+=i);let o=this.onFailedResponseHook,a=this.queue.add(()=>GE(()=>r(...n).catch(c=>{throw c instanceof Error?c:new Error(c)}),{async onFailedAttempt({error:c}){var d;if(c.message.startsWith("Cancel")||c.message.startsWith("TimeoutError")||c.name==="TimeoutError"||c.message.startsWith("AbortError")||(c==null?void 0:c.code)==="ECONNABORTED")throw c;let u=c==null?void 0:c.response;if(o&&await o(u))return;let l=(d=u==null?void 0:u.status)!=null?d:c==null?void 0:c.status;if(l&&!$X.includes(+l))throw c},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return i>0&&(a=a.finally(()=>{this.queueSizeBytes-=i})),e.signal?Promise.race([a,new Promise((c,u)=>{var l;(l=e.signal)==null||l.addEventListener("abort",()=>{u(new Error("AbortError"))})})]):a}};function QE(t){return typeof(t==null?void 0:t._getType)=="function"}function eO(t){let e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var Ite=be(z3(),1);function ja(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);let[e,r]=t.split(":"),n=r||"latest";if(e.includes("/")){let[i,o]=e.split("/",2);if(!i||!o)throw new Error(`Invalid identifier format: ${t}`);return[i,o,n]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,n]}}var bO=class extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}};async function ve(t,e,r){let n;if(t.ok){r&&(n=await t.text());return}if(t.status===403)try{let a=await t.json();(a==null?void 0:a.error)==="org_scoped_key_requires_workspace"&&(n="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch(a){let s=new Error(`${t.status} ${t.statusText}`);throw s.status=t==null?void 0:t.status,s}if(n===void 0)try{n=await t.text()}catch(a){n=""}let i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${n}`;if(t.status===409)throw new bO(i);let o=new Error(i);throw o.status=t.status,o}var D3="ERR_CONFLICTING_ENDPOINTS",Nb=class extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:D3}),this.name="ConflictingEndpointsError"}};function L3(t){return typeof t=="object"&&t!==null&&t.code===D3}var U3="[...]",Nte={result:"[Circular]"},kb=[],Bf=[],Cte=new TextEncoder;function kte(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Cb(t){return Cte.encode(t)}function j3(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function $te(t){return function(e,r){if(t){let n=t.call(this,e,r);if(n!==void 0)return n}return j3(r)}}function Dn(t,e,r,n,i){var o;try{let a=JSON.stringify(t,$te(r),n);return Cb(a)}catch(a){if(!((o=a.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),Cb("[Unserializable]");hr("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i=="undefined"&&(i=kte()),wO(t,"",0,[],void 0,0,i);let s;try{Bf.length===0?s=JSON.stringify(t,r,n):s=JSON.stringify(t,Rte(r),n)}catch(c){return Cb("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;kb.length!==0;){let c=kb.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return Cb(s)}}function xO(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:t}),kb.push([n,r,e,i])):Bf.push([e,r,t]):(n[r]=t,kb.push([n,r,e]))}function wO(t,e,r,n,i,o,a){o+=1;var s;if(typeof t=="object"&&t!==null){for(s=0;s<n.length;s++)if(n[s]===t){xO(Nte,t,e,i);return}if(typeof a.depthLimit!="undefined"&&o>a.depthLimit){xO(U3,t,e,i);return}if(typeof a.edgesLimit!="undefined"&&r+1>a.edgesLimit){xO(U3,t,e,i);return}if(n.push(t),Array.isArray(t))for(s=0;s<t.length;s++)wO(t[s],s,s,n,t,o,a);else{t=j3(t);var c=Object.keys(t);for(s=0;s<c.length;s++){var u=c[s];wO(t[u],u,s,n,t,o,a)}}n.pop()}}function Rte(t){return t=typeof t!="undefined"?t:function(e,r){return r},function(e,r){if(Bf.length>0)for(var n=0;n<Bf.length;n++){var i=Bf[n];if(i[1]===e&&i[0]===r){r=i[2],Bf.splice(n,1);break}}return t.call(this,e,r)}}function F3(t,e,r){var s,c;if(r)return t;let n=ab(),i=e!=null?e:zE(),o=(s=t.extra)!=null?s:{},a=o.metadata;return t.extra={...o,runtime:{...n,...o==null?void 0:o.runtime},metadata:{...i,...i.revision_id||"revision_id"in t&&t.revision_id?{revision_id:(c="revision_id"in t?t.revision_id:void 0)!=null?c:i.revision_id}:{},...a}},t}var Pte=t=>{var n;let e=(n=t==null?void 0:t.toString())!=null?n:hr("TRACING_SAMPLING_RATE");if(e===void 0)return;let r=parseFloat(e);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},Mte=t=>{let r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};async function zte(t){let e=[];for await(let r of t)e.push(r);return e}function $b(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var Dte=async t=>{var e;if((t==null?void 0:t.status)===429){let r=parseInt((e=t.headers.get("retry-after"))!=null?e:"10",10)*1e3;if(r>0)return await new Promise(n=>setTimeout(n,r)),!0}return!1};function B3(t){return typeof t=="number"?Number(t.toFixed(4)):t}var Lte=24*1024*1024,q3=1024*1024*1024,Ute=1e4,jte=100,Z3="https://api.smith.langchain.com",SO=class{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e!=null?e:q3}peek(){return this.items[0]}push(e){let r,n=new Promise(o=>{r=o}),i=Dn(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+i>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${i} bytes.`),r(),n):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:r,itemPromise:n,size:i}),this.sizeBytes+=i,n)}pop({upToSizeBytes:e,upToSize:r}){var o,a;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");let n=[],i=0;for(;i+((a=(o=this.peek())==null?void 0:o.size)!=null?a:0)<e&&this.items.length>0&&n.length<r;){let s=this.items.shift();s&&(n.push(s),i+=s.size,this.sizeBytes-=s.size)}if(n.length===0&&this.items.length>0){let s=this.items.shift();n.push(s),i+=s.size,this.sizeBytes-=s.size}return[n.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl,size:s.size})),()=>n.forEach(s=>s.itemPromiseResolve())]}},Lc=class t{get _fetch(){return this.fetchImplementation||$6(this.debug)}constructor(e={}){var i,o,a,s,c,u,l,d,f,m,p,b,y,h,_,v,x,w,E,S,g,I;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:ui("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:ui("LANGSMITH_DEBUG")==="true"});let r=t.getDefaultClientConfig();if(this.tracingSampleRate=Pte(e.tracingSamplingRate),this.apiUrl=(o=$b((i=e.apiUrl)!=null?i:r.apiUrl))!=null?o:"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=$b((a=e.apiKey)!=null?a:r.apiKey),this.webUrl=$b((s=e.webUrl)!=null?s:r.webUrl),(c=this.webUrl)!=null&&c.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=$b((u=e.workspaceId)!=null?u:hr("WORKSPACE_ID")),this.timeout_ms=(l=e.timeout_ms)!=null?l:9e4,this.caller=new Th({...(d=e.callerOptions)!=null?d:{},maxRetries:4,debug:(f=e.debug)!=null?f:this.debug}),this.traceBatchConcurrency=(m=e.traceBatchConcurrency)!=null?m:this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=(p=e.debug)!=null?p:this.debug,this.fetchImplementation=e.fetchImplementation;let n=(b=e.maxIngestMemoryBytes)!=null?b:q3;this.batchIngestCaller=new Th({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:n,...(y=e.callerOptions)!=null?y:{},onFailedResponseHook:Dte,debug:(h=e.debug)!=null?h:this.debug}),this.hideInputs=(v=(_=e.hideInputs)!=null?_:e.anonymizer)!=null?v:r.hideInputs,this.hideOutputs=(w=(x=e.hideOutputs)!=null?x:e.anonymizer)!=null?w:r.hideOutputs,this.omitTracedRuntimeInfo=(E=e.omitTracedRuntimeInfo)!=null?E:!1,this.autoBatchTracing=(S=e.autoBatchTracing)!=null?S:this.autoBatchTracing,this.autoBatchQueue=new SO(n),this.blockOnRootRunFinalization=(g=e.blockOnRootRunFinalization)!=null?g:this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=(I=e.manualFlushMode)!=null?I:this.manualFlushMode,sb()&&(this.langSmithToOTELTranslator=new cb),this.cachedLSEnvVarsForMetadata=zE()}static getDefaultClientConfig(){var o;let e=hr("API_KEY"),r=(o=hr("ENDPOINT"))!=null?o:Z3,n=hr("HIDE_INPUTS")==="true",i=hr("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:e,webUrl:void 0,hideInputs:n,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:Mte(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${ob}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){let r={...e};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(e,r){var a;let n=(a=r==null?void 0:r.toString())!=null?a:"",i=`${this.apiUrl}${e}?${n}`;return await this.caller.call(async()=>{let s=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(s,`fetch ${e}`),s})}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams,n){let i=Number(r.get("offset"))||0,o=Number(r.get("limit"))||100;for(;;){r.set("offset",String(i)),r.set("limit",String(o));let a=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(async()=>{let u=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(u,`fetch ${e}`),u}),c=n?n(await s.json()):await s.json();if(c.length===0||(yield c,c.length<o))break;i+=c.length}}async*_getCursorPaginatedList(e,r=null,n="POST",i="runs"){let o=r?{...r}:{};for(;;){let a=JSON.stringify(o),c=await(await this.caller.call(async()=>{let l=await this._fetch(`${this.apiUrl}${e}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(l,`fetch ${e}`),l})).json();if(!c||!c[i])break;yield c[i];let u=c.cursors;if(!u||!u.next)break;o.cursor=u.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,r=!1){var n;if(this.tracingSampleRate===void 0)return e;if(r){let i=[];for(let o of e)this.filteredPostUuids.has(o.trace_id)?o.id===o.trace_id&&this.filteredPostUuids.delete(o.trace_id):i.push(o);return i}else{let i=[];for(let o of e){let a=(n=o.trace_id)!=null?n:o.id;this.filteredPostUuids.has(a)||(o.id===a?this._shouldSample()?i.push(o):this.filteredPostUuids.add(a):i.push(o))}return i}}async _getBatchSizeLimitBytes(){var r,n,i;let e=await this._ensureServerInfo();return(i=(n=this.batchSizeBytesLimit)!=null?n:(r=e.batch_ingest_config)==null?void 0:r.size_limit_bytes)!=null?i:Lte}async _getBatchSizeLimit(){var r,n,i;let e=await this._ensureServerInfo();return(i=(n=this.batchSizeLimit)!=null?n:(r=e.batch_ingest_config)==null?void 0:r.size_limit)!=null?i:jte}async _getDatasetExamplesMultiPartSupport(){var r,n;return(n=(r=(await this._ensureServerInfo()).instance_flags)==null?void 0:r.dataset_examples_multipart_enabled)!=null?n:!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:r}){let n=[];for(;this.autoBatchQueue.items.length>0;){let[i,o]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:r});if(!i.length){o();break}let a=i.reduce((u,l)=>{var b,y;let d=(b=l.apiUrl)!=null?b:this.apiUrl,f=(y=l.apiKey)!=null?y:this.apiKey,p=l.apiKey===this.apiKey&&l.apiUrl===this.apiUrl?"default":`${d}|${f}`;return u[p]||(u[p]=[]),u[p].push(l),u},{}),s=[];for(let[u,l]of Object.entries(a)){let d=this._processBatch(l,{apiUrl:u==="default"?void 0:u.split("|")[0],apiKey:u==="default"?void 0:u.split("|")[1]});s.push(d)}let c=Promise.all(s).finally(o);n.push(c)}return Promise.all(n)}async _processBatch(e,r){var i,o;if(!e.length)return;let n=e.reduce((a,s)=>{var c;return a+((c=s.size)!=null?c:0)},0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{let a={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},s=await this._ensureServerInfo();if((i=s==null?void 0:s.batch_ingest_config)!=null&&i.use_multipart_endpoint){let c=(o=s==null?void 0:s.instance_flags)==null?void 0:o.gzip_body_enabled;await this.multipartIngestRuns(a,{...r,useGzip:c,sizeBytes:n})}else await this.batchIngestRuns(a,{...r,sizeBytes:n})}}catch(a){console.error("Error exporting batch:",a)}}_sendBatchToOTELTranslator(e){var r,n;if(this.langSmithToOTELTranslator!==void 0){let i=new Map,o=[];for(let a of e)a.item.id&&a.otelContext&&(i.set(a.item.id,a.otelContext),a.action==="create"?o.push({operation:"post",id:a.item.id,trace_id:(r=a.item.trace_id)!=null?r:a.item.id,run:a.item}):o.push({operation:"patch",id:a.item.id,trace_id:(n=a.item.trace_id)!=null?n:a.item.id,run:a.item}));this.langSmithToOTELTranslator.exportBatch(o,i)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=F3(e.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);let r=this.autoBatchQueue.push(e);if(this.manualFlushMode)return r;let n=await this._getBatchSizeLimitBytes(),i=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>n||this.autoBatchQueue.items.length>i)&&this.drainAutoBatchQueue({batchSizeLimitBytes:n,batchSizeLimit:i}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:n,batchSizeLimit:i})},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){let r=await(await this.caller.call(async()=>{let n=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(Ute),...this.fetchOptions});return await ve(n,"get server info"),n})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{var e,r;if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(n){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${(e=n.status)!=null?e:"Unspecified status code"} ${n.message}`)}return(r=this._serverInfo)!=null?r:{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){let e=await this._getBatchSizeLimitBytes(),r=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:r})}_cloneCurrentOTELContext(){let e=ub(),r=z6();if(this.langSmithToOTELTranslator!==void 0){let n=e.getActiveSpan();if(n)return e.setSpan(r.active(),n)}}async createRun(e,r){var c;if(!this._filterForSampling([e]).length)return;let n={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;let o=await this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:(c=e.start_time)!=null?c:Date.now()});if(this.autoBatchTracing&&o.trace_id!==void 0&&o.dotted_order!==void 0){let u=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:o,otelContext:u,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}let a=F3(o,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);(r==null?void 0:r.apiKey)!==void 0&&(n["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(n["x-tenant-id"]=r.workspaceId);let s=Dn(a,`Creating run with id: ${a.id}`);await this.caller.call(async()=>{var l;let u=await this._fetch(`${(l=r==null?void 0:r.apiUrl)!=null?l:this.apiUrl}/runs`,{method:"POST",headers:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await ve(u,"create run",!0),u})}async batchIngestRuns({runCreates:e,runUpdates:r},n){var c,u;if(e===void 0&&r===void 0)return;let i=await Promise.all((c=e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))!=null?c:[]),o=await Promise.all((u=r==null?void 0:r.map(l=>this.prepareRunCreateOrUpdateInputs(l)))!=null?u:[]);if(i.length>0&&o.length>0){let l=i.reduce((f,m)=>(m.id&&(f[m.id]=m),f),{}),d=[];for(let f of o)f.id!==void 0&&l[f.id]?l[f.id]={...l[f.id],...f}:d.push(f);i=Object.values(l),o=d}let a={post:i,patch:o};if(!a.post.length&&!a.patch.length)return;let s={post:[],patch:[]};for(let l of["post","patch"]){let d=l,f=a[d].reverse(),m=f.pop();for(;m!==void 0;)s[d].push(m),m=f.pop()}if(s.post.length>0||s.patch.length>0){let l=s.post.map(d=>d.id).concat(s.patch.map(d=>d.id)).join(",");await this._postBatchIngestRuns(Dn(s,`Ingesting runs with ids: ${l}`),n)}}async _postBatchIngestRuns(e,r){let n={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(n["x-api-key"]=r.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:r==null?void 0:r.sizeBytes},async()=>{var o;let i=await this._fetch(`${(o=r==null?void 0:r.apiUrl)!=null?o:this.apiUrl}/runs/batch`,{method:"POST",headers:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await ve(i,"batch create run",!0),i})}async multipartIngestRuns({runCreates:e,runUpdates:r},n){if(e===void 0&&r===void 0)return;let i={},o=[];for(let d of e!=null?e:[]){let f=await this.prepareRunCreateOrUpdateInputs(d);f.id!==void 0&&f.attachments!==void 0&&(i[f.id]=f.attachments),delete f.attachments,o.push(f)}let a=[];for(let d of r!=null?r:[])a.push(await this.prepareRunCreateOrUpdateInputs(d));if(o.find(d=>d.trace_id===void 0||d.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(d=>d.trace_id===void 0||d.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(o.length>0&&a.length>0){let d=o.reduce((m,p)=>(p.id&&(m[p.id]=p),m),{}),f=[];for(let m of a)m.id!==void 0&&d[m.id]?d[m.id]={...d[m.id],...m}:f.push(m);o=Object.values(d),a=f}if(o.length===0&&a.length===0)return;let u=[],l=[];for(let[d,f]of[["post",o],["patch",a]])for(let m of f){let{inputs:p,outputs:b,events:y,extra:h,error:_,serialized:v,attachments:x,...w}=m,E={inputs:p,outputs:b,events:y,extra:h,error:_,serialized:v},S=Dn(w,`Serializing for multipart ingestion of run with id: ${w.id}`);l.push({name:`${d}.${w.id}`,payload:new Blob([S],{type:`application/json; length=${S.length}`})});for(let[g,I]of Object.entries(E)){if(I===void 0)continue;let N=Dn(I,`Serializing ${g} for multipart ingestion of run with id: ${w.id}`);l.push({name:`${d}.${w.id}.${g}`,payload:new Blob([N],{type:`application/json; length=${N.length}`})})}if(w.id!==void 0){let g=i[w.id];if(g){delete i[w.id];for(let[I,N]of Object.entries(g)){let C,R;if(Array.isArray(N)?[C,R]=N:(C=N.mimeType,R=N.data),I.includes(".")){console.warn(`Skipping attachment '${I}' for run ${w.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}l.push({name:`attachment.${w.id}.${I}`,payload:new Blob([R],{type:`${C}; length=${R.byteLength}`})})}}}u.push(`trace=${w.trace_id},id=${w.id}`)}await this._sendMultipartRequest(l,u.join("; "),n)}async _createNodeFetchBody(e,r){let n=[];for(let a of e)n.push(new Blob([`--${r}\r
`])),n.push(new Blob([`Content-Disposition: form-data; name="${a.name}"\r
`,`Content-Type: ${a.payload.type}\r
\r
`])),n.push(a.payload),n.push(new Blob([`\r
`]));return n.push(new Blob([`--${r}--\r
`])),await new Blob(n).arrayBuffer()}async _createMultipartStream(e,r){let n=new TextEncoder;return new ReadableStream({async start(o){let a=async s=>{typeof s=="string"?o.enqueue(n.encode(s)):o.enqueue(s)};for(let s of e){await a(`--${r}\r
`),await a(`Content-Disposition: form-data; name="${s.name}"\r
`),await a(`Content-Type: ${s.payload.type}\r
\r
`);let u=s.payload.stream().getReader();try{let l;for(;!(l=await u.read()).done;)o.enqueue(l.value)}finally{u.releaseLock()}await a(`\r
`)}await a(`--${r}--\r
`),o.close()}})}async _sendMultipartRequest(e,r,n){var u,l;let i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),o=k6(),a=()=>this._createNodeFetchBody(e,i),s=()=>this._createMultipartStream(e,i),c=async d=>this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{var y;let f=await d(),m={...this.headers,"Content-Type":`multipart/form-data; boundary=${i}`};(n==null?void 0:n.apiKey)!==void 0&&(m["x-api-key"]=n.apiKey);let p=f;n!=null&&n.useGzip&&typeof f=="object"&&"pipeThrough"in f&&(p=f.pipeThrough(new CompressionStream("gzip")),m["Content-Encoding"]="gzip");let b=await this._fetch(`${(y=n==null?void 0:n.apiUrl)!=null?y:this.apiUrl}/runs/multipart`,{method:"POST",headers:m,body:p,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(b,"Failed to send multipart request",!0),b});try{let d,f=!1;!o&&!this.multipartStreamingDisabled&&ME()!=="bun"?(f=!0,d=await c(s)):d=await c(a),(!this.multipartStreamingDisabled||f)&&d.status===422&&((u=n==null?void 0:n.apiUrl)!=null?u:this.apiUrl)!==Z3&&(console.warn(`Streaming multipart upload to ${(l=n==null?void 0:n.apiUrl)!=null?l:this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${r}".`),this.multipartStreamingDisabled=!0,d=await c(a))}catch(d){console.warn(`${d.message.trim()}

Context: ${r}`)}}async updateRun(e,r,n){Me(e),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));let i={...r,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){let s=this._cloneCurrentOTELContext();if(r.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:i,otelContext:s,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:s,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}let o={...this.headers,"Content-Type":"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(o["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(o["x-tenant-id"]=n.workspaceId);let a=Dn(r,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{var c;let s=await this._fetch(`${(c=n==null?void 0:n.apiUrl)!=null?c:this.apiUrl}/runs/${e}`,{method:"PATCH",headers:o,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(s,"update run",!0),s})}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){Me(e);let n=await this._get(`/runs/${e}`);return r&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let i;r.session_id?i=r.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:hr("PROJECT")||"default"})).id;let o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){let i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var o,a;let r=await zte(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),n={},i={};r.sort((s,c)=>{var u,l;return((u=s==null?void 0:s.dotted_order)!=null?u:"").localeCompare((l=c==null?void 0:c.dotted_order)!=null?l:"")});for(let s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);(a=s.dotted_order)!=null&&a.startsWith((o=e.dotted_order)!=null?o:"")&&s.id!==e.id&&(s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),i[s.id]=s)}e.child_runs=n[e.id]||[];for(let s in n)s!==e.id&&(i[s].child_runs=n[s]);return e}async*listRuns(e){let{projectId:r,projectName:n,parentRunId:i,traceId:o,referenceExampleId:a,startTime:s,executionOrder:c,isRoot:u,runType:l,error:d,id:f,query:m,filter:p,traceFilter:b,treeFilter:y,limit:h,select:_,order:v}=e,x=[];if(r&&(x=Array.isArray(r)?r:[r]),n){let g=Array.isArray(n)?n:[n],I=await Promise.all(g.map(N=>this.readProject({projectName:N}).then(C=>C.id)));x.push(...I)}let w=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],E={session:x.length?x:null,run_type:l,reference_example:a,query:m,filter:p,trace_filter:b,tree_filter:y,execution_order:c,parent_run:i,start_time:s?s.toISOString():null,error:d,id:f,limit:h,trace:o,select:_||w,is_root:u,order:v};E.select.includes("child_run_ids")&&jf("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let S=0;for await(let g of this._getCursorPaginatedList("/runs/query",E))if(h){if(S>=h)break;if(g.length+S>h){yield*g.slice(0,h-S);break}S+=g.length,yield*g}else yield*g}async*listGroupRuns(e){let{projectId:r,projectName:n,groupBy:i,filter:o,startTime:a,endTime:s,limit:c,offset:u}=e,d={session_id:r||(await this.readProject({projectName:n})).id,group_by:i,filter:o,start_time:a?a.toISOString():null,end_time:s?s.toISOString():null,limit:Number(c)||100},f=Number(u)||0,m="/runs/group",p=`${this.apiUrl}${m}`;for(;;){let b={...d,offset:f},y=Object.fromEntries(Object.entries(b).filter(([E,S])=>S!==void 0)),h=JSON.stringify(y),v=await(await this.caller.call(async()=>{let E=await this._fetch(p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await ve(E,`Failed to fetch ${m}`),E})).json(),{groups:x,total:w}=v;if(x.length===0)break;for(let E of x)yield E;if(f+=x.length,f>=w)break}}async getRunStats({id:e,trace:r,parentRun:n,runType:i,projectNames:o,projectIds:a,referenceExampleIds:s,startTime:c,endTime:u,error:l,query:d,filter:f,traceFilter:m,treeFilter:p,isRoot:b,dataSourceType:y}){let h=a||[];o&&(h=[...a||[],...await Promise.all(o.map(S=>this.readProject({projectName:S}).then(g=>g.id)))]);let v=Object.fromEntries(Object.entries({id:e,trace:r,parent_run:n,run_type:i,session:h,reference_example:s,start_time:c,end_time:u,error:l,query:d,filter:f,trace_filter:m,tree_filter:p,is_root:b,data_source_type:y}).filter(([S,g])=>g!==void 0)),x=JSON.stringify(v);return await(await this.caller.call(async()=>{let S=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:x});return await ve(S,"get run stats"),S})).json()}async shareRun(e,{shareId:r}={}){let n={run_id:e,share_token:r||io()};Me(e);let i=JSON.stringify(n),a=await(await this.caller.call(async()=>{let s=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await ve(s,"share run"),s})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){Me(e),await this.caller.call(async()=>{let r=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(r,"unshare run",!0),r})}async readRunSharedLink(e){Me(e);let n=await(await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(i,"read run shared link"),i})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){let n=new URLSearchParams({share_token:e});if(r!==void 0)for(let a of r)n.append("id",a);return Me(e),await(await this.caller.call(async()=>{let a=await this._fetch(`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(a,"list shared runs"),a})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),Me(e);let i=await(await this.caller.call(async()=>{let o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(o,"read dataset shared schema"),o})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);let n={dataset_id:e};Me(e);let i=JSON.stringify(n),a=await(await this.caller.call(async()=>{let s=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await ve(s,"share dataset"),s})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){Me(e),await this.caller.call(async()=>{let r=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(r,"unshare dataset",!0),r})}async readSharedDataset(e){return Me(e),await(await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(i,"read shared dataset"),i})).json()}async listSharedExamples(e,r){let n={};r!=null&&r.exampleIds&&(n.id=r.exampleIds);let i=new URLSearchParams;Object.entries(n).forEach(([s,c])=>{Array.isArray(c)?c.forEach(u=>i.append(s,u)):i.append(s,c)});let o=await this.caller.call(async()=>{let s=await this._fetch(`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(s,"list shared examples"),s}),a=await o.json();if(!o.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(a.detail)?a.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return a.map(s=>({...s,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:r=null,metadata:n=null,upsert:i=!1,projectExtra:o=null,referenceDatasetId:a=null}){let s=i?"?upsert=true":"",c=`${this.apiUrl}/sessions${s}`,u=o||{};n&&(u.metadata=n);let l={name:e,extra:u,description:r};a!==null&&(l.reference_dataset_id=a);let d=JSON.stringify(l);return await(await this.caller.call(async()=>{let p=await this._fetch(c,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:d});return await ve(p,"create project"),p})).json()}async updateProject(e,{name:r=null,description:n=null,metadata:i=null,projectExtra:o=null,endTime:a=null}){let s=`${this.apiUrl}/sessions/${e}`,c=o;i&&(c={...c||{},metadata:i});let u=JSON.stringify({name:r,extra:c,description:n,end_time:a?new Date(a).toISOString():null});return await(await this.caller.call(async()=>{let f=await this._fetch(s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ve(f,"update project"),f})).json()}async hasProject({projectId:e,projectName:r}){let n="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");let o=await this.caller.call(async()=>{let a=await this._fetch(`${this.apiUrl}${n}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(a,"has project"),a});try{let a=await o.json();return o.ok?Array.isArray(a)?a.length>0:!0:!1}catch(a){return!1}}async readProject({projectId:e,projectName:r,includeStats:n}){let i="/sessions",o=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),i+=`/${e}`;else if(r!==void 0)o.append("name",r);else throw new Error("Must provide projectName or projectId");n!==void 0&&o.append("include_stats",n.toString());let a=await this._get(i,o),s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);s=a[0]}else s=a;return s}async getProjectUrl({projectId:e,projectName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");let n=await this.readProject({projectId:e,projectName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${n.id}`}async getDatasetUrl({datasetId:e,datasetName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");let n=await this.readDataset({datasetId:e,datasetName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:o,includeStats:a,datasetVersion:s,referenceFree:c,metadata:u}={}){let l=new URLSearchParams;if(e!==void 0)for(let d of e)l.append("id",d);if(r!==void 0&&l.append("name",r),n!==void 0&&l.append("name_contains",n),i!==void 0)l.append("reference_dataset",i);else if(o!==void 0){let d=await this.readDataset({datasetName:o});l.append("reference_dataset",d.id)}a!==void 0&&l.append("include_stats",a.toString()),s!==void 0&&l.append("dataset_version",s),c!==void 0&&l.append("reference_free",c.toString()),u!==void 0&&l.append("metadata",JSON.stringify(u));for await(let d of this._getPaginated("/sessions",l))yield*d}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e,Me(n),await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(i,`delete session ${n} (${r})`,!0),i})}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:o,dataType:a,name:s}){let c=`${this.apiUrl}/datasets/upload`,u=new FormData;return u.append("file",e,r),n.forEach(f=>{u.append("input_keys",f)}),i.forEach(f=>{u.append("output_keys",f)}),o&&u.append("description",o),a&&u.append("data_type",a),s&&u.append("name",s),await(await this.caller.call(async()=>{let f=await this._fetch(c,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ve(f,"upload CSV"),f})).json()}async createDataset(e,{description:r,dataType:n,inputsSchema:i,outputsSchema:o,metadata:a}={}){let s={name:e,description:r,extra:a?{metadata:a}:void 0};n&&(s.data_type=n),i&&(s.inputs_schema_definition=i),o&&(s.outputs_schema_definition=o);let c=JSON.stringify(s);return await(await this.caller.call(async()=>{let d=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await ve(d,"create dataset"),d})).json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets",i=new URLSearchParams({limit:"1"});if(e&&r)throw new Error("Must provide either datasetName or datasetId, not both");if(e)Me(e),n+=`/${e}`;else if(r)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");let o=await this._get(n,i),a;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);a=o[0]}else a=o;return a}async hasDataset({datasetId:e,datasetName:r}){try{return await this.readDataset({datasetId:e,datasetName:r}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:e,datasetName:r,fromVersion:n,toVersion:i}){let o=e;if(o===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:r})).id);let a=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){let n="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(s=>JSON.parse(s))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:o,metadata:a}={}){let s="/datasets",c=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(let u of n)c.append("id",u);i!==void 0&&c.append("name",i),o!==void 0&&c.append("name_contains",o),a!==void 0&&c.append("metadata",JSON.stringify(a));for await(let u of this._getPaginated(s,c))yield*u}async updateDataset(e){let{datasetId:r,datasetName:n,...i}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");let o=r!=null?r:(await this.readDataset({datasetName:n})).id;Me(o);let a=JSON.stringify(i);return await(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(c,"update dataset"),c})).json()}async updateDatasetTag(e){let{datasetId:r,datasetName:n,asOf:i,tag:o}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");let a=r!=null?r:(await this.readDataset({datasetName:n})).id;Me(a);let s=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:o});await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await ve(c,"update dataset tags",!0),c})}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)Me(i),n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{let o=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(o,`delete ${n}`,!0),o})}async indexDataset({datasetId:e,datasetName:r,tag:n}){let i=e;if(!i&&!r)throw new Error("Must provide either datasetName or datasetId");if(i&&r)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:r})).id),Me(i);let a=JSON.stringify({tag:n});await(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(c,"index dataset"),c})).json()}async similarExamples(e,r,n,{filter:i}={}){let o={limit:n,inputs:e};i!==void 0&&(o.filter=i),Me(r);let a=JSON.stringify(o);return(await(await this.caller.call(async()=>{let u=await this._fetch(`${this.apiUrl}/datasets/${r}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:a});return await ve(u,"fetch similar examples"),u})).json()).examples}async createExample(e,r,n){var l,d;if(V3(e)&&(r!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=r?n==null?void 0:n.datasetId:e.dataset_id,o=r?n==null?void 0:n.datasetName:e.dataset_name;if(i===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:o})).id);let a=(r?n==null?void 0:n.createdAt:e.created_at)||new Date,s;V3(e)?s=e:s={inputs:e,outputs:r,created_at:a==null?void 0:a.toISOString(),id:n==null?void 0:n.exampleId,metadata:n==null?void 0:n.metadata,split:n==null?void 0:n.split,source_run_id:n==null?void 0:n.sourceRunId,use_source_run_io:n==null?void 0:n.useSourceRunIO,use_source_run_attachments:n==null?void 0:n.useSourceRunAttachments,attachments:n==null?void 0:n.attachments};let c=await this._uploadExamplesMultipart(i,[s]);return await this.readExample((d=(l=c.example_ids)==null?void 0:l[0])!=null?d:io())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];let _=e,v=_[0].dataset_id,x=_[0].dataset_name;if(v===void 0&&x===void 0)throw new Error("Must provide either datasetName or datasetId");if(v!==void 0&&x!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");v===void 0&&(v=(await this.readDataset({datasetName:x})).id);let w=await this._uploadExamplesMultipart(v,_);return await Promise.all(w.example_ids.map(S=>this.readExample(S)))}let{inputs:r,outputs:n,metadata:i,splits:o,sourceRunIds:a,useSourceRunIOs:s,useSourceRunAttachments:c,attachments:u,exampleIds:l,datasetId:d,datasetName:f}=e;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let m=d,p=f;if(m===void 0&&p===void 0)throw new Error("Must provide either datasetName or datasetId");if(m!==void 0&&p!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");m===void 0&&(m=(await this.readDataset({datasetName:p})).id);let b=r.map((_,v)=>({dataset_id:m,inputs:_,outputs:n==null?void 0:n[v],metadata:i==null?void 0:i[v],split:o==null?void 0:o[v],id:l==null?void 0:l[v],attachments:u==null?void 0:u[v],source_run_id:a==null?void 0:a[v],use_source_run_io:s==null?void 0:s[v],use_source_run_attachments:c==null?void 0:c[v]})),y=await this._uploadExamplesMultipart(m,b);return await Promise.all(y.example_ids.map(_=>this.readExample(_)))}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){let i=e.map(a=>QE(a)?eO(a):a),o=QE(r)?eO(r):r;return this.createExample({input:i},{output:o},n)}async readExample(e){Me(e);let r=`/examples/${e}`,n=await this._get(r),{attachment_urls:i,...o}=n,a=o;return i&&(a.attachments=Object.entries(i).reduce((s,[c,u])=>(s[c.slice(11)]={presigned_url:u.presigned_url,mime_type:u.mime_type},s),{})),a}async*listExamples({datasetId:e,datasetName:r,exampleIds:n,asOf:i,splits:o,inlineS3Urls:a,metadata:s,limit:c,offset:u,filter:l,includeAttachments:d}={}){let f;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)f=e;else if(r!==void 0)f=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let m=new URLSearchParams({dataset:f}),p=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;p&&m.append("as_of",p);let b=a!=null?a:!0;if(m.append("inline_s3_urls",b.toString()),n!==void 0)for(let h of n)m.append("id",h);if(o!==void 0)for(let h of o)m.append("splits",h);if(s!==void 0){let h=JSON.stringify(s);m.append("metadata",h)}c!==void 0&&m.append("limit",c.toString()),u!==void 0&&m.append("offset",u.toString()),l!==void 0&&m.append("filter",l),d===!0&&["attachment_urls","outputs","metadata"].forEach(h=>m.append("select",h));let y=0;for await(let h of this._getPaginated("/examples",m)){for(let _ of h){let{attachment_urls:v,...x}=_,w=x;v&&(w.attachments=Object.entries(v).reduce((E,[S,g])=>(E[S.slice(11)]={presigned_url:g.presigned_url,mime_type:g.mime_type||void 0},E),{})),yield w,y++}if(c!==void 0&&y>=c)break}}async deleteExample(e){Me(e);let r=`/examples/${e}`;await this.caller.call(async()=>{let n=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(n,`delete ${r}`,!0),n})}async deleteExamples(e,r){if(e.forEach(n=>Me(n)),r!=null&&r.hardDelete){let n=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:e,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(i,"hard delete examples",!0),i})}else{let n=new URLSearchParams;e.forEach(i=>n.append("example_ids",i)),await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}/examples?${n.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(i,"delete examples",!0),i})}}async updateExample(e,r){let n;r?n=e:n=e.id,Me(n);let i;r?i={id:n,...r}:i=e;let o;return i.dataset_id!==void 0?o=i.dataset_id:o=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(o,[i])}async updateExamples(e){let r;return e[0].dataset_id===void 0?r=(await this.readExample(e[0].id)).dataset_id:r=e[0].dataset_id,this._updateExamplesMultipart(r,e)}async readDatasetVersion({datasetId:e,datasetName:r,asOf:n,tag:i}){let o;if(e?o=e:o=(await this.readDataset({datasetName:r})).id,Me(o),n&&i||!n&&!i)throw new Error("Exactly one of asOf and tag must be specified.");let a=new URLSearchParams;return n!==void 0&&a.append("as_of",typeof n=="string"?n:n.toISOString()),i!==void 0&&a.append("tag",i),await(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/datasets/${o}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(c,"read dataset version"),c})).json()}async listDatasetSplits({datasetId:e,datasetName:r,asOf:n}){let i;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:r})).id:i=e,Me(i);let o=new URLSearchParams,a=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;return a&&o.append("as_of",a),await this._get(`/datasets/${i}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:r,splitName:n,exampleIds:i,remove:o=!1}){let a;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:r})).id:a=e,Me(a);let s={split_name:n,examples:i.map(u=>(Me(u),u)),remove:o},c=JSON.stringify(s);await this.caller.call(async()=>{let u=await this._fetch(`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await ve(u,"update dataset splits",!0),u})}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i,referenceExample:o}={loadChildRuns:!1}){jf("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(o=await this.readExample(a.reference_example_id));let s=await r.evaluateRun(a,o),[c,u]=await this._logEvaluationFeedback(s,a,n);return u[0]}async createFeedback(e,r,{score:n,value:i,correction:o,comment:a,sourceInfo:s,feedbackSourceType:c="api",sourceRunId:u,feedbackId:l,feedbackConfig:d,projectId:f,comparativeExperimentId:m}){var _;if(!e&&!f)throw new Error("One of runId or projectId must be provided");if(e&&f)throw new Error("Only one of runId or projectId can be provided");let p={type:c!=null?c:"api",metadata:s!=null?s:{}};u!==void 0&&(p==null?void 0:p.metadata)!==void 0&&!p.metadata.__run&&(p.metadata.__run={run_id:u}),(p==null?void 0:p.metadata)!==void 0&&((_=p.metadata.__run)==null?void 0:_.run_id)!==void 0&&Me(p.metadata.__run.run_id);let b={id:l!=null?l:io(),run_id:e,key:r,score:B3(n),value:i,correction:o,comment:a,feedback_source:p,comparative_experiment_id:m,feedbackConfig:d,session_id:f},y=JSON.stringify(b),h=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{let v=await this._fetch(h,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await ve(v,"create feedback",!0),v}),b}async updateFeedback(e,{score:r,value:n,correction:i,comment:o}){let a={};r!=null&&(a.score=B3(r)),n!=null&&(a.value=n),i!=null&&(a.correction=i),o!=null&&(a.comment=o),Me(e);let s=JSON.stringify(a);await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await ve(c,"update feedback",!0),c})}async readFeedback(e){Me(e);let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){Me(e);let r=`/feedback/${e}`;await this.caller.call(async()=>{let n=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(n,`delete ${r}`,!0),n})}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){let i=new URLSearchParams;if(e)for(let o of e)Me(o),i.append("run",o);if(r)for(let o of r)i.append("key",o);if(n)for(let o of n)i.append("source",o);for await(let o of this._getPaginated("/feedback",i))yield*o}async createPresignedFeedbackToken(e,r,{expiration:n,feedbackConfig:i}={}){let o={run_id:e,feedback_key:r,feedback_config:i};n?typeof n=="string"?o.expires_at=n:(n!=null&&n.hours||n!=null&&n.minutes||n!=null&&n.days)&&(o.expires_in=n):o.expires_in={hours:3};let a=JSON.stringify(o);return await(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(c,"create presigned feedback token"),c})).json()}async createComparativeExperiment({name:e,experimentIds:r,referenceDatasetId:n,createdAt:i,description:o,metadata:a,id:s}){var d;if(r.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:r[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");let c={id:s,name:e,experiment_ids:r,reference_dataset_id:n,description:o,created_at:(d=i!=null?i:new Date)==null?void 0:d.toISOString(),extra:{}};a&&(c.extra.metadata=a);let u=JSON.stringify(c);return(await this.caller.call(async()=>{let f=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ve(f,"create comparative experiment"),f})).json()}async*listPresignedFeedbackTokens(e){Me(e);let r=new URLSearchParams({run_id:e});for await(let n of this._getPaginated("/feedback/tokens",r))yield*n}_selectEvalResults(e){let r;return"results"in e?r=e.results:Array.isArray(e)?r=e:r=[e],r}async _logEvaluationFeedback(e,r,n){let i=this._selectEvalResults(e),o=[];for(let a of i){let s=n||{};a.evaluatorInfo&&(s={...a.evaluatorInfo,...s});let c=null;a.targetRunId?c=a.targetRunId:r&&(c=r.id),o.push(await this.createFeedback(c,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:s,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[i,o]}async logEvaluationFeedback(e,r,n){let[i]=await this._logEvaluationFeedback(e,r,n);return i}async*listAnnotationQueues(e={}){let{queueIds:r,name:n,nameContains:i,limit:o}=e,a=new URLSearchParams;r&&r.forEach((c,u)=>{Me(c,`queueIds[${u}]`),a.append("ids",c)}),n&&a.append("name",n),i&&a.append("name_contains",i),a.append("limit",(o!==void 0?Math.min(o,100):100).toString());let s=0;for await(let c of this._getPaginated("/annotation-queues",a))if(yield*c,s++,o!==void 0&&s>=o)break}async createAnnotationQueue(e){let{name:r,description:n,queueId:i,rubricInstructions:o}=e,a={name:r,description:n,id:i||io(),rubric_instructions:o},s=JSON.stringify(Object.fromEntries(Object.entries(a).filter(([u,l])=>l!==void 0)));return(await this.caller.call(async()=>{let u=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await ve(u,"create annotation queue"),u})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{let n=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(n,"read annotation queue"),n})).json()}async updateAnnotationQueue(e,r){let{name:n,description:i,rubricInstructions:o}=r,a=JSON.stringify({name:n,description:i,rubric_instructions:o});await this.caller.call(async()=>{let s=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(s,"update annotation queue",!0),s})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{let r=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(r,"delete annotation queue",!0),r})}async addRunsToAnnotationQueue(e,r){let n=JSON.stringify(r.map((i,o)=>Me(i,`runIds[${o}]`).toString()));await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await ve(i,"add runs to annotation queue",!0),i})}async getRunFromAnnotationQueue(e,r){let n=`/annotation-queues/${Me(e,"queueId")}/run`;return(await this.caller.call(async()=>{let o=await this._fetch(`${this.apiUrl}${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(o,"get run from annotation queue"),o})).json()}async deleteRunFromAnnotationQueue(e,r){await this.caller.call(async()=>{let n=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/runs/${Me(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(n,"delete run from annotation queue",!0),n})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{let n=await this._fetch(`${this.apiUrl}/annotation-queues/${Me(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(n,"get size from annotation queue"),n})).json()}async _currentTenantIsOwner(e){let r=await this._getSettings();return e=="-"||r.tenant_handle===e}async _ownerConflictError(e,r){let n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(e){let n=await(await this.caller.call(async()=>{let i=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(i,"get latest commit hash"),i})).json();if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,r){let[n,i,o]=ja(e),a=JSON.stringify({like:r});return(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/likes/${n}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(c,`${r?"like":"unlike"} prompt`),c})).json()}async _getPromptUrl(e){let[r,n,i]=ja(e);if(await this._currentTenantIsOwner(r)){let o=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${n}/${i.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${o.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${r}/${n}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let r of this._getPaginated(`/commits/${e}/`,new URLSearchParams,n=>n.commits))yield*r}async*listPrompts(e){var n;let r=new URLSearchParams;r.append("sort_field",(n=e==null?void 0:e.sortField)!=null?n:"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&r.append("is_public",e.isPublic.toString()),e!=null&&e.query&&r.append("query",e.query);for await(let i of this._getPaginated("/repos",r,o=>o.repos))yield*i}async getPrompt(e){let[r,n,i]=ja(e),o=await this.caller.call(async()=>{let s=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(s==null?void 0:s.status)===404?null:(await ve(s,"get prompt"),s)}),a=await(o==null?void 0:o.json());return a!=null&&a.repo?a.repo:null}async createPrompt(e,r){let n=await this._getSettings();if(r!=null&&r.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[i,o,a]=ja(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);let s={repo_handle:o,...(r==null?void 0:r.description)&&{description:r.description},...(r==null?void 0:r.readme)&&{readme:r.readme},...(r==null?void 0:r.tags)&&{tags:r.tags},is_public:!!(r!=null&&r.isPublic)},c=JSON.stringify(s),u=await this.caller.call(async()=>{let d=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await ve(d,"create prompt"),d}),{repo:l}=await u.json();return l}async createCommit(e,r,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[i,o,a]=ja(e),s=(n==null?void 0:n.parentCommitHash)==="latest"||!(n!=null&&n.parentCommitHash)?await this._getLatestCommitHash(`${i}/${o}`):n==null?void 0:n.parentCommitHash,c={manifest:JSON.parse(JSON.stringify(r)),parent_commit:s},u=JSON.stringify(c),d=await(await this.caller.call(async()=>{let f=await this._fetch(`${this.apiUrl}/commits/${i}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ve(f,"create commit"),f})).json();return this._getPromptUrl(`${i}/${o}${d.commit_hash?`:${d.commit_hash}`:""}`)}async updateExamplesMultipart(e,r=[]){return this._updateExamplesMultipart(e,r)}async _updateExamplesMultipart(e,r=[]){var a;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let n=new FormData;for(let s of r){let c=s.id,u={...s.metadata&&{metadata:s.metadata},...s.split&&{split:s.split}},l=Dn(u,`Serializing body for example with id: ${c}`),d=new Blob([l],{type:"application/json"});if(n.append(c,d),s.inputs){let f=Dn(s.inputs,`Serializing inputs for example with id: ${c}`),m=new Blob([f],{type:"application/json"});n.append(`${c}.inputs`,m)}if(s.outputs){let f=Dn(s.outputs,`Serializing outputs whle updating example with id: ${c}`),m=new Blob([f],{type:"application/json"});n.append(`${c}.outputs`,m)}if(s.attachments)for(let[f,m]of Object.entries(s.attachments)){let p,b;Array.isArray(m)?[p,b]=m:(p=m.mimeType,b=m.data);let y=new Blob([b],{type:`${p}; length=${b.byteLength}`});n.append(`${c}.attachment.${f}`,y)}if(s.attachments_operations){let f=Dn(s.attachments_operations,`Serializing attachments while updating example with id: ${c}`),m=new Blob([f],{type:"application/json"});n.append(`${c}.attachments_operations`,m)}}let i=e!=null?e:(a=r[0])==null?void 0:a.dataset_id;return(await this.caller.call(async()=>{let s=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${i}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await ve(s,"update examples"),s})).json()}async uploadExamplesMultipart(e,r=[]){return this._uploadExamplesMultipart(e,r)}async _uploadExamplesMultipart(e,r=[]){var o;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let n=new FormData;for(let a of r){let s=((o=a.id)!=null?o:io()).toString(),c={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},u=Dn(c,`Serializing body for uploaded example with id: ${s}`),l=new Blob([u],{type:"application/json"});if(n.append(s,l),a.inputs){let d=Dn(a.inputs,`Serializing inputs for uploaded example with id: ${s}`),f=new Blob([d],{type:"application/json"});n.append(`${s}.inputs`,f)}if(a.outputs){let d=Dn(a.outputs,`Serializing outputs for uploaded example with id: ${s}`),f=new Blob([d],{type:"application/json"});n.append(`${s}.outputs`,f)}if(a.attachments)for(let[d,f]of Object.entries(a.attachments)){let m,p;Array.isArray(f)?[m,p]=f:(m=f.mimeType,p=f.data);let b=new Blob([p],{type:`${m}; length=${p.byteLength}`});n.append(`${s}.attachment.${d}`,b)}}return(await this.caller.call(async()=>{let a=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await ve(a,"upload examples"),a})).json()}async updatePrompt(e,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[n,i]=ja(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);let o={};if((r==null?void 0:r.description)!==void 0&&(o.description=r.description),(r==null?void 0:r.readme)!==void 0&&(o.readme=r.readme),(r==null?void 0:r.tags)!==void 0&&(o.tags=r.tags),(r==null?void 0:r.isPublic)!==void 0&&(o.is_public=r.isPublic),(r==null?void 0:r.isArchived)!==void 0&&(o.is_archived=r.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");let a=JSON.stringify(o);return(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/repos/${n}/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ve(c,"update prompt"),c})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[r,n,i]=ja(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return(await this.caller.call(async()=>{let a=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(a,"delete prompt"),a})).json()}async pullPromptCommit(e,r){let[n,i,o]=ja(e),s=await(await this.caller.call(async()=>{let c=await this._fetch(`${this.apiUrl}/commits/${n}/${i}/${o}${r!=null&&r.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ve(c,"pull prompt commit"),c})).json();return{owner:n,repo:i,commit_hash:s.commit_hash,manifest:s.manifest,examples:s.examples}}async _pullPrompt(e,r){let n=await this.pullPromptCommit(e,{includeModel:r==null?void 0:r.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,r){return await this.promptExists(e)?r&&Object.keys(r).some(i=>i!=="object")&&await this.updatePrompt(e,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}):await this.createPrompt(e,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}),r!=null&&r.object?await this.createCommit(e,r==null?void 0:r.object,{parentCommitHash:r==null?void 0:r.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,r={}){var f,m;let{sourceApiUrl:n=this.apiUrl,datasetName:i}=r,[o,a]=this.parseTokenOrUrl(e,n),s=new t({apiUrl:o,apiKey:"placeholder"}),c=await s.readSharedDataset(a),u=i||c.name;try{if(await this.hasDataset({datasetId:u})){console.log(`Dataset ${u} already exists in your tenant. Skipping.`);return}}catch(p){}let l=await s.listSharedExamples(a),d=await this.createDataset(u,{description:c.description,dataType:c.data_type||"kv",inputsSchema:(f=c.inputs_schema_definition)!=null?f:void 0,outputsSchema:(m=c.outputs_schema_definition)!=null?m:void 0});try{await this.createExamples({inputs:l.map(p=>p.inputs),outputs:l.flatMap(p=>p.outputs?[p.outputs]:[]),datasetId:d.id})}catch(p){throw console.error(`An error occurred while creating dataset ${u}. You should delete it manually.`),p}}parseTokenOrUrl(e,r,n=2,i="dataset"){try{return Me(e),[r,e]}catch(o){}try{let a=new URL(e).pathname.split("/").filter(s=>s!=="");if(a.length>=n){let s=a[a.length-n];return[r,s]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch(o){throw new Error(`Invalid public ${i} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,r;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:n})=>n),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((r=(e=D6())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:r.forceFlush())}};function V3(t){return"dataset_id"in t||"dataset_name"in t}var G3=t=>t!==void 0?t:!!["TRACING_V2","TRACING"].find(r=>hr(r)==="true");var Zo=Symbol.for("lc:context_variables"),Rb=Symbol.for("langsmith:replica_trace_roots");function AO(t,e){if(Zo in t)return t[Zo][e]}function H3(t,e,r){let n=Zo in t?t[Zo]:{};n[e]=r,t[Zo]=n}var Rh=36,Ph="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function K3(t){let r=Object.keys(t).sort().map(n=>{var i;return`${n}:${(i=t[n])!=null?i:""}`}).join("|");return zc(r,Ph)}function Fte(t){return t.replace(/[-:.]/g,"")}function W3(t,e=1){let r=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${r}Z`}function TO(t,e,r=1){let n=W3(t,r);return{dottedOrder:Fte(n)+e,microsecondPrecisionDatestring:n}}var Pb=class t{constructor(e,r,n,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=r,this.project_name=n,this.replicas=i}static fromHeader(e){let r=e.split(","),n={},i=[],o,a;for(let s of r){let[c,u]=s.split("="),l=decodeURIComponent(u);c==="langsmith-metadata"?n=JSON.parse(l):c==="langsmith-tags"?i=l.split(","):c==="langsmith-project"?o=l:c==="langsmith-replicas"&&(a=JSON.parse(l))}return new t(n,i,o,a)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}},ao=class t{constructor(e){var s,c,u,l,d,f;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Y3(e)){Object.assign(this,{...e});return}let r=t.getDefaultConfig(),{metadata:n,...i}=e,o=(s=i.client)!=null?s:t.getSharedClient(),a={...n,...(c=i==null?void 0:i.extra)==null?void 0:c.metadata};if(i.extra={...i.extra,metadata:a},"id"in i&&i.id==null&&delete i.id,Object.assign(this,{...r,...i,client:o}),(u=this.execution_order)!=null||(this.execution_order=1),(l=this.child_execution_order)!=null||(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=W3(this.start_time,this.execution_order)),this.id||(this.id=ib((d=this._serialized_start_time)!=null?d:this.start_time)),this.trace_id||(this.parent_run?this.trace_id=(f=this.parent_run.trace_id)!=null?f:this.id:this.trace_id=this.id),this.replicas=qte(this.replicas),!this.dotted_order){let{dottedOrder:m}=TO(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+m:this.dotted_order=m}}set metadata(e){var r;this.extra={...this.extra,metadata:{...(r=this.extra)==null?void 0:r.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){var r;let e=Date.now();return{run_type:"chain",project_name:Sh(),child_runs:[],api_url:(r=ui("LANGCHAIN_ENDPOINT"))!=null?r:"http://localhost:1984",api_key:ui("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return t.sharedClient||(t.sharedClient=new Lc),t.sharedClient}createChild(e){var l,d,f,m,p,b,y,h,_;let r=this.child_execution_order+1,n=(l=this.replicas)==null?void 0:l.map(v=>{let{reroot:x,...w}=v;return w}),i=(d=e.replicas)!=null?d:n,o=new t({...e,parent_run:this,project_name:this.project_name,replicas:i,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});Zo in this&&(o[Zo]=this[Zo]);let a=Symbol.for("lc:child_config"),s=(m=(f=e.extra)==null?void 0:f[a])!=null?m:this.extra[a];if(Zte(s)){let v={...s},x=Bte(v.callbacks)?(b=(p=v.callbacks).copy)==null?void 0:b.call(p):void 0;x&&(Object.assign(x,{_parentRunId:o.id}),(_=(h=(y=x.handlers)==null?void 0:y.find(X3))==null?void 0:h.updateFromRunTree)==null||_.call(h,o),v.callbacks=x),o.extra[a]=v}let c=new Set,u=this;for(;u!=null&&!c.has(u.id);)c.add(u.id),u.child_execution_order=Math.max(u.child_execution_order,r),u=u.parent_run;return this.child_runs.push(o),o}async end(e,r,n=Date.now(),i){var o,a,s;this.outputs=(o=this.outputs)!=null?o:e,this.error=(a=this.error)!=null?a:r,this.end_time=(s=this.end_time)!=null?s:n,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,r,n=!0){var s,c,u,l,d;let i=(s=e.extra)!=null?s:{};if(((c=i==null?void 0:i.runtime)==null?void 0:c.library)===void 0&&(i.runtime||(i.runtime={}),r))for(let[f,m]of Object.entries(r))i.runtime[f]||(i.runtime[f]=m);let o,a;return n?(a=(l=(u=e.parent_run)==null?void 0:u.id)!=null?l:e.parent_run_id,o=[]):(o=e.child_runs.map(f=>this._convertToCreate(f,r,n)),a=void 0),{id:e.id,name:e.name,start_time:(d=e._serialized_start_time)!=null?d:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,r){if(r.dotted_order){let n=r.dotted_order.split("."),i=null;for(let o=0;o<n.length;o++)if(n[o].slice(-Rh)===e){i=o;break}if(i!==null){let o=n.slice(i+1);r.dotted_order=o.join("."),o.length>0?r.trace_id=o[0].slice(-Rh):r.trace_id=r.id}}r.parent_run_id===e&&(r.parent_run_id=void 0)}_setReplicaTraceRoot(e,r){var i;let n=(i=AO(this,Rb))!=null?i:{};n[e]=r,H3(this,Rb,n);for(let o of this.child_runs)o._setReplicaTraceRoot(e,r)}_remapForProject(e){var h;let{projectName:r,runtimeEnv:n,excludeChildRuns:i=!0,reroot:o=!1,distributedParentId:a,apiUrl:s,apiKey:c,workspaceId:u}=e,l=this._convertToCreate(this,n,i);if(r===this.project_name)return{...l,session_name:r};if(o){if(a)this._sliceParentId(a,l);else if(l.parent_run_id=void 0,l.dotted_order){let v=l.dotted_order.split(".");v.length>0&&(l.dotted_order=v[v.length-1],l.trace_id=l.id)}let _=K3({projectName:r,apiUrl:s,apiKey:c,workspaceId:u});this._setReplicaTraceRoot(_,l.id)}let d;if(!o){let _=(h=AO(this,Rb))!=null?h:{},v=K3({projectName:r,apiUrl:s,apiKey:c,workspaceId:u});if(d=_[v],d&&(l.trace_id=d,l.dotted_order)){let x=l.dotted_order.split("."),w=null;for(let E=0;E<x.length;E++)if(x[E].slice(-Rh)===d){w=E;break}if(w!==null){let E=x.slice(w);l.dotted_order=E.join(".")}}}let f=l.id,m=zc(`${f}:${r}`,Ph),p;l.trace_id?p=zc(`${l.trace_id}:${r}`,Ph):p=m;let b;l.parent_run_id&&(b=zc(`${l.parent_run_id}:${r}`,Ph));let y;return l.dotted_order&&(y=l.dotted_order.split(".").map(x=>{let w=x.slice(-Rh),E=zc(`${w}:${r}`,Ph);return x.slice(0,-Rh)+E}).join(".")),{...l,id:m,trace_id:p,parent_run_id:b,dotted_order:y,session_name:r}}async postRun(e=!0){try{let r=ab();if(this.replicas&&this.replicas.length>0)for(let{projectName:n,apiKey:i,apiUrl:o,workspaceId:a,reroot:s}of this.replicas){let c=this._remapForProject({projectName:n!=null?n:this.project_name,runtimeEnv:r,excludeChildRuns:!0,reroot:s,distributedParentId:this.distributedParentId,apiUrl:o,apiKey:i,workspaceId:a});await this.client.createRun(c,{apiKey:i,apiUrl:o,workspaceId:a})}else{let n=this._convertToCreate(this,r,e);await this.client.createRun(n)}if(!e){jf("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let n of this.child_runs)await n.postRun(!1)}}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(e){var r,n,i;if(this.replicas&&this.replicas.length>0)for(let{projectName:o,apiKey:a,apiUrl:s,workspaceId:c,updates:u,reroot:l}of this.replicas){let d=this._remapForProject({projectName:o!=null?o:this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:l,distributedParentId:this.distributedParentId,apiUrl:s,apiKey:a,workspaceId:c}),f={id:d.id,name:d.name,run_type:d.run_type,start_time:d.start_time,outputs:d.outputs,error:d.error,parent_run_id:d.parent_run_id,session_name:d.session_name,reference_example_id:d.reference_example_id,end_time:d.end_time,dotted_order:d.dotted_order,trace_id:d.trace_id,events:d.events,tags:d.tags,extra:d.extra,attachments:this.attachments,...u};e!=null&&e.excludeInputs||(f.inputs=d.inputs),await this.client.updateRun(d.id,f,{apiKey:a,apiUrl:s,workspaceId:c})}else try{let o={name:this.name,run_type:this.run_type,start_time:(r=this._serialized_start_time)!=null?r:this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:(i=(n=this.parent_run)==null?void 0:n.id)!=null?i:this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(o.inputs=this.inputs),await this.client.updateRun(this.id,o)}catch(o){console.error(`Error in patchRun for run ${this.id}`,o)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){var r;this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:(r=e.time)!=null?r:new Date().toISOString()})}static fromRunnableConfig(e,r){var u,l,d,f,m,p,b;let n=e==null?void 0:e.callbacks,i,o,a,s=G3();if(n){let y=(l=(u=n==null?void 0:n.getParentRunId)==null?void 0:u.call(n))!=null?l:"",h=(d=n==null?void 0:n.handlers)==null?void 0:d.find(_=>(_==null?void 0:_.name)=="langchain_tracer");i=(f=h==null?void 0:h.getRun)==null?void 0:f.call(h,y),o=h==null?void 0:h.projectName,a=h==null?void 0:h.client,s=s||!!h}return i?new t({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:a,tracingEnabled:s,project_name:o,tags:[...new Set(((m=i==null?void 0:i.tags)!=null?m:[]).concat((p=e==null?void 0:e.tags)!=null?p:[]))],extra:{metadata:{...(b=i==null?void 0:i.extra)==null?void 0:b.metadata,...e==null?void 0:e.metadata}}}).createChild(r):new t({...r,client:a,tracingEnabled:s,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,r){var l,d,f,m;let n="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=n["langsmith-trace"];if(!i||typeof i!="string")return;let o=i.trim(),a=o.split(".").map(p=>{let[b,y]=p.split("Z");return{strTime:b,time:Date.parse(b+"Z"),uuid:y}}),s=a[0].uuid,c={...r,name:(l=r==null?void 0:r.name)!=null?l:"parent",run_type:(d=r==null?void 0:r.run_type)!=null?d:"chain",start_time:(f=r==null?void 0:r.start_time)!=null?f:Date.now(),id:(m=a.at(-1))==null?void 0:m.uuid,trace_id:s,dotted_order:o};if(n.baggage&&typeof n.baggage=="string"){let p=Pb.fromHeader(n.baggage);c.metadata=p.metadata,c.tags=p.tags,c.project_name=p.project_name,c.replicas=p.replicas}let u=new t(c);return u.distributedParentId=u.id,u}toHeaders(e){var n;let r={"langsmith-trace":this.dotted_order,baggage:new Pb((n=this.extra)==null?void 0:n.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(let[i,o]of Object.entries(r))e.set(i,o);return r}};Object.defineProperty(ao,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function Y3(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function X3(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function J3(t){return Array.isArray(t)&&t.some(e=>X3(e))}function Bte(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function Zte(t){let e=t==null?void 0:t.callbacks;return t!=null&&typeof e=="object"&&(J3(e==null?void 0:e.handlers)||J3(e))}function Vte(){let t=ui("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{let e=JSON.parse(t);if(Array.isArray(e)){let r=[];for(let n of e){if(typeof n!="object"||n===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof n}`);continue}if(typeof n.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof n.api_url}`);continue}if(typeof n.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof n.api_key}`);continue}r.push({apiUrl:n.api_url.replace(/\/$/,""),apiKey:n.api_key})}return r}else if(typeof e=="object"&&e!==null){Gte(e);let r=[];for(let[n,i]of Object.entries(e)){let o=n.replace(/\/$/,"");if(typeof i=="string")r.push({apiUrl:o,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${n}: expected string, got ${typeof i}`);continue}}return r}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS \u2013 must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(L3(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS \u2013 must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function qte(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):Vte()}function Gte(t){if(Object.keys(t).length>0&&hr("ENDPOINT"))throw new Nb}var Hte={};le(Hte,{BaseTracer:()=>so,isBaseTracer:()=>jc});var Kte=t=>{var e,r;if(t)return t.events=(e=t.events)!=null?e:[],t.child_runs=(r=t.child_runs)!=null?r:[],t};function OO(t,e){var r;if(t)return new ao({...t,start_time:(r=t._serialized_start_time)!=null?r:t.start_time,parent_run:OO(e),child_runs:t.child_runs.map(n=>OO(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:SE()},tracingEnabled:!1})}function EO(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function jc(t){return typeof t._addRunToRunMap=="function"}var so=class extends Dc{constructor(e){super(...arguments);A(this,"runMap",new Map);A(this,"runTreeMap",new Map);A(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?Kte(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,r){e.child_runs.push(r)}_addRunToRunMap(e){let{dottedOrder:r,microsecondPrecisionDatestring:n}=TO(new Date(e.start_time).getTime(),e.id,e.execution_order),i={...e},o=this.getRunById(i.parent_run_id);if(i.parent_run_id!==void 0?o?(this._addChildRun(o,i),o.child_execution_order=Math.max(o.child_execution_order,i.child_execution_order),i.trace_id=o.trace_id,o.dotted_order!==void 0&&(i.dotted_order=[o.dotted_order,r].join("."),i._serialized_start_time=n)):i.parent_run_id=void 0:(i.trace_id=i.id,i.dotted_order=r,i._serialized_start_time=n),this.usesRunTreeMap){let a=OO(i,o);a!==void 0&&this.runTreeMap.set(i.id,a)}else this.runMap.set(i.id,i);return i}async _endTrace(e){var n;let r=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),await((n=this.onRunUpdate)==null?void 0:n.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){let r=e!==void 0&&this.getRunById(e);return r?r.child_execution_order+1:1}_createRunForLLMStart(e,r,n,i,o,a,s,c){let u=this._getExecutionOrder(i),l=Date.now(),d=s?{...o,metadata:s}:o,f={id:n,name:c!=null?c:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d!=null?d:{},tags:a||[]};return this._addRunToRunMap(f)}async handleLLMStart(e,r,n,i,o,a,s,c){var l,d,f;let u=(l=this.getRunById(n))!=null?l:this._createRunForLLMStart(e,r,n,i,o,a,s,c);return await((d=this.onRunCreate)==null?void 0:d.call(this,u)),await((f=this.onLLMStart)==null?void 0:f.call(this,u)),u}_createRunForChatModelStart(e,r,n,i,o,a,s,c){let u=this._getExecutionOrder(i),l=Date.now(),d=s?{...o,metadata:s}:o,f={id:n,name:c!=null?c:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d!=null?d:{},tags:a||[]};return this._addRunToRunMap(f)}async handleChatModelStart(e,r,n,i,o,a,s,c){var l,d,f;let u=(l=this.getRunById(n))!=null?l:this._createRunForChatModelStart(e,r,n,i,o,a,s,c);return await((d=this.onRunCreate)==null?void 0:d.call(this,u)),await((f=this.onLLMStart)==null?void 0:f.call(this,u)),u}async handleLLMEnd(e,r,n,i,o){var s;let a=this.getRunById(r);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...o},await((s=this.onLLMEnd)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleLLMError(e,r,n,i,o){var s;let a=this.getRunById(r);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...o},await((s=this.onLLMError)==null?void 0:s.call(this,a)),await this._endTrace(a),a}_createRunForChainStart(e,r,n,i,o,a,s,c){let u=this._getExecutionOrder(i),l=Date.now(),d={id:n,name:c!=null?c:e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:r,execution_order:u,child_execution_order:u,run_type:s!=null?s:"chain",child_runs:[],extra:a?{metadata:a}:{},tags:o||[]};return this._addRunToRunMap(d)}async handleChainStart(e,r,n,i,o,a,s,c){var l,d,f;let u=(l=this.getRunById(n))!=null?l:this._createRunForChainStart(e,r,n,i,o,a,s,c);return await((d=this.onRunCreate)==null?void 0:d.call(this,u)),await((f=this.onChainStart)==null?void 0:f.call(this,u)),u}async handleChainEnd(e,r,n,i,o){var s;let a=this.getRunById(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=EO(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(a.inputs=EO(o.inputs,"input")),await((s=this.onChainEnd)==null?void 0:s.call(this,a)),await this._endTrace(a),a}async handleChainError(e,r,n,i,o){var s;let a=this.getRunById(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(a.inputs=EO(o.inputs,"input")),await((s=this.onChainError)==null?void 0:s.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,r,n,i,o,a,s){let c=this._getExecutionOrder(i),u=Date.now(),l={id:n,name:s!=null?s:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:r},execution_order:c,child_execution_order:c,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:o||[]};return this._addRunToRunMap(l)}async handleToolStart(e,r,n,i,o,a,s){var u,l,d;let c=(u=this.getRunById(n))!=null?u:this._createRunForToolStart(e,r,n,i,o,a,s);return await((l=this.onRunCreate)==null?void 0:l.call(this,c)),await((d=this.onToolStart)==null?void 0:d.call(this,c)),c}async handleToolEnd(e,r){var i;let n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,r){var i;let n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,r){var o;let n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;let i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,n))}async handleAgentEnd(e,r){var i;let n=this.getRunById(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}_createRunForRetrieverStart(e,r,n,i,o,a,s){let c=this._getExecutionOrder(i),u=Date.now(),l={id:n,name:s!=null?s:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:r},execution_order:c,child_execution_order:c,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:o||[]};return this._addRunToRunMap(l)}async handleRetrieverStart(e,r,n,i,o,a,s){var u,l,d;let c=(u=this.getRunById(n))!=null?u:this._createRunForRetrieverStart(e,r,n,i,o,a,s);return await((l=this.onRunCreate)==null?void 0:l.call(this,c)),await((d=this.onRetrieverStart)==null?void 0:d.call(this,c)),c}async handleRetrieverEnd(e,r){var i;let n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,r){var i;let n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,r){var i;let n=this.getRunById(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,r,n,i,o,a){var c;let s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:a==null?void 0:a.chunk}}),await((c=this.onLLMNewToken)==null?void 0:c.call(this,s,e,{chunk:a==null?void 0:a.chunk})),s}};var IO=be(rB(),1);var Wte={};le(Wte,{ConsoleCallbackHandler:()=>Mb});function gn(t,e){return`${t.open}${e}${t.close}`}function Li(t,e){try{return JSON.stringify(t,null,2)}catch(r){return e}}function nB(t){return typeof t=="string"?t.trim():t==null?t:Li(t,t.toString())}function lu(t){if(!t.end_time)return"";let e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}var{color:Ln}=IO.default,Mb=class extends so{constructor(){super(...arguments);A(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){let r=[],n=e;for(;n.parent_run_id;){let i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((i,o,a)=>{let s=`${i.execution_order}:${i.run_type}:${i.name}`;return o===a.length-1?gn(IO.default.bold,s):s}).join(" > ");return gn(Ln.grey,n)}onChainStart(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.green,"[chain/start]")} [${r}] Entering Chain run with input: ${Li(e.inputs,"[inputs]")}`)}onChainEnd(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.cyan,"[chain/end]")} [${r}] [${lu(e)}] Exiting Chain run with output: ${Li(e.outputs,"[outputs]")}`)}onChainError(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.red,"[chain/error]")} [${r}] [${lu(e)}] Chain run errored with error: ${Li(e.error,"[error]")}`)}onLLMStart(e){let r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${gn(Ln.green,"[llm/start]")} [${r}] Entering LLM run with input: ${Li(n,"[inputs]")}`)}onLLMEnd(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.cyan,"[llm/end]")} [${r}] [${lu(e)}] Exiting LLM run with output: ${Li(e.outputs,"[response]")}`)}onLLMError(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.red,"[llm/error]")} [${r}] [${lu(e)}] LLM run errored with error: ${Li(e.error,"[error]")}`)}onToolStart(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.green,"[tool/start]")} [${r}] Entering Tool run with input: "${nB(e.inputs.input)}"`)}onToolEnd(e){var n;let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.cyan,"[tool/end]")} [${r}] [${lu(e)}] Exiting Tool run with output: "${nB((n=e.outputs)==null?void 0:n.output)}"`)}onToolError(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.red,"[tool/error]")} [${r}] [${lu(e)}] Tool run errored with error: ${Li(e.error,"[error]")}`)}onRetrieverStart(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${Li(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.cyan,"[retriever/end]")} [${r}] [${lu(e)}] Exiting Retriever run with output: ${Li(e.outputs,"[outputs]")}`)}onRetrieverError(e){let r=this.getBreadcrumbs(e);console.log(`${gn(Ln.red,"[retriever/error]")} [${r}] [${lu(e)}] Retriever run errored with error: ${Li(e.error,"[error]")}`)}onAgentAction(e){let r=e,n=this.getBreadcrumbs(e);console.log(`${gn(Ln.blue,"[agent/action]")} [${n}] Agent selected action: ${Li(r.actions[r.actions.length-1],"[action]")}`)}};var NO,zb=()=>{if(NO===void 0){let t=er("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};NO=new Lc(t)}return NO};var kO=class{getStore(){}run(e,r){return r()}},CO=Symbol.for("ls:tracing_async_local_storage"),Yte=new kO,$O=class{getInstance(){var e;return(e=globalThis[CO])!=null?e:Yte}initializeGlobalInstance(e){globalThis[CO]===void 0&&(globalThis[CO]=e)}},Xte=new $O;function iB(t=!1){let e=Xte.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function Db(t){return typeof t=="function"&&"langsmith:traceable"in t}var Qte={};le(Qte,{LangChainTracer:()=>Mh});var Mh=class oB extends so{constructor(r={}){super(r);A(this,"name","langchain_tracer");A(this,"projectName");A(this,"exampleId");A(this,"client");A(this,"replicas");A(this,"usesRunTreeMap",!0);let{exampleId:n,projectName:i,client:o,replicas:a}=r;this.projectName=i!=null?i:Sh(),this.replicas=a,this.exampleId=n,this.client=o!=null?o:zb();let s=oB.getTraceableRunTree();s&&this.updateFromRunTree(s)}async persistRun(r){}async onRunCreate(r){let n=this.getRunTreeWithTracingConfig(r.id);await(n==null?void 0:n.postRun())}async onRunUpdate(r){let n=this.getRunTreeWithTracingConfig(r.id);await(n==null?void 0:n.patchRun())}getRun(r){return this.runTreeMap.get(r)}updateFromRunTree(r){var a,s,c,u;this.runTreeMap.set(r.id,r);let n=r,i=new Set;for(;n.parent_run&&!(i.has(n.id)||(i.add(n.id),!n.parent_run));)n=n.parent_run;i.clear();let o=[n];for(;o.length>0;){let l=o.shift();!l||i.has(l.id)||(i.add(l.id),this.runTreeMap.set(l.id,l),l.child_runs&&o.push(...l.child_runs))}this.client=(a=r.client)!=null?a:this.client,this.replicas=(s=r.replicas)!=null?s:this.replicas,this.projectName=(c=r.project_name)!=null?c:this.projectName,this.exampleId=(u=r.reference_example_id)!=null?u:this.exampleId}getRunTreeWithTracingConfig(r){let n=this.runTreeMap.get(r);if(n)return new ao({...n,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return iB(!0)}catch(r){return}}};var Lb=be(hb(),1),Fc;function ere(){let t="default"in Lb.default?Lb.default.default:Lb.default;return new t({autoStart:!0,concurrency:1})}function tre(){return typeof Fc=="undefined"&&(Fc=ere()),Fc}async function tr(t,e){if(e===!0){let r=uu();r!==void 0?await r.run(void 0,async()=>t()):await t()}else Fc=tre(),Fc.add(async()=>{let r=uu();r!==void 0?await r.run(void 0,async()=>t()):await t()})}async function aB(){let t=zb();await Promise.allSettled([typeof Fc!="undefined"?Fc.onIdle():Promise.resolve(),t.awaitPendingTraceBatches()])}var rre={};le(rre,{awaitAllCallbacks:()=>aB,consumeCallback:()=>tr});var sB=t=>t!==void 0?t:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>er(r)==="true");function RO(t){var n;let e=uu();if(e===void 0)return;let r=e.getStore();return(n=r==null?void 0:r[su])==null?void 0:n[t]}var nre=Symbol("lc:configure_hooks"),uB=()=>RO(nre)||[];var ire={};le(ire,{BaseCallbackManager:()=>cB,BaseRunManager:()=>Lh,CallbackManager:()=>Ar,CallbackManagerForChainRun:()=>dB,CallbackManagerForLLMRun:()=>PO,CallbackManagerForRetrieverRun:()=>lB,CallbackManagerForToolRun:()=>fB,ensureHandler:()=>Zf,parseCallbackConfigArg:()=>Dh});function Dh(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}var cB=class{setHandler(t){return this.setHandlers([t])}},Lh=class{constructor(t,e,r,n,i,o,a,s){this.runId=t,this.handlers=e,this.inheritableHandlers=r,this.tags=n,this.inheritableTags=i,this.metadata=o,this.inheritableMetadata=a,this._parentRunId=s}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;try{await((r=e.handleText)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${n}`),e.raiseError)throw n}},e.awaitHandlers)))}async handleCustomEvent(t,e,r,n,i){await Promise.all(this.handlers.map(o=>tr(async()=>{var a;try{await((a=o.handleCustomEvent)==null?void 0:a.call(o,t,e,this.runId,this.tags,this.metadata))}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${s}`),o.raiseError)throw s}},o.awaitHandlers)))}},lB=class extends Lh{getChild(t){let e=new Ar(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;if(!e.ignoreRetriever)try{await((r=e.handleRetrieverEnd)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw n}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;if(!e.ignoreRetriever)try{await((r=e.handleRetrieverError)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${n}`),e.raiseError)throw t}},e.awaitHandlers)))}},PO=class extends Lh{async handleLLMNewToken(t,e,r,n,i,o){await Promise.all(this.handlers.map(a=>tr(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMNewToken)==null?void 0:s.call(a,t,e!=null?e:{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(c){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMNewToken: ${c}`),a.raiseError)throw c}},a.awaitHandlers)))}async handleLLMError(t,e,r,n,i){await Promise.all(this.handlers.map(o=>tr(async()=>{var a;if(!o.ignoreLLM)try{await((a=o.handleLLMError)==null?void 0:a.call(o,t,this.runId,this._parentRunId,this.tags,i))}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${s}`),o.raiseError)throw s}},o.awaitHandlers)))}async handleLLMEnd(t,e,r,n,i){await Promise.all(this.handlers.map(o=>tr(async()=>{var a;if(!o.ignoreLLM)try{await((a=o.handleLLMEnd)==null?void 0:a.call(o,t,this.runId,this._parentRunId,this.tags,i))}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${s}`),o.raiseError)throw s}},o.awaitHandlers)))}},dB=class extends Lh{getChild(t){let e=new Ar(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,r,n,i){await Promise.all(this.handlers.map(o=>tr(async()=>{var a;if(!o.ignoreChain)try{await((a=o.handleChainError)==null?void 0:a.call(o,t,this.runId,this._parentRunId,this.tags,i))}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${s}`),o.raiseError)throw s}},o.awaitHandlers)))}async handleChainEnd(t,e,r,n,i){await Promise.all(this.handlers.map(o=>tr(async()=>{var a;if(!o.ignoreChain)try{await((a=o.handleChainEnd)==null?void 0:a.call(o,t,this.runId,this._parentRunId,this.tags,i))}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${s}`),o.raiseError)throw s}},o.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;if(!e.ignoreAgent)try{await((r=e.handleAgentAction)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${n}`),e.raiseError)throw n}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;if(!e.ignoreAgent)try{await((r=e.handleAgentEnd)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${n}`),e.raiseError)throw n}},e.awaitHandlers)))}},fB=class extends Lh{getChild(t){let e=new Ar(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;if(!e.ignoreAgent)try{await((r=e.handleToolError)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${n}`),e.raiseError)throw n}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>tr(async()=>{var r;if(!e.ignoreAgent)try{await((r=e.handleToolEnd)==null?void 0:r.call(e,t,this.runId,this._parentRunId,this.tags))}catch(n){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${n}`),e.raiseError)throw n}},e.awaitHandlers)))}},Ar=class zh extends cB{constructor(r,n){var i,o,a,s,c,u;super();A(this,"handlers",[]);A(this,"inheritableHandlers",[]);A(this,"tags",[]);A(this,"inheritableTags",[]);A(this,"metadata",{});A(this,"inheritableMetadata",{});A(this,"name","callback_manager");A(this,"_parentRunId");this.handlers=(i=n==null?void 0:n.handlers)!=null?i:this.handlers,this.inheritableHandlers=(o=n==null?void 0:n.inheritableHandlers)!=null?o:this.inheritableHandlers,this.tags=(a=n==null?void 0:n.tags)!=null?a:this.tags,this.inheritableTags=(s=n==null?void 0:n.inheritableTags)!=null?s:this.inheritableTags,this.metadata=(c=n==null?void 0:n.metadata)!=null?c:this.metadata,this.inheritableMetadata=(u=n==null?void 0:n.inheritableMetadata)!=null?u:this.inheritableMetadata,this._parentRunId=r}getParentRunId(){return this._parentRunId}async handleLLMStart(r,n,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,u=void 0){return Promise.all(n.map(async(l,d)=>{let f=d===0&&i?i:Mi();return await Promise.all(this.handlers.map(m=>{if(!m.ignoreLLM)return jc(m)&&m._createRunForLLMStart(r,[l],f,this._parentRunId,a,this.tags,this.metadata,u),tr(async()=>{var p;try{await((p=m.handleLLMStart)==null?void 0:p.call(m,r,[l],f,this._parentRunId,a,this.tags,this.metadata,u))}catch(b){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleLLMStart: ${b}`),m.raiseError)throw b}},m.awaitHandlers)})),new PO(f,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(r,n,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,u=void 0){return Promise.all(n.map(async(l,d)=>{let f=d===0&&i?i:Mi();return await Promise.all(this.handlers.map(m=>{if(!m.ignoreLLM)return jc(m)&&m._createRunForChatModelStart(r,[l],f,this._parentRunId,a,this.tags,this.metadata,u),tr(async()=>{var p,b;try{if(m.handleChatModelStart)await((p=m.handleChatModelStart)==null?void 0:p.call(m,r,[l],f,this._parentRunId,a,this.tags,this.metadata,u));else if(m.handleLLMStart){let y=Lf(l);await((b=m.handleLLMStart)==null?void 0:b.call(m,r,[y],f,this._parentRunId,a,this.tags,this.metadata,u))}}catch(y){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleLLMStart: ${y}`),m.raiseError)throw y}},m.awaitHandlers)})),new PO(f,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(r,n,i=Mi(),o=void 0,a=void 0,s=void 0,c=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreChain)return jc(u)&&u._createRunForChainStart(r,n,i,this._parentRunId,this.tags,this.metadata,o,c),tr(async()=>{var l;try{await((l=u.handleChainStart)==null?void 0:l.call(u,r,n,i,this._parentRunId,this.tags,this.metadata,o,c))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainStart: ${d}`),u.raiseError)throw d}},u.awaitHandlers)})),new dB(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(r,n,i=Mi(),o=void 0,a=void 0,s=void 0,c=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return jc(u)&&u._createRunForToolStart(r,n,i,this._parentRunId,this.tags,this.metadata,c),tr(async()=>{var l;try{await((l=u.handleToolStart)==null?void 0:l.call(u,r,n,i,this._parentRunId,this.tags,this.metadata,c))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${d}`),u.raiseError)throw d}},u.awaitHandlers)})),new fB(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(r,n,i=Mi(),o=void 0,a=void 0,s=void 0,c=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return jc(u)&&u._createRunForRetrieverStart(r,n,i,this._parentRunId,this.tags,this.metadata,c),tr(async()=>{var l;try{await((l=u.handleRetrieverStart)==null?void 0:l.call(u,r,n,i,this._parentRunId,this.tags,this.metadata,c))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${d}`),u.raiseError)throw d}},u.awaitHandlers)})),new lB(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(r,n,i,o,a){await Promise.all(this.handlers.map(s=>tr(async()=>{var c;if(!s.ignoreCustomEvent)try{await((c=s.handleCustomEvent)==null?void 0:c.call(s,r,n,i,this.tags,this.metadata))}catch(u){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleCustomEvent: ${u}`),s.raiseError)throw u}},s.awaitHandlers)))}addHandler(r,n=!0){this.handlers.push(r),n&&this.inheritableHandlers.push(r)}removeHandler(r){this.handlers=this.handlers.filter(n=>n!==r),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==r)}setHandlers(r,n=!0){this.handlers=[],this.inheritableHandlers=[];for(let i of r)this.addHandler(i,n)}addTags(r,n=!0){this.removeTags(r),this.tags.push(...r),n&&this.inheritableTags.push(...r)}removeTags(r){this.tags=this.tags.filter(n=>!r.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!r.includes(n))}addMetadata(r,n=!0){this.metadata={...this.metadata,...r},n&&(this.inheritableMetadata={...this.inheritableMetadata,...r})}removeMetadata(r){for(let n of Object.keys(r))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(r=[],n=!0){let i=new zh(this._parentRunId);for(let o of this.handlers){let a=this.inheritableHandlers.includes(o);i.addHandler(o,a)}for(let o of this.tags){let a=this.inheritableTags.includes(o);i.addTags([o],a)}for(let o of Object.keys(this.metadata)){let a=Object.keys(this.inheritableMetadata).includes(o);i.addMetadata({[o]:this.metadata[o]},a)}for(let o of r)i.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===o.name)||i.addHandler(o,n);return i}static fromHandlers(r){class n extends Dc{constructor(){super();A(this,"name",Mi());Object.assign(this,r)}}let i=new this;return i.addHandler(new n),i}static configure(r,n,i,o,a,s,c){return this._configureSync(r,n,i,o,a,s,c)}static _configureSync(r,n,i,o,a,s,c){var m,p,b;let u;(r||n)&&(Array.isArray(r)||!r?(u=new zh,u.setHandlers((m=r==null?void 0:r.map(Zf))!=null?m:[],!0)):u=r,u=u.copy(Array.isArray(n)?n.map(Zf):n==null?void 0:n.handlers,!1));let l=er("LANGCHAIN_VERBOSE")==="true"||(c==null?void 0:c.verbose),d=((p=Mh.getTraceableRunTree())==null?void 0:p.tracingEnabled)||sB(),f=d||((b=er("LANGCHAIN_TRACING"))!=null?b:!1);if(l||f){if(u||(u=new zh),l&&!u.handlers.some(y=>y.name===Mb.prototype.name)){let y=new Mb;u.addHandler(y,!0)}if(f&&!u.handlers.some(y=>y.name==="langchain_tracer")&&d){let y=new Mh;u.addHandler(y,!0)}if(d){let y=Mh.getTraceableRunTree();if(y&&u._parentRunId===void 0){u._parentRunId=y.id;let h=u.handlers.find(_=>_.name==="langchain_tracer");h==null||h.updateFromRunTree(y)}}}for(let{contextVar:y,inheritable:h=!0,handlerClass:_,envVar:v}of uB()){let x=v&&er(v)==="true"&&_,w,E=y!==void 0?RO(y):void 0;E&&OE(E)?w=E:x&&(w=new _({})),w!==void 0&&(u||(u=new zh),u.handlers.some(S=>S.name===w.name)||u.addHandler(w,h))}return(i||o)&&u&&(u.addTags(i!=null?i:[]),u.addTags(o!=null?o:[],!1)),(a||s)&&u&&(u.addMetadata(a!=null?a:{}),u.addMetadata(s!=null?s:{},!1)),u}};function Zf(t){return"name"in t?t:Dc.fromMethods(t)}var MO=class{getStore(){}run(t,e){return e()}enterWith(t){}},ore=new MO,mB=Symbol.for("lc:child_config"),are=class{getInstance(){var t;return(t=uu())!=null?t:ore}getRunnableConfig(){var e,r;return(r=(e=this.getInstance().getStore())==null?void 0:e.extra)==null?void 0:r[mB]}runWithConfig(t,e,r){var u;let n=Ar._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),i=this.getInstance(),o=i.getStore(),a=n==null?void 0:n.getParentRunId(),s=(u=n==null?void 0:n.handlers)==null?void 0:u.find(l=>(l==null?void 0:l.name)==="langchain_tracer"),c;return s&&a?c=s.getRunTreeWithTracingConfig(a):r||(c=new ao({name:"<runnable_lambda>",tracingEnabled:!1})),c&&(c.extra={...c.extra,[mB]:t}),o!==void 0&&o[su]!==void 0&&(c===void 0&&(c={}),c[su]=o[su]),i.run(c,e)}initializeGlobalInstance(t){uu()===void 0&&qj(t)}},kr=new are;var sre={};le(sre,{AsyncLocalStorageProviderSingleton:()=>kr,MockAsyncLocalStorage:()=>MO,_CONTEXT_VARIABLES_KEY:()=>su});var Ub=25;async function en(t){return Ar._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function Bc(...t){var r,n,i;let e={};for(let o of t.filter(a=>!!a))for(let a of Object.keys(o))if(a==="metadata")e[a]={...e[a],...o[a]};else if(a==="tags"){let s=(r=e[a])!=null?r:[];e[a]=[...new Set(s.concat((n=o[a])!=null?n:[]))]}else if(a==="configurable")e[a]={...e[a],...o[a]};else if(a==="timeout")e.timeout===void 0?e.timeout=o.timeout:o.timeout!==void 0&&(e.timeout=Math.min(e.timeout,o.timeout));else if(a==="signal")e.signal===void 0?e.signal=o.signal:o.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,o.signal]):e.signal=o.signal);else if(a==="callbacks"){let s=e.callbacks,c=o.callbacks;if(Array.isArray(c))if(!s)e.callbacks=c;else if(Array.isArray(s))e.callbacks=s.concat(c);else{let u=s.copy();for(let l of c)u.addHandler(Zf(l),!0);e.callbacks=u}else if(c)if(!s)e.callbacks=c;else if(Array.isArray(s)){let u=c.copy();for(let l of s)u.addHandler(Zf(l),!0);e.callbacks=u}else e.callbacks=new Ar(c._parentRunId,{handlers:s.handlers.concat(c.handlers),inheritableHandlers:s.inheritableHandlers.concat(c.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(c.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(c.inheritableTags))),metadata:{...s.metadata,...c.metadata}})}else{let s=a;e[s]=(i=o[s])!=null?i:e[s]}return e}var ure=new Set(["string","number","boolean"]);function We(t){var n;let e=kr.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){let{runId:i,runName:o,...a}=e;r=Object.entries(a).reduce((s,[c,u])=>(u!==void 0&&(s[c]=u),s),r)}if(t&&(r=Object.entries(t).reduce((i,[o,a])=>(a!==void 0&&(i[o]=a),i),r)),r!=null&&r.configurable)for(let i of Object.keys(r.configurable))ure.has(typeof r.configurable[i])&&!((n=r.metadata)!=null&&n[i])&&(r.metadata||(r.metadata={}),r.metadata[i]=r.configurable[i]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");let i=r.timeout,o=AbortSignal.timeout(i);r.metadata||(r.metadata={}),r.metadata.timeoutMs===void 0&&(r.metadata.timeoutMs=i),r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,o])):r.signal=o,delete r.timeout}return r}function ft(t={},{callbacks:e,maxConcurrency:r,recursionLimit:n,runName:i,configurable:o,runId:a}={}){let s=We(t);return e!==void 0&&(delete s.runName,s.callbacks=e),n!==void 0&&(s.recursionLimit=n),r!==void 0&&(s.maxConcurrency=r),i!==void 0&&(s.runName=i),o!==void 0&&(s.configurable={...s.configurable,...o}),a!==void 0&&delete s.runId,s}function yn(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function Ui(t,e){if(e===void 0)return t;let r;return Promise.race([t.catch(n=>{if(!(e!=null&&e.aborted))throw n}),new Promise((n,i)=>{r=()=>{i(du(e))},e.addEventListener("abort",r),e.aborted&&i(du(e))})]).finally(()=>e.removeEventListener("abort",r))}function du(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var cre={};le(cre,{AsyncGeneratorWithSetup:()=>fu,IterableReadableStream:()=>_n,atee:()=>jb,concat:()=>ci,pipeGeneratorWithSetup:()=>DO});var _n=class zO extends ReadableStream{constructor(){super(...arguments);A(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let r=await this.reader.read();return r.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:r.value}}catch(r){throw this.reader.releaseLock(),r}}async return(){if(this.ensureReader(),this.locked){let r=this.reader.cancel();this.reader.releaseLock(),await r}return{done:!0,value:void 0}}async throw(r){if(this.ensureReader(),this.locked){let n=this.reader.cancel();this.reader.releaseLock(),await n}throw r}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(r){let n=r.getReader();return new zO({start(i){return o();function o(){return n.read().then(({done:a,value:s})=>{if(a){i.close();return}return i.enqueue(s),o()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(r){return new zO({async pull(n){let{value:i,done:o}=await r.next();o&&n.close(),n.enqueue(i)},async cancel(n){await r.return(n)}})}};function jb(t,e=2){let r=Array.from({length:e},()=>[]);return r.map(async function*(i){for(;;)if(i.length===0){let o=await t.next();for(let a of r)a.push(o)}else{if(i[0].done)return;yield i.shift().value}})}function ci(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){let r={...t};for(let[n,i]of Object.entries(e))n in r&&!Array.isArray(r[n])?r[n]=ci(r[n],i):r[n]=i;return r}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var fu=class{constructor(t){A(this,"generator");A(this,"setup");A(this,"config");A(this,"signal");A(this,"firstResult");A(this,"firstResultUsed",!1);var e,r;this.generator=t.generator,this.config=t.config,this.signal=(r=t.signal)!=null?r:(e=this.config)==null?void 0:e.signal,this.setup=new Promise((n,i)=>{kr.runWithConfig(yn(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,i):this.firstResult.then(o=>n(void 0),i)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?kr.runWithConfig(yn(this.config),this.signal?async()=>Ui(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function DO(t,e,r,n,...i){let o=new fu({generator:e,startSetup:r,signal:n}),a=await o.setup;return{output:t(o,a,...i),setup:a}}var lre=Object.prototype.hasOwnProperty;function Bb(t,e){return lre.call(t,e)}function Zb(t){if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)Bb(t,r)&&e.push(r);return e}function vn(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Vb(t){let e=0,r=t.length,n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function Fa(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function qb(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Fb(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Fb(t[r]))return!0}else if(typeof t=="object"){let r=Zb(t),n=r.length;for(var e=0;e<n;e++)if(Fb(t[r[e]]))return!0}}return!1}function pB(t,e){let r=[t];for(let n in e){let i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i!="undefined"&&r.push(`${n}: ${i}`)}return r.join(`
`)}var Gb=class extends Error{constructor(t,e,r,n,i){super(pB(t,{name:e,index:r,operation:n,tree:i})),this.name=e,this.index=r,this.operation=n,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=pB(t,{name:e,index:r,operation:n,tree:i})}};var UO={};le(UO,{JsonPatchError:()=>rr,_areEquals:()=>Uh,applyOperation:()=>Zc,applyPatch:()=>mu,applyReducer:()=>mre,deepClone:()=>dre,getValueByPointer:()=>Hb,validate:()=>hB,validator:()=>Kb});var rr=Gb,dre=vn;function LO(t){return Object.getOwnPropertyNames(Object.prototype).includes(t)}var Vf={add:function(t,e,r){if(LO(e))throw new TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){if(LO(e))throw new TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){if(LO(e))throw new TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=Hb(r,this.path);n&&(n=vn(n));let i=Zc(r,{op:"remove",path:this.from}).removed;return Zc(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){let n=Hb(r,this.from);return Zc(r,{op:"add",path:this.path,value:vn(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:Uh(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},fre={add:function(t,e,r){return Vb(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:Vf.move,copy:Vf.copy,test:Vf.test,_get:Vf._get};function Hb(t,e){if(e=="")return t;var r={op:"_get",path:e};return Zc(t,r),r.value}function Zc(t,e,r=!1,n=!0,i=!0,o=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):Kb(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=Hb(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=Uh(t,e.value),a.test===!1)throw new rr("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new rr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return a}}else{n||(t=vn(t));let s=(e.path||"").split("/"),c=t,u=1,l=s.length,d,f,m;for(typeof r=="function"?m=r:m=Kb;;){if(f=s[u],f&&f.indexOf("~")!=-1&&(f=qb(f)),i&&(f=="__proto__"||f=="prototype"&&u>0&&s[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&d===void 0&&(c[f]===void 0?d=s.slice(0,u).join("/"):u==l-1&&(d=e.path),d!==void 0&&m(e,0,t,d)),u++,Array.isArray(c)){if(f==="-")f=c.length;else{if(r&&!Vb(f))throw new rr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);Vb(f)&&(f=~~f)}if(u>=l){if(r&&e.op==="add"&&f>c.length)throw new rr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);let p=fre[e.op].call(e,c,f,t);if(p.test===!1)throw new rr("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return p}}else if(u>=l){let p=Vf[e.op].call(e,c,f,t);if(p.test===!1)throw new rr("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return p}if(c=c[f],r&&u<l&&(!c||typeof c!="object"))throw new rr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}}function mu(t,e,r,n=!0,i=!0){if(r&&!Array.isArray(e))throw new rr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=vn(t));let o=new Array(e.length);for(let a=0,s=e.length;a<s;a++)o[a]=Zc(t,e[a],r,!0,i,a),t=o[a].newDocument;return o.newDocument=t,o}function mre(t,e,r){let n=Zc(t,e);if(n.test===!1)throw new rr("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function Kb(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new rr("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(Vf[t.op]){if(typeof t.path!="string")throw new rr("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new rr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new rr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new rr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Fb(t.value))throw new rr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,o=n.split("/").length;if(i!==o+1&&i!==o)throw new rr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new rr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},s=hB([a],r);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new rr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new rr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function hB(t,e,r){try{if(!Array.isArray(t))throw new rr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)mu(vn(e),vn(t),r||!0);else{r=r||Kb;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof rr)return i;throw i}}function Uh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,o,a;if(r&&n){if(o=t.length,o!=e.length)return!1;for(i=o;i--!==0;)if(!Uh(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var s=Object.keys(t);if(o=s.length,o!==Object.keys(e).length)return!1;for(i=o;i--!==0;)if(!e.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!Uh(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}function gB(t,e,r,n,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=Zb(e),a=Zb(t),s=!1,c=!1,u=a.length-1;u>=0;u--){var l=a[u],d=t[l];if(Bb(e,l)&&!(e[l]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var f=e[l];typeof d=="object"&&d!=null&&typeof f=="object"&&f!=null&&Array.isArray(d)===Array.isArray(f)?gB(d,f,r,n+"/"+Fa(l),i):d!==f&&(s=!0,i&&r.push({op:"test",path:n+"/"+Fa(l),value:vn(d)}),r.push({op:"replace",path:n+"/"+Fa(l),value:vn(f)}))}else Array.isArray(t)===Array.isArray(e)?(i&&r.push({op:"test",path:n+"/"+Fa(l),value:vn(d)}),r.push({op:"remove",path:n+"/"+Fa(l)}),c=!0):(i&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}),s=!0)}if(!(!c&&o.length==a.length))for(var u=0;u<o.length;u++){var l=o[u];!Bb(t,l)&&e[l]!==void 0&&r.push({op:"add",path:n+"/"+Fa(l),value:vn(e[l])})}}}function qf(t,e,r=!1){var n=[];return gB(t,e,n,"",r),n}var z3e={...UO,JsonPatchError:Gb,deepClone:vn,escapePathComponent:Fa,unescapePathComponent:qb};var pre={};le(pre,{LogStreamCallbackHandler:()=>Wb,RunLog:()=>Jb,RunLogPatch:()=>Vo,isLogStreamHandler:()=>FO});var Vo=class{constructor(t){A(this,"ops");var e;this.ops=(e=t.ops)!=null?e:[]}concat(t){let e=this.ops.concat(t.ops),r=mu({},e);return new Jb({ops:e,state:r[r.length-1].newDocument})}},Jb=class jO extends Vo{constructor(r){super(r);A(this,"state");this.state=r.state}concat(r){let n=this.ops.concat(r.ops),i=mu(this.state,r.ops);return new jO({ops:n,state:i[i.length-1].newDocument})}static fromRunLogPatch(r){let n=mu({},r.ops);return new jO({ops:r.ops,state:n[n.length-1].newDocument})}},FO=t=>t.name==="log_stream_tracer";async function yB(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=t;if(["retriever","llm","prompt"].includes(t.run_type))return r;if(!(Object.keys(r).length===1&&(r==null?void 0:r.input)===""))return r.input}async function _B(t,e){let{outputs:r}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?r:r!==void 0&&Object.keys(r).length===1&&(r==null?void 0:r.output)!==void 0?r.output:r}function hre(t){return t!==void 0&&t.message!==void 0}var Wb=class extends so{constructor(e){var r,n;super({_awaitHandler:!0,...e});A(this,"autoClose",!0);A(this,"includeNames");A(this,"includeTypes");A(this,"includeTags");A(this,"excludeNames");A(this,"excludeTypes");A(this,"excludeTags");A(this,"_schemaFormat","original");A(this,"rootId");A(this,"keyMapByRunId",{});A(this,"counterMapByRunName",{});A(this,"transformStream");A(this,"writer");A(this,"receiveStream");A(this,"name","log_stream_tracer");A(this,"lc_prefer_streaming",!0);this.autoClose=(r=e==null?void 0:e.autoClose)!=null?r:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(n=e==null?void 0:e._schemaFormat)!=null?n:this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=_n.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;if(e.id===this.rootId)return!1;let r=(i=e.tags)!=null?i:[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(o=>{var a;return(a=this.includeTags)==null?void 0:a.includes(o)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(o=>{var a;return!((a=this.excludeTags)!=null&&a.includes(o))})),n}async*tapOutputIterable(e,r){for await(let n of r){if(e!==this.rootId){let i=this.keyMapByRunId[e];i&&await this.writer.write(new Vo({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){var i,o,a;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Vo({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let r=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=r===1?e.name:`${e.name}:${r}`;let n={id:e.id,name:e.name,type:e.run_type,tags:(i=e.tags)!=null?i:[],metadata:(a=(o=e.extra)==null?void 0:o.metadata)!=null?a:{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await yB(e,this._schemaFormat)),await this.writer.write(new Vo({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{let r=this.keyMapByRunId[e.id];if(r===void 0)return;let n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${r}/inputs`,value:await yB(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${r}/final_output`,value:await _B(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});let i=new Vo({ops:n});await this.writer.write(i)}finally{if(e.id===this.rootId){let r=new Vo({ops:[{op:"replace",path:"/final_output",value:await _B(e,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r,n){let i=this.keyMapByRunId[e.id];if(i===void 0)return;let o=e.inputs.messages!==void 0,a;o?hre(n==null?void 0:n.chunk)?a=n==null?void 0:n.chunk:a=new Sr({id:`run-${e.id}`,content:r}):a=r;let s=new Vo({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${i}/streamed_output/-`,value:a}]});await this.writer.write(s)}};var gre={};le(gre,{ChatGenerationChunk:()=>Ba,GenerationChunk:()=>qo,RUN_KEY:()=>Vc});var Vc="__run",qo=class vB{constructor(e){A(this,"text");A(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new vB({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Ba=class bB extends qo{constructor(r){super(r);A(this,"message");this.message=r.message}concat(r){return new bB({text:this.text+r.text,generationInfo:{...this.generationInfo,...r.generationInfo},message:this.message.concat(r.message)})}};function Yb({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}var xB=t=>t.name==="event_stream_tracer",wB=class extends so{constructor(e){var r;super({_awaitHandler:!0,...e});A(this,"autoClose",!0);A(this,"includeNames");A(this,"includeTypes");A(this,"includeTags");A(this,"excludeNames");A(this,"excludeTypes");A(this,"excludeTags");A(this,"runInfoMap",new Map);A(this,"tappedPromises",new Map);A(this,"transformStream");A(this,"writer");A(this,"receiveStream");A(this,"name","event_stream_tracer");A(this,"lc_prefer_streaming",!0);this.autoClose=(r=e==null?void 0:e.autoClose)!=null?r:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=_n.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;let r=(i=e.tags)!=null?i:[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||r.find(o=>{var a;return(a=this.includeTags)==null?void 0:a.includes(o)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&r.every(o=>{var a;return!((a=this.excludeTags)!=null&&a.includes(o))})),n}async*tapOutputIterable(e,r){let n=await r.next();if(n.done)return;let i=this.runInfoMap.get(e);if(i===void 0){yield n.value;return}function o(s,c){return s==="llm"&&typeof c=="string"?new qo({text:c}):c}let a=this.tappedPromises.get(e);if(a===void 0){let s;a=new Promise(c=>{s=c}),this.tappedPromises.set(e,a);try{let c={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...c,data:{chunk:o(i.runType,n.value)}},i),yield n.value;for await(let u of r)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...c,data:{chunk:o(i.runType,u)}},i),yield u}finally{s==null||s()}}else{yield n.value;for await(let s of r)yield s}}async send(e,r){this._includeRun(r)&&await this.writer.write(e)}async sendEndEvent(e,r){let n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,r)}):await this.send(e,r)}async onLLMStart(e){var a,s,c,u,l,d;let r=Yb(e),n=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:(a=e.tags)!=null?a:[],metadata:(c=(s=e.extra)==null?void 0:s.metadata)!=null?c:{},name:r,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,i);let o=`on_${n}_start`;await this.send({event:o,data:{input:e.inputs},name:r,tags:(u=e.tags)!=null?u:[],run_id:e.id,metadata:(d=(l=e.extra)==null?void 0:l.metadata)!=null?d:{}},i)}async onLLMNewToken(e,r,n){let i=this.runInfoMap.get(e.id),o,a;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")a="on_chat_model_stream",(n==null?void 0:n.chunk)===void 0?o=new Sr({content:r,id:`run-${e.id}`}):o=n.chunk.message;else if(i.runType==="llm")a="on_llm_stream",(n==null?void 0:n.chunk)===void 0?o=new qo({text:r}):o=n.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:a,data:{chunk:o},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var a,s,c,u;let r=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let i=(a=e.outputs)==null?void 0:a.generations,o;if(r.runType==="chat_model"){for(let l of i!=null?i:[]){if(o!==void 0)break;o=(s=l[0])==null?void 0:s.message}n="on_chat_model_end"}else if(r.runType==="llm")o={generations:i==null?void 0:i.map(l=>l.map(d=>({text:d.text,generationInfo:d.generationInfo}))),llmOutput:(u=(c=e.outputs)==null?void 0:c.llmOutput)!=null?u:{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:n,data:{output:o,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){var a,s,c,u,l,d,f;let r=Yb(e),n=(a=e.run_type)!=null?a:"chain",i={tags:(s=e.tags)!=null?s:[],metadata:(u=(c=e.extra)==null?void 0:c.metadata)!=null?u:{},name:r,runType:e.run_type},o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},i.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,i.inputs=e.inputs.input):(o.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${n}_start`,data:o,name:r,tags:(l=e.tags)!=null?l:[],run_id:e.id,metadata:(f=(d=e.extra)==null?void 0:d.metadata)!=null?f:{}},i)}async onChainEnd(e){var s,c,u,l,d;let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let n=`on_${e.run_type}_end`,i=(c=(s=e.inputs)!=null?s:r.inputs)!=null?c:{},a={output:(l=(u=e.outputs)==null?void 0:u.output)!=null?l:e.outputs,input:i};i.input&&Object.keys(i).length===1&&(a.input=i.input,r.inputs=i.input),await this.sendEndEvent({event:n,data:a,run_id:e.id,name:r.name,tags:r.tags,metadata:(d=r.metadata)!=null?d:{}},r)}async onToolStart(e){var i,o,a,s,c,u,l,d;let r=Yb(e),n={tags:(i=e.tags)!=null?i:[],metadata:(a=(o=e.extra)==null?void 0:o.metadata)!=null?a:{},name:r,runType:"tool",inputs:(s=e.inputs)!=null?s:{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:(c=e.inputs)!=null?c:{}},name:r,run_id:e.id,tags:(u=e.tags)!=null?u:[],metadata:(d=(l=e.extra)==null?void 0:l.metadata)!=null?d:{}},n)}async onToolEnd(e){var i;let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let n=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(e){var o,a,s,c,u,l;let r=Yb(e),i={tags:(o=e.tags)!=null?o:[],metadata:(s=(a=e.extra)==null?void 0:a.metadata)!=null?s:{},name:r,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:r,tags:(c=e.tags)!=null?c:[],run_id:e.id,metadata:(l=(u=e.extra)==null?void 0:u.metadata)!=null?l:{}},i)}async onRetrieverEnd(e){var n,i;let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:(i=(n=e.outputs)==null?void 0:n.documents)!=null?i:e.outputs,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(e,r,n){let i=this.runInfoMap.get(n);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:i.tags,metadata:i.metadata,data:r},i)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};var yre=Object.prototype.toString,_re=t=>yre.call(t)==="[object Error]",vre=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function SB(t){if(!(t&&_re(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;let{message:r,stack:n}=t;return r==="Load failed"?n===void 0||"__sentry_captured__"in t:r.startsWith("error sending request for url")?!0:vre.has(r)}function bre(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Xb(t,e,{min:r=0,allowInfinity:n=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<r)throw new TypeError(`Expected \`${t}\` to be \u2265 ${r}.`)}}var xre=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function wre(t,e){let r=Math.max(1,t+1),n=e.randomize?Math.random()+1:1,i=Math.round(n*e.minTimeout*e.factor**(r-1));return i=Math.min(i,e.maxTimeout),i}function AB(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function Sre({error:t,attemptNumber:e,retriesConsumed:r,startTime:n,options:i}){var m,p,b,y;let o=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(o instanceof xre)throw o.originalError;let a=Number.isFinite(i.retries)?Math.max(0,i.retries-r):i.retries,s=(m=i.maxRetryTime)!=null?m:Number.POSITIVE_INFINITY,c=Object.freeze({error:o,attemptNumber:e,retriesLeft:a,retriesConsumed:r});if(await i.onFailedAttempt(c),AB(n,s)<=0)throw o;let u=await i.shouldConsumeRetry(c),l=AB(n,s);if(l<=0||a<=0)throw o;if(o instanceof TypeError&&!SB(o)){if(u)throw o;return(p=i.signal)==null||p.throwIfAborted(),!1}if(!await i.shouldRetry(c))throw o;if(!u)return(b=i.signal)==null||b.throwIfAborted(),!1;let d=wre(r,i),f=Math.min(d,l);return f>0&&await new Promise((h,_)=>{var w,E;let v=()=>{var S;clearTimeout(x),(S=i.signal)==null||S.removeEventListener("abort",v),_(i.signal.reason)},x=setTimeout(()=>{var S;(S=i.signal)==null||S.removeEventListener("abort",v),h()},f);i.unref&&((w=x.unref)==null||w.call(x)),(E=i.signal)==null||E.addEventListener("abort",v,{once:!0})}),(y=i.signal)==null||y.throwIfAborted(),!0}async function jh(t,e={}){var o,a,s,c,u,l,d,f,m,p,b,y;if(e={...e},bre(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");(o=e.retries)!=null||(e.retries=10),(a=e.factor)!=null||(e.factor=2),(s=e.minTimeout)!=null||(e.minTimeout=1e3),(c=e.maxTimeout)!=null||(e.maxTimeout=Number.POSITIVE_INFINITY),(u=e.maxRetryTime)!=null||(e.maxRetryTime=Number.POSITIVE_INFINITY),(l=e.randomize)!=null||(e.randomize=!1),(d=e.onFailedAttempt)!=null||(e.onFailedAttempt=()=>{}),(f=e.shouldRetry)!=null||(e.shouldRetry=()=>!0),(m=e.shouldConsumeRetry)!=null||(e.shouldConsumeRetry=()=>!0),Xb("factor",e.factor,{min:0,allowInfinity:!1}),Xb("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Xb("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Xb("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(p=e.signal)==null||p.throwIfAborted();let r=0,n=0,i=performance.now();for(;!Number.isFinite(e.retries)||n<=e.retries;){r++;try{(b=e.signal)==null||b.throwIfAborted();let h=await t(r);return(y=e.signal)==null||y.throwIfAborted(),h}catch(h){await Sre({error:h,attemptNumber:r,retriesConsumed:n,startTime:i,options:e})&&n++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Qb=be(hb(),1);var Are={};le(Are,{AsyncCaller:()=>Za});var Tre=[400,401,402,403,404,405,406,407,409],Ere=t=>{var r,n,i;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;let e=(n=(r=t==null?void 0:t.response)==null?void 0:r.status)!=null?n:t==null?void 0:t.status;if(e&&Tre.includes(+e))throw t;if(((i=t==null?void 0:t.error)==null?void 0:i.code)==="insufficient_quota"){let o=new Error(t==null?void 0:t.message);throw o.name="InsufficientQuotaError",o}},Za=class{constructor(t){A(this,"maxConcurrency");A(this,"maxRetries");A(this,"onFailedAttempt");A(this,"queue");var r,n,i;this.maxConcurrency=(r=t.maxConcurrency)!=null?r:1/0,this.maxRetries=(n=t.maxRetries)!=null?n:6,this.onFailedAttempt=(i=t.onFailedAttempt)!=null?i:Ere;let e="default"in Qb.default?Qb.default.default:Qb.default;this.queue=new e({concurrency:this.maxConcurrency})}async call(t,...e){return this.queue.add(()=>jh(()=>t(...e).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:({error:r})=>{var n;return(n=this.onFailedAttempt)==null?void 0:n.call(this,r)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...r){if(t.signal){let n;return Promise.race([this.call(e,...r),new Promise((i,o)=>{var a;n=()=>{o(du(t.signal))},(a=t.signal)==null||a.addEventListener("abort",n)})]).finally(()=>{t.signal&&n&&t.signal.removeEventListener("abort",n)})}return this.call(e,...r)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}};var BO=class extends so{constructor({config:e,onStart:r,onEnd:n,onError:i}){super({_awaitHandler:!0});A(this,"name","RootListenersTracer");A(this,"rootId");A(this,"config");A(this,"argOnStart");A(this,"argOnEnd");A(this,"argOnError");this.config=e,this.argOnStart=r,this.argOnEnd=n,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Fh(t){return t?t.lc_runnable:!1}var TB=class{constructor(t){A(this,"includeNames");A(this,"includeTypes");A(this,"includeTags");A(this,"excludeNames");A(this,"excludeTypes");A(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){var i;let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,n=(i=t.tags)!=null?i:[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e)),this.includeTags!==void 0&&(r=r||n.some(o=>{var a;return(a=this.includeTags)==null?void 0:a.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(r=r&&n.every(o=>{var a;return!((a=this.excludeTags)!=null&&a.includes(o))})),r}},EB=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var Ko={};na(Ko,{$ZodAny:()=>CN,$ZodArray:()=>RN,$ZodAsyncError:()=>uo,$ZodBase64:()=>bN,$ZodBase64URL:()=>xN,$ZodBigInt:()=>bx,$ZodBigIntFormat:()=>EN,$ZodBoolean:()=>tg,$ZodCIDRv4:()=>yN,$ZodCIDRv6:()=>_N,$ZodCUID:()=>oN,$ZodCUID2:()=>aN,$ZodCatch:()=>JN,$ZodCheck:()=>At,$ZodCheckBigIntFormat:()=>MI,$ZodCheckEndsWith:()=>HI,$ZodCheckGreaterThan:()=>mx,$ZodCheckIncludes:()=>qI,$ZodCheckLengthEquals:()=>FI,$ZodCheckLessThan:()=>fx,$ZodCheckLowerCase:()=>ZI,$ZodCheckMaxLength:()=>UI,$ZodCheckMaxSize:()=>zI,$ZodCheckMimeType:()=>JI,$ZodCheckMinLength:()=>jI,$ZodCheckMinSize:()=>DI,$ZodCheckMultipleOf:()=>RI,$ZodCheckNumberFormat:()=>PI,$ZodCheckOverwrite:()=>WI,$ZodCheckProperty:()=>KI,$ZodCheckRegex:()=>BI,$ZodCheckSizeEquals:()=>LI,$ZodCheckStartsWith:()=>GI,$ZodCheckStringFormat:()=>Qf,$ZodCheckUpperCase:()=>VI,$ZodCodec:()=>ig,$ZodCustom:()=>nC,$ZodCustomStringFormat:()=>AN,$ZodDate:()=>$N,$ZodDefault:()=>qN,$ZodDiscriminatedUnion:()=>MN,$ZodE164:()=>wN,$ZodEmail:()=>tN,$ZodEmoji:()=>nN,$ZodEncodeError:()=>pu,$ZodEnum:()=>jN,$ZodError:()=>Jh,$ZodFile:()=>BN,$ZodFunction:()=>eC,$ZodGUID:()=>QI,$ZodIPv4:()=>pN,$ZodIPv6:()=>hN,$ZodISODate:()=>dN,$ZodISODateTime:()=>lN,$ZodISODuration:()=>mN,$ZodISOTime:()=>fN,$ZodIntersection:()=>zN,$ZodJWT:()=>SN,$ZodKSUID:()=>cN,$ZodLazy:()=>rC,$ZodLiteral:()=>FN,$ZodMAC:()=>gN,$ZodMap:()=>LN,$ZodNaN:()=>WN,$ZodNanoID:()=>iN,$ZodNever:()=>ng,$ZodNonOptional:()=>HN,$ZodNull:()=>NN,$ZodNullable:()=>VN,$ZodNumber:()=>vx,$ZodNumberFormat:()=>TN,$ZodObject:()=>XB,$ZodObjectJIT:()=>PN,$ZodOptional:()=>em,$ZodPipe:()=>YN,$ZodPrefault:()=>GN,$ZodPromise:()=>tC,$ZodReadonly:()=>XN,$ZodRealError:()=>Un,$ZodRecord:()=>DN,$ZodRegistry:()=>tm,$ZodSet:()=>UN,$ZodString:()=>Kc,$ZodStringFormat:()=>bt,$ZodSuccess:()=>KN,$ZodSymbol:()=>ON,$ZodTemplateLiteral:()=>QN,$ZodTransform:()=>ZN,$ZodTuple:()=>wx,$ZodType:()=>Pe,$ZodULID:()=>sN,$ZodURL:()=>rN,$ZodUUID:()=>eN,$ZodUndefined:()=>IN,$ZodUnion:()=>xx,$ZodUnknown:()=>rg,$ZodVoid:()=>kN,$ZodXID:()=>uN,$brand:()=>ex,$constructor:()=>P,$input:()=>oC,$output:()=>iC,Doc:()=>eg,JSONSchema:()=>KC,JSONSchemaGenerator:()=>Ag,NEVER:()=>ZO,TimePrecision:()=>cC,_any:()=>CC,_array:()=>jC,_base64:()=>Zx,_base64url:()=>Vx,_bigint:()=>SC,_boolean:()=>xC,_catch:()=>Wie,_check:()=>K9,_cidrv4:()=>Fx,_cidrv6:()=>Bx,_coercedBigint:()=>AC,_coercedBoolean:()=>wC,_coercedDate:()=>RC,_coercedNumber:()=>hC,_coercedString:()=>sC,_cuid:()=>Px,_cuid2:()=>Mx,_custom:()=>BC,_date:()=>$C,_decode:()=>ix,_decodeAsync:()=>ax,_default:()=>Hie,_discriminatedUnion:()=>Mie,_e164:()=>qx,_email:()=>Ox,_emoji:()=>$x,_encode:()=>nx,_encodeAsync:()=>ox,_endsWith:()=>yg,_enum:()=>Fie,_file:()=>FC,_float32:()=>yC,_float64:()=>_C,_gt:()=>qa,_gte:()=>jn,_guid:()=>sg,_includes:()=>hg,_int:()=>gC,_int32:()=>vC,_int64:()=>TC,_intersection:()=>zie,_ipv4:()=>Ux,_ipv6:()=>jx,_isoDate:()=>dC,_isoDateTime:()=>lC,_isoDuration:()=>mC,_isoTime:()=>fC,_jwt:()=>Gx,_ksuid:()=>Lx,_lazy:()=>eoe,_length:()=>im,_literal:()=>Zie,_lowercase:()=>mg,_lt:()=>Va,_lte:()=>Fi,_mac:()=>uC,_map:()=>Uie,_max:()=>Fi,_maxLength:()=>nm,_maxSize:()=>rm,_mime:()=>_g,_min:()=>jn,_minLength:()=>bu,_minSize:()=>Yc,_multipleOf:()=>Wc,_nan:()=>PC,_nanoid:()=>Rx,_nativeEnum:()=>Bie,_negative:()=>zC,_never:()=>lg,_nonnegative:()=>LC,_nonoptional:()=>Kie,_nonpositive:()=>DC,_normalize:()=>vg,_null:()=>NC,_nullable:()=>Gie,_number:()=>pC,_optional:()=>qie,_overwrite:()=>Ho,_parse:()=>Jf,_parseAsync:()=>Wf,_pipe:()=>Yie,_positive:()=>MC,_promise:()=>toe,_property:()=>UC,_readonly:()=>Xie,_record:()=>Lie,_refine:()=>ZC,_regex:()=>fg,_safeDecode:()=>ux,_safeDecodeAsync:()=>lx,_safeEncode:()=>sx,_safeEncodeAsync:()=>cx,_safeParse:()=>Yf,_safeParseAsync:()=>Xf,_set:()=>jie,_size:()=>dg,_slugify:()=>Sg,_startsWith:()=>gg,_string:()=>aC,_stringFormat:()=>om,_stringbool:()=>HC,_success:()=>Jie,_superRefine:()=>VC,_symbol:()=>OC,_templateLiteral:()=>Qie,_toLowerCase:()=>xg,_toUpperCase:()=>wg,_transform:()=>Vie,_trim:()=>bg,_tuple:()=>Die,_uint32:()=>bC,_uint64:()=>EC,_ulid:()=>zx,_undefined:()=>IC,_union:()=>Pie,_unknown:()=>cg,_uppercase:()=>pg,_url:()=>ug,_uuid:()=>Ix,_uuidv4:()=>Nx,_uuidv6:()=>Cx,_uuidv7:()=>kx,_void:()=>kC,_xid:()=>Dx,clone:()=>zt,config:()=>ur,decode:()=>ene,decodeAsync:()=>rne,describe:()=>qC,encode:()=>Qre,encodeAsync:()=>tne,flattenError:()=>Wh,formatError:()=>Yh,globalConfig:()=>Bh,globalRegistry:()=>ht,isValidBase64:()=>vN,isValidBase64URL:()=>KB,isValidJWT:()=>JB,locales:()=>Jc,meta:()=>GC,parse:()=>Go,parseAsync:()=>Gc,prettifyError:()=>tI,regexes:()=>fi,registry:()=>Ex,safeDecode:()=>ine,safeDecodeAsync:()=>ane,safeEncode:()=>nne,safeEncodeAsync:()=>one,safeParse:()=>rI,safeParseAsync:()=>nI,toDotPath:()=>kB,toJSONSchema:()=>xu,treeifyError:()=>eI,util:()=>Y,version:()=>YI});var ZO=Object.freeze({status:"aborted"});function P(t,e,r){var s;function n(c,u){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:u,constr:a,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,u);let l=a.prototype,d=Object.keys(l);for(let f=0;f<d.length;f++){let m=d[f];m in c||(c[m]=l[m].bind(c))}}let i=(s=r==null?void 0:r.Parent)!=null?s:Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function a(c){var d;var u;let l=r!=null&&r.Parent?new o:this;n(l,c),(d=(u=l._zod).deferred)!=null||(u.deferred=[]);for(let f of l._zod.deferred)f();return l}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:c=>{var u,l;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(l=(u=c==null?void 0:c._zod)==null?void 0:u.traits)==null?void 0:l.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}var ex=Symbol("zod_brand"),uo=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},pu=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},Bh={};function ur(t){return t&&Object.assign(Bh,t),Bh}var Y={};na(Y,{BIGINT_FORMAT_RANGES:()=>QO,Class:()=>qO,NUMBER_FORMAT_RANGES:()=>XO,aborted:()=>vu,allowsEval:()=>KO,assert:()=>kre,assertEqual:()=>Ore,assertIs:()=>Nre,assertNever:()=>Cre,assertNotEqual:()=>Ire,assignProp:()=>gu,base64ToUint8Array:()=>IB,base64urlToUint8Array:()=>Kre,cached:()=>Hf,captureStackTrace:()=>rx,cleanEnum:()=>Hre,cleanRegex:()=>qh,clone:()=>zt,cloneDef:()=>Rre,createTransparentProxy:()=>Ure,defineLazy:()=>Ye,esc:()=>tx,escapeRegex:()=>ji,extend:()=>Bre,finalizeIssue:()=>di,floatSafeRemainder:()=>GO,getElementAtPath:()=>Pre,getEnumValues:()=>Vh,getLengthableOrigin:()=>Kh,getParsedType:()=>Lre,getSizableOrigin:()=>Hh,hexToUint8Array:()=>Wre,isObject:()=>qc,isPlainObject:()=>_u,issue:()=>Kf,joinValues:()=>B,jsonStringifyReplacer:()=>Gf,merge:()=>Vre,mergeDefs:()=>yu,normalizeParams:()=>Q,nullish:()=>hu,numKeys:()=>Dre,objectClone:()=>$re,omit:()=>Fre,optionalKeys:()=>YO,partial:()=>qre,pick:()=>jre,prefixIssues:()=>li,primitiveTypes:()=>WO,promiseAllObject:()=>Mre,propertyKeyTypes:()=>Gh,randomString:()=>zre,required:()=>Gre,safeExtend:()=>Zre,shallowClone:()=>JO,slugify:()=>HO,stringifyPrimitive:()=>X,uint8ArrayToBase64:()=>NB,uint8ArrayToBase64url:()=>Jre,uint8ArrayToHex:()=>Yre,unwrapMessage:()=>Zh});function Ore(t){return t}function Ire(t){return t}function Nre(t){}function Cre(t){throw new Error}function kre(t){}function Vh(t){let e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,i])=>e.indexOf(+n)===-1).map(([n,i])=>i)}function B(t,e="|"){return t.map(r=>X(r)).join(e)}function Gf(t,e){return typeof e=="bigint"?e.toString():e}function Hf(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function hu(t){return t==null}function qh(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function GO(t,e){let r=(t.toString().split(".")[1]||"").length,n=e.toString(),i=(n.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(n)){let c=n.match(/\d?e-(\d?)/);c!=null&&c[1]&&(i=Number.parseInt(c[1]))}let o=r>i?r:i,a=Number.parseInt(t.toFixed(o).replace(".","")),s=Number.parseInt(e.toFixed(o).replace(".",""));return a%s/10**o}var OB=Symbol("evaluating");function Ye(t,e,r){let n;Object.defineProperty(t,e,{get(){if(n!==OB)return n===void 0&&(n=OB,n=r()),n},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function $re(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function gu(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function yu(...t){let e={};for(let r of t){let n=Object.getOwnPropertyDescriptors(r);Object.assign(e,n)}return Object.defineProperties({},e)}function Rre(t){return yu(t._zod.def)}function Pre(t,e){return e?e.reduce((r,n)=>r==null?void 0:r[n],t):t}function Mre(t){let e=Object.keys(t),r=e.map(n=>t[n]);return Promise.all(r).then(n=>{let i={};for(let o=0;o<e.length;o++)i[e[o]]=n[o];return i})}function zre(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function tx(t){return JSON.stringify(t)}function HO(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var rx="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function qc(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var KO=Hf(()=>{var t;if(typeof navigator!="undefined"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{let e=Function;return new e(""),!0}catch(e){return!1}});function _u(t){if(qc(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!(qc(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function JO(t){return _u(t)?{...t}:Array.isArray(t)?[...t]:t}function Dre(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}var Lre=t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map!="undefined"&&t instanceof Map?"map":typeof Set!="undefined"&&t instanceof Set?"set":typeof Date!="undefined"&&t instanceof Date?"date":typeof File!="undefined"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},Gh=new Set(["string","number","symbol"]),WO=new Set(["string","number","bigint","boolean","symbol","undefined"]);function ji(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zt(t,e,r){let n=new t._zod.constr(e!=null?e:t._zod.def);return(!e||r!=null&&r.parent)&&(n._zod.parent=t),n}function Q(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Ure(t){let e;return new Proxy({},{get(r,n,i){return e!=null||(e=t()),Reflect.get(e,n,i)},set(r,n,i,o){return e!=null||(e=t()),Reflect.set(e,n,i,o)},has(r,n){return e!=null||(e=t()),Reflect.has(e,n)},deleteProperty(r,n){return e!=null||(e=t()),Reflect.deleteProperty(e,n)},ownKeys(r){return e!=null||(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,n){return e!=null||(e=t()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(r,n,i){return e!=null||(e=t()),Reflect.defineProperty(e,n,i)}})}function X(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function YO(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}var XO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},QO={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function jre(t,e){let r=t._zod.def,n=yu(t._zod.def,{get shape(){let i={};for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(i[o]=r.shape[o])}return gu(this,"shape",i),i},checks:[]});return zt(t,n)}function Fre(t,e){let r=t._zod.def,n=yu(t._zod.def,{get shape(){let i={...t._zod.def.shape};for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete i[o]}return gu(this,"shape",i),i},checks:[]});return zt(t,n)}function Bre(t,e){if(!_u(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=yu(t._zod.def,{get shape(){let o={...t._zod.def.shape,...e};return gu(this,"shape",o),o},checks:[]});return zt(t,i)}function Zre(t,e){if(!_u(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let n={...t._zod.def.shape,...e};return gu(this,"shape",n),n},checks:t._zod.def.checks};return zt(t,r)}function Vre(t,e){let r=yu(t._zod.def,{get shape(){let n={...t._zod.def.shape,...e._zod.def.shape};return gu(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return zt(t,r)}function qre(t,e,r){let n=yu(e._zod.def,{get shape(){let i=e._zod.def.shape,o={...i};if(r)for(let a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=t?new t({type:"optional",innerType:i[a]}):i[a])}else for(let a in i)o[a]=t?new t({type:"optional",innerType:i[a]}):i[a];return gu(this,"shape",o),o},checks:[]});return zt(e,n)}function Gre(t,e,r){let n=yu(e._zod.def,{get shape(){let i=e._zod.def.shape,o={...i};if(r)for(let a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=new t({type:"nonoptional",innerType:i[a]}))}else for(let a in i)o[a]=new t({type:"nonoptional",innerType:i[a]});return gu(this,"shape",o),o},checks:[]});return zt(e,n)}function vu(t,e=0){var r;if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(((r=t.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function li(t,e){return e.map(r=>{var i;var n;return(i=(n=r).path)!=null||(n.path=[]),r.path.unshift(t),r})}function Zh(t){return typeof t=="string"?t:t==null?void 0:t.message}function di(t,e,r){var i,o,a,s,c,u,l,d,f,m,p;let n={...t,path:(i=t.path)!=null?i:[]};if(!t.message){let b=(p=(m=(d=(u=Zh((s=(a=(o=t.inst)==null?void 0:o._zod.def)==null?void 0:a.error)==null?void 0:s.call(a,t)))!=null?u:Zh((c=e==null?void 0:e.error)==null?void 0:c.call(e,t)))!=null?d:Zh((l=r.customError)==null?void 0:l.call(r,t)))!=null?m:Zh((f=r.localeError)==null?void 0:f.call(r,t)))!=null?p:"Invalid input";n.message=b}return delete n.inst,delete n.continue,e!=null&&e.reportInput||delete n.input,n}function Hh(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function Kh(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Kf(...t){let[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}function Hre(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function IB(t){let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}function NB(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function Kre(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return IB(e+r)}function Jre(t){return NB(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Wre(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n/2]=Number.parseInt(e.slice(n,n+2),16);return r}function Yre(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}var qO=class{constructor(...e){}};var CB=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Gf,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Jh=P("$ZodError",CB),Un=P("$ZodError",CB,{Parent:Error});function Wh(t,e=r=>r.message){let r={},n=[];for(let i of t.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}function Yh(t,e=r=>r.message){let r={_errors:[]},n=i=>{for(let o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>n({issues:a}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)r._errors.push(e(o));else{let a=r,s=0;for(;s<o.path.length;){let c=o.path[s];s===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(e(o))):a[c]=a[c]||{_errors:[]},a=a[c],s++}}};return n(t),r}function eI(t,e=r=>r.message){let r={errors:[]},n=(i,o=[])=>{var c,u,l,d;var a,s;for(let f of i.issues)if(f.code==="invalid_union"&&f.errors.length)f.errors.map(m=>n({issues:m},f.path));else if(f.code==="invalid_key")n({issues:f.issues},f.path);else if(f.code==="invalid_element")n({issues:f.issues},f.path);else{let m=[...o,...f.path];if(m.length===0){r.errors.push(e(f));continue}let p=r,b=0;for(;b<m.length;){let y=m[b],h=b===m.length-1;typeof y=="string"?((c=p.properties)!=null||(p.properties={}),(u=(a=p.properties)[y])!=null||(a[y]={errors:[]}),p=p.properties[y]):((l=p.items)!=null||(p.items=[]),(d=(s=p.items)[y])!=null||(s[y]={errors:[]}),p=p.items[y]),h&&p.errors.push(e(f)),b++}}};return n(t),r}function kB(t){let e=[],r=t.map(n=>typeof n=="object"?n.key:n);for(let n of r)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}function tI(t){var n;let e=[],r=[...t.issues].sort((i,o)=>{var a,s;return((a=i.path)!=null?a:[]).length-((s=o.path)!=null?s:[]).length});for(let i of r)e.push(`\u2716 ${i.message}`),(n=i.path)!=null&&n.length&&e.push(`  \u2192 at ${kB(i.path)}`);return e.join(`
`)}var Jf=t=>(e,r,n,i)=>{var s;let o=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new uo;if(a.issues.length){let c=new((s=i==null?void 0:i.Err)!=null?s:t)(a.issues.map(u=>di(u,o,ur())));throw rx(c,i==null?void 0:i.callee),c}return a.value},Go=Jf(Un),Wf=t=>async(e,r,n,i)=>{var s;let o=n?Object.assign(n,{async:!0}):{async:!0},a=e._zod.run({value:r,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){let c=new((s=i==null?void 0:i.Err)!=null?s:t)(a.issues.map(u=>di(u,o,ur())));throw rx(c,i==null?void 0:i.callee),c}return a.value},Gc=Wf(Un),Yf=t=>(e,r,n)=>{let i=n?{...n,async:!1}:{async:!1},o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new uo;return o.issues.length?{success:!1,error:new(t!=null?t:Jh)(o.issues.map(a=>di(a,i,ur())))}:{success:!0,data:o.value}},rI=Yf(Un),Xf=t=>async(e,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},o=e._zod.run({value:r,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(a=>di(a,i,ur())))}:{success:!0,data:o.value}},nI=Xf(Un),nx=t=>(e,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Jf(t)(e,r,i)},Qre=nx(Un),ix=t=>(e,r,n)=>Jf(t)(e,r,n),ene=ix(Un),ox=t=>async(e,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Wf(t)(e,r,i)},tne=ox(Un),ax=t=>async(e,r,n)=>Wf(t)(e,r,n),rne=ax(Un),sx=t=>(e,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Yf(t)(e,r,i)},nne=sx(Un),ux=t=>(e,r,n)=>Yf(t)(e,r,n),ine=ux(Un),cx=t=>async(e,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Xf(t)(e,r,i)},one=cx(Un),lx=t=>async(e,r,n)=>Xf(t)(e,r,n),ane=lx(Un);var fi={};na(fi,{base64:()=>vI,base64url:()=>dx,bigint:()=>TI,boolean:()=>II,browserEmail:()=>pne,cidrv4:()=>yI,cidrv6:()=>_I,cuid:()=>iI,cuid2:()=>oI,date:()=>xI,datetime:()=>SI,domain:()=>yne,duration:()=>lI,e164:()=>bI,email:()=>fI,emoji:()=>mI,extendedDuration:()=>sne,guid:()=>dI,hex:()=>_ne,hostname:()=>gne,html5Email:()=>dne,idnEmail:()=>mne,integer:()=>EI,ipv4:()=>pI,ipv6:()=>hI,ksuid:()=>uI,lowercase:()=>kI,mac:()=>gI,md5_base64:()=>bne,md5_base64url:()=>xne,md5_hex:()=>vne,nanoid:()=>cI,null:()=>NI,number:()=>OI,rfc5322Email:()=>fne,sha1_base64:()=>Sne,sha1_base64url:()=>Ane,sha1_hex:()=>wne,sha256_base64:()=>Ene,sha256_base64url:()=>One,sha256_hex:()=>Tne,sha384_base64:()=>Nne,sha384_base64url:()=>Cne,sha384_hex:()=>Ine,sha512_base64:()=>$ne,sha512_base64url:()=>Rne,sha512_hex:()=>kne,string:()=>AI,time:()=>wI,ulid:()=>aI,undefined:()=>CI,unicodeEmail:()=>$B,uppercase:()=>$I,uuid:()=>Hc,uuid4:()=>une,uuid6:()=>cne,uuid7:()=>lne,xid:()=>sI});var iI=/^[cC][^\s-]{8,}$/,oI=/^[0-9a-z]+$/,aI=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,sI=/^[0-9a-vA-V]{20}$/,uI=/^[A-Za-z0-9]{27}$/,cI=/^[a-zA-Z0-9_-]{21}$/,lI=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,sne=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dI=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Hc=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,une=Hc(4),cne=Hc(6),lne=Hc(7),fI=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,dne=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fne=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,$B=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,mne=$B,pne=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hne="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function mI(){return new RegExp(hne,"u")}var pI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hI=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,gI=t=>{let e=ji(t!=null?t:":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},yI=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_I=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vI=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,dx=/^[A-Za-z0-9_-]*$/,gne=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,yne=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,bI=/^\+(?:[0-9]){6,14}[0-9]$/,RB="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",xI=new RegExp(`^${RB}$`);function PB(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function wI(t){return new RegExp(`^${PB(t)}$`)}function SI(t){let e=PB({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${e}(?:${r.join("|")})`;return new RegExp(`^${RB}T(?:${n})$`)}var AI=t=>{var r,n;let e=t?`[\\s\\S]{${(r=t==null?void 0:t.minimum)!=null?r:0},${(n=t==null?void 0:t.maximum)!=null?n:""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},TI=/^-?\d+n?$/,EI=/^-?\d+$/,OI=/^-?\d+(?:\.\d+)?/,II=/^(?:true|false)$/i,NI=/^null$/i;var CI=/^undefined$/i;var kI=/^[^A-Z]*$/,$I=/^[^a-z]*$/,_ne=/^[0-9a-fA-F]*$/;function Xh(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}function Qh(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}var vne=/^[0-9a-fA-F]{32}$/,bne=Xh(22,"=="),xne=Qh(22),wne=/^[0-9a-fA-F]{40}$/,Sne=Xh(27,"="),Ane=Qh(27),Tne=/^[0-9a-fA-F]{64}$/,Ene=Xh(43,"="),One=Qh(43),Ine=/^[0-9a-fA-F]{96}$/,Nne=Xh(64,""),Cne=Qh(64),kne=/^[0-9a-fA-F]{128}$/,$ne=Xh(86,"=="),Rne=Qh(86);var At=P("$ZodCheck",(t,e)=>{var n,i;var r;(n=t._zod)!=null||(t._zod={}),t._zod.def=e,(i=(r=t._zod).onattach)!=null||(r.onattach=[])}),zB={number:"number",bigint:"bigint",object:"date"},fx=P("$ZodCheckLessThan",(t,e)=>{At.init(t,e);let r=zB[typeof e.value];t._zod.onattach.push(n=>{var a;let i=n._zod.bag,o=(a=e.inclusive?i.maximum:i.exclusiveMaximum)!=null?a:Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),mx=P("$ZodCheckGreaterThan",(t,e)=>{At.init(t,e);let r=zB[typeof e.value];t._zod.onattach.push(n=>{var a;let i=n._zod.bag,o=(a=e.inclusive?i.minimum:i.exclusiveMinimum)!=null?a:Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),RI=P("$ZodCheckMultipleOf",(t,e)=>{At.init(t,e),t._zod.onattach.push(r=>{var i;var n;(i=(n=r._zod.bag).multipleOf)!=null||(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):GO(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),PI=P("$ZodCheckNumberFormat",(t,e)=>{var a;At.init(t,e),e.format=e.format||"float64";let r=(a=e.format)==null?void 0:a.includes("int"),n=r?"int":"number",[i,o]=XO[e.format];t._zod.onattach.push(s=>{let c=s._zod.bag;c.format=e.format,c.minimum=i,c.maximum=o,r&&(c.pattern=EI)}),t._zod.check=s=>{let c=s.value;if(r){if(!Number.isInteger(c)){s.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?s.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):s.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}c<i&&s.issues.push({origin:"number",input:c,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),c>o&&s.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:t})}}),MI=P("$ZodCheckBigIntFormat",(t,e)=>{At.init(t,e);let[r,n]=QO[e.format];t._zod.onattach.push(i=>{let o=i._zod.bag;o.format=e.format,o.minimum=r,o.maximum=n}),t._zod.check=i=>{let o=i.value;o<r&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),o>n&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:n,inst:t})}}),zI=P("$ZodCheckMaxSize",(t,e)=>{var n;var r;At.init(t,e),(n=(r=t._zod.def).when)!=null||(r.when=i=>{let o=i.value;return!hu(o)&&o.size!==void 0}),t._zod.onattach.push(i=>{var a;let o=(a=i._zod.bag.maximum)!=null?a:Number.POSITIVE_INFINITY;e.maximum<o&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{let o=i.value;o.size<=e.maximum||i.issues.push({origin:Hh(o),code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),DI=P("$ZodCheckMinSize",(t,e)=>{var n;var r;At.init(t,e),(n=(r=t._zod.def).when)!=null||(r.when=i=>{let o=i.value;return!hu(o)&&o.size!==void 0}),t._zod.onattach.push(i=>{var a;let o=(a=i._zod.bag.minimum)!=null?a:Number.NEGATIVE_INFINITY;e.minimum>o&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{let o=i.value;o.size>=e.minimum||i.issues.push({origin:Hh(o),code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),LI=P("$ZodCheckSizeEquals",(t,e)=>{var n;var r;At.init(t,e),(n=(r=t._zod.def).when)!=null||(r.when=i=>{let o=i.value;return!hu(o)&&o.size!==void 0}),t._zod.onattach.push(i=>{let o=i._zod.bag;o.minimum=e.size,o.maximum=e.size,o.size=e.size}),t._zod.check=i=>{let o=i.value,a=o.size;if(a===e.size)return;let s=a>e.size;i.issues.push({origin:Hh(o),...s?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),UI=P("$ZodCheckMaxLength",(t,e)=>{var n;var r;At.init(t,e),(n=(r=t._zod.def).when)!=null||(r.when=i=>{let o=i.value;return!hu(o)&&o.length!==void 0}),t._zod.onattach.push(i=>{var a;let o=(a=i._zod.bag.maximum)!=null?a:Number.POSITIVE_INFINITY;e.maximum<o&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{let o=i.value;if(o.length<=e.maximum)return;let s=Kh(o);i.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),jI=P("$ZodCheckMinLength",(t,e)=>{var n;var r;At.init(t,e),(n=(r=t._zod.def).when)!=null||(r.when=i=>{let o=i.value;return!hu(o)&&o.length!==void 0}),t._zod.onattach.push(i=>{var a;let o=(a=i._zod.bag.minimum)!=null?a:Number.NEGATIVE_INFINITY;e.minimum>o&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{let o=i.value;if(o.length>=e.minimum)return;let s=Kh(o);i.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),FI=P("$ZodCheckLengthEquals",(t,e)=>{var n;var r;At.init(t,e),(n=(r=t._zod.def).when)!=null||(r.when=i=>{let o=i.value;return!hu(o)&&o.length!==void 0}),t._zod.onattach.push(i=>{let o=i._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=i=>{let o=i.value,a=o.length;if(a===e.length)return;let s=Kh(o),c=a>e.length;i.issues.push({origin:s,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),Qf=P("$ZodCheckStringFormat",(t,e)=>{var i,o;var r,n;At.init(t,e),t._zod.onattach.push(a=>{var c;let s=a._zod.bag;s.format=e.format,e.pattern&&((c=s.patterns)!=null||(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(i=(r=t._zod).check)!=null||(r.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(o=(n=t._zod).check)!=null||(n.check=()=>{})}),BI=P("$ZodCheckRegex",(t,e)=>{Qf.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),ZI=P("$ZodCheckLowerCase",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=kI),Qf.init(t,e)}),VI=P("$ZodCheckUpperCase",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=$I),Qf.init(t,e)}),qI=P("$ZodCheckIncludes",(t,e)=>{At.init(t,e);let r=ji(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(i=>{var a;let o=i._zod.bag;(a=o.patterns)!=null||(o.patterns=new Set),o.patterns.add(n)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),GI=P("$ZodCheckStartsWith",(t,e)=>{var n;At.init(t,e);let r=new RegExp(`^${ji(e.prefix)}.*`);(n=e.pattern)!=null||(e.pattern=r),t._zod.onattach.push(i=>{var a;let o=i._zod.bag;(a=o.patterns)!=null||(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:t,continue:!e.abort})}}),HI=P("$ZodCheckEndsWith",(t,e)=>{var n;At.init(t,e);let r=new RegExp(`.*${ji(e.suffix)}$`);(n=e.pattern)!=null||(e.pattern=r),t._zod.onattach.push(i=>{var a;let o=i._zod.bag;(a=o.patterns)!=null||(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:t,continue:!e.abort})}});function MB(t,e,r){t.issues.length&&e.issues.push(...li(r,t.issues))}var KI=P("$ZodCheckProperty",(t,e)=>{At.init(t,e),t._zod.check=r=>{let n=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(n instanceof Promise)return n.then(i=>MB(i,r,e.property));MB(n,r,e.property)}}),JI=P("$ZodCheckMimeType",(t,e)=>{At.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(n=>{n._zod.bag.mime=e.mime}),t._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:e.mime,input:n.value.type,inst:t,continue:!e.abort})}}),WI=P("$ZodCheckOverwrite",(t,e)=>{At.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var eg=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(a=>a),i=Math.min(...n.map(a=>a.length-a.trimStart().length)),o=n.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(let a of o)this.content.push(a)}compile(){var o;let e=Function,r=this==null?void 0:this.args,i=[...((o=this==null?void 0:this.content)!=null?o:[""]).map(a=>`  ${a}`)];return new e(...r,i.join(`
`))}};var YI={major:4,minor:1,patch:13};var Pe=P("$ZodType",(t,e)=>{var i,o,a;var r;t!=null||(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=YI;let n=[...(i=t._zod.def.checks)!=null?i:[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(let s of n)for(let c of s._zod.onattach)c(t);if(n.length===0)(o=(r=t._zod).deferred)!=null||(r.deferred=[]),(a=t._zod.deferred)==null||a.push(()=>{t._zod.run=t._zod.parse});else{let s=(u,l,d)=>{let f=vu(u),m;for(let p of l){if(p._zod.def.when){if(!p._zod.def.when(u))continue}else if(f)continue;let b=u.issues.length,y=p._zod.check(u);if(y instanceof Promise&&(d==null?void 0:d.async)===!1)throw new uo;if(m||y instanceof Promise)m=(m!=null?m:Promise.resolve()).then(async()=>{await y,u.issues.length!==b&&(f||(f=vu(u,b)))});else{if(u.issues.length===b)continue;f||(f=vu(u,b))}}return m?m.then(()=>u):u},c=(u,l,d)=>{if(vu(u))return u.aborted=!0,u;let f=s(l,n,d);if(f instanceof Promise){if(d.async===!1)throw new uo;return f.then(m=>t._zod.parse(m,d))}return t._zod.parse(f,d)};t._zod.run=(u,l)=>{if(l.skipChecks)return t._zod.parse(u,l);if(l.direction==="backward"){let f=t._zod.parse({value:u.value,issues:[]},{...l,skipChecks:!0});return f instanceof Promise?f.then(m=>c(m,u,l)):c(f,u,l)}let d=t._zod.parse(u,l);if(d instanceof Promise){if(l.async===!1)throw new uo;return d.then(f=>s(f,n,l))}return s(d,n,l)}}t["~standard"]={validate:s=>{var c;try{let u=rI(t,s);return u.success?{value:u.data}:{issues:(c=u.error)==null?void 0:c.issues}}catch(u){return nI(t,s).then(l=>{var d;return l.success?{value:l.data}:{issues:(d=l.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),Kc=P("$ZodString",(t,e)=>{var r,n,i;Pe.init(t,e),t._zod.pattern=(i=[...(n=(r=t==null?void 0:t._zod.bag)==null?void 0:r.patterns)!=null?n:[]].pop())!=null?i:AI(t._zod.bag),t._zod.parse=(o,a)=>{if(e.coerce)try{o.value=String(o.value)}catch(s){}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:t}),o}}),bt=P("$ZodStringFormat",(t,e)=>{Qf.init(t,e),Kc.init(t,e)}),QI=P("$ZodGUID",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=dI),bt.init(t,e)}),eN=P("$ZodUUID",(t,e)=>{var r,n;if(e.version){let o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(o===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);(r=e.pattern)!=null||(e.pattern=Hc(o))}else(n=e.pattern)!=null||(e.pattern=Hc());bt.init(t,e)}),tN=P("$ZodEmail",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=fI),bt.init(t,e)}),rN=P("$ZodURL",(t,e)=>{bt.init(t,e),t._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),nN=P("$ZodEmoji",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=mI()),bt.init(t,e)}),iN=P("$ZodNanoID",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=cI),bt.init(t,e)}),oN=P("$ZodCUID",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=iI),bt.init(t,e)}),aN=P("$ZodCUID2",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=oI),bt.init(t,e)}),sN=P("$ZodULID",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=aI),bt.init(t,e)}),uN=P("$ZodXID",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=sI),bt.init(t,e)}),cN=P("$ZodKSUID",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=uI),bt.init(t,e)}),lN=P("$ZodISODateTime",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=SI(e)),bt.init(t,e)}),dN=P("$ZodISODate",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=xI),bt.init(t,e)}),fN=P("$ZodISOTime",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=wI(e)),bt.init(t,e)}),mN=P("$ZodISODuration",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=lI),bt.init(t,e)}),pN=P("$ZodIPv4",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=pI),bt.init(t,e),t._zod.bag.format="ipv4"}),hN=P("$ZodIPv6",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=hI),bt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch(i){n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),gN=P("$ZodMAC",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=gI(e.delimiter)),bt.init(t,e),t._zod.bag.format="mac"}),yN=P("$ZodCIDRv4",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=yI),bt.init(t,e)}),_N=P("$ZodCIDRv6",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=_I),bt.init(t,e),t._zod.check=n=>{let i=n.value.split("/");try{if(i.length!==2)throw new Error;let[o,a]=i;if(!a)throw new Error;let s=Number(a);if(`${s}`!==a)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${o}]`)}catch(o){n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function vN(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch(e){return!1}}var bN=P("$ZodBase64",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=vI),bt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{vN(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function KB(t){if(!dx.test(t))return!1;let e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return vN(r)}var xN=P("$ZodBase64URL",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=dx),bt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{KB(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),wN=P("$ZodE164",(t,e)=>{var r;(r=e.pattern)!=null||(e.pattern=bI),bt.init(t,e)});function JB(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch(r){return!1}}var SN=P("$ZodJWT",(t,e)=>{bt.init(t,e),t._zod.check=r=>{JB(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),AN=P("$ZodCustomStringFormat",(t,e)=>{bt.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),vx=P("$ZodNumber",(t,e)=>{var r;Pe.init(t,e),t._zod.pattern=(r=t._zod.bag.pattern)!=null?r:OI,t._zod.parse=(n,i)=>{if(e.coerce)try{n.value=Number(n.value)}catch(s){}let o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;let a=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...a?{received:a}:{}}),n}}),TN=P("$ZodNumberFormat",(t,e)=>{PI.init(t,e),vx.init(t,e)}),tg=P("$ZodBoolean",(t,e)=>{Pe.init(t,e),t._zod.pattern=II,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch(o){}let i=r.value;return typeof i=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),r}}),bx=P("$ZodBigInt",(t,e)=>{Pe.init(t,e),t._zod.pattern=TI,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch(i){}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),EN=P("$ZodBigIntFormat",(t,e)=>{MI.init(t,e),bx.init(t,e)}),ON=P("$ZodSymbol",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;return typeof i=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:t}),r}}),IN=P("$ZodUndefined",(t,e)=>{Pe.init(t,e),t._zod.pattern=CI,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,n)=>{let i=r.value;return typeof i=="undefined"||r.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:t}),r}}),NN=P("$ZodNull",(t,e)=>{Pe.init(t,e),t._zod.pattern=NI,t._zod.values=new Set([null]),t._zod.parse=(r,n)=>{let i=r.value;return i===null||r.issues.push({expected:"null",code:"invalid_type",input:i,inst:t}),r}}),CN=P("$ZodAny",(t,e)=>{Pe.init(t,e),t._zod.parse=r=>r}),rg=P("$ZodUnknown",(t,e)=>{Pe.init(t,e),t._zod.parse=r=>r}),ng=P("$ZodNever",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),kN=P("$ZodVoid",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;return typeof i=="undefined"||r.issues.push({expected:"void",code:"invalid_type",input:i,inst:t}),r}}),$N=P("$ZodDate",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=new Date(r.value)}catch(s){}let i=r.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:t}),r}});function LB(t,e,r){t.issues.length&&e.issues.push(...li(r,t.issues)),e.value[r]=t.value}var RN=P("$ZodArray",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),r;r.value=Array(i.length);let o=[];for(let a=0;a<i.length;a++){let s=i[a],c=e.element._zod.run({value:s,issues:[]},n);c instanceof Promise?o.push(c.then(u=>LB(u,r,a))):LB(c,r,a)}return o.length?Promise.all(o).then(()=>r):r}});function _x(t,e,r,n){t.issues.length&&e.issues.push(...li(r,t.issues)),t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}function WB(t){var n,i,o,a;let e=Object.keys(t.shape);for(let s of e)if(!((a=(o=(i=(n=t.shape)==null?void 0:n[s])==null?void 0:i._zod)==null?void 0:o.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);let r=YO(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function YB(t,e,r,n,i,o){let a=[],s=i.keySet,c=i.catchall._zod,u=c.def.type;for(let l in e){if(s.has(l))continue;if(u==="never"){a.push(l);continue}let d=c.run({value:e[l],issues:[]},n);d instanceof Promise?t.push(d.then(f=>_x(f,r,l,e))):_x(d,r,l,e)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:o}),t.length?Promise.all(t).then(()=>r):r}var XB=P("$ZodObject",(t,e)=>{Pe.init(t,e);let r=Object.getOwnPropertyDescriptor(e,"shape");if(!(r!=null&&r.get)){let s=e.shape;Object.defineProperty(e,"shape",{get:()=>{let c={...s};return Object.defineProperty(e,"shape",{value:c}),c}})}let n=Hf(()=>WB(e));Ye(t._zod,"propValues",()=>{var u;let s=e.shape,c={};for(let l in s){let d=s[l]._zod;if(d.values){(u=c[l])!=null||(c[l]=new Set);for(let f of d.values)c[l].add(f)}}return c});let i=qc,o=e.catchall,a;t._zod.parse=(s,c)=>{a!=null||(a=n.value);let u=s.value;if(!i(u))return s.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),s;s.value={};let l=[],d=a.shape;for(let f of a.keys){let p=d[f]._zod.run({value:u[f],issues:[]},c);p instanceof Promise?l.push(p.then(b=>_x(b,s,f,u))):_x(p,s,f,u)}return o?YB(l,u,s,c,n.value,t):l.length?Promise.all(l).then(()=>s):s}}),PN=P("$ZodObjectJIT",(t,e)=>{XB.init(t,e);let r=t._zod.parse,n=Hf(()=>WB(e)),i=f=>{let m=new eg(["shape","payload","ctx"]),p=n.value,b=v=>{let x=tx(v);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};m.write("const input = payload.value;");let y=Object.create(null),h=0;for(let v of p.keys)y[v]=`key_${h++}`;m.write("const newResult = {};");for(let v of p.keys){let x=y[v],w=tx(v);m.write(`const ${x} = ${b(v)};`),m.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${w}, ...iss.path] : [${w}]
          })));
        }
        
        
        if (${x}.value === undefined) {
          if (${w} in input) {
            newResult[${w}] = undefined;
          }
        } else {
          newResult[${w}] = ${x}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");let _=m.compile();return(v,x)=>_(f,v,x)},o,a=qc,s=!Bh.jitless,u=s&&KO.value,l=e.catchall,d;t._zod.parse=(f,m)=>{d!=null||(d=n.value);let p=f.value;return a(p)?s&&u&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(o||(o=i(e.shape)),f=o(f,m),l?YB([],p,f,m,d,t):f):r(f,m):(f.issues.push({expected:"object",code:"invalid_type",input:p,inst:t}),f)}});function UB(t,e,r,n){for(let o of t)if(o.issues.length===0)return e.value=o.value,e;let i=t.filter(o=>!vu(o));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(a=>di(a,n,ur())))}),e)}var xx=P("$ZodUnion",(t,e)=>{Pe.init(t,e),Ye(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),Ye(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),Ye(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),Ye(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){let i=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>qh(o.source)).join("|")})$`)}});let r=e.options.length===1,n=e.options[0]._zod.run;t._zod.parse=(i,o)=>{if(r)return n(i,o);let a=!1,s=[];for(let c of e.options){let u=c._zod.run({value:i.value,issues:[]},o);if(u instanceof Promise)s.push(u),a=!0;else{if(u.issues.length===0)return u;s.push(u)}}return a?Promise.all(s).then(c=>UB(c,i,t,o)):UB(s,i,t,o)}}),MN=P("$ZodDiscriminatedUnion",(t,e)=>{xx.init(t,e);let r=t._zod.parse;Ye(t._zod,"propValues",()=>{let i={};for(let o of e.options){let a=o._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(let[s,c]of Object.entries(a)){i[s]||(i[s]=new Set);for(let u of c)i[s].add(u)}}return i});let n=Hf(()=>{var a;let i=e.options,o=new Map;for(let s of i){let c=(a=s._zod.propValues)==null?void 0:a[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let u of c){if(o.has(u))throw new Error(`Duplicate discriminator value "${String(u)}"`);o.set(u,s)}}return o});t._zod.parse=(i,o)=>{let a=i.value;if(!qc(a))return i.issues.push({code:"invalid_type",expected:"object",input:a,inst:t}),i;let s=n.value.get(a==null?void 0:a[e.discriminator]);return s?s._zod.run(i,o):e.unionFallback?r(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:a,path:[e.discriminator],inst:t}),i)}}),zN=P("$ZodIntersection",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value,o=e.left._zod.run({value:i,issues:[]},n),a=e.right._zod.run({value:i,issues:[]},n);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([c,u])=>jB(r,c,u)):jB(r,o,a)}});function XI(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(_u(t)&&_u(e)){let r=Object.keys(e),n=Object.keys(t).filter(o=>r.indexOf(o)!==-1),i={...t,...e};for(let o of n){let a=XI(t[o],e[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};i[o]=a.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let i=t[n],o=e[n],a=XI(i,o);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function jB(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),vu(t))return t;let n=XI(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}var wx=P("$ZodTuple",(t,e)=>{Pe.init(t,e);let r=e.items;t._zod.parse=(n,i)=>{let o=n.value;if(!Array.isArray(o))return n.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],s=[...r].reverse().findIndex(l=>l._zod.optin!=="optional"),c=s===-1?0:r.length-s;if(!e.rest){let l=o.length>r.length,d=o.length<c-1;if(l||d)return n.issues.push({...l?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:o,inst:t,origin:"array"}),n}let u=-1;for(let l of r){if(u++,u>=o.length&&u>=c)continue;let d=l._zod.run({value:o[u],issues:[]},i);d instanceof Promise?a.push(d.then(f=>px(f,n,u))):px(d,n,u)}if(e.rest){let l=o.slice(r.length);for(let d of l){u++;let f=e.rest._zod.run({value:d,issues:[]},i);f instanceof Promise?a.push(f.then(m=>px(m,n,u))):px(f,n,u)}}return a.length?Promise.all(a).then(()=>n):n}});function px(t,e,r){t.issues.length&&e.issues.push(...li(r,t.issues)),e.value[r]=t.value}var DN=P("$ZodRecord",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;if(!_u(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:t}),r;let o=[],a=e.keyType._zod.values;if(a){r.value={};let s=new Set;for(let u of a)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){s.add(typeof u=="number"?u.toString():u);let l=e.valueType._zod.run({value:i[u],issues:[]},n);l instanceof Promise?o.push(l.then(d=>{d.issues.length&&r.issues.push(...li(u,d.issues)),r.value[u]=d.value})):(l.issues.length&&r.issues.push(...li(u,l.issues)),r.value[u]=l.value)}let c;for(let u in i)s.has(u)||(c=c!=null?c:[],c.push(u));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:t,keys:c})}else{r.value={};for(let s of Reflect.ownKeys(i)){if(s==="__proto__")continue;let c=e.keyType._zod.run({value:s,issues:[]},n);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(l=>di(l,n,ur())),input:s,path:[s],inst:t}),r.value[c.value]=c.value;continue}let u=e.valueType._zod.run({value:i[s],issues:[]},n);u instanceof Promise?o.push(u.then(l=>{l.issues.length&&r.issues.push(...li(s,l.issues)),r.value[c.value]=l.value})):(u.issues.length&&r.issues.push(...li(s,u.issues)),r.value[c.value]=u.value)}}return o.length?Promise.all(o).then(()=>r):r}}),LN=P("$ZodMap",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:t}),r;let o=[];r.value=new Map;for(let[a,s]of i){let c=e.keyType._zod.run({value:a,issues:[]},n),u=e.valueType._zod.run({value:s,issues:[]},n);c instanceof Promise||u instanceof Promise?o.push(Promise.all([c,u]).then(([l,d])=>{FB(l,d,r,a,i,t,n)})):FB(c,u,r,a,i,t,n)}return o.length?Promise.all(o).then(()=>r):r}});function FB(t,e,r,n,i,o,a){t.issues.length&&(Gh.has(typeof n)?r.issues.push(...li(n,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:t.issues.map(s=>di(s,a,ur()))})),e.issues.length&&(Gh.has(typeof n)?r.issues.push(...li(n,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:n,issues:e.issues.map(s=>di(s,a,ur()))})),r.value.set(t.value,e.value)}var UN=P("$ZodSet",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:t,expected:"set",code:"invalid_type"}),r;let o=[];r.value=new Set;for(let a of i){let s=e.valueType._zod.run({value:a,issues:[]},n);s instanceof Promise?o.push(s.then(c=>BB(c,r))):BB(s,r)}return o.length?Promise.all(o).then(()=>r):r}});function BB(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}var jN=P("$ZodEnum",(t,e)=>{Pe.init(t,e);let r=Vh(e.entries),n=new Set(r);t._zod.values=n,t._zod.pattern=new RegExp(`^(${r.filter(i=>Gh.has(typeof i)).map(i=>typeof i=="string"?ji(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{let a=i.value;return n.has(a)||i.issues.push({code:"invalid_value",values:r,input:a,inst:t}),i}}),FN=P("$ZodLiteral",(t,e)=>{if(Pe.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?ji(n):n?ji(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,i)=>{let o=n.value;return r.has(o)||n.issues.push({code:"invalid_value",values:e.values,input:o,inst:t}),n}}),BN=P("$ZodFile",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{let i=r.value;return i instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:i,inst:t}),r}}),ZN=P("$ZodTransform",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new pu(t.constructor.name);let i=e.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(r.value=a,r));if(i instanceof Promise)throw new uo;return r.value=i,r}});function ZB(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}var em=P("$ZodOptional",(t,e)=>{Pe.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Ye(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Ye(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${qh(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>{if(e.innerType._zod.optin==="optional"){let i=e.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>ZB(o,r.value)):ZB(i,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,n)}}),VN=P("$ZodNullable",(t,e)=>{Pe.init(t,e),Ye(t._zod,"optin",()=>e.innerType._zod.optin),Ye(t._zod,"optout",()=>e.innerType._zod.optout),Ye(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${qh(r.source)}|null)$`):void 0}),Ye(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),qN=P("$ZodDefault",(t,e)=>{Pe.init(t,e),t._zod.optin="optional",Ye(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);if(r.value===void 0)return r.value=e.defaultValue,r;let i=e.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>VB(o,e)):VB(i,e)}});function VB(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}var GN=P("$ZodPrefault",(t,e)=>{Pe.init(t,e),t._zod.optin="optional",Ye(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),HN=P("$ZodNonOptional",(t,e)=>{Pe.init(t,e),Ye(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{let i=e.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>qB(o,t)):qB(i,t)}});function qB(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}var KN=P("$ZodSuccess",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new pu("ZodSuccess");let i=e.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>(r.value=o.issues.length===0,r)):(r.value=i.issues.length===0,r)}}),JN=P("$ZodCatch",(t,e)=>{Pe.init(t,e),Ye(t._zod,"optin",()=>e.innerType._zod.optin),Ye(t._zod,"optout",()=>e.innerType._zod.optout),Ye(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let i=e.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(a=>di(a,n,ur()))},input:r.value}),r.issues=[]),r)):(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(o=>di(o,n,ur()))},input:r.value}),r.issues=[]),r)}}),WN=P("$ZodNaN",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),YN=P("$ZodPipe",(t,e)=>{Pe.init(t,e),Ye(t._zod,"values",()=>e.in._zod.values),Ye(t._zod,"optin",()=>e.in._zod.optin),Ye(t._zod,"optout",()=>e.out._zod.optout),Ye(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if(n.direction==="backward"){let o=e.out._zod.run(r,n);return o instanceof Promise?o.then(a=>hx(a,e.in,n)):hx(o,e.in,n)}let i=e.in._zod.run(r,n);return i instanceof Promise?i.then(o=>hx(o,e.out,n)):hx(i,e.out,n)}});function hx(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}var ig=P("$ZodCodec",(t,e)=>{Pe.init(t,e),Ye(t._zod,"values",()=>e.in._zod.values),Ye(t._zod,"optin",()=>e.in._zod.optin),Ye(t._zod,"optout",()=>e.out._zod.optout),Ye(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{if((n.direction||"forward")==="forward"){let o=e.in._zod.run(r,n);return o instanceof Promise?o.then(a=>gx(a,e,n)):gx(o,e,n)}else{let o=e.out._zod.run(r,n);return o instanceof Promise?o.then(a=>gx(a,e,n)):gx(o,e,n)}}});function gx(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let i=e.transform(t.value,t);return i instanceof Promise?i.then(o=>yx(t,o,e.out,r)):yx(t,i,e.out,r)}else{let i=e.reverseTransform(t.value,t);return i instanceof Promise?i.then(o=>yx(t,o,e.in,r)):yx(t,i,e.in,r)}}function yx(t,e,r,n){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},n)}var XN=P("$ZodReadonly",(t,e)=>{Pe.init(t,e),Ye(t._zod,"propValues",()=>e.innerType._zod.propValues),Ye(t._zod,"values",()=>e.innerType._zod.values),Ye(t._zod,"optin",()=>{var r,n;return(n=(r=e.innerType)==null?void 0:r._zod)==null?void 0:n.optin}),Ye(t._zod,"optout",()=>{var r,n;return(n=(r=e.innerType)==null?void 0:r._zod)==null?void 0:n.optout}),t._zod.parse=(r,n)=>{if(n.direction==="backward")return e.innerType._zod.run(r,n);let i=e.innerType._zod.run(r,n);return i instanceof Promise?i.then(GB):GB(i)}});function GB(t){return t.value=Object.freeze(t.value),t}var QN=P("$ZodTemplateLiteral",(t,e)=>{Pe.init(t,e);let r=[];for(let n of e.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let i=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!i)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let o=i.startsWith("^")?1:0,a=i.endsWith("$")?i.length-1:i.length;r.push(i.slice(o,a))}else if(n===null||WO.has(typeof n))r.push(ji(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(n,i)=>{var o;return typeof n.value!="string"?(n.issues.push({input:n.value,inst:t,expected:"template_literal",code:"invalid_type"}),n):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:t,code:"invalid_format",format:(o=e.format)!=null?o:"template_literal",pattern:t._zod.pattern.source}),n)}}),eC=P("$ZodFunction",(t,e)=>(Pe.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...n){let i=t._def.input?Go(t._def.input,n):n,o=Reflect.apply(r,this,i);return t._def.output?Go(t._def.output,o):o}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let i=t._def.input?await Gc(t._def.input,n):n,o=await Reflect.apply(r,this,i);return t._def.output?await Gc(t._def.output,o):o}},t._zod.parse=(r,n)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let n=t.constructor;return Array.isArray(r[0])?new n({type:"function",input:new wx({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new n({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let n=t.constructor;return new n({type:"function",input:t._def.input,output:r})},t)),tC=P("$ZodPromise",(t,e)=>{Pe.init(t,e),t._zod.parse=(r,n)=>Promise.resolve(r.value).then(i=>e.innerType._zod.run({value:i,issues:[]},n))}),rC=P("$ZodLazy",(t,e)=>{Pe.init(t,e),Ye(t._zod,"innerType",()=>e.getter()),Ye(t._zod,"pattern",()=>{var r,n;return(n=(r=t._zod.innerType)==null?void 0:r._zod)==null?void 0:n.pattern}),Ye(t._zod,"propValues",()=>{var r,n;return(n=(r=t._zod.innerType)==null?void 0:r._zod)==null?void 0:n.propValues}),Ye(t._zod,"optin",()=>{var r,n,i;return(i=(n=(r=t._zod.innerType)==null?void 0:r._zod)==null?void 0:n.optin)!=null?i:void 0}),Ye(t._zod,"optout",()=>{var r,n,i;return(i=(n=(r=t._zod.innerType)==null?void 0:r._zod)==null?void 0:n.optout)!=null?i:void 0}),t._zod.parse=(r,n)=>t._zod.innerType._zod.run(r,n)}),nC=P("$ZodCustom",(t,e)=>{At.init(t,e),Pe.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{let n=r.value,i=e.fn(n);if(i instanceof Promise)return i.then(o=>HB(o,r,n,t));HB(i,r,n,t)}});function HB(t,e,r,n){var i;if(!t){let o={code:"custom",input:r,inst:n,path:[...(i=n._zod.def.path)!=null?i:[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),e.issues.push(Kf(o))}}var Jc={};na(Jc,{ar:()=>QB,az:()=>e9,be:()=>r9,bg:()=>n9,ca:()=>i9,cs:()=>o9,da:()=>a9,de:()=>s9,en:()=>Sx,eo:()=>u9,es:()=>c9,fa:()=>l9,fi:()=>d9,fr:()=>f9,frCA:()=>m9,he:()=>p9,hu:()=>h9,id:()=>g9,is:()=>y9,it:()=>_9,ja:()=>v9,ka:()=>b9,kh:()=>x9,km:()=>Ax,ko:()=>w9,lt:()=>A9,mk:()=>T9,ms:()=>E9,nl:()=>O9,no:()=>I9,ota:()=>N9,pl:()=>k9,ps:()=>C9,pt:()=>$9,ru:()=>P9,sl:()=>M9,sv:()=>z9,ta:()=>D9,th:()=>L9,tr:()=>U9,ua:()=>j9,uk:()=>Tx,ur:()=>F9,vi:()=>B9,yo:()=>q9,zhCN:()=>Z9,zhTW:()=>V9});var Mne=()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${i.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${X(i.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${(o=i.origin)!=null?o:"\u0627\u0644\u0642\u064A\u0645\u0629"} ${u} ${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${(s=i.origin)!=null?s:"\u0627\u0644\u0642\u064A\u0645\u0629"} ${u} ${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${u} ${i.minimum.toString()} ${l.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${u} ${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${i.prefix}"`:u.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${u.suffix}"`:u.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${u.includes}"`:u.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${u.pattern}`:`${(c=n[u.format])!=null?c:i.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${i.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${i.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${i.keys.length>1?"\u0629":""}: ${B(i.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function QB(){return{localeError:Mne()}}var zne=()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${i.expected}, daxil olan ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${X(i.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${(o=i.origin)!=null?o:"d\u0259y\u0259r"} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${(s=i.origin)!=null?s:"d\u0259y\u0259r"} ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${u}${i.minimum.toString()} ${l.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${u.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:u.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${u.suffix}" il\u0259 bitm\u0259lidir`:u.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${u.includes}" daxil olmal\u0131d\u0131r`:u.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${u.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${i.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${i.keys.length>1?"lar":""}: ${B(i.keys,", ")}`;case"invalid_key":return`${i.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${i.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function e9(){return{localeError:zne()}}function t9(t,e,r,n){let i=Math.abs(t),o=i%10,a=i%100;return a>=11&&a<=19?n:o===1?e:o>=2&&o<=4?r:n}var Dne=()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0456\u045E";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return i=>{var o,a,s;switch(i.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${i.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${X(i.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${B(i.values,"|")}`;case"too_big":{let c=i.inclusive?"<=":"<",u=e(i.origin);if(u){let l=Number(i.maximum),d=t9(l,u.unit.one,u.unit.few,u.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${(o=i.origin)!=null?o:"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${u.verb} ${c}${i.maximum.toString()} ${d}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${(a=i.origin)!=null?a:"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${c}${i.maximum.toString()}`}case"too_small":{let c=i.inclusive?">=":">",u=e(i.origin);if(u){let l=Number(i.minimum),d=t9(l,u.unit.one,u.unit.few,u.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${u.verb} ${c}${i.minimum.toString()} ${d}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${c}${i.minimum.toString()}`}case"invalid_format":{let c=i;return c.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${c.prefix}"`:c.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${c.suffix}"`:c.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${c.includes}"`:c.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${c.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${(s=n[c.format])!=null?s:i.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${i.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${B(i.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${i.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function r9(){return{localeError:Dne()}}var Lne=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Une=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(n){var i;return(i=t[n])!=null?i:null}let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{var i,o,a,s;switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Lne(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${X(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${B(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",u=e(n.origin);return u?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${(i=n.origin)!=null?i:"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${c}${n.maximum.toString()} ${(o=u.unit)!=null?o:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${(a=n.origin)!=null?a:"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",u=e(n.origin);return u?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${c}${n.minimum.toString()} ${u.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;if(c.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${c.prefix}"`;if(c.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${c.suffix}"`;if(c.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${c.includes}"`;if(c.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${c.pattern}`;let u="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return c.format==="emoji"&&(u="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="datetime"&&(u="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="date"&&(u="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),c.format==="time"&&(u="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="duration"&&(u="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${u} ${(s=r[c.format])!=null?s:n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${B(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function n9(){return{localeError:Une()}}var jne=()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${i.expected}, s'ha rebut ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Valor inv\xE0lid: s'esperava ${X(i.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${B(i.values," o ")}`;case"too_big":{let u=i.inclusive?"com a m\xE0xim":"menys de",l=e(i.origin);return l?`Massa gran: s'esperava que ${(o=i.origin)!=null?o:"el valor"} contingu\xE9s ${u} ${i.maximum.toString()} ${(a=l.unit)!=null?a:"elements"}`:`Massa gran: s'esperava que ${(s=i.origin)!=null?s:"el valor"} fos ${u} ${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?"com a m\xEDnim":"m\xE9s de",l=e(i.origin);return l?`Massa petit: s'esperava que ${i.origin} contingu\xE9s ${u} ${i.minimum.toString()} ${l.unit}`:`Massa petit: s'esperava que ${i.origin} fos ${u} ${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${u.prefix}"`:u.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${u.suffix}"`:u.format==="includes"?`Format inv\xE0lid: ha d'incloure "${u.includes}"`:u.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${u.pattern}`:`Format inv\xE0lid per a ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${i.divisor}`;case"unrecognized_keys":return`Clau${i.keys.length>1?"s":""} no reconeguda${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${i.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${i.origin}`;default:return"Entrada inv\xE0lida"}}};function i9(){return{localeError:jne()}}var Fne=()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(i))return"pole";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return i=>{var o,a,s,c,u,l,d;switch(i.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${i.expected}, obdr\u017Eeno ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${X(i.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${B(i.values,"|")}`;case"too_big":{let f=i.inclusive?"<=":"<",m=e(i.origin);return m?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${(o=i.origin)!=null?o:"hodnota"} mus\xED m\xEDt ${f}${i.maximum.toString()} ${(a=m.unit)!=null?a:"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${(s=i.origin)!=null?s:"hodnota"} mus\xED b\xFDt ${f}${i.maximum.toString()}`}case"too_small":{let f=i.inclusive?">=":">",m=e(i.origin);return m?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${(c=i.origin)!=null?c:"hodnota"} mus\xED m\xEDt ${f}${i.minimum.toString()} ${(u=m.unit)!=null?u:"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${(l=i.origin)!=null?l:"hodnota"} mus\xED b\xFDt ${f}${i.minimum.toString()}`}case"invalid_format":{let f=i;return f.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${f.prefix}"`:f.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${f.suffix}"`:f.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${f.includes}"`:f.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${f.pattern}`:`Neplatn\xFD form\xE1t ${(d=n[f.format])!=null?d:i.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${i.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${B(i.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${i.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${i.origin}`;default:return"Neplatn\xFD vstup"}}};function o9(){return{localeError:Fne()}}var Bne=()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(a){var s;return(s=t[a])!=null?s:null}function n(a){var s;return(s=e[a])!=null?s:a}let i=a=>{let s=typeof a;switch(s){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return s},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{var s,c;switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${n(a.expected)}, fik ${n(i(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\xE6rdi: forventede ${X(a.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${B(a.values,"|")}`;case"too_big":{let u=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`For stor: forventede ${d!=null?d:"value"} ${l.verb} ${u} ${a.maximum.toString()} ${(s=l.unit)!=null?s:"elementer"}`:`For stor: forventede ${d!=null?d:"value"} havde ${u} ${a.maximum.toString()}`}case"too_small":{let u=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`For lille: forventede ${d} ${l.verb} ${u} ${a.minimum.toString()} ${l.unit}`:`For lille: forventede ${d} havde ${u} ${a.minimum.toString()}`}case"invalid_format":{let u=a;return u.format==="starts_with"?`Ugyldig streng: skal starte med "${u.prefix}"`:u.format==="ends_with"?`Ugyldig streng: skal ende med "${u.suffix}"`:u.format==="includes"?`Ugyldig streng: skal indeholde "${u.includes}"`:u.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${u.pattern}`:`Ugyldig ${(c=o[u.format])!=null?c:a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${B(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}};function a9(){return{localeError:Bne()}}var Zne=()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"Zahl";case"object":{if(Array.isArray(i))return"Array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${i.expected}, erhalten ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ung\xFCltige Eingabe: erwartet ${X(i.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Zu gro\xDF: erwartet, dass ${(o=i.origin)!=null?o:"Wert"} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${(s=i.origin)!=null?s:"Wert"} ${u}${i.maximum.toString()} ist`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Zu klein: erwartet, dass ${i.origin} ${u}${i.minimum.toString()} ${l.unit} hat`:`Zu klein: erwartet, dass ${i.origin} ${u}${i.minimum.toString()} ist`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Ung\xFCltiger String: muss mit "${u.prefix}" beginnen`:u.format==="ends_with"?`Ung\xFCltiger String: muss mit "${u.suffix}" enden`:u.format==="includes"?`Ung\xFCltiger String: muss "${u.includes}" enthalten`:u.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${u.pattern} entsprechen`:`Ung\xFCltig: ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${i.divisor} sein`;case"unrecognized_keys":return`${i.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${B(i.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${i.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${i.origin}`;default:return"Ung\xFCltige Eingabe"}}};function s9(){return{localeError:Zne()}}var Vne=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},qne=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){var i;return(i=t[n])!=null?i:null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{var i,o,a,s;switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${Vne(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${X(n.values[0])}`:`Invalid option: expected one of ${B(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",u=e(n.origin);return u?`Too big: expected ${(i=n.origin)!=null?i:"value"} to have ${c}${n.maximum.toString()} ${(o=u.unit)!=null?o:"elements"}`:`Too big: expected ${(a=n.origin)!=null?a:"value"} to be ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",u=e(n.origin);return u?`Too small: expected ${n.origin} to have ${c}${n.minimum.toString()} ${u.unit}`:`Too small: expected ${n.origin} to be ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Invalid string: must start with "${c.prefix}"`:c.format==="ends_with"?`Invalid string: must end with "${c.suffix}"`:c.format==="includes"?`Invalid string: must include "${c.includes}"`:c.format==="regex"?`Invalid string: must match pattern ${c.pattern}`:`Invalid ${(s=r[c.format])!=null?s:n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${B(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}};function Sx(){return{localeError:qne()}}var Gne=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Hne=()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(n){var i;return(i=t[n])!=null?i:null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{var i,o,a,s;switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${Gne(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${X(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${B(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",u=e(n.origin);return u?`Tro granda: atendi\u011Dis ke ${(i=n.origin)!=null?i:"valoro"} havu ${c}${n.maximum.toString()} ${(o=u.unit)!=null?o:"elementojn"}`:`Tro granda: atendi\u011Dis ke ${(a=n.origin)!=null?a:"valoro"} havu ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",u=e(n.origin);return u?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${c}${n.minimum.toString()} ${u.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${c.prefix}"`:c.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${c.suffix}"`:c.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${c.includes}"`:c.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${c.pattern}`:`Nevalida ${(s=r[c.format])!=null?s:n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${B(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}};function u9(){return{localeError:Hne()}}var Kne=()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(a){var s;return(s=t[a])!=null?s:null}function n(a){var s;return(s=e[a])!=null?s:a}let i=a=>{let s=typeof a;switch(s){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return s},o={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{var s,c;switch(a.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(a.expected)}, recibido ${n(i(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\xE1lida: se esperaba ${X(a.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${B(a.values,"|")}`;case"too_big":{let u=a.inclusive?"<=":"<",l=r(a.origin),d=n(a.origin);return l?`Demasiado grande: se esperaba que ${d!=null?d:"valor"} tuviera ${u}${a.maximum.toString()} ${(s=l.unit)!=null?s:"elementos"}`:`Demasiado grande: se esperaba que ${d!=null?d:"valor"} fuera ${u}${a.maximum.toString()}`}case"too_small":{let u=a.inclusive?">=":">",l=r(a.origin),d=n(a.origin);return l?`Demasiado peque\xF1o: se esperaba que ${d} tuviera ${u}${a.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${d} fuera ${u}${a.minimum.toString()}`}case"invalid_format":{let u=a;return u.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${u.prefix}"`:u.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${u.suffix}"`:u.format==="includes"?`Cadena inv\xE1lida: debe incluir "${u.includes}"`:u.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${u.pattern}`:`Inv\xE1lido ${(c=o[u.format])!=null?c:a.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${B(a.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(a.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(a.origin)}`;default:return"Entrada inv\xE1lida"}}};function c9(){return{localeError:Kne()}}var Jne=()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0622\u0631\u0627\u06CC\u0647";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${i.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(i.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return i.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${X(i.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${B(i.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${(o=i.origin)!=null?o:"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${(s=i.origin)!=null?s:"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${u}${i.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${u}${i.minimum.toString()} ${l.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${u}${i.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${u.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:u.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${u.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:u.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${u.includes}" \u0628\u0627\u0634\u062F`:u.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${u.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${(c=n[u.format])!=null?c:i.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${i.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${i.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${B(i.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${i.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${i.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function l9(){return{localeError:Jne()}}var Wne=()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return i=>{var o;switch(i.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${i.expected}, oli ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${X(i.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${B(i.values,"|")}`;case"too_big":{let a=i.inclusive?"<=":"<",s=e(i.origin);return s?`Liian suuri: ${s.subject} t\xE4ytyy olla ${a}${i.maximum.toString()} ${s.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${a}${i.maximum.toString()}`}case"too_small":{let a=i.inclusive?">=":">",s=e(i.origin);return s?`Liian pieni: ${s.subject} t\xE4ytyy olla ${a}${i.minimum.toString()} ${s.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${a}${i.minimum.toString()}`}case"invalid_format":{let a=i;return a.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${a.prefix}"`:a.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${a.suffix}"`:a.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${a.includes}"`:a.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${a.pattern}`:`Virheellinen ${(o=n[a.format])!=null?o:i.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${i.divisor} monikerta`;case"unrecognized_keys":return`${i.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${B(i.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function d9(){return{localeError:Wne()}}var Yne=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombre";case"object":{if(Array.isArray(i))return"tableau";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Entr\xE9e invalide : ${i.expected} attendu, ${r(i.input)} re\xE7u`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : ${X(i.values[0])} attendu`:`Option invalide : une valeur parmi ${B(i.values,"|")} attendue`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Trop grand : ${(o=i.origin)!=null?o:"valeur"} doit ${l.verb} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\xE9l\xE9ment(s)"}`:`Trop grand : ${(s=i.origin)!=null?s:"valeur"} doit \xEAtre ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Trop petit : ${i.origin} doit ${l.verb} ${u}${i.minimum.toString()} ${l.unit}`:`Trop petit : ${i.origin} doit \xEAtre ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${u.prefix}"`:u.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${u.suffix}"`:u.format==="includes"?`Cha\xEEne invalide : doit inclure "${u.includes}"`:u.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${u.pattern}`:`${(c=n[u.format])!=null?c:i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${B(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function f9(){return{localeError:Yne()}}var Xne=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{var o,a,s;switch(i.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${i.expected}, re\xE7u ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : attendu ${X(i.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${B(i.values,"|")}`;case"too_big":{let c=i.inclusive?"\u2264":"<",u=e(i.origin);return u?`Trop grand : attendu que ${(o=i.origin)!=null?o:"la valeur"} ait ${c}${i.maximum.toString()} ${u.unit}`:`Trop grand : attendu que ${(a=i.origin)!=null?a:"la valeur"} soit ${c}${i.maximum.toString()}`}case"too_small":{let c=i.inclusive?"\u2265":">",u=e(i.origin);return u?`Trop petit : attendu que ${i.origin} ait ${c}${i.minimum.toString()} ${u.unit}`:`Trop petit : attendu que ${i.origin} soit ${c}${i.minimum.toString()}`}case"invalid_format":{let c=i;return c.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${c.prefix}"`:c.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${c.suffix}"`:c.format==="includes"?`Cha\xEEne invalide : doit inclure "${c.includes}"`:c.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${c.pattern}`:`${(s=n[c.format])!=null?s:i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${B(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function m9(){return{localeError:Xne()}}var Qne=()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=u=>u?t[u]:void 0,n=u=>{let l=r(u);return l?l.label:u!=null?u:t.unknown.label},i=u=>`\u05D4${n(u)}`,o=u=>{var f;let l=r(u);return((f=l==null?void 0:l.gender)!=null?f:"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA"},a=u=>{var l;return u&&(l=e[u])!=null?l:null},s=u=>{let l=typeof u;switch(l){case"number":return Number.isNaN(u)?"NaN":"number";case"object":return Array.isArray(u)?"array":u===null?"null":Object.getPrototypeOf(u)!==Object.prototype&&u.constructor?u.constructor.name:"object";default:return l}},c={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return u=>{var l,d,f,m,p,b,y,h,_,v,x,w,E,S,g,I,N,C,R;switch(u.code){case"invalid_type":{let z=u.expected,j=n(z),L=s(u.input),k=(d=(l=t[L])==null?void 0:l.label)!=null?d:L;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${j}, \u05D4\u05EA\u05E7\u05D1\u05DC ${k}`}case"invalid_value":{if(u.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${X(u.values[0])}`;let z=u.values.map(k=>X(k));if(u.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${z[0]} \u05D0\u05D5 ${z[1]}`;let j=z[z.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${z.slice(0,-1).join(", ")} \u05D0\u05D5 ${j}`}case"too_big":{let z=a(u.origin),j=i((f=u.origin)!=null?f:"value");if(u.origin==="string")return`${(m=z==null?void 0:z.longLabel)!=null?m:"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${j} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.maximum.toString()} ${(p=z==null?void 0:z.unit)!=null?p:""} ${u.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(u.origin==="number"){let U=u.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${u.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${j} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${U}`}if(u.origin==="array"||u.origin==="set"){let U=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",J=u.inclusive?`${u.maximum} ${(b=z==null?void 0:z.unit)!=null?b:""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${u.maximum} ${(y=z==null?void 0:z.unit)!=null?y:""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${j} ${U} \u05DC\u05D4\u05DB\u05D9\u05DC ${J}`.trim()}let L=u.inclusive?"<=":"<",k=o((h=u.origin)!=null?h:"value");return z!=null&&z.unit?`${z.longLabel} \u05DE\u05D3\u05D9: ${j} ${k} ${L}${u.maximum.toString()} ${z.unit}`:`${(_=z==null?void 0:z.longLabel)!=null?_:"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${j} ${k} ${L}${u.maximum.toString()}`}case"too_small":{let z=a(u.origin),j=i((v=u.origin)!=null?v:"value");if(u.origin==="string")return`${(x=z==null?void 0:z.shortLabel)!=null?x:"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${j} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.minimum.toString()} ${(w=z==null?void 0:z.unit)!=null?w:""} ${u.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(u.origin==="number"){let U=u.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${u.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${j} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${U}`}if(u.origin==="array"||u.origin==="set"){let U=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(u.minimum===1&&u.inclusive){let H=(u.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${j} ${U} \u05DC\u05D4\u05DB\u05D9\u05DC ${H}`}let J=u.inclusive?`${u.minimum} ${(E=z==null?void 0:z.unit)!=null?E:""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${u.minimum} ${(S=z==null?void 0:z.unit)!=null?S:""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${j} ${U} \u05DC\u05D4\u05DB\u05D9\u05DC ${J}`.trim()}let L=u.inclusive?">=":">",k=o((g=u.origin)!=null?g:"value");return z!=null&&z.unit?`${z.shortLabel} \u05DE\u05D3\u05D9: ${j} ${k} ${L}${u.minimum.toString()} ${z.unit}`:`${(I=z==null?void 0:z.shortLabel)!=null?I:"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${j} ${k} ${L}${u.minimum.toString()}`}case"invalid_format":{let z=u;if(z.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${z.prefix}"`;if(z.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${z.suffix}"`;if(z.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${z.includes}"`;if(z.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${z.pattern}`;let j=c[z.format],L=(N=j==null?void 0:j.label)!=null?N:z.format,U=((C=j==null?void 0:j.gender)!=null?C:"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${L} \u05DC\u05D0 ${U}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${u.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${u.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${u.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${B(u.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i((R=u.origin)!=null?R:"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function p9(){return{localeError:Qne()}}var eie=()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(i))return"t\xF6mb";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${i.expected}, a kapott \xE9rt\xE9k ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${X(i.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`T\xFAl nagy: ${(o=i.origin)!=null?o:"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${(s=i.origin)!=null?s:"\xE9rt\xE9k"} t\xFAl nagy: ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} m\xE9rete t\xFAl kicsi ${u}${i.minimum.toString()} ${l.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} t\xFAl kicsi ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\xC9rv\xE9nytelen string: "${u.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:u.format==="ends_with"?`\xC9rv\xE9nytelen string: "${u.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:u.format==="includes"?`\xC9rv\xE9nytelen string: "${u.includes}" \xE9rt\xE9ket kell tartalmaznia`:u.format==="regex"?`\xC9rv\xE9nytelen string: ${u.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${i.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${i.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${i.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function h9(){return{localeError:eie()}}var tie=()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Input tidak valid: diharapkan ${i.expected}, diterima ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak valid: diharapkan ${X(i.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Terlalu besar: diharapkan ${(o=i.origin)!=null?o:"value"} memiliki ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elemen"}`:`Terlalu besar: diharapkan ${(s=i.origin)!=null?s:"value"} menjadi ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Terlalu kecil: diharapkan ${i.origin} memiliki ${u}${i.minimum.toString()} ${l.unit}`:`Terlalu kecil: diharapkan ${i.origin} menjadi ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`String tidak valid: harus dimulai dengan "${u.prefix}"`:u.format==="ends_with"?`String tidak valid: harus berakhir dengan "${u.suffix}"`:u.format==="includes"?`String tidak valid: harus menyertakan "${u.includes}"`:u.format==="regex"?`String tidak valid: harus sesuai pola ${u.pattern}`:`${(c=n[u.format])!=null?c:i.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${i.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${i.origin}`;default:return"Input tidak valid"}}};function g9(){return{localeError:tie()}}var rie=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},nie=()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(n){var i;return(i=t[n])!=null?i:null}let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{var i,o,a,s;switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${rie(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${X(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${B(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",u=e(n.origin);return u?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${(i=n.origin)!=null?i:"gildi"} hafi ${c}${n.maximum.toString()} ${(o=u.unit)!=null?o:"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${(a=n.origin)!=null?a:"gildi"} s\xE9 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",u=e(n.origin);return u?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${c}${n.minimum.toString()} ${u.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${c.prefix}"`:c.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${c.suffix}"`:c.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${c.includes}"`:c.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${c.pattern}`:`Rangt ${(s=r[c.format])!=null?s:n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${B(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}};function y9(){return{localeError:nie()}}var iie=()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numero";case"object":{if(Array.isArray(i))return"vettore";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Input non valido: atteso ${i.expected}, ricevuto ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Input non valido: atteso ${X(i.values[0])}`:`Opzione non valida: atteso uno tra ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Troppo grande: ${(o=i.origin)!=null?o:"valore"} deve avere ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elementi"}`:`Troppo grande: ${(s=i.origin)!=null?s:"valore"} deve essere ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Troppo piccolo: ${i.origin} deve avere ${u}${i.minimum.toString()} ${l.unit}`:`Troppo piccolo: ${i.origin} deve essere ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Stringa non valida: deve iniziare con "${u.prefix}"`:u.format==="ends_with"?`Stringa non valida: deve terminare con "${u.suffix}"`:u.format==="includes"?`Stringa non valida: deve includere "${u.includes}"`:u.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${u.pattern}`:`Invalid ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${i.divisor}`;case"unrecognized_keys":return`Chiav${i.keys.length>1?"i":"e"} non riconosciut${i.keys.length>1?"e":"a"}: ${B(i.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${i.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${i.origin}`;default:return"Input non valido"}}};function _9(){return{localeError:iie()}}var oie=()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(i))return"\u914D\u5217";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${i.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(i.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return i.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${X(i.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${B(i.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let u=i.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",l=e(i.origin);return l?`\u5927\u304D\u3059\u304E\u308B\u5024: ${(o=i.origin)!=null?o:"\u5024"}\u306F${i.maximum.toString()}${(a=l.unit)!=null?a:"\u8981\u7D20"}${u}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${(s=i.origin)!=null?s:"\u5024"}\u306F${i.maximum.toString()}${u}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let u=i.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",l=e(i.origin);return l?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${l.unit}${u}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${u}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${u.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:u.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${u.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:u.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${u.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:u.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${u.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${i.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${i.keys.length>1?"\u7FA4":""}: ${B(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function v9(){return{localeError:oie()}}var aie=t=>{var n;let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return(n={string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e])!=null?n:e},sie=()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(n){var i;return(i=t[n])!=null?i:null}let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{var i,o,a;switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${aie(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${B(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let s=n.inclusive?"<=":"<",c=e(n.origin);return c?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${(i=n.origin)!=null?i:"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${c.verb} ${s}${n.maximum.toString()} ${c.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${(o=n.origin)!=null?o:"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${s}${n.maximum.toString()}`}case"too_small":{let s=n.inclusive?">=":">",c=e(n.origin);return c?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${c.verb} ${s}${n.minimum.toString()} ${c.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${s}${n.minimum.toString()}`}case"invalid_format":{let s=n;return s.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${s.prefix}"-\u10D8\u10D7`:s.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${s.suffix}"-\u10D8\u10D7`:s.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${s.includes}"-\u10E1`:s.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${s.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${(a=r[s.format])!=null?a:n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${B(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function b9(){return{localeError:sie()}}var uie=()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(i))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(i===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X(i.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${(o=i.origin)!=null?o:"\u178F\u1798\u17D2\u179B\u17C3"} ${u} ${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${(s=i.origin)!=null?s:"\u178F\u1798\u17D2\u179B\u17C3"} ${u} ${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${u} ${i.minimum.toString()} ${l.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${u} ${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${u.prefix}"`:u.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${u.suffix}"`:u.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${u.includes}"`:u.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${u.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${i.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${B(i.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function Ax(){return{localeError:uie()}}function x9(){return Ax()}var cie=()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return i=>{var o,a,s,c,u,l,d;switch(i.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${i.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(i.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return i.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${X(i.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${B(i.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let f=i.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",m=f==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",p=e(i.origin),b=(o=p==null?void 0:p.unit)!=null?o:"\uC694\uC18C";return p?`${(a=i.origin)!=null?a:"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()}${b} ${f}${m}`:`${(s=i.origin)!=null?s:"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()} ${f}${m}`}case"too_small":{let f=i.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",m=f==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",p=e(i.origin),b=(c=p==null?void 0:p.unit)!=null?c:"\uC694\uC18C";return p?`${(u=i.origin)!=null?u:"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()}${b} ${f}${m}`:`${(l=i.origin)!=null?l:"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()} ${f}${m}`}case"invalid_format":{let f=i;return f.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${f.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:f.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${f.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:f.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${f.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:f.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${f.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${(d=n[f.format])!=null?d:i.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${i.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${B(i.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${i.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${i.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function w9(){return{localeError:cie()}}var lie=t=>ag(typeof t,t),ag=(t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},og=t=>t.charAt(0).toUpperCase()+t.slice(1);function S9(t){let e=Math.abs(t),r=e%10,n=e%100;return n>=11&&n<=19||r===0?"many":r===1?"one":"few"}var die=()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(n,i,o,a){var c;let s=(c=t[n])!=null?c:null;return s===null?s:{unit:s.unit[i],verb:s.verb[a][o?"inclusive":"notInclusive"]}}let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{var i,o,a,s,c,u,l,d,f,m;switch(n.code){case"invalid_type":return`Gautas tipas ${lie(n.input)}, o tik\u0117tasi - ${ag(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${X(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${B(n.values,"|")} pasirinkim\u0173`;case"too_big":{let p=ag(n.origin),b=e(n.origin,S9(Number(n.maximum)),(i=n.inclusive)!=null?i:!1,"smaller");if(b!=null&&b.verb)return`${og((o=p!=null?p:n.origin)!=null?o:"reik\u0161m\u0117")} ${b.verb} ${n.maximum.toString()} ${(a=b.unit)!=null?a:"element\u0173"}`;let y=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${og((s=p!=null?p:n.origin)!=null?s:"reik\u0161m\u0117")} turi b\u016Bti ${y} ${n.maximum.toString()} ${b==null?void 0:b.unit}`}case"too_small":{let p=ag(n.origin),b=e(n.origin,S9(Number(n.minimum)),(c=n.inclusive)!=null?c:!1,"bigger");if(b!=null&&b.verb)return`${og((u=p!=null?p:n.origin)!=null?u:"reik\u0161m\u0117")} ${b.verb} ${n.minimum.toString()} ${(l=b.unit)!=null?l:"element\u0173"}`;let y=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${og((d=p!=null?p:n.origin)!=null?d:"reik\u0161m\u0117")} turi b\u016Bti ${y} ${n.minimum.toString()} ${b==null?void 0:b.unit}`}case"invalid_format":{let p=n;return p.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${p.prefix}"`:p.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${p.suffix}"`:p.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${p.includes}"`:p.format==="regex"?`Eilut\u0117 privalo atitikti ${p.pattern}`:`Neteisingas ${(f=r[p.format])!=null?f:n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${B(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let p=ag(n.origin);return`${og((m=p!=null?p:n.origin)!=null?m:"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function A9(){return{localeError:die()}}var fie=()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(i))return"\u043D\u0438\u0437\u0430";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${X(i.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${(o=i.origin)!=null?o:"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${(s=i.origin)!=null?s:"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0438\u043C\u0430 ${u}${i.minimum.toString()} ${l.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${u.prefix}"`:u.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${u.suffix}"`:u.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${u.includes}"`:u.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${u.pattern}`:`Invalid ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${B(i.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${i.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${i.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function T9(){return{localeError:fie()}}var mie=()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombor";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Input tidak sah: dijangka ${i.expected}, diterima ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak sah: dijangka ${X(i.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Terlalu besar: dijangka ${(o=i.origin)!=null?o:"nilai"} ${l.verb} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elemen"}`:`Terlalu besar: dijangka ${(s=i.origin)!=null?s:"nilai"} adalah ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Terlalu kecil: dijangka ${i.origin} ${l.verb} ${u}${i.minimum.toString()} ${l.unit}`:`Terlalu kecil: dijangka ${i.origin} adalah ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`String tidak sah: mesti bermula dengan "${u.prefix}"`:u.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${u.suffix}"`:u.format==="includes"?`String tidak sah: mesti mengandungi "${u.includes}"`:u.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${u.pattern}`:`${(c=n[u.format])!=null?c:i.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${B(i.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${i.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${i.origin}`;default:return"Input tidak sah"}}};function E9(){return{localeError:mie()}}var pie=()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"getal";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Ongeldige invoer: verwacht ${i.expected}, ontving ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ongeldige invoer: verwacht ${X(i.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Te groot: verwacht dat ${(o=i.origin)!=null?o:"waarde"} ${l.verb} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elementen"}`:`Te groot: verwacht dat ${(s=i.origin)!=null?s:"waarde"} ${u}${i.maximum.toString()} is`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Te klein: verwacht dat ${i.origin} ${l.verb} ${u}${i.minimum.toString()} ${l.unit}`:`Te klein: verwacht dat ${i.origin} ${u}${i.minimum.toString()} is`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Ongeldige tekst: moet met "${u.prefix}" beginnen`:u.format==="ends_with"?`Ongeldige tekst: moet op "${u.suffix}" eindigen`:u.format==="includes"?`Ongeldige tekst: moet "${u.includes}" bevatten`:u.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${u.pattern}`:`Ongeldig: ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${i.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${i.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${i.origin}`;default:return"Ongeldige invoer"}}};function O9(){return{localeError:pie()}}var hie=()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"tall";case"object":{if(Array.isArray(i))return"liste";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Ugyldig input: forventet ${i.expected}, fikk ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ugyldig verdi: forventet ${X(i.values[0])}`:`Ugyldig valg: forventet en av ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`For stor(t): forventet ${(o=i.origin)!=null?o:"value"} til \xE5 ha ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elementer"}`:`For stor(t): forventet ${(s=i.origin)!=null?s:"value"} til \xE5 ha ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`For lite(n): forventet ${i.origin} til \xE5 ha ${u}${i.minimum.toString()} ${l.unit}`:`For lite(n): forventet ${i.origin} til \xE5 ha ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${u.prefix}"`:u.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${u.suffix}"`:u.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${u.includes}"`:u.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${u.pattern}`:`Ugyldig ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${B(i.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${i.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${i.origin}`;default:return"Ugyldig input"}}};function I9(){return{localeError:hie()}}var gie=()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numara";case"object":{if(Array.isArray(i))return"saf";if(i===null)return"gayb";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`F\xE2sit giren: umulan ${i.expected}, al\u0131nan ${r(i.input)}`;case"invalid_value":return i.values.length===1?`F\xE2sit giren: umulan ${X(i.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Fazla b\xFCy\xFCk: ${(o=i.origin)!=null?o:"value"}, ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${(s=i.origin)!=null?s:"value"}, ${u}${i.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${u}${i.minimum.toString()} ${l.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${u}${i.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let u=i;return u.format==="starts_with"?`F\xE2sit metin: "${u.prefix}" ile ba\u015Flamal\u0131.`:u.format==="ends_with"?`F\xE2sit metin: "${u.suffix}" ile bitmeli.`:u.format==="includes"?`F\xE2sit metin: "${u.includes}" ihtiv\xE2 etmeli.`:u.format==="regex"?`F\xE2sit metin: ${u.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${i.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${i.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function N9(){return{localeError:gie()}}var yie=()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0627\u0631\u06D0";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${i.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(i.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return i.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${X(i.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${B(i.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${(o=i.origin)!=null?o:"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${(s=i.origin)!=null?s:"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${u}${i.maximum.toString()} \u0648\u064A`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${u}${i.minimum.toString()} ${l.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${u}${i.minimum.toString()} \u0648\u064A`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${u.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:u.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${u.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:u.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${u.includes}" \u0648\u0644\u0631\u064A`:u.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${u.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${(c=n[u.format])!=null?c:i.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${i.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${i.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${B(i.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${i.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${i.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function C9(){return{localeError:yie()}}var _ie=()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"liczba";case"object":{if(Array.isArray(i))return"tablica";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return i=>{var o,a,s,c,u,l,d;switch(i.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${i.expected}, otrzymano ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${X(i.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${B(i.values,"|")}`;case"too_big":{let f=i.inclusive?"<=":"<",m=e(i.origin);return m?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${(o=i.origin)!=null?o:"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${f}${i.maximum.toString()} ${(a=m.unit)!=null?a:"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${(s=i.origin)!=null?s:"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${f}${i.maximum.toString()}`}case"too_small":{let f=i.inclusive?">=":">",m=e(i.origin);return m?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${(c=i.origin)!=null?c:"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${f}${i.minimum.toString()} ${(u=m.unit)!=null?u:"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${(l=i.origin)!=null?l:"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${f}${i.minimum.toString()}`}case"invalid_format":{let f=i;return f.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${f.prefix}"`:f.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${f.suffix}"`:f.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${f.includes}"`:f.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${f.pattern}`:`Nieprawid\u0142ow(y/a/e) ${(d=n[f.format])!=null?d:i.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${i.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${i.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${i.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function k9(){return{localeError:_ie()}}var vie=()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(i))return"array";if(i===null)return"nulo";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${i.expected}, recebido ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Entrada inv\xE1lida: esperado ${X(i.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Muito grande: esperado que ${(o=i.origin)!=null?o:"valor"} tivesse ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elementos"}`:`Muito grande: esperado que ${(s=i.origin)!=null?s:"valor"} fosse ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Muito pequeno: esperado que ${i.origin} tivesse ${u}${i.minimum.toString()} ${l.unit}`:`Muito pequeno: esperado que ${i.origin} fosse ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${u.prefix}"`:u.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${u.suffix}"`:u.format==="includes"?`Texto inv\xE1lido: deve incluir "${u.includes}"`:u.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${u.pattern}`:`${(c=n[u.format])!=null?c:i.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${i.divisor}`;case"unrecognized_keys":return`Chave${i.keys.length>1?"s":""} desconhecida${i.keys.length>1?"s":""}: ${B(i.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${i.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${i.origin}`;default:return"Campo inv\xE1lido"}}};function $9(){return{localeError:vie()}}function R9(t,e,r,n){let i=Math.abs(t),o=i%10,a=i%100;return a>=11&&a<=19?n:o===1?e:o>=2&&o<=4?r:n}var bie=()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return i=>{var o,a,s;switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${X(i.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${B(i.values,"|")}`;case"too_big":{let c=i.inclusive?"<=":"<",u=e(i.origin);if(u){let l=Number(i.maximum),d=R9(l,u.unit.one,u.unit.few,u.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${(o=i.origin)!=null?o:"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${c}${i.maximum.toString()} ${d}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${(a=i.origin)!=null?a:"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${c}${i.maximum.toString()}`}case"too_small":{let c=i.inclusive?">=":">",u=e(i.origin);if(u){let l=Number(i.minimum),d=R9(l,u.unit.one,u.unit.few,u.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${c}${i.minimum.toString()} ${d}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 ${c}${i.minimum.toString()}`}case"invalid_format":{let c=i;return c.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${c.prefix}"`:c.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${c.suffix}"`:c.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${c.includes}"`:c.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${c.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${(s=n[c.format])!=null?s:i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${i.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0438":""}: ${B(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function P9(){return{localeError:bie()}}var xie=()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(i))return"tabela";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${i.expected}, prejeto ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${X(i.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Preveliko: pri\u010Dakovano, da bo ${(o=i.origin)!=null?o:"vrednost"} imelo ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${(s=i.origin)!=null?s:"vrednost"} ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Premajhno: pri\u010Dakovano, da bo ${i.origin} imelo ${u}${i.minimum.toString()} ${l.unit}`:`Premajhno: pri\u010Dakovano, da bo ${i.origin} ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${u.prefix}"`:u.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${u.suffix}"`:u.format==="includes"?`Neveljaven niz: mora vsebovati "${u.includes}"`:u.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${u.pattern}`:`Neveljaven ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${i.divisor}`;case"unrecognized_keys":return`Neprepoznan${i.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${B(i.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${i.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${i.origin}`;default:return"Neveljaven vnos"}}};function M9(){return{localeError:xie()}}var wie=()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"antal";case"object":{if(Array.isArray(i))return"lista";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return i=>{var o,a,s,c,u,l,d,f;switch(i.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${i.expected}, fick ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${X(i.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${B(i.values,"|")}`;case"too_big":{let m=i.inclusive?"<=":"<",p=e(i.origin);return p?`F\xF6r stor(t): f\xF6rv\xE4ntade ${(o=i.origin)!=null?o:"v\xE4rdet"} att ha ${m}${i.maximum.toString()} ${(a=p.unit)!=null?a:"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${(s=i.origin)!=null?s:"v\xE4rdet"} att ha ${m}${i.maximum.toString()}`}case"too_small":{let m=i.inclusive?">=":">",p=e(i.origin);return p?`F\xF6r lite(t): f\xF6rv\xE4ntade ${(c=i.origin)!=null?c:"v\xE4rdet"} att ha ${m}${i.minimum.toString()} ${p.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${(u=i.origin)!=null?u:"v\xE4rdet"} att ha ${m}${i.minimum.toString()}`}case"invalid_format":{let m=i;return m.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${m.prefix}"`:m.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${m.suffix}"`:m.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${m.includes}"`:m.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${m.pattern}"`:`Ogiltig(t) ${(l=n[m.format])!=null?l:i.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${B(i.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${(d=i.origin)!=null?d:"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${(f=i.origin)!=null?f:"v\xE4rdet"}`;default:return"Ogiltig input"}}};function z9(){return{localeError:wie()}}var Sie=()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(i))return"\u0B85\u0BA3\u0BBF";if(i===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X(i.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${B(i.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${(o=i.origin)!=null?o:"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${(s=i.origin)!=null?s:"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${u}${i.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${u}${i.minimum.toString()} ${l.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${u}${i.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${u.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:u.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${u.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:u.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${u.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:u.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${u.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${i.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${i.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${B(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function D9(){return{localeError:Sie()}}var Aie=()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(i))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(i===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${i.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${X(i.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",l=e(i.origin);return l?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${(o=i.origin)!=null?o:"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${u} ${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${(s=i.origin)!=null?s:"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${u} ${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",l=e(i.origin);return l?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${u} ${i.minimum.toString()} ${l.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${u} ${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${u.prefix}"`:u.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${u.suffix}"`:u.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${u.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:u.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${u.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${i.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${B(i.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function L9(){return{localeError:Aie()}}var Tie=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Eie=()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(n){var i;return(i=t[n])!=null?i:null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{var i,o,a,s;switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${Tie(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${X(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${B(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",u=e(n.origin);return u?`\xC7ok b\xFCy\xFCk: beklenen ${(i=n.origin)!=null?i:"de\u011Fer"} ${c}${n.maximum.toString()} ${(o=u.unit)!=null?o:"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${(a=n.origin)!=null?a:"de\u011Fer"} ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",u=e(n.origin);return u?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${c}${n.minimum.toString()} ${u.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Ge\xE7ersiz metin: "${c.prefix}" ile ba\u015Flamal\u0131`:c.format==="ends_with"?`Ge\xE7ersiz metin: "${c.suffix}" ile bitmeli`:c.format==="includes"?`Ge\xE7ersiz metin: "${c.includes}" i\xE7ermeli`:c.format==="regex"?`Ge\xE7ersiz metin: ${c.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${(s=r[c.format])!=null?s:n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${B(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function U9(){return{localeError:Eie()}}var Oie=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${i.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${X(i.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${(o=i.origin)!=null?o:"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${l.verb} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${(s=i.origin)!=null?s:"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} ${l.verb} ${u}${i.minimum.toString()} ${l.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} \u0431\u0443\u0434\u0435 ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${u.prefix}"`:u.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${u.suffix}"`:u.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${u.includes}"`:u.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${u.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0456":""}: ${B(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${i.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function Tx(){return{localeError:Oie()}}function j9(){return Tx()}var Iie=()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(i))return"\u0622\u0631\u06D2";if(i===null)return"\u0646\u0644";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${i.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(i.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return i.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${X(i.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${B(i.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${(o=i.origin)!=null?o:"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${(s=i.origin)!=null?s:"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${u}${i.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u06D2 ${u}${i.minimum.toString()} ${l.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u0627 ${u}${i.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${u.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:u.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${u.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:u.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${u.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:u.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${u.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${i.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${i.keys.length>1?"\u0632":""}: ${B(i.keys,"\u060C ")}`;case"invalid_key":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function F9(){return{localeError:Iie()}}var Nie=()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(i))return"m\u1EA3ng";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${i.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${X(i.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${(o=i.origin)!=null?o:"gi\xE1 tr\u1ECB"} ${l.verb} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${(s=i.origin)!=null?s:"gi\xE1 tr\u1ECB"} ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${l.verb} ${u}${i.minimum.toString()} ${l.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${u.prefix}"`:u.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${u.suffix}"`:u.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${u.includes}"`:u.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${u.pattern}`:`${(c=n[u.format])!=null?c:i.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${i.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${B(i.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function B9(){return{localeError:Nie()}}var Cie=()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(i))return"\u6570\u7EC4";if(i===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${i.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${X(i.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${(o=i.origin)!=null?o:"\u503C"} ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${(s=i.origin)!=null?s:"\u503C"} ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${u}${i.minimum.toString()} ${l.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${u.prefix}" \u5F00\u5934`:u.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${u.suffix}" \u7ED3\u5C3E`:u.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${u.includes}"`:u.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${u.pattern}`:`\u65E0\u6548${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${i.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${B(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${i.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function Z9(){return{localeError:Cie()}}var kie=()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return i=>{var o,a,s,c;switch(i.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${i.expected}\uFF0C\u4F46\u6536\u5230 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${X(i.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${B(i.values,"|")}`;case"too_big":{let u=i.inclusive?"<=":"<",l=e(i.origin);return l?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${(o=i.origin)!=null?o:"\u503C"} \u61C9\u70BA ${u}${i.maximum.toString()} ${(a=l.unit)!=null?a:"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${(s=i.origin)!=null?s:"\u503C"} \u61C9\u70BA ${u}${i.maximum.toString()}`}case"too_small":{let u=i.inclusive?">=":">",l=e(i.origin);return l?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${u}${i.minimum.toString()} ${l.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${u}${i.minimum.toString()}`}case"invalid_format":{let u=i;return u.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${u.prefix}" \u958B\u982D`:u.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${u.suffix}" \u7D50\u5C3E`:u.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${u.includes}"`:u.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${u.pattern}`:`\u7121\u6548\u7684 ${(c=n[u.format])!=null?c:i.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${i.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${i.keys.length>1?"\u5011":""}\uFF1A${B(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function V9(){return{localeError:kie()}}var $ie=()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(i){var o;return(o=t[i])!=null?o:null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(i))return"akop\u1ECD";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return i=>{var o,a;switch(i.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${i.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${X(i.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${B(i.values,"|")}`;case"too_big":{let s=i.inclusive?"<=":"<",c=e(i.origin);return c?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${(o=i.origin)!=null?o:"iye"} ${c.verb} ${s}${i.maximum} ${c.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${s}${i.maximum}`}case"too_small":{let s=i.inclusive?">=":">",c=e(i.origin);return c?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin} ${c.verb} ${s}${i.minimum} ${c.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${s}${i.minimum}`}case"invalid_format":{let s=i;return s.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${s.prefix}"`:s.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${s.suffix}"`:s.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${s.includes}"`:s.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${s.pattern}`:`A\u1E63\xEC\u1E63e: ${(a=n[s.format])!=null?a:i.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${i.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${B(i.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function q9(){return{localeError:$ie()}}var G9,iC=Symbol("ZodOutput"),oC=Symbol("ZodInput"),tm=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){var n;let r=e._zod.parent;if(r){let i={...(n=this.get(r))!=null?n:{}};delete i.id;let o={...i,...this._map.get(e)};return Object.keys(o).length?o:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Ex(){return new tm}var H9;(H9=(G9=globalThis).__zod_globalRegistry)!=null||(G9.__zod_globalRegistry=Ex());var ht=globalThis.__zod_globalRegistry;function aC(t,e){return new t({type:"string",...Q(e)})}function sC(t,e){return new t({type:"string",coerce:!0,...Q(e)})}function Ox(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Q(e)})}function sg(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Q(e)})}function Ix(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Q(e)})}function Nx(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Q(e)})}function Cx(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Q(e)})}function kx(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Q(e)})}function ug(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Q(e)})}function $x(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Q(e)})}function Rx(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Q(e)})}function Px(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Q(e)})}function Mx(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Q(e)})}function zx(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Q(e)})}function Dx(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Q(e)})}function Lx(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Q(e)})}function Ux(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Q(e)})}function jx(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Q(e)})}function uC(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...Q(e)})}function Fx(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Q(e)})}function Bx(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Q(e)})}function Zx(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Q(e)})}function Vx(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Q(e)})}function qx(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Q(e)})}function Gx(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Q(e)})}var cC={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function lC(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Q(e)})}function dC(t,e){return new t({type:"string",format:"date",check:"string_format",...Q(e)})}function fC(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Q(e)})}function mC(t,e){return new t({type:"string",format:"duration",check:"string_format",...Q(e)})}function pC(t,e){return new t({type:"number",checks:[],...Q(e)})}function hC(t,e){return new t({type:"number",coerce:!0,checks:[],...Q(e)})}function gC(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Q(e)})}function yC(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...Q(e)})}function _C(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...Q(e)})}function vC(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...Q(e)})}function bC(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...Q(e)})}function xC(t,e){return new t({type:"boolean",...Q(e)})}function wC(t,e){return new t({type:"boolean",coerce:!0,...Q(e)})}function SC(t,e){return new t({type:"bigint",...Q(e)})}function AC(t,e){return new t({type:"bigint",coerce:!0,...Q(e)})}function TC(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...Q(e)})}function EC(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...Q(e)})}function OC(t,e){return new t({type:"symbol",...Q(e)})}function IC(t,e){return new t({type:"undefined",...Q(e)})}function NC(t,e){return new t({type:"null",...Q(e)})}function CC(t){return new t({type:"any"})}function cg(t){return new t({type:"unknown"})}function lg(t,e){return new t({type:"never",...Q(e)})}function kC(t,e){return new t({type:"void",...Q(e)})}function $C(t,e){return new t({type:"date",...Q(e)})}function RC(t,e){return new t({type:"date",coerce:!0,...Q(e)})}function PC(t,e){return new t({type:"nan",...Q(e)})}function Va(t,e){return new fx({check:"less_than",...Q(e),value:t,inclusive:!1})}function Fi(t,e){return new fx({check:"less_than",...Q(e),value:t,inclusive:!0})}function qa(t,e){return new mx({check:"greater_than",...Q(e),value:t,inclusive:!1})}function jn(t,e){return new mx({check:"greater_than",...Q(e),value:t,inclusive:!0})}function MC(t){return qa(0,t)}function zC(t){return Va(0,t)}function DC(t){return Fi(0,t)}function LC(t){return jn(0,t)}function Wc(t,e){return new RI({check:"multiple_of",...Q(e),value:t})}function rm(t,e){return new zI({check:"max_size",...Q(e),maximum:t})}function Yc(t,e){return new DI({check:"min_size",...Q(e),minimum:t})}function dg(t,e){return new LI({check:"size_equals",...Q(e),size:t})}function nm(t,e){return new UI({check:"max_length",...Q(e),maximum:t})}function bu(t,e){return new jI({check:"min_length",...Q(e),minimum:t})}function im(t,e){return new FI({check:"length_equals",...Q(e),length:t})}function fg(t,e){return new BI({check:"string_format",format:"regex",...Q(e),pattern:t})}function mg(t){return new ZI({check:"string_format",format:"lowercase",...Q(t)})}function pg(t){return new VI({check:"string_format",format:"uppercase",...Q(t)})}function hg(t,e){return new qI({check:"string_format",format:"includes",...Q(e),includes:t})}function gg(t,e){return new GI({check:"string_format",format:"starts_with",...Q(e),prefix:t})}function yg(t,e){return new HI({check:"string_format",format:"ends_with",...Q(e),suffix:t})}function UC(t,e,r){return new KI({check:"property",property:t,schema:e,...Q(r)})}function _g(t,e){return new JI({check:"mime_type",mime:t,...Q(e)})}function Ho(t){return new WI({check:"overwrite",tx:t})}function vg(t){return Ho(e=>e.normalize(t))}function bg(){return Ho(t=>t.trim())}function xg(){return Ho(t=>t.toLowerCase())}function wg(){return Ho(t=>t.toUpperCase())}function Sg(){return Ho(t=>HO(t))}function jC(t,e,r){return new t({type:"array",element:e,...Q(r)})}function Pie(t,e,r){return new t({type:"union",options:e,...Q(r)})}function Mie(t,e,r,n){return new t({type:"union",options:r,discriminator:e,...Q(n)})}function zie(t,e,r){return new t({type:"intersection",left:e,right:r})}function Die(t,e,r,n){let i=r instanceof Pe,o=i?n:r,a=i?r:null;return new t({type:"tuple",items:e,rest:a,...Q(o)})}function Lie(t,e,r,n){return new t({type:"record",keyType:e,valueType:r,...Q(n)})}function Uie(t,e,r,n){return new t({type:"map",keyType:e,valueType:r,...Q(n)})}function jie(t,e,r){return new t({type:"set",valueType:e,...Q(r)})}function Fie(t,e,r){let n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new t({type:"enum",entries:n,...Q(r)})}function Bie(t,e,r){return new t({type:"enum",entries:e,...Q(r)})}function Zie(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...Q(r)})}function FC(t,e){return new t({type:"file",...Q(e)})}function Vie(t,e){return new t({type:"transform",transform:e})}function qie(t,e){return new t({type:"optional",innerType:e})}function Gie(t,e){return new t({type:"nullable",innerType:e})}function Hie(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():JO(r)}})}function Kie(t,e,r){return new t({type:"nonoptional",innerType:e,...Q(r)})}function Jie(t,e){return new t({type:"success",innerType:e})}function Wie(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}function Yie(t,e,r){return new t({type:"pipe",in:e,out:r})}function Xie(t,e){return new t({type:"readonly",innerType:e})}function Qie(t,e,r){return new t({type:"template_literal",parts:e,...Q(r)})}function eoe(t,e){return new t({type:"lazy",getter:e})}function toe(t,e){return new t({type:"promise",innerType:e})}function BC(t,e,r){var o;let n=Q(r);return(o=n.abort)!=null||(n.abort=!0),new t({type:"custom",check:"custom",fn:e,...n})}function ZC(t,e,r){return new t({type:"custom",check:"custom",fn:e,...Q(r)})}function VC(t){let e=K9(r=>(r.addIssue=n=>{var i,o,a,s;if(typeof n=="string")r.issues.push(Kf(n,r.value,e._zod.def));else{let c=n;c.fatal&&(c.continue=!1),(i=c.code)!=null||(c.code="custom"),(o=c.input)!=null||(c.input=r.value),(a=c.inst)!=null||(c.inst=e),(s=c.continue)!=null||(c.continue=!e._zod.def.abort),r.issues.push(Kf(c))}},t(r.value,r)));return e}function K9(t,e){let r=new At({check:"custom",...Q(e)});return r._zod.check=t,r}function qC(t){let e=new At({check:"describe"});return e._zod.onattach=[r=>{var i;let n=(i=ht.get(r))!=null?i:{};ht.add(r,{...n,description:t})}],e._zod.check=()=>{},e}function GC(t){let e=new At({check:"meta"});return e._zod.onattach=[r=>{var i;let n=(i=ht.get(r))!=null?i:{};ht.add(r,{...n,...t})}],e._zod.check=()=>{},e}function HC(t,e){var m,p,b,y,h;let r=Q(e),n=(m=r.truthy)!=null?m:["true","1","yes","on","y","enabled"],i=(p=r.falsy)!=null?p:["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(n=n.map(_=>typeof _=="string"?_.toLowerCase():_),i=i.map(_=>typeof _=="string"?_.toLowerCase():_));let o=new Set(n),a=new Set(i),s=(b=t.Codec)!=null?b:ig,c=(y=t.Boolean)!=null?y:tg,u=(h=t.String)!=null?h:Kc,l=new u({type:"string",error:r.error}),d=new c({type:"boolean",error:r.error}),f=new s({type:"pipe",in:l,out:d,transform:((_,v)=>{let x=_;return r.case!=="sensitive"&&(x=x.toLowerCase()),o.has(x)?!0:a.has(x)?!1:(v.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...a],input:v.value,inst:f,continue:!1}),{})}),reverseTransform:((_,v)=>_===!0?n[0]||"true":i[0]||"false"),error:r.error});return f}function om(t,e,r,n={}){let i=Q(n),o={...Q(n),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:s=>r.test(s),...i};return r instanceof RegExp&&(o.pattern=r),new t(o)}var Ag=class{constructor(e){var r,n,i,o,a;this.counter=0,this.metadataRegistry=(r=e==null?void 0:e.metadata)!=null?r:ht,this.target=(n=e==null?void 0:e.target)!=null?n:"draft-2020-12",this.unrepresentable=(i=e==null?void 0:e.unrepresentable)!=null?i:"throw",this.override=(o=e==null?void 0:e.override)!=null?o:(()=>{}),this.io=(a=e==null?void 0:e.io)!=null?a:"output",this.seen=new Map}process(e,r={path:[],schemaPath:[]}){var d,f,m,p,b;var n;let i=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let s={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(e,s);let c=(f=(d=e._zod).toJSONSchema)==null?void 0:f.call(d);if(c)s.schema=c;else{let y={...r,schemaPath:[...r.schemaPath,e],path:r.path},h=e._zod.parent;if(h)s.ref=h,this.process(h,y),this.seen.get(h).isParent=!0;else{let _=s.schema;switch(i.type){case"string":{let v=_;v.type="string";let{minimum:x,maximum:w,format:E,patterns:S,contentEncoding:g}=e._zod.bag;if(typeof x=="number"&&(v.minLength=x),typeof w=="number"&&(v.maxLength=w),E&&(v.format=(m=o[E])!=null?m:E,v.format===""&&delete v.format),g&&(v.contentEncoding=g),S&&S.size>0){let I=[...S];I.length===1?v.pattern=I[0].source:I.length>1&&(s.schema.allOf=[...I.map(N=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:N.source}))])}break}case"number":{let v=_,{minimum:x,maximum:w,format:E,multipleOf:S,exclusiveMaximum:g,exclusiveMinimum:I}=e._zod.bag;typeof E=="string"&&E.includes("int")?v.type="integer":v.type="number",typeof I=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(v.minimum=I,v.exclusiveMinimum=!0):v.exclusiveMinimum=I),typeof x=="number"&&(v.minimum=x,typeof I=="number"&&this.target!=="draft-4"&&(I>=x?delete v.minimum:delete v.exclusiveMinimum)),typeof g=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(v.maximum=g,v.exclusiveMaximum=!0):v.exclusiveMaximum=g),typeof w=="number"&&(v.maximum=w,typeof g=="number"&&this.target!=="draft-4"&&(g<=w?delete v.maximum:delete v.exclusiveMaximum)),typeof S=="number"&&(v.multipleOf=S);break}case"boolean":{let v=_;v.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(_.type="string",_.nullable=!0,_.enum=[null]):_.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{_.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let v=_,{minimum:x,maximum:w}=e._zod.bag;typeof x=="number"&&(v.minItems=x),typeof w=="number"&&(v.maxItems=w),v.type="array",v.items=this.process(i.element,{...y,path:[...y.path,"items"]});break}case"object":{let v=_;v.type="object",v.properties={};let x=i.shape;for(let S in x)v.properties[S]=this.process(x[S],{...y,path:[...y.path,"properties",S]});let w=new Set(Object.keys(x)),E=new Set([...w].filter(S=>{let g=i.shape[S]._zod;return this.io==="input"?g.optin===void 0:g.optout===void 0}));E.size>0&&(v.required=Array.from(E)),((p=i.catchall)==null?void 0:p._zod.def.type)==="never"?v.additionalProperties=!1:i.catchall?i.catchall&&(v.additionalProperties=this.process(i.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(v.additionalProperties=!1);break}case"union":{let v=_,x=i.discriminator!==void 0,w=i.options.map((E,S)=>this.process(E,{...y,path:[...y.path,x?"oneOf":"anyOf",S]}));x?v.oneOf=w:v.anyOf=w;break}case"intersection":{let v=_,x=this.process(i.left,{...y,path:[...y.path,"allOf",0]}),w=this.process(i.right,{...y,path:[...y.path,"allOf",1]}),E=g=>"allOf"in g&&Object.keys(g).length===1,S=[...E(x)?x.allOf:[x],...E(w)?w.allOf:[w]];v.allOf=S;break}case"tuple":{let v=_;v.type="array";let x=this.target==="draft-2020-12"?"prefixItems":"items",w=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",E=i.items.map((N,C)=>this.process(N,{...y,path:[...y.path,x,C]})),S=i.rest?this.process(i.rest,{...y,path:[...y.path,w,...this.target==="openapi-3.0"?[i.items.length]:[]]}):null;this.target==="draft-2020-12"?(v.prefixItems=E,S&&(v.items=S)):this.target==="openapi-3.0"?(v.items={anyOf:E},S&&v.items.anyOf.push(S),v.minItems=E.length,S||(v.maxItems=E.length)):(v.items=E,S&&(v.additionalItems=S));let{minimum:g,maximum:I}=e._zod.bag;typeof g=="number"&&(v.minItems=g),typeof I=="number"&&(v.maxItems=I);break}case"record":{let v=_;v.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(v.propertyNames=this.process(i.keyType,{...y,path:[...y.path,"propertyNames"]})),v.additionalProperties=this.process(i.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let v=_,x=Vh(i.entries);x.every(w=>typeof w=="number")&&(v.type="number"),x.every(w=>typeof w=="string")&&(v.type="string"),v.enum=x;break}case"literal":{let v=_,x=[];for(let w of i.values)if(w===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof w=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");x.push(Number(w))}else x.push(w);if(x.length!==0)if(x.length===1){let w=x[0];v.type=w===null?"null":typeof w,this.target==="draft-4"||this.target==="openapi-3.0"?v.enum=[w]:v.const=w}else x.every(w=>typeof w=="number")&&(v.type="number"),x.every(w=>typeof w=="string")&&(v.type="string"),x.every(w=>typeof w=="boolean")&&(v.type="string"),x.every(w=>w===null)&&(v.type="null"),v.enum=x;break}case"file":{let v=_,x={type:"string",format:"binary",contentEncoding:"binary"},{minimum:w,maximum:E,mime:S}=e._zod.bag;w!==void 0&&(x.minLength=w),E!==void 0&&(x.maxLength=E),S?S.length===1?(x.contentMediaType=S[0],Object.assign(v,x)):v.anyOf=S.map(g=>({...x,contentMediaType:g})):Object.assign(v,x);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let v=this.process(i.innerType,y);this.target==="openapi-3.0"?(s.ref=i.innerType,_.nullable=!0):_.anyOf=[v,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,y),s.ref=i.innerType;break}case"success":{let v=_;v.type="boolean";break}case"default":{this.process(i.innerType,y),s.ref=i.innerType,_.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,y),s.ref=i.innerType,this.io==="input"&&(_._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,y),s.ref=i.innerType;let v;try{v=i.catchValue(void 0)}catch(x){throw new Error("Dynamic catch values are not supported in JSON Schema")}_.default=v;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let v=_,x=e._zod.pattern;if(!x)throw new Error("Pattern not found in template literal");v.type="string",v.pattern=x.source;break}case"pipe":{let v=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(v,y),s.ref=v;break}case"readonly":{this.process(i.innerType,y),s.ref=i.innerType,_.readOnly=!0;break}case"promise":{this.process(i.innerType,y),s.ref=i.innerType;break}case"optional":{this.process(i.innerType,y),s.ref=i.innerType;break}case"lazy":{let v=e._zod.innerType;this.process(v,y),s.ref=v;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let u=this.metadataRegistry.get(e);return u&&Object.assign(s.schema,u),this.io==="input"&&bn(e)&&(delete s.schema.examples,delete s.schema.default),this.io==="input"&&s.schema._prefault&&((b=(n=s.schema).default)!=null||(n.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(e).schema}emit(e,r){var l,d,f,m,p,b,y,h,_,v;let n={cycles:(l=r==null?void 0:r.cycles)!=null?l:"ref",reused:(d=r==null?void 0:r.reused)!=null?d:"inline",external:(f=r==null?void 0:r.external)!=null?f:void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=x=>{var I,N,C,R,z;let w=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let j=(I=n.external.registry.get(x[0]))==null?void 0:I.id,L=(N=n.external.uri)!=null?N:(U=>U);if(j)return{ref:L(j)};let k=(R=(C=x[1].defId)!=null?C:x[1].schema.id)!=null?R:`schema${this.counter++}`;return x[1].defId=k,{defId:k,ref:`${L("__shared")}#/${w}/${k}`}}if(x[1]===i)return{ref:"#"};let S=`#/${w}/`,g=(z=x[1].schema.id)!=null?z:`__schema${this.counter++}`;return{defId:g,ref:S+g}},a=x=>{if(x[1].schema.$ref)return;let w=x[1],{ref:E,defId:S}=o(x);w.def={...w.schema},S&&(w.defId=S);let g=w.schema;for(let I in g)delete g[I];g.$ref=E};if(n.cycles==="throw")for(let x of this.seen.entries()){let w=x[1];if(w.cycle)throw new Error(`Cycle detected: #/${(m=w.cycle)==null?void 0:m.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let x of this.seen.entries()){let w=x[1];if(e===x[0]){a(x);continue}if(n.external){let S=(p=n.external.registry.get(x[0]))==null?void 0:p.id;if(e!==x[0]&&S){a(x);continue}}if((b=this.metadataRegistry.get(x[0]))==null?void 0:b.id){a(x);continue}if(w.cycle){a(x);continue}if(w.count>1&&n.reused==="ref"){a(x);continue}}let s=(x,w)=>{var N,C,R;let E=this.seen.get(x),S=(N=E.def)!=null?N:E.schema,g={...S};if(E.ref===null)return;let I=E.ref;if(E.ref=null,I){s(I,w);let z=this.seen.get(I).schema;z.$ref&&(w.target==="draft-7"||w.target==="draft-4"||w.target==="openapi-3.0")?(S.allOf=(C=S.allOf)!=null?C:[],S.allOf.push(z)):(Object.assign(S,z),Object.assign(S,g))}E.isParent||this.override({zodSchema:x,jsonSchema:S,path:(R=E.path)!=null?R:[]})};for(let x of[...this.seen.entries()].reverse())s(x[0],{target:this.target});let c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?c.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),(y=n.external)!=null&&y.uri){let x=(h=n.external.registry.get(e))==null?void 0:h.id;if(!x)throw new Error("Schema is missing an `id` property");c.$id=n.external.uri(x)}Object.assign(c,i.def);let u=(v=(_=n.external)==null?void 0:_.defs)!=null?v:{};for(let x of this.seen.entries()){let w=x[1];w.def&&w.defId&&(u[w.defId]=w.def)}n.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?c.$defs=u:c.definitions=u);try{return JSON.parse(JSON.stringify(c))}catch(x){throw new Error("Error converting schema to JSON.")}}};function xu(t,e){if(t instanceof tm){let n=new Ag(e),i={};for(let s of t._idmap.entries()){let[c,u]=s;n.process(u)}let o={},a={registry:t,uri:e==null?void 0:e.uri,defs:i};for(let s of t._idmap.entries()){let[c,u]=s;o[c]=n.emit(u,{...e,external:a})}if(Object.keys(i).length>0){let s=n.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[s]:i}}return{schemas:o}}let r=new Ag(e);return r.process(t),r.emit(t,e)}function bn(t,e){let r=e!=null?e:{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let n=t._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return bn(n.element,r);if(n.type==="set")return bn(n.valueType,r);if(n.type==="lazy")return bn(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return bn(n.innerType,r);if(n.type==="intersection")return bn(n.left,r)||bn(n.right,r);if(n.type==="record"||n.type==="map")return bn(n.keyType,r)||bn(n.valueType,r);if(n.type==="pipe")return bn(n.in,r)||bn(n.out,r);if(n.type==="object"){for(let i in n.shape)if(bn(n.shape[i],r))return!0;return!1}if(n.type==="union"){for(let i of n.options)if(bn(i,r))return!0;return!1}if(n.type==="tuple"){for(let i of n.items)if(bn(i,r))return!0;return!!(n.rest&&bn(n.rest,r))}return!1}var KC={};function Tt(t){if(typeof t!="object"||t===null)return!1;let e=t;if(!("_zod"in e))return!1;let r=e._zod;return typeof r=="object"&&r!==null&&"def"in r}function Gt(t){if(typeof t!="object"||t===null)return!1;let e=t;if(!("_def"in e)||"_zod"in e)return!1;let r=e._def;return typeof r=="object"&&r!=null&&"typeName"in r}function J9(t){return Tt(t)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),Gt(t)}function xn(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(Tt(t)||Gt(t))}function JC(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodLiteral"}function WC(t){return Tt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="literal":!1}function W9(t){return!!(JC(t)||WC(t))}async function Jx(t,e){if(Tt(t))try{return{success:!0,data:await Gc(t,e)}}catch(r){return{success:!1,error:r}}if(Gt(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function wu(t,e){if(Tt(t))return await Gc(t,e);if(Gt(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Y9(t,e){if(Tt(t))try{return{success:!0,data:Go(t,e)}}catch(r){return{success:!1,error:r}}if(Gt(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function X9(t,e){if(Tt(t))return Go(t,e);if(Gt(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Su(t){var e;if(Tt(t))return(e=ht.get(t))==null?void 0:e.description;if(Gt(t)||"description"in t&&typeof t.description=="string")return t.description}function Q9(t){if(!xn(t))return!1;if(Gt(t)){let e=t._def;if(e.typeName==="ZodObject"){let r=t;return!r.shape||Object.keys(r.shape).length===0}if(e.typeName==="ZodRecord")return!0}if(Tt(t)){let e=t._zod.def;if(e.type==="object"){let r=t;return!r.shape||Object.keys(r.shape).length===0}if(e.type==="record")return!0}return typeof t=="object"&&t!==null&&!("shape"in t)}function sm(t){return xn(t)?Gt(t)?t._def.typeName==="ZodString":Tt(t)?t._zod.def.type==="string":!1:!1}function Wx(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodObject"}function Bi(t){return Tt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function Tg(t){return Tt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function YC(t){return Tt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="optional":!1}function XC(t){return Tt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="nullable":!1}function eZ(t){return!!(Wx(t)||Bi(t))}function Hx(t){if(Gt(t))return t.shape;if(Tt(t))return t._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function tZ(t,e){if(Gt(t))return t.extend(e);if(Tt(t))return Y.extend(t,e);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function rZ(t){if(Gt(t))return t.partial();if(Tt(t))return Y.partial(em,t,void 0);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function am(t,e=!1){if(Gt(t))return t.strict();if(Bi(t)){let r=t._zod.def.shape;if(e)for(let[o,a]of Object.entries(t._zod.def.shape)){if(Bi(a)){let c=am(a,e);r[o]=c}else if(Tg(a)){let c=a._zod.def.element;Bi(c)&&(c=am(c,e)),r[o]=zt(a,{...a._zod.def,element:c})}else r[o]=a;let s=ht.get(a);s&&ht.add(r[o],s)}let n=zt(t,{...t._zod.def,shape:r,catchall:lg(ng)}),i=ht.get(t);return i&&ht.add(n,i),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Kx(t,e=!1){if(Wx(t))return t.passthrough();if(Bi(t)){let r=t._zod.def.shape;if(e)for(let[o,a]of Object.entries(t._zod.def.shape)){if(Bi(a)){let c=Kx(a,e);r[o]=c}else if(Tg(a)){let c=a._zod.def.element;Bi(c)&&(c=Kx(c,e)),r[o]=zt(a,{...a._zod.def,element:c})}else r[o]=a;let s=ht.get(a);s&&ht.add(r[o],s)}let n=zt(t,{...t._zod.def,shape:r,catchall:cg(rg)}),i=ht.get(t);return i&&ht.add(n,i),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function nZ(t){if(Gt(t))try{let e=t.parse(void 0);return()=>e}catch(e){return}if(Tt(t))try{let e=Go(t,void 0);return()=>e}catch(e){return}}function roe(t){return Gt(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function noe(t){return Tt(t)&&t._zod.def.type==="pipe"}function Xc(t,e,r){let n=r.get(t);if(n!==void 0)return n;if(Gt(t))return roe(t)?Xc(t._def.schema,e,r):t;if(Tt(t)){let i=t;if(noe(t)&&(i=Xc(t._zod.def.in,e,r)),e){if(Bi(i)){let a={};for(let[s,c]of Object.entries(i._zod.def.shape))a[s]=Xc(c,e,r);i=zt(i,{...i._zod.def,shape:a})}else if(Tg(i)){let a=Xc(i._zod.def.element,e,r);i=zt(i,{...i._zod.def,element:a})}else if(YC(i)){let a=Xc(i._zod.def.innerType,e,r);i=zt(i,{...i._zod.def,innerType:a})}else if(XC(i)){let a=Xc(i._zod.def.innerType,e,r);i=zt(i,{...i._zod.def,innerType:a})}}let o=ht.get(t);return o&&ht.add(i,o),r.set(t,i),i}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Yx(t,e=!1){return Xc(t,e,new WeakMap)}function iZ(t,e){if(Gt(t)){let r=Hx(t),n={};for(let[i,o]of Object.entries(r))e(i,o)?n[i]=o.optional():n[i]=o;return t.extend(n)}if(Tt(t)){let r=Hx(t),n={...t._zod.def.shape};for(let[a,s]of Object.entries(r))e(a,s)&&(n[a]=new em({type:"optional",innerType:s}));let i=zt(t,{...t._zod.def,shape:n}),o=ht.get(t);return o&&ht.add(i,o),i}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Xx(t){return t instanceof Error&&(t.constructor.name==="ZodError"||t.constructor.name==="$ZodError")}function QC(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}var ioe=["*","_","`"];function ooe(t){let e="";for(let[r,n]of Object.entries(t))e+=`	classDef ${r} ${n};
`;return e}function oZ(t,e,r){var p,b,y,h,_;let{firstNode:n,lastNode:i,nodeColors:o,withStyles:a=!0,curveStyle:s="linear",wrapLabelNWords:c=9}=r!=null?r:{},u=a?`%%{init: {'flowchart': {'curve': '${s}'}}}%%
graph TD;
`:`graph TD;
`;if(a){let v="default",x={[v]:"{0}({1})"};n!==void 0&&(x[n]="{0}([{1}]):::first"),i!==void 0&&(x[i]="{0}([{1}]):::last");for(let[w,E]of Object.entries(t)){let S=(p=E.name.split(":").pop())!=null?p:"",I=ioe.some(C=>S.startsWith(C)&&S.endsWith(C))?`<p>${S}</p>`:S;Object.keys((b=E.metadata)!=null?b:{}).length&&(I+=`<hr/><small><em>${Object.entries((y=E.metadata)!=null?y:{}).map(([C,R])=>`${C} = ${R}`).join(`
`)}</em></small>`);let N=((h=x[w])!=null?h:x[v]).replace("{0}",QC(w)).replace("{1}",I);u+=`	${N}
`}}let l={};for(let v of e){let x=v.source.split(":"),w=v.target.split(":"),E=x.filter((S,g)=>S===w[g]).join(":");l[E]||(l[E]=[]),l[E].push(v)}let d=new Set;function f(v){return[...v].sort((x,w)=>x.split(":").length-w.split(":").length)}function m(v,x){let w=v.length===1&&v[0].source===v[0].target;if(x&&!w){let S=x.split(":").pop();if(d.has(x))throw new Error(`Found duplicate subgraph '${S}' at '${x} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(x),u+=`	subgraph ${S}
`}let E=f(Object.keys(l).filter(S=>S.startsWith(`${x}:`)&&S!==x&&S.split(":").length===x.split(":").length+1));for(let S of E)m(l[S],S);for(let S of v){let{source:g,target:I,data:N,conditional:C}=S,R="";if(N!==void 0){let z=N,j=z.split(" ");j.length>c&&(z=Array.from({length:Math.ceil(j.length/c)},(L,k)=>j.slice(k*c,(k+1)*c).join(" ")).join("&nbsp;<br>&nbsp;")),R=C?` -. &nbsp;${z}&nbsp; .-> `:` -- &nbsp;${z}&nbsp; --> `}else R=C?" -.-> ":" --> ";u+=`	${QC(g)}${R}${QC(I)};
`}x&&!w&&(u+=`	end
`)}m((_=l[""])!=null?_:[],"");for(let v in l)!v.includes(":")&&v!==""&&m(l[v],v);return a&&(u+=ooe(o!=null?o:{})),u}async function aZ(t,e){var c,u;let r=(c=e==null?void 0:e.backgroundColor)!=null?c:"white",n=(u=e==null?void 0:e.imageType)!=null?u:"png",i=EB(t);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let o=`https://mermaid.ink/img/${i}?bgColor=${r}&type=${n}`,a=await fetch(o);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}var uZ=Symbol("Let zodToJsonSchema decide on which parser to use"),sZ={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},cZ=t=>typeof t=="string"?{...sZ,name:t}:{...sZ,...t};var lZ=t=>{let e=cZ(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};var Qx=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")};function Zt(t){if(t.target!=="openAi")return{};let e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?Qx(e,t.currentPath):e.join("/")}}function e1(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function rt(t,e,r,n,i){t[e]=r,e1(t,e,n,i)}var wn={};na(wn,{BRAND:()=>koe,DIRTY:()=>Qc,EMPTY_PATH:()=>coe,INVALID:()=>Ee,NEVER:()=>hae,OK:()=>tn,ParseStatus:()=>Zr,Schema:()=>Be,ZodAny:()=>Eu,ZodArray:()=>Ja,ZodBigInt:()=>tl,ZodBoolean:()=>rl,ZodBranded:()=>Og,ZodCatch:()=>ml,ZodDate:()=>nl,ZodDefault:()=>fl,ZodDiscriminatedUnion:()=>rw,ZodEffects:()=>qi,ZodEnum:()=>ll,ZodError:()=>Fn,ZodFirstPartyTypeKind:()=>F,ZodFunction:()=>iw,ZodIntersection:()=>sl,ZodIssueCode:()=>K,ZodLazy:()=>ul,ZodLiteral:()=>cl,ZodMap:()=>mm,ZodNaN:()=>hm,ZodNativeEnum:()=>dl,ZodNever:()=>co,ZodNull:()=>ol,ZodNullable:()=>Yo,ZodNumber:()=>el,ZodObject:()=>Bn,ZodOptional:()=>Zi,ZodParsedType:()=>ue,ZodPipeline:()=>Ig,ZodPromise:()=>Ou,ZodReadonly:()=>pl,ZodRecord:()=>nw,ZodSchema:()=>Be,ZodSet:()=>pm,ZodString:()=>Tu,ZodSymbol:()=>dm,ZodTransformer:()=>qi,ZodTuple:()=>Wo,ZodType:()=>Be,ZodUndefined:()=>il,ZodUnion:()=>al,ZodUnknown:()=>Ka,ZodVoid:()=>fm,addIssueToContext:()=>ie,any:()=>joe,array:()=>Voe,bigint:()=>Moe,boolean:()=>xZ,coerce:()=>pae,custom:()=>_Z,date:()=>zoe,datetimeRegex:()=>gZ,defaultErrorMap:()=>Ga,discriminatedUnion:()=>Koe,effect:()=>aae,enum:()=>nae,function:()=>eae,getErrorMap:()=>um,getParsedType:()=>Jo,instanceof:()=>Roe,intersection:()=>Joe,isAborted:()=>ew,isAsync:()=>cm,isDirty:()=>tw,isValid:()=>Au,late:()=>$oe,lazy:()=>tae,literal:()=>rae,makeIssue:()=>Eg,map:()=>Xoe,nan:()=>Poe,nativeEnum:()=>iae,never:()=>Boe,null:()=>Uoe,nullable:()=>uae,number:()=>bZ,object:()=>qoe,objectUtil:()=>t1,oboolean:()=>mae,onumber:()=>fae,optional:()=>sae,ostring:()=>dae,pipeline:()=>lae,preprocess:()=>cae,promise:()=>oae,quotelessJson:()=>aoe,record:()=>Yoe,set:()=>Qoe,setErrorMap:()=>uoe,strictObject:()=>Goe,string:()=>vZ,symbol:()=>Doe,transformer:()=>aae,tuple:()=>Woe,undefined:()=>Loe,union:()=>Hoe,unknown:()=>Foe,util:()=>Xe,void:()=>Zoe});var Xe;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(s=>typeof i[i[s]]!="number"),a={};for(let s of o)a[s]=i[s];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Xe||(Xe={}));var t1;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(t1||(t1={}));var ue=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Jo=t=>{switch(typeof t){case"undefined":return ue.undefined;case"string":return ue.string;case"number":return Number.isNaN(t)?ue.nan:ue.number;case"boolean":return ue.boolean;case"function":return ue.function;case"bigint":return ue.bigint;case"symbol":return ue.symbol;case"object":return Array.isArray(t)?ue.array:t===null?ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ue.promise:typeof Map!="undefined"&&t instanceof Map?ue.map:typeof Set!="undefined"&&t instanceof Set?ue.set:typeof Date!="undefined"&&t instanceof Date?ue.date:ue.object;default:return ue.unknown}};var K=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),aoe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Fn=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let s=n,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(a))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r=Object.create(null),n=[];for(let i of this.issues)if(i.path.length>0){let o=i.path[0];r[o]=r[o]||[],r[o].push(e(i))}else n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Fn.create=t=>new Fn(t);var soe=(t,e)=>{let r;switch(t.code){case K.invalid_type:t.received===ue.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case K.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Xe.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:r=`Unrecognized key(s) in object: ${Xe.joinValues(t.keys,", ")}`;break;case K.invalid_union:r="Invalid input";break;case K.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Xe.joinValues(t.options)}`;break;case K.invalid_enum_value:r=`Invalid enum value. Expected ${Xe.joinValues(t.options)}, received '${t.received}'`;break;case K.invalid_arguments:r="Invalid function arguments";break;case K.invalid_return_type:r="Invalid function return type";break;case K.invalid_date:r="Invalid date";break;case K.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Xe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case K.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case K.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case K.custom:r="Invalid input";break;case K.invalid_intersection_types:r="Intersection results could not be merged";break;case K.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case K.not_finite:r="Number must be finite";break;default:r=e.defaultError,Xe.assertNever(t)}return{message:r}},Ga=soe;var dZ=Ga;function uoe(t){dZ=t}function um(){return dZ}var Eg=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let s="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)s=u(a,{data:e,defaultError:s}).message;return{...i,path:o,message:s}},coe=[];function ie(t,e){let r=um(),n=Eg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ga?void 0:Ga].filter(i=>!!i)});t.common.issues.push(n)}var Zr=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Ee;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Ee;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value!="undefined"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},Ee=Object.freeze({status:"aborted"}),Qc=t=>({status:"dirty",value:t}),tn=t=>({status:"valid",value:t}),ew=t=>t.status==="aborted",tw=t=>t.status==="dirty",Au=t=>t.status==="valid",cm=t=>typeof Promise!="undefined"&&t instanceof Promise;var ye;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));var Vi=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},fZ=(t,e)=>{if(Au(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Fn(t.common.issues);return this._error=r,this._error}}};function Ue(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,s)=>{var u,l;let{message:c}=t;return a.code==="invalid_enum_value"?{message:c!=null?c:s.defaultError}:typeof s.data=="undefined"?{message:(u=c!=null?c:n)!=null?u:s.defaultError}:a.code!=="invalid_type"?{message:s.defaultError}:{message:(l=c!=null?c:r)!=null?l:s.defaultError}},description:i}}var Be=class{get description(){return this._def.description}_getType(e){return Jo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zr,ctx:{common:e.parent.common,data:e.data,parsedType:Jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(cm(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r==null?void 0:r.async)!=null?o:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jo(e)},i=this._parseSync({data:e,path:n.path,parent:n});return fZ(n,i)}"~validate"(e){var n,i;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jo(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:r});return Au(o)?{value:o.value}:{issues:r.common.issues}}catch(o){(i=(n=o==null?void 0:o.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(o=>Au(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(cm(i)?i:Promise.resolve(i));return fZ(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),s=()=>o.addIssue({code:K.custom,...n(i)});return typeof Promise!="undefined"&&a instanceof Promise?a.then(c=>c?!0:(s(),!1)):a?!0:(s(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new qi({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Zi.create(this,this._def)}nullable(){return Yo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ja.create(this)}promise(){return Ou.create(this,this._def)}or(e){return al.create([this,e],this._def)}and(e){return sl.create(this,e,this._def)}transform(e){return new qi({...Ue(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new fl({...Ue(this._def),innerType:this,defaultValue:r,typeName:F.ZodDefault})}brand(){return new Og({typeName:F.ZodBranded,type:this,...Ue(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ml({...Ue(this._def),innerType:this,catchValue:r,typeName:F.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ig.create(this,e)}readonly(){return pl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},loe=/^c[^\s-]{8,}$/i,doe=/^[0-9a-z]+$/,foe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,moe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,poe=/^[a-z0-9_-]{21}$/i,hoe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,goe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yoe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_oe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",r1,voe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,boe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xoe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,woe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Soe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Aoe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pZ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Toe=new RegExp(`^${pZ}$`);function hZ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Eoe(t){return new RegExp(`^${hZ(t)}$`)}function gZ(t){let e=`${pZ}T${hZ(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Ooe(t,e){return!!((e==="v4"||!e)&&voe.test(t)||(e==="v6"||!e)&&xoe.test(t))}function Ioe(t,e){if(!hoe.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch(r){return!1}}function Noe(t,e){return!!((e==="v4"||!e)&&boe.test(t)||(e==="v6"||!e)&&woe.test(t))}var Tu=class t extends Be{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ue.string){let o=this._getOrReturnCtx(e);return ie(o,{code:K.invalid_type,expected:ue.string,received:o.parsedType}),Ee}let n=new Zr,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,s=e.data.length<o.value;(a||s)&&(i=this._getOrReturnCtx(e,i),a?ie(i,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):s&&ie(i,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")yoe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"email",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")r1||(r1=new RegExp(_oe,"u")),r1.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"emoji",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")moe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"uuid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")poe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"nanoid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")loe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")doe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid2",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")foe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ulid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch(a){i=this._getOrReturnCtx(e,i),ie(i,{validation:"url",code:K.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"regex",code:K.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ie(i,{code:K.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:K.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:K.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?gZ(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:K.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Toe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:K.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Eoe(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:K.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?goe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"duration",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Ooe(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ip",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?Ioe(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"jwt",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Noe(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cidr",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Soe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"base64",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?Aoe.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"base64url",code:K.invalid_string,message:o.message}),n.dirty()):Xe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:K.invalid_string,...ye.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ye.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ye.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ye.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!=null?r:!1,local:(n=e==null?void 0:e.local)!=null?n:!1,...ye.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...ye.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ye.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ye.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ye.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ye.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ye.errToObj(r)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Tu.create=t=>{var e;return new Tu({checks:[],typeName:F.ZodString,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1,...Ue(t)})};function Coe(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return o%a/10**i}var el=class t extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ue.number){let o=this._getOrReturnCtx(e);return ie(o,{code:K.invalid_type,expected:ue.number,received:o.parsedType}),Ee}let n,i=new Zr;for(let o of this._def.checks)o.kind==="int"?Xe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:K.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:K.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:K.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Coe(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ie(n,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:K.not_finite,message:o.message}),i.dirty()):Xe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ye.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ye.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ye.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ye.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ye.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};el.create=t=>new el({checks:[],typeName:F.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});var tl=class t extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(o){return this._getInvalidInput(e)}if(this._getType(e)!==ue.bigint)return this._getInvalidInput(e);let n,i=new Zr;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:K.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:K.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Xe.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ie(r,{code:K.invalid_type,expected:ue.bigint,received:r.parsedType}),Ee}gte(e,r){return this.setLimit("min",e,!0,ye.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ye.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ye.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ye.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ye.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};tl.create=t=>{var e;return new tl({checks:[],typeName:F.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1,...Ue(t)})};var rl=class extends Be{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ue.boolean){let n=this._getOrReturnCtx(e);return ie(n,{code:K.invalid_type,expected:ue.boolean,received:n.parsedType}),Ee}return tn(e.data)}};rl.create=t=>new rl({typeName:F.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});var nl=class t extends Be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ue.date){let o=this._getOrReturnCtx(e);return ie(o,{code:K.invalid_type,expected:ue.date,received:o.parsedType}),Ee}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ie(o,{code:K.invalid_date}),Ee}let n=new Zr,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:K.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:K.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Xe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};nl.create=t=>new nl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:F.ZodDate,...Ue(t)});var dm=class extends Be{_parse(e){if(this._getType(e)!==ue.symbol){let n=this._getOrReturnCtx(e);return ie(n,{code:K.invalid_type,expected:ue.symbol,received:n.parsedType}),Ee}return tn(e.data)}};dm.create=t=>new dm({typeName:F.ZodSymbol,...Ue(t)});var il=class extends Be{_parse(e){if(this._getType(e)!==ue.undefined){let n=this._getOrReturnCtx(e);return ie(n,{code:K.invalid_type,expected:ue.undefined,received:n.parsedType}),Ee}return tn(e.data)}};il.create=t=>new il({typeName:F.ZodUndefined,...Ue(t)});var ol=class extends Be{_parse(e){if(this._getType(e)!==ue.null){let n=this._getOrReturnCtx(e);return ie(n,{code:K.invalid_type,expected:ue.null,received:n.parsedType}),Ee}return tn(e.data)}};ol.create=t=>new ol({typeName:F.ZodNull,...Ue(t)});var Eu=class extends Be{constructor(){super(...arguments),this._any=!0}_parse(e){return tn(e.data)}};Eu.create=t=>new Eu({typeName:F.ZodAny,...Ue(t)});var Ka=class extends Be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tn(e.data)}};Ka.create=t=>new Ka({typeName:F.ZodUnknown,...Ue(t)});var co=class extends Be{_parse(e){let r=this._getOrReturnCtx(e);return ie(r,{code:K.invalid_type,expected:ue.never,received:r.parsedType}),Ee}};co.create=t=>new co({typeName:F.ZodNever,...Ue(t)});var fm=class extends Be{_parse(e){if(this._getType(e)!==ue.undefined){let n=this._getOrReturnCtx(e);return ie(n,{code:K.invalid_type,expected:ue.void,received:n.parsedType}),Ee}return tn(e.data)}};fm.create=t=>new fm({typeName:F.ZodVoid,...Ue(t)});var Ja=class t extends Be{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ue.array)return ie(r,{code:K.invalid_type,expected:ue.array,received:r.parsedType}),Ee;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,s=r.data.length<i.exactLength.value;(a||s)&&(ie(r,{code:a?K.too_big:K.too_small,minimum:s?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ie(r,{code:K.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ie(r,{code:K.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,s)=>i.type._parseAsync(new Vi(r,a,r.path,s)))).then(a=>Zr.mergeArray(n,a));let o=[...r.data].map((a,s)=>i.type._parseSync(new Vi(r,a,r.path,s)));return Zr.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ye.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ye.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ye.toString(r)}})}nonempty(e){return this.min(1,e)}};Ja.create=(t,e)=>new Ja({type:t,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...Ue(e)});function lm(t){if(t instanceof Bn){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Zi.create(lm(n))}return new Bn({...t._def,shape:()=>e})}else return t instanceof Ja?new Ja({...t._def,type:lm(t.element)}):t instanceof Zi?Zi.create(lm(t.unwrap())):t instanceof Yo?Yo.create(lm(t.unwrap())):t instanceof Wo?Wo.create(t.items.map(e=>lm(e))):t}var Bn=class t extends Be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Xe.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ue.object){let u=this._getOrReturnCtx(e);return ie(u,{code:K.invalid_type,expected:ue.object,received:u.parsedType}),Ee}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof co&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||s.push(u);let c=[];for(let u of a){let l=o[u],d=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Vi(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof co){let u=this._def.unknownKeys;if(u==="passthrough")for(let l of s)c.push({key:{status:"valid",value:l},value:{status:"valid",value:i.data[l]}});else if(u==="strict")s.length>0&&(ie(i,{code:K.unrecognized_keys,keys:s}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let l of s){let d=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Vi(i,d,i.path,l)),alwaysSet:l in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let l of c){let d=await l.key,f=await l.value;u.push({key:d,value:f,alwaysSet:l.alwaysSet})}return u}).then(u=>Zr.mergeObjectSync(n,u)):Zr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var o,a,s,c;let i=(s=(a=(o=this._def).errorMap)==null?void 0:a.call(o,r,n).message)!=null?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=ye.errToObj(e).message)!=null?c:i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:F.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of Xe.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of Xe.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return lm(this)}partial(e){let r={};for(let n of Xe.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of Xe.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Zi;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return yZ(Xe.objectKeys(this.shape))}};Bn.create=(t,e)=>new Bn({shape:()=>t,unknownKeys:"strip",catchall:co.create(),typeName:F.ZodObject,...Ue(e)});Bn.strictCreate=(t,e)=>new Bn({shape:()=>t,unknownKeys:"strict",catchall:co.create(),typeName:F.ZodObject,...Ue(e)});Bn.lazycreate=(t,e)=>new Bn({shape:t,unknownKeys:"strip",catchall:co.create(),typeName:F.ZodObject,...Ue(e)});var al=class extends Be{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let s of o)if(s.result.status==="valid")return s.result;for(let s of o)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;let a=o.map(s=>new Fn(s.ctx.common.issues));return ie(r,{code:K.invalid_union,unionErrors:a}),Ee}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!o&&(o={result:l,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let s=a.map(c=>new Fn(c));return ie(r,{code:K.invalid_union,unionErrors:s}),Ee}}get options(){return this._def.options}};al.create=(t,e)=>new al({options:t,typeName:F.ZodUnion,...Ue(e)});var Ha=t=>t instanceof ul?Ha(t.schema):t instanceof qi?Ha(t.innerType()):t instanceof cl?[t.value]:t instanceof ll?t.options:t instanceof dl?Xe.objectValues(t.enum):t instanceof fl?Ha(t._def.innerType):t instanceof il?[void 0]:t instanceof ol?[null]:t instanceof Zi?[void 0,...Ha(t.unwrap())]:t instanceof Yo?[null,...Ha(t.unwrap())]:t instanceof Og||t instanceof pl?Ha(t.unwrap()):t instanceof ml?Ha(t._def.innerType):[],rw=class t extends Be{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.object)return ie(r,{code:K.invalid_type,expected:ue.object,received:r.parsedType}),Ee;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ie(r,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Ee)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Ha(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of a){if(i.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);i.set(s,o)}}return new t({typeName:F.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Ue(n)})}};function n1(t,e){let r=Jo(t),n=Jo(e);if(t===e)return{valid:!0,data:t};if(r===ue.object&&n===ue.object){let i=Xe.objectKeys(e),o=Xe.objectKeys(t).filter(s=>i.indexOf(s)!==-1),a={...t,...e};for(let s of o){let c=n1(t[s],e[s]);if(!c.valid)return{valid:!1};a[s]=c.data}return{valid:!0,data:a}}else if(r===ue.array&&n===ue.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],s=e[o],c=n1(a,s);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===ue.date&&n===ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var sl=class extends Be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(ew(o)||ew(a))return Ee;let s=n1(o.value,a.value);return s.valid?((tw(o)||tw(a))&&r.dirty(),{status:r.value,value:s.data}):(ie(n,{code:K.invalid_intersection_types}),Ee)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};sl.create=(t,e,r)=>new sl({left:t,right:e,typeName:F.ZodIntersection,...Ue(r)});var Wo=class t extends Be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.array)return ie(n,{code:K.invalid_type,expected:ue.array,received:n.parsedType}),Ee;if(n.data.length<this._def.items.length)return ie(n,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ee;!this._def.rest&&n.data.length>this._def.items.length&&(ie(n,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,s)=>{let c=this._def.items[s]||this._def.rest;return c?c._parse(new Vi(n,a,n.path,s)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Zr.mergeArray(r,a)):Zr.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Wo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wo({items:t,typeName:F.ZodTuple,rest:null,...Ue(e)})};var nw=class t extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.object)return ie(n,{code:K.invalid_type,expected:ue.object,received:n.parsedType}),Ee;let i=[],o=this._def.keyType,a=this._def.valueType;for(let s in n.data)i.push({key:o._parse(new Vi(n,s,n.path,s)),value:a._parse(new Vi(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?Zr.mergeObjectAsync(r,i):Zr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Be?new t({keyType:e,valueType:r,typeName:F.ZodRecord,...Ue(n)}):new t({keyType:Tu.create(),valueType:e,typeName:F.ZodRecord,...Ue(r)})}},mm=class extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.map)return ie(n,{code:K.invalid_type,expected:ue.map,received:n.parsedType}),Ee;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([s,c],u)=>({key:i._parse(new Vi(n,s,n.path,[u,"key"])),value:o._parse(new Vi(n,c,n.path,[u,"value"]))}));if(n.common.async){let s=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Ee;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),s.set(u.value,l.value)}return{status:r.value,value:s}})}else{let s=new Map;for(let c of a){let u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Ee;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),s.set(u.value,l.value)}return{status:r.value,value:s}}}};mm.create=(t,e,r)=>new mm({valueType:e,keyType:t,typeName:F.ZodMap,...Ue(r)});var pm=class t extends Be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.set)return ie(n,{code:K.invalid_type,expected:ue.set,received:n.parsedType}),Ee;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ie(n,{code:K.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ie(n,{code:K.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let l of c){if(l.status==="aborted")return Ee;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}let s=[...n.data.values()].map((c,u)=>o._parse(new Vi(n,c,n.path,u)));return n.common.async?Promise.all(s).then(c=>a(c)):a(s)}min(e,r){return new t({...this._def,minSize:{value:e,message:ye.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ye.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};pm.create=(t,e)=>new pm({valueType:t,minSize:null,maxSize:null,typeName:F.ZodSet,...Ue(e)});var iw=class t extends Be{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.function)return ie(r,{code:K.invalid_type,expected:ue.function,received:r.parsedType}),Ee;function n(s,c){return Eg({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,um(),Ga].filter(u=>!!u),issueData:{code:K.invalid_arguments,argumentsError:c}})}function i(s,c){return Eg({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,um(),Ga].filter(u=>!!u),issueData:{code:K.invalid_return_type,returnTypeError:c}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Ou){let s=this;return tn(async function(...c){let u=new Fn([]),l=await s._def.args.parseAsync(c,o).catch(m=>{throw u.addIssue(n(c,m)),u}),d=await Reflect.apply(a,this,l);return await s._def.returns._def.type.parseAsync(d,o).catch(m=>{throw u.addIssue(i(d,m)),u})})}else{let s=this;return tn(function(...c){let u=s._def.args.safeParse(c,o);if(!u.success)throw new Fn([n(c,u.error)]);let l=Reflect.apply(a,this,u.data),d=s._def.returns.safeParse(l,o);if(!d.success)throw new Fn([i(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Wo.create(e).rest(Ka.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Wo.create([]).rest(Ka.create()),returns:r||Ka.create(),typeName:F.ZodFunction,...Ue(n)})}},ul=class extends Be{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ul.create=(t,e)=>new ul({getter:t,typeName:F.ZodLazy,...Ue(e)});var cl=class extends Be{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ie(r,{received:r.data,code:K.invalid_literal,expected:this._def.value}),Ee}return{status:"valid",value:e.data}}get value(){return this._def.value}};cl.create=(t,e)=>new cl({value:t,typeName:F.ZodLiteral,...Ue(e)});function yZ(t,e){return new ll({values:t,typeName:F.ZodEnum,...Ue(e)})}var ll=class t extends Be{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{expected:Xe.joinValues(n),received:r.parsedType,code:K.invalid_type}),Ee}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{received:r.data,code:K.invalid_enum_value,options:n}),Ee}return tn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};ll.create=yZ;var dl=class extends Be{_parse(e){let r=Xe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ue.string&&n.parsedType!==ue.number){let i=Xe.objectValues(r);return ie(n,{expected:Xe.joinValues(i),received:n.parsedType,code:K.invalid_type}),Ee}if(this._cache||(this._cache=new Set(Xe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=Xe.objectValues(r);return ie(n,{received:n.data,code:K.invalid_enum_value,options:i}),Ee}return tn(e.data)}get enum(){return this._def.values}};dl.create=(t,e)=>new dl({values:t,typeName:F.ZodNativeEnum,...Ue(e)});var Ou=class extends Be{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.promise&&r.common.async===!1)return ie(r,{code:K.invalid_type,expected:ue.promise,received:r.parsedType}),Ee;let n=r.parsedType===ue.promise?r.data:Promise.resolve(r.data);return tn(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Ou.create=(t,e)=>new Ou({type:t,typeName:F.ZodPromise,...Ue(e)});var qi=class extends Be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{ie(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async s=>{if(r.value==="aborted")return Ee;let c=await this._def.schema._parseAsync({data:s,path:n.path,parent:n});return c.status==="aborted"?Ee:c.status==="dirty"?Qc(c.value):r.value==="dirty"?Qc(c.value):c});{if(r.value==="aborted")return Ee;let s=this._def.schema._parseSync({data:a,path:n.path,parent:n});return s.status==="aborted"?Ee:s.status==="dirty"?Qc(s.value):r.value==="dirty"?Qc(s.value):s}}if(i.type==="refinement"){let a=s=>{let c=i.refinement(s,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Ee:(s.status==="dirty"&&r.dirty(),a(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?Ee:(s.status==="dirty"&&r.dirty(),a(s.value).then(()=>({status:r.value,value:s.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Au(a))return Ee;let s=i.transform(a.value,o);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Au(a)?Promise.resolve(i.transform(a.value,o)).then(s=>({status:r.value,value:s})):Ee);Xe.assertNever(i)}};qi.create=(t,e,r)=>new qi({schema:t,typeName:F.ZodEffects,effect:e,...Ue(r)});qi.createWithPreprocess=(t,e,r)=>new qi({schema:e,effect:{type:"preprocess",transform:t},typeName:F.ZodEffects,...Ue(r)});var Zi=class extends Be{_parse(e){return this._getType(e)===ue.undefined?tn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Zi.create=(t,e)=>new Zi({innerType:t,typeName:F.ZodOptional,...Ue(e)});var Yo=class extends Be{_parse(e){return this._getType(e)===ue.null?tn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Yo.create=(t,e)=>new Yo({innerType:t,typeName:F.ZodNullable,...Ue(e)});var fl=class extends Be{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ue.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};fl.create=(t,e)=>new fl({innerType:t,typeName:F.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});var ml=class extends Be{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return cm(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Fn(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ml.create=(t,e)=>new ml({innerType:t,typeName:F.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});var hm=class extends Be{_parse(e){if(this._getType(e)!==ue.nan){let n=this._getOrReturnCtx(e);return ie(n,{code:K.invalid_type,expected:ue.nan,received:n.parsedType}),Ee}return{status:"valid",value:e.data}}};hm.create=t=>new hm({typeName:F.ZodNaN,...Ue(t)});var koe=Symbol("zod_brand"),Og=class extends Be{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Ig=class t extends Be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Ee:o.status==="dirty"?(r.dirty(),Qc(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ee:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:F.ZodPipeline})}},pl=class extends Be{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Au(i)&&(i.value=Object.freeze(i.value)),i);return cm(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};pl.create=(t,e)=>new pl({innerType:t,typeName:F.ZodReadonly,...Ue(e)});function mZ(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function _Z(t,e={},r){return t?Eu.create().superRefine((n,i)=>{var a,s;let o=t(n);if(o instanceof Promise)return o.then(c=>{var u,l;if(!c){let d=mZ(e,n),f=(l=(u=d.fatal)!=null?u:r)!=null?l:!0;i.addIssue({code:"custom",...d,fatal:f})}});if(!o){let c=mZ(e,n),u=(s=(a=c.fatal)!=null?a:r)!=null?s:!0;i.addIssue({code:"custom",...c,fatal:u})}}):Eu.create()}var $oe={object:Bn.lazycreate},F;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(F||(F={}));var Roe=(t,e={message:`Input not instance of ${t.name}`})=>_Z(r=>r instanceof t,e),vZ=Tu.create,bZ=el.create,Poe=hm.create,Moe=tl.create,xZ=rl.create,zoe=nl.create,Doe=dm.create,Loe=il.create,Uoe=ol.create,joe=Eu.create,Foe=Ka.create,Boe=co.create,Zoe=fm.create,Voe=Ja.create,qoe=Bn.create,Goe=Bn.strictCreate,Hoe=al.create,Koe=rw.create,Joe=sl.create,Woe=Wo.create,Yoe=nw.create,Xoe=mm.create,Qoe=pm.create,eae=iw.create,tae=ul.create,rae=cl.create,nae=ll.create,iae=dl.create,oae=Ou.create,aae=qi.create,sae=Zi.create,uae=Yo.create,cae=qi.createWithPreprocess,lae=Ig.create,dae=()=>vZ().optional(),fae=()=>bZ().optional(),mae=()=>xZ().optional(),pae={string:(t=>Tu.create({...t,coerce:!0})),number:(t=>el.create({...t,coerce:!0})),boolean:(t=>rl.create({...t,coerce:!0})),bigint:(t=>tl.create({...t,coerce:!0})),date:(t=>nl.create({...t,coerce:!0}))};var hae=Ee;function wZ(t,e){var n,i,o;let r={type:"array"};return(n=t.type)!=null&&n._def&&((o=(i=t.type)==null?void 0:i._def)==null?void 0:o.typeName)!==F.ZodAny&&(r.items=Ce(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&rt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&rt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(rt(r,"minItems",t.exactLength.value,t.exactLength.message,e),rt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function SZ(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?rt(r,"minimum",n.value,n.message,e):rt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),rt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?rt(r,"maximum",n.value,n.message,e):rt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),rt(r,"maximum",n.value,n.message,e));break;case"multipleOf":rt(r,"multipleOf",n.value,n.message,e);break}return r}function AZ(){return{type:"boolean"}}function ow(t,e){return Ce(t.type._def,e)}var TZ=(t,e)=>Ce(t.innerType._def,e);function i1(t,e,r){let n=r!=null?r:e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map(i=>i1(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return gae(t,e)}}var gae=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":rt(r,"minimum",n.value,n.message,e);break;case"max":rt(r,"maximum",n.value,n.message,e);break}return r};function EZ(t,e){return{...Ce(t.innerType._def,e),default:t.defaultValue()}}function OZ(t,e){return e.effectStrategy==="input"?Ce(t.schema._def,e):Zt(e)}function IZ(t){return{type:"string",enum:Array.from(t.values)}}var yae=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function NZ(t,e){let r=[Ce(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ce(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(o=>{if(yae(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(n=void 0);else{let a=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:s,...c}=o;a=c}else n=void 0;i.push(a)}}),i.length?{allOf:i,...n}:void 0}function CZ(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var o1,lo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(o1===void 0&&(o1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),o1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function aw(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":rt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":rt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":fo(r,"email",n.message,e);break;case"format:idn-email":fo(r,"idn-email",n.message,e);break;case"pattern:zod":Sn(r,lo.email,n.message,e);break}break;case"url":fo(r,"uri",n.message,e);break;case"uuid":fo(r,"uuid",n.message,e);break;case"regex":Sn(r,n.regex,n.message,e);break;case"cuid":Sn(r,lo.cuid,n.message,e);break;case"cuid2":Sn(r,lo.cuid2,n.message,e);break;case"startsWith":Sn(r,RegExp(`^${a1(n.value,e)}`),n.message,e);break;case"endsWith":Sn(r,RegExp(`${a1(n.value,e)}$`),n.message,e);break;case"datetime":fo(r,"date-time",n.message,e);break;case"date":fo(r,"date",n.message,e);break;case"time":fo(r,"time",n.message,e);break;case"duration":fo(r,"duration",n.message,e);break;case"length":rt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),rt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":Sn(r,RegExp(a1(n.value,e)),n.message,e);break;case"ip":n.version!=="v6"&&fo(r,"ipv4",n.message,e),n.version!=="v4"&&fo(r,"ipv6",n.message,e);break;case"base64url":Sn(r,lo.base64url,n.message,e);break;case"jwt":Sn(r,lo.jwt,n.message,e);break;case"cidr":n.version!=="v6"&&Sn(r,lo.ipv4Cidr,n.message,e),n.version!=="v4"&&Sn(r,lo.ipv6Cidr,n.message,e);break;case"emoji":Sn(r,lo.emoji(),n.message,e);break;case"ulid":Sn(r,lo.ulid,n.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":fo(r,"binary",n.message,e);break;case"contentEncoding:base64":rt(r,"contentEncoding","base64",n.message,e);break;case"pattern:zod":Sn(r,lo.base64,n.message,e);break}break;case"nanoid":Sn(r,lo.nanoid,n.message,e);break;case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function a1(t,e){return e.patternStrategy==="escape"?vae(t):t}var _ae=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function vae(t){let e="";for(let r=0;r<t.length;r++)_ae.has(t[r])||(e+="\\"),e+=t[r];return e}function fo(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):rt(t,"format",e,r,n)}function Sn(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:kZ(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):rt(t,"pattern",kZ(e,n),r,n)}function kZ(t,e){var c;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source,i="",o=!1,a=!1,s=!1;for(let u=0;u<n.length;u++){if(o){i+=n[u],o=!1;continue}if(r.i){if(a){if(n[u].match(/[a-z]/)){s?(i+=n[u],i+=`${n[u-2]}-${n[u]}`.toUpperCase(),s=!1):n[u+1]==="-"&&((c=n[u+2])!=null&&c.match(/[a-z]/))?(i+=n[u],s=!0):i+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){i+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(r.m){if(n[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[u]==="."){i+=a?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}i+=n[u],n[u]==="\\"?o=!0:a&&n[u]==="]"?a=!1:!a&&n[u]==="["&&(a=!0)}try{new RegExp(i)}catch(u){return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function sw(t,e){var n,i,o,a,s,c,u;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===F.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((l,d)=>{var f;return{...l,[d]:(f=Ce(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]}))!=null?f:Zt(e)}},{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:(i=Ce(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?i:e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(((o=t.keyType)==null?void 0:o._def.typeName)===F.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let{type:l,...d}=aw(t.keyType._def,e);return{...r,propertyNames:d}}else{if(((s=t.keyType)==null?void 0:s._def.typeName)===F.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((c=t.keyType)==null?void 0:c._def.typeName)===F.ZodBranded&&t.keyType._def.type._def.typeName===F.ZodString&&((u=t.keyType._def.type._def.checks)!=null&&u.length)){let{type:l,...d}=ow(t.keyType._def,e);return{...r,propertyNames:d}}}return r}function $Z(t,e){if(e.mapStrategy==="record")return sw(t,e);let r=Ce(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Zt(e),n=Ce(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Zt(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function RZ(t){let e=t.values,n=Object.keys(t.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(n.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function PZ(t){return t.target==="openAi"?void 0:{not:Zt({...t,currentPath:[...t.currentPath,"not"]})}}function MZ(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Ng={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function DZ(t,e){if(e.target==="openApi3")return zZ(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Ng&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,o)=>{let a=Ng[o._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,o)=>{let a=typeof o._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":return o._def.value===null?[...i,"null"]:i;case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((o,a,s)=>s.indexOf(o)===a);return{type:i.length>1?i:i[0],enum:r.reduce((o,a)=>o.includes(a._def.value)?o:[...o,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(o=>!n.includes(o))],[])};return zZ(t,e)}var zZ=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>Ce(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function LZ(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Ng[t.innerType._def.typeName],nullable:!0}:{type:[Ng[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=Ce(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=Ce(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function UZ(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",e1(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?rt(r,"minimum",n.value,n.message,e):rt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),rt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?rt(r,"maximum",n.value,n.message,e):rt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),rt(r,"maximum",n.value,n.message,e));break;case"multipleOf":rt(r,"multipleOf",n.value,n.message,e);break}return r}function jZ(t,e){let r=e.target==="openAi",n={type:"object",properties:{}},i=[],o=t.shape();for(let s in o){let c=o[s];if(c===void 0||c._def===void 0)continue;let u=xae(c);u&&r&&(c._def.typeName==="ZodOptional"&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),u=!1);let l=Ce(c._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});l!==void 0&&(n.properties[s]=l,u||i.push(s))}i.length&&(n.required=i);let a=bae(t,e);return a!==void 0&&(n.additionalProperties=a),n}function bae(t,e){if(t.catchall._def.typeName!=="ZodNever")return Ce(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function xae(t){try{return t.isOptional()}catch(e){return!0}}var FZ=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return Ce(t.innerType._def,e);let r=Ce(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:Zt(e)},r]}:Zt(e)};var BZ=(t,e)=>{if(e.pipeStrategy==="input")return Ce(t.in._def,e);if(e.pipeStrategy==="output")return Ce(t.out._def,e);let r=Ce(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Ce(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function ZZ(t,e){return Ce(t.type._def,e)}function VZ(t,e){let n={type:"array",uniqueItems:!0,items:Ce(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&rt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&rt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function qZ(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Ce(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Ce(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Ce(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function GZ(t){return{not:Zt(t)}}function HZ(t){return Zt(t)}var KZ=(t,e)=>Ce(t.innerType._def,e);var JZ=(t,e,r)=>{switch(e){case F.ZodString:return aw(t,r);case F.ZodNumber:return UZ(t,r);case F.ZodObject:return jZ(t,r);case F.ZodBigInt:return SZ(t,r);case F.ZodBoolean:return AZ();case F.ZodDate:return i1(t,r);case F.ZodUndefined:return GZ(r);case F.ZodNull:return MZ(r);case F.ZodArray:return wZ(t,r);case F.ZodUnion:case F.ZodDiscriminatedUnion:return DZ(t,r);case F.ZodIntersection:return NZ(t,r);case F.ZodTuple:return qZ(t,r);case F.ZodRecord:return sw(t,r);case F.ZodLiteral:return CZ(t,r);case F.ZodEnum:return IZ(t);case F.ZodNativeEnum:return RZ(t);case F.ZodNullable:return LZ(t,r);case F.ZodOptional:return FZ(t,r);case F.ZodMap:return $Z(t,r);case F.ZodSet:return VZ(t,r);case F.ZodLazy:return()=>t.getter()._def;case F.ZodPromise:return ZZ(t,r);case F.ZodNaN:case F.ZodNever:return PZ(r);case F.ZodEffects:return OZ(t,r);case F.ZodAny:return Zt(r);case F.ZodUnknown:return HZ(r);case F.ZodDefault:return EZ(t,r);case F.ZodBranded:return ow(t,r);case F.ZodReadonly:return KZ(t,r);case F.ZodCatch:return TZ(t,r);case F.ZodPipeline:return BZ(t,r);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(n=>{})(e)}};function Ce(t,e,r=!1){var s;let n=e.seen.get(t);if(e.override){let c=(s=e.override)==null?void 0:s.call(e,t,e,n,r);if(c!==uZ)return c}if(n&&!r){let c=wae(n,e);if(c!==void 0)return c}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let o=JZ(t,t.typeName,e),a=typeof o=="function"?Ce(o(),e):o;if(a&&Sae(t,e,a),e.postProcess){let c=e.postProcess(a,t,e);return i.jsonSchema=a,c}return i.jsonSchema=a,a}var wae=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Qx(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Zt(e)):e.$refStrategy==="seen"?Zt(e):void 0}},Sae=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var WZ=(t,e)=>{var c;let r=lZ(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,d])=>{var f;return{...u,[l]:(f=Ce(d._def,{...r,currentPath:[...r.basePath,r.definitionPath,l]},!0))!=null?f:Zt(r)}},{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,o=(c=Ce(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1))!=null?c:Zt(r),a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(o.title=a),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let s=i===void 0?n?{...o,[r.definitionPath]:n}:o:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:o}};return r.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};function Xo(t,e){let r=typeof t;if(r!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(!Xo(t[i],e[i]))return!1;return!0}if(r==="object"){if(!t||!e)return t===e;let n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let a of n)if(!Xo(t[a],e[a]))return!1;return!0}return t===e}function mi(t){return encodeURI(Aae(t))}function Aae(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var Tae={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},Eae={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},Oae={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Iae=typeof self!="undefined"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function mo(t,e=Object.create(null),r=Iae,n=""){if(t&&typeof t=="object"&&!Array.isArray(t)){let o=t.$id||t.id;if(o){let a=new URL(o,r.href);a.hash.length>1?e[a.href]=t:(a.hash="",n===""?r=a:mo(t,e,r))}}else if(t!==!0&&t!==!1)return e;let i=r.href+(n?"#"+n:"");if(e[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(e[i]=t,t===!0||t===!1)return e;if(t.__absolute_uri__===void 0&&Object.defineProperty(t,"__absolute_uri__",{enumerable:!1,value:i}),t.$ref&&t.__absolute_ref__===void 0){let o=new URL(t.$ref,r.href);o.hash=o.hash,Object.defineProperty(t,"__absolute_ref__",{enumerable:!1,value:o.href})}if(t.$recursiveRef&&t.__absolute_recursive_ref__===void 0){let o=new URL(t.$recursiveRef,r.href);o.hash=o.hash,Object.defineProperty(t,"__absolute_recursive_ref__",{enumerable:!1,value:o.href})}if(t.$anchor){let o=new URL("#"+t.$anchor,r.href);e[o.href]=t}for(let o in t){if(Oae[o])continue;let a=`${n}/${mi(o)}`,s=t[o];if(Array.isArray(s)){if(Tae[o]){let c=s.length;for(let u=0;u<c;u++)mo(s[u],e,r,`${a}/${u}`)}}else if(Eae[o])for(let c in s)mo(s[c],e,r,`${a}/${mi(c)}`);else mo(s,e,r,a)}return e}var Nae=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Cae=[0,31,28,31,30,31,30,31,31,30,31,30,31],kae=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,$ae=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Rae=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Pae=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Mae=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,zae=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Dae=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Lae=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Uae=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,jae=t=>{if(t[0]==='"')return!1;let[e,r,...n]=t.split("@");return!e||!r||n.length!==0||e.length>64||r.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:r.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},Fae=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Bae=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Zae=t=>t.length>1&&t.length<80&&(/^P\d+([.,]\d+)?W$/.test(t)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(t)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(t));function Qo(t){return t.test.bind(t)}var s1={date:YZ,time:XZ.bind(void 0,!1),"date-time":Gae,duration:Zae,uri:Jae,"uri-reference":Qo(Rae),"uri-template":Qo(Pae),url:Qo(Mae),email:jae,hostname:Qo($ae),ipv4:Qo(Fae),ipv6:Qo(Bae),regex:Yae,uuid:Qo(zae),"json-pointer":Qo(Dae),"json-pointer-uri-fragment":Qo(Lae),"relative-json-pointer":Qo(Uae)};function Vae(t){return t%4===0&&(t%100!==0||t%400===0)}function YZ(t){let e=t.match(Nae);if(!e)return!1;let r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&Vae(r)?29:Cae[n])}function XZ(t,e){let r=e.match(kae);if(!r)return!1;let n=+r[1],i=+r[2],o=+r[3],a=!!r[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!t||a)}var qae=/t|\s/i;function Gae(t){let e=t.split(qae);return e.length==2&&YZ(e[0])&&XZ(!0,e[1])}var Hae=/\/|:/,Kae=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Jae(t){return Hae.test(t)&&Kae.test(t)}var Wae=/[^\\]\\Z/;function Yae(t){if(Wae.test(t))return!1;try{return new RegExp(t,"u"),!0}catch(e){return!1}}var QZ;(function(t){t[t.Flag=1]="Flag",t[t.Basic=2]="Basic",t[t.Detailed=4]="Detailed"})(QZ||(QZ={}));function e5(t){let e=0,r=t.length,n=0,i;for(;n<r;)e++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<r&&(i=t.charCodeAt(n),(i&64512)==56320&&n++);return e}function Ct(t,e,r="2019-09",n=mo(e),i=!0,o=null,a="#",s="#",c=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:a,keyword:"false",keywordLocation:a,error:"False boolean schema."}]};let u=typeof t,l;switch(u){case"boolean":case"number":case"string":l=u;break;case"object":t===null?l="null":Array.isArray(t)?l="array":l="object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}let{$ref:d,$recursiveRef:f,$recursiveAnchor:m,type:p,const:b,enum:y,required:h,not:_,anyOf:v,allOf:x,oneOf:w,if:E,then:S,else:g,format:I,properties:N,patternProperties:C,additionalProperties:R,unevaluatedProperties:z,minProperties:j,maxProperties:L,propertyNames:k,dependentRequired:U,dependentSchemas:J,dependencies:H,prefixItems:V,items:_e,additionalItems:Fe,unevaluatedItems:Lt,contains:qt,minContains:Se,maxContains:O,minItems:T,maxItems:M,uniqueItems:$,minimum:Ae,maximum:qe,exclusiveMinimum:Ve,exclusiveMaximum:wt,multipleOf:Kt,minLength:te,maxLength:ce,pattern:it,__absolute_ref__:dt,__absolute_recursive_ref__:Qe}=e,W=[];if(m===!0&&o===null&&(o=e),f==="#"){let we=o===null?n[Qe]:o,he=`${s}/$recursiveRef`,Ie=Ct(t,o===null?e:o,r,n,i,we,a,he,c);Ie.valid||W.push({instanceLocation:a,keyword:"$recursiveRef",keywordLocation:he,error:"A subschema had errors."},...Ie.errors)}if(d!==void 0){let he=n[dt||d];if(he===void 0){let oe=`Unresolved $ref "${d}".`;throw dt&&dt!==d&&(oe+=`  Absolute URI "${dt}".`),oe+=`
Known schemas:
- ${Object.keys(n).join(`
- `)}`,new Error(oe)}let Ie=`${s}/$ref`,me=Ct(t,he,r,n,i,o,a,Ie,c);if(me.valid||W.push({instanceLocation:a,keyword:"$ref",keywordLocation:Ie,error:"A subschema had errors."},...me.errors),r==="4"||r==="7")return{valid:W.length===0,errors:W}}if(Array.isArray(p)){let we=p.length,he=!1;for(let Ie=0;Ie<we;Ie++)if(l===p[Ie]||p[Ie]==="integer"&&l==="number"&&t%1===0&&t===t){he=!0;break}he||W.push({instanceLocation:a,keyword:"type",keywordLocation:`${s}/type`,error:`Instance type "${l}" is invalid. Expected "${p.join('", "')}".`})}else p==="integer"?(l!=="number"||t%1||t!==t)&&W.push({instanceLocation:a,keyword:"type",keywordLocation:`${s}/type`,error:`Instance type "${l}" is invalid. Expected "${p}".`}):p!==void 0&&l!==p&&W.push({instanceLocation:a,keyword:"type",keywordLocation:`${s}/type`,error:`Instance type "${l}" is invalid. Expected "${p}".`});if(b!==void 0&&(l==="object"||l==="array"?Xo(t,b)||W.push({instanceLocation:a,keyword:"const",keywordLocation:`${s}/const`,error:`Instance does not match ${JSON.stringify(b)}.`}):t!==b&&W.push({instanceLocation:a,keyword:"const",keywordLocation:`${s}/const`,error:`Instance does not match ${JSON.stringify(b)}.`})),y!==void 0&&(l==="object"||l==="array"?y.some(we=>Xo(t,we))||W.push({instanceLocation:a,keyword:"enum",keywordLocation:`${s}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`}):y.some(we=>t===we)||W.push({instanceLocation:a,keyword:"enum",keywordLocation:`${s}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`})),_!==void 0){let we=`${s}/not`;Ct(t,_,r,n,i,o,a,we).valid&&W.push({instanceLocation:a,keyword:"not",keywordLocation:we,error:'Instance matched "not" schema.'})}let cr=[];if(v!==void 0){let we=`${s}/anyOf`,he=W.length,Ie=!1;for(let me=0;me<v.length;me++){let oe=v[me],Re=Object.create(c),$e=Ct(t,oe,r,n,i,m===!0?o:null,a,`${we}/${me}`,Re);W.push(...$e.errors),Ie=Ie||$e.valid,$e.valid&&cr.push(Re)}Ie?W.length=he:W.splice(he,0,{instanceLocation:a,keyword:"anyOf",keywordLocation:we,error:"Instance does not match any subschemas."})}if(x!==void 0){let we=`${s}/allOf`,he=W.length,Ie=!0;for(let me=0;me<x.length;me++){let oe=x[me],Re=Object.create(c),$e=Ct(t,oe,r,n,i,m===!0?o:null,a,`${we}/${me}`,Re);W.push(...$e.errors),Ie=Ie&&$e.valid,$e.valid&&cr.push(Re)}Ie?W.length=he:W.splice(he,0,{instanceLocation:a,keyword:"allOf",keywordLocation:we,error:"Instance does not match every subschema."})}if(w!==void 0){let we=`${s}/oneOf`,he=W.length,Ie=w.filter((me,oe)=>{let Re=Object.create(c),$e=Ct(t,me,r,n,i,m===!0?o:null,a,`${we}/${oe}`,Re);return W.push(...$e.errors),$e.valid&&cr.push(Re),$e.valid}).length;Ie===1?W.length=he:W.splice(he,0,{instanceLocation:a,keyword:"oneOf",keywordLocation:we,error:`Instance does not match exactly one subschema (${Ie} matches).`})}if((l==="object"||l==="array")&&Object.assign(c,...cr),E!==void 0){let we=`${s}/if`;if(Ct(t,E,r,n,i,o,a,we,c).valid){if(S!==void 0){let Ie=Ct(t,S,r,n,i,o,a,`${s}/then`,c);Ie.valid||W.push({instanceLocation:a,keyword:"if",keywordLocation:we,error:'Instance does not match "then" schema.'},...Ie.errors)}}else if(g!==void 0){let Ie=Ct(t,g,r,n,i,o,a,`${s}/else`,c);Ie.valid||W.push({instanceLocation:a,keyword:"if",keywordLocation:we,error:'Instance does not match "else" schema.'},...Ie.errors)}}if(l==="object"){if(h!==void 0)for(let me of h)me in t||W.push({instanceLocation:a,keyword:"required",keywordLocation:`${s}/required`,error:`Instance does not have required property "${me}".`});let we=Object.keys(t);if(j!==void 0&&we.length<j&&W.push({instanceLocation:a,keyword:"minProperties",keywordLocation:`${s}/minProperties`,error:`Instance does not have at least ${j} properties.`}),L!==void 0&&we.length>L&&W.push({instanceLocation:a,keyword:"maxProperties",keywordLocation:`${s}/maxProperties`,error:`Instance does not have at least ${L} properties.`}),k!==void 0){let me=`${s}/propertyNames`;for(let oe in t){let Re=`${a}/${mi(oe)}`,$e=Ct(oe,k,r,n,i,o,Re,me);$e.valid||W.push({instanceLocation:a,keyword:"propertyNames",keywordLocation:me,error:`Property name "${oe}" does not match schema.`},...$e.errors)}}if(U!==void 0){let me=`${s}/dependantRequired`;for(let oe in U)if(oe in t){let Re=U[oe];for(let $e of Re)$e in t||W.push({instanceLocation:a,keyword:"dependentRequired",keywordLocation:me,error:`Instance has "${oe}" but does not have "${$e}".`})}}if(J!==void 0)for(let me in J){let oe=`${s}/dependentSchemas`;if(me in t){let Re=Ct(t,J[me],r,n,i,o,a,`${oe}/${mi(me)}`,c);Re.valid||W.push({instanceLocation:a,keyword:"dependentSchemas",keywordLocation:oe,error:`Instance has "${me}" but does not match dependant schema.`},...Re.errors)}}if(H!==void 0){let me=`${s}/dependencies`;for(let oe in H)if(oe in t){let Re=H[oe];if(Array.isArray(Re))for(let $e of Re)$e in t||W.push({instanceLocation:a,keyword:"dependencies",keywordLocation:me,error:`Instance has "${oe}" but does not have "${$e}".`});else{let $e=Ct(t,Re,r,n,i,o,a,`${me}/${mi(oe)}`);$e.valid||W.push({instanceLocation:a,keyword:"dependencies",keywordLocation:me,error:`Instance has "${oe}" but does not match dependant schema.`},...$e.errors)}}}let he=Object.create(null),Ie=!1;if(N!==void 0){let me=`${s}/properties`;for(let oe in N){if(!(oe in t))continue;let Re=`${a}/${mi(oe)}`,$e=Ct(t[oe],N[oe],r,n,i,o,Re,`${me}/${mi(oe)}`);if($e.valid)c[oe]=he[oe]=!0;else if(Ie=i,W.push({instanceLocation:a,keyword:"properties",keywordLocation:me,error:`Property "${oe}" does not match schema.`},...$e.errors),Ie)break}}if(!Ie&&C!==void 0){let me=`${s}/patternProperties`;for(let oe in C){let Re=new RegExp(oe,"u"),$e=C[oe];for(let Tn in t){if(!Re.test(Tn))continue;let Wk=`${a}/${mi(Tn)}`,Yk=Ct(t[Tn],$e,r,n,i,o,Wk,`${me}/${mi(oe)}`);Yk.valid?c[Tn]=he[Tn]=!0:(Ie=i,W.push({instanceLocation:a,keyword:"patternProperties",keywordLocation:me,error:`Property "${Tn}" matches pattern "${oe}" but does not match associated schema.`},...Yk.errors))}}}if(!Ie&&R!==void 0){let me=`${s}/additionalProperties`;for(let oe in t){if(he[oe])continue;let Re=`${a}/${mi(oe)}`,$e=Ct(t[oe],R,r,n,i,o,Re,me);$e.valid?c[oe]=!0:(Ie=i,W.push({instanceLocation:a,keyword:"additionalProperties",keywordLocation:me,error:`Property "${oe}" does not match additional properties schema.`},...$e.errors))}}else if(!Ie&&z!==void 0){let me=`${s}/unevaluatedProperties`;for(let oe in t)if(!c[oe]){let Re=`${a}/${mi(oe)}`,$e=Ct(t[oe],z,r,n,i,o,Re,me);$e.valid?c[oe]=!0:W.push({instanceLocation:a,keyword:"unevaluatedProperties",keywordLocation:me,error:`Property "${oe}" does not match unevaluated properties schema.`},...$e.errors)}}}else if(l==="array"){M!==void 0&&t.length>M&&W.push({instanceLocation:a,keyword:"maxItems",keywordLocation:`${s}/maxItems`,error:`Array has too many items (${t.length} > ${M}).`}),T!==void 0&&t.length<T&&W.push({instanceLocation:a,keyword:"minItems",keywordLocation:`${s}/minItems`,error:`Array has too few items (${t.length} < ${T}).`});let we=t.length,he=0,Ie=!1;if(V!==void 0){let me=`${s}/prefixItems`,oe=Math.min(V.length,we);for(;he<oe;he++){let Re=Ct(t[he],V[he],r,n,i,o,`${a}/${he}`,`${me}/${he}`);if(c[he]=!0,!Re.valid&&(Ie=i,W.push({instanceLocation:a,keyword:"prefixItems",keywordLocation:me,error:"Items did not match schema."},...Re.errors),Ie))break}}if(_e!==void 0){let me=`${s}/items`;if(Array.isArray(_e)){let oe=Math.min(_e.length,we);for(;he<oe;he++){let Re=Ct(t[he],_e[he],r,n,i,o,`${a}/${he}`,`${me}/${he}`);if(c[he]=!0,!Re.valid&&(Ie=i,W.push({instanceLocation:a,keyword:"items",keywordLocation:me,error:"Items did not match schema."},...Re.errors),Ie))break}}else for(;he<we;he++){let oe=Ct(t[he],_e,r,n,i,o,`${a}/${he}`,me);if(c[he]=!0,!oe.valid&&(Ie=i,W.push({instanceLocation:a,keyword:"items",keywordLocation:me,error:"Items did not match schema."},...oe.errors),Ie))break}if(!Ie&&Fe!==void 0){let oe=`${s}/additionalItems`;for(;he<we;he++){let Re=Ct(t[he],Fe,r,n,i,o,`${a}/${he}`,oe);c[he]=!0,Re.valid||(Ie=i,W.push({instanceLocation:a,keyword:"additionalItems",keywordLocation:oe,error:"Items did not match additional items schema."},...Re.errors))}}}if(qt!==void 0)if(we===0&&Se===void 0)W.push({instanceLocation:a,keyword:"contains",keywordLocation:`${s}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(Se!==void 0&&we<Se)W.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${s}/minContains`,error:`Array has less items (${we}) than minContains (${Se}).`});else{let me=`${s}/contains`,oe=W.length,Re=0;for(let $e=0;$e<we;$e++){let Tn=Ct(t[$e],qt,r,n,i,o,`${a}/${$e}`,me);Tn.valid?(c[$e]=!0,Re++):W.push(...Tn.errors)}Re>=(Se||0)&&(W.length=oe),Se===void 0&&O===void 0&&Re===0?W.splice(oe,0,{instanceLocation:a,keyword:"contains",keywordLocation:me,error:"Array does not contain item matching schema."}):Se!==void 0&&Re<Se?W.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${s}/minContains`,error:`Array must contain at least ${Se} items matching schema. Only ${Re} items were found.`}):O!==void 0&&Re>O&&W.push({instanceLocation:a,keyword:"maxContains",keywordLocation:`${s}/maxContains`,error:`Array may contain at most ${O} items matching schema. ${Re} items were found.`})}if(!Ie&&Lt!==void 0){let me=`${s}/unevaluatedItems`;for(he;he<we;he++){if(c[he])continue;let oe=Ct(t[he],Lt,r,n,i,o,`${a}/${he}`,me);c[he]=!0,oe.valid||W.push({instanceLocation:a,keyword:"unevaluatedItems",keywordLocation:me,error:"Items did not match unevaluated items schema."},...oe.errors)}}if($)for(let me=0;me<we;me++){let oe=t[me],Re=typeof oe=="object"&&oe!==null;for(let $e=0;$e<we;$e++){if(me===$e)continue;let Tn=t[$e];(oe===Tn||Re&&(typeof Tn=="object"&&Tn!==null)&&Xo(oe,Tn))&&(W.push({instanceLocation:a,keyword:"uniqueItems",keywordLocation:`${s}/uniqueItems`,error:`Duplicate items at indexes ${me} and ${$e}.`}),me=Number.MAX_SAFE_INTEGER,$e=Number.MAX_SAFE_INTEGER)}}}else if(l==="number"){if(r==="4"?(Ae!==void 0&&(Ve===!0&&t<=Ae||t<Ae)&&W.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${s}/minimum`,error:`${t} is less than ${Ve?"or equal to ":""} ${Ae}.`}),qe!==void 0&&(wt===!0&&t>=qe||t>qe)&&W.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${s}/maximum`,error:`${t} is greater than ${wt?"or equal to ":""} ${qe}.`})):(Ae!==void 0&&t<Ae&&W.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${s}/minimum`,error:`${t} is less than ${Ae}.`}),qe!==void 0&&t>qe&&W.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${s}/maximum`,error:`${t} is greater than ${qe}.`}),Ve!==void 0&&t<=Ve&&W.push({instanceLocation:a,keyword:"exclusiveMinimum",keywordLocation:`${s}/exclusiveMinimum`,error:`${t} is less than ${Ve}.`}),wt!==void 0&&t>=wt&&W.push({instanceLocation:a,keyword:"exclusiveMaximum",keywordLocation:`${s}/exclusiveMaximum`,error:`${t} is greater than or equal to ${wt}.`})),Kt!==void 0){let we=t%Kt;Math.abs(0-we)>=11920929e-14&&Math.abs(Kt-we)>=11920929e-14&&W.push({instanceLocation:a,keyword:"multipleOf",keywordLocation:`${s}/multipleOf`,error:`${t} is not a multiple of ${Kt}.`})}}else if(l==="string"){let we=te===void 0&&ce===void 0?0:e5(t);te!==void 0&&we<te&&W.push({instanceLocation:a,keyword:"minLength",keywordLocation:`${s}/minLength`,error:`String is too short (${we} < ${te}).`}),ce!==void 0&&we>ce&&W.push({instanceLocation:a,keyword:"maxLength",keywordLocation:`${s}/maxLength`,error:`String is too long (${we} > ${ce}).`}),it!==void 0&&!new RegExp(it,"u").test(t)&&W.push({instanceLocation:a,keyword:"pattern",keywordLocation:`${s}/pattern`,error:"String does not match pattern."}),I!==void 0&&s1[I]&&!s1[I](t)&&W.push({instanceLocation:a,keyword:"format",keywordLocation:`${s}/format`,error:`String does not match format "${I}".`})}return{valid:W.length===0,errors:W}}var uw=class{constructor(e,r="2019-09",n=!0){A(this,"schema");A(this,"draft");A(this,"shortCircuit");A(this,"lookup");this.schema=e,this.draft=r,this.shortCircuit=n,this.lookup=mo(e)}validate(e){return Ct(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,r){r&&(e={...e,$id:r}),mo(e,this.lookup)}};var Xae={};le(Xae,{Validator:()=>uw,deepCompareStrict:()=>Xo,toJsonSchema:()=>Vr,validatesOnlyStrings:()=>gm});function Vr(t,e){if(Tt(t)){let r=Yx(t,!0);if(Bi(r)){let n=am(r,!0);return xu(n,e)}else return xu(t,e)}return Gt(t)?WZ(t):t}function gm(t){if(!t||typeof t!="object"||Object.keys(t).length===0||Array.isArray(t))return!1;if("type"in t)return typeof t.type=="string"?t.type==="string":Array.isArray(t.type)?t.type.every(e=>e==="string"):!1;if("enum"in t)return Array.isArray(t.enum)&&t.enum.length>0&&t.enum.every(e=>typeof e=="string");if("const"in t)return typeof t.const=="string";if("allOf"in t&&Array.isArray(t.allOf))return t.allOf.some(e=>gm(e));if("anyOf"in t&&Array.isArray(t.anyOf)||"oneOf"in t&&Array.isArray(t.oneOf)){let e="anyOf"in t?t.anyOf:t.oneOf;return e.length>0&&e.every(r=>gm(r))}if("not"in t)return!1;if("$ref"in t&&typeof t.$ref=="string"){let e=t.$ref,r=mo(t);return r[e]?gm(r[e]):!1}return!1}var Qae={};le(Qae,{Graph:()=>cw});function ese(t,e){var r;if(t!==void 0&&!cu(t))return t;if(Fh(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch(n){return e.getName()}else return(r=e.name)!=null?r:"UnknownSchema"}function tse(t){return Fh(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Vr(t.data.schema),title:t.data.name}}}var cw=class n5{constructor(e){A(this,"nodes",{});A(this,"edges",[]);var r,n;this.nodes=(r=e==null?void 0:e.nodes)!=null?r:this.nodes,this.edges=(n=e==null?void 0:e.edges)!=null?n:this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((r,n)=>{e[r.id]=cu(r.id)?n:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:e[r.id],...tse(r)})),edges:this.edges.map(r=>{let n={source:e[r.source],target:e[r.target]};return typeof r.data!="undefined"&&(n.data=r.data),typeof r.conditional!="undefined"&&(n.conditional=r.conditional),n})}}addNode(e,r,n){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);let i=r!=null?r:io(),o={id:i,data:e,name:ese(r,e),metadata:n};return this.nodes[i]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(r=>r.source!==e.id&&r.target!==e.id)}addEdge(e,r,n,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);let o={source:e.id,target:r.id,data:n,conditional:i};return this.edges.push(o),o}firstNode(){return t5(this)}lastNode(){return r5(this)}extend(e,r=""){let n=r;Object.values(e.nodes).map(u=>u.id).every(cu)&&(n="");let o=u=>n?`${n}:${u}`:u;Object.entries(e.nodes).forEach(([u,l])=>{this.nodes[o(u)]={...l,id:o(u)}});let a=e.edges.map(u=>({...u,source:o(u.source),target:o(u.target)}));this.edges=[...this.edges,...a];let s=e.firstNode(),c=e.lastNode();return[s?{id:o(s.id),data:s.data}:void 0,c?{id:o(c.id),data:c.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&t5(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&r5(this,[e.id])&&this.removeNode(e)}reid(){let e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),r=new Map;Object.values(e).forEach(i=>{r.set(i,(r.get(i)||0)+1)});let n=i=>{let o=e[i];return cu(i)&&r.get(o)===1?o:i};return new n5({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,o])=>[n(i),{...o,id:n(i)}])),edges:this.edges.map(i=>({...i,source:n(i.source),target:n(i.target)}))})}drawMermaid(e){let{withStyles:r,curveStyle:n,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e!=null?e:{},a=this.reid(),s=a.firstNode(),c=a.lastNode();return oZ(a.nodes,a.edges,{firstNode:s==null?void 0:s.id,lastNode:c==null?void 0:c.id,withStyles:r,curveStyle:n,nodeColors:i,wrapLabelNWords:o})}async drawMermaidPng(e){let r=this.drawMermaid(e);return aZ(r,{backgroundColor:e==null?void 0:e.backgroundColor})}};function t5(t,e=[]){let r=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),n=[];for(let i of Object.values(t.nodes))!e.includes(i.id)&&!r.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function r5(t,e=[]){let r=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),n=[];for(let i of Object.values(t.nodes))!e.includes(i.id)&&!r.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function i5(t){let e=new TextEncoder,r=new ReadableStream({async start(n){for await(let i of t)n.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));n.enqueue(e.encode(`event: end

`)),n.close()}});return _n.fromReadableStream(r)}function u1(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}var o5=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function lw(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*c1(t,e){for(;;){let{value:r,done:n}=kr.runWithConfig(yn(t),e.next.bind(e),!0);if(n)break;yield r}}async function*dw(t,e){let r=e[Symbol.asyncIterator]();for(;;){let{value:n,done:i}=await kr.runWithConfig(yn(t),r.next.bind(e),!0);if(i)break;yield n}}function gr(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var xt=class extends jo{constructor(){super(...arguments);A(this,"lc_runnable",!0);A(this,"name")}getName(e){var n,i;let r=(i=(n=this.name)!=null?n:this.constructor.lc_name())!=null?i:this.constructor.name;return e?`${r}${e}`:r}withRetry(e){return new mw({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Iu({bound:this,config:e,kwargs:{}})}withFallbacks(e){let r=Array.isArray(e)?e:e.fallbacks;return new l1({runnable:this,fallbacks:r})}_getOptionsList(e,r=0){if(Array.isArray(e)&&e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);if(Array.isArray(e))return e.map(We);if(r>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let n=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:r},(i,o)=>We(o===0?e:n))}return Array.from({length:r},()=>We(e))}async batch(e,r,n){var c,u;let i=this._getOptionsList(r!=null?r:{},e.length),o=(u=(c=i[0])==null?void 0:c.maxConcurrency)!=null?u:n==null?void 0:n.maxConcurrency,a=new Za({maxConcurrency:o,onFailedAttempt:l=>{throw l}}),s=e.map((l,d)=>a.call(async()=>{try{return await this.invoke(l,i[d])}catch(f){if(n!=null&&n.returnExceptions)return f;throw f}}));return Promise.all(s)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){let n=We(r),i=new fu({generator:this._streamIterator(e,n),config:n});return await i.setup,_n.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let r;e===void 0?r=We(e):r=We({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[r,n]}async _callWithConfig(e,r,n){var c;let i=We(n),o=await en(i),a=await(o==null?void 0:o.handleChainStart(this.toJSON(),gr(r,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(c=i==null?void 0:i.runName)!=null?c:this.getName()));delete i.runId;let s;try{let u=e.call(this,r,i,a);s=await Ui(u,n==null?void 0:n.signal)}catch(u){throw await(a==null?void 0:a.handleChainError(u)),u}return await(a==null?void 0:a.handleChainEnd(gr(s,"output"))),s}async _batchWithConfig(e,r,n,i){var u;let o=this._getOptionsList(n!=null?n:{},r.length),a=await Promise.all(o.map(en)),s=await Promise.all(a.map(async(l,d)=>{var m;let f=await(l==null?void 0:l.handleChainStart(this.toJSON(),gr(r[d],"input"),o[d].runId,o[d].runType,void 0,void 0,(m=o[d].runName)!=null?m:this.getName()));return delete o[d].runId,f})),c;try{let l=e.call(this,r,o,s,i);c=await Ui(l,(u=o==null?void 0:o[0])==null?void 0:u.signal)}catch(l){throw await Promise.all(s.map(d=>d==null?void 0:d.handleChainError(l))),l}return await Promise.all(s.map(l=>l==null?void 0:l.handleChainEnd(gr(c,"output")))),c}_concatOutputChunks(e,r){return ci(e,r)}async*_transformStreamWithConfig(e,r,n){let i,o=!0,a,s=!0,c=We(n),u=await en(c),l=this;async function*d(){for await(let m of e){if(o)if(i===void 0)i=m;else try{i=l._concatOutputChunks(i,m)}catch(p){i=void 0,o=!1}yield m}}let f;try{let m=await DO(r.bind(this),d(),async()=>{var h;return u==null?void 0:u.handleChainStart(this.toJSON(),{input:""},c.runId,c.runType,void 0,void 0,(h=c.runName)!=null?h:this.getName())},n==null?void 0:n.signal,c);delete c.runId,f=m.setup;let p=f==null?void 0:f.handlers.find(xB),b=m.output;p!==void 0&&f!==void 0&&(b=p.tapOutputIterable(f.runId,b));let y=f==null?void 0:f.handlers.find(FO);y!==void 0&&f!==void 0&&(b=y.tapOutputIterable(f.runId,b));for await(let h of b)if(yield h,s)if(a===void 0)a=h;else try{a=this._concatOutputChunks(a,h)}catch(_){a=void 0,s=!1}}catch(m){throw await(f==null?void 0:f.handleChainError(m,void 0,void 0,void 0,{inputs:gr(i,"input")})),m}await(f==null?void 0:f.handleChainEnd(a!=null?a:{},void 0,void 0,void 0,{inputs:gr(i,"input")}))}getGraph(e){let r=new cw,n=r.addNode({name:`${this.getName()}Input`,schema:wn.any()}),i=r.addNode(this),o=r.addNode({name:`${this.getName()}Output`,schema:wn.any()});return r.addEdge(n,i),r.addEdge(i,o),r}pipe(e){return new Nu({first:this,last:pi(e)})}pick(e){return this.pipe(new d1(e))}assign(e){return this.pipe(new kg(new Cu({steps:e})))}async*transform(e,r){let n;for await(let i of e)n===void 0?n=i:n=this._concatOutputChunks(n,i);yield*this._streamIterator(n,We(r))}async*streamLog(e,r,n){let i=new Wb({...n,autoClose:!1,_schemaFormat:"original"}),o=We(r);yield*this._streamLog(e,i,o)}async*_streamLog(e,r,n){let{callbacks:i}=n;if(i===void 0)n.callbacks=[r];else if(Array.isArray(i))n.callbacks=i.concat([r]);else{let c=i.copy();c.addHandler(r,!0),n.callbacks=c}let o=this.stream(e,n);async function a(){try{let c=await o;for await(let u of c){let l=new Vo({ops:[{op:"add",path:"/streamed_output/-",value:u}]});await r.writer.write(l)}}finally{await r.writer.close()}}let s=a();try{for await(let c of r)yield c}finally{await s}}streamEvents(e,r,n){let i;if(r.version==="v1")i=this._streamEventsV1(e,r,n);else if(r.version==="v2")i=this._streamEventsV2(e,r,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?i5(i):_n.fromAsyncGenerator(i)}async*_streamEventsV2(e,r,n){var p,b;let i=new wB({...n,autoClose:!1}),o=We(r),a=(p=o.runId)!=null?p:io();o.runId=a;let s=o.callbacks;if(s===void 0)o.callbacks=[i];else if(Array.isArray(s))o.callbacks=s.concat(i);else{let y=s.copy();y.addHandler(i,!0),o.callbacks=y}let c=new AbortController,u=this;async function l(){let y,h=null;try{r!=null&&r.signal?"any"in AbortSignal?y=AbortSignal.any([c.signal,r.signal]):(y=r.signal,h=()=>{c.abort()},r.signal.addEventListener("abort",h,{once:!0})):y=c.signal;let _=await u.stream(e,{...o,signal:y}),v=i.tapOutputIterable(a,_);for await(let x of v)if(c.signal.aborted)break}finally{await i.finish(),y&&h&&y.removeEventListener("abort",h)}}let d=l(),f=!1,m;try{for await(let y of i){if(!f){y.data.input=e,f=!0,m=y.run_id,yield y;continue}y.run_id===m&&y.event.endsWith("_end")&&(b=y.data)!=null&&b.input&&delete y.data.input,yield y}}finally{c.abort(),await d}}async*_streamEventsV1(e,r,n){var p,b,y;let i,o=!1,a=We(r),s=(p=a.tags)!=null?p:[],c=(b=a.metadata)!=null?b:{},u=(y=a.runName)!=null?y:this.getName(),l=new Wb({...n,autoClose:!1,_schemaFormat:"streaming_events"}),d=new TB({...n}),f=this._streamLog(e,l,a);for await(let h of f){if(i?i=i.concat(h):i=Jb.fromRunLogPatch(h),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;let w={...i.state},E={run_id:w.id,event:`on_${w.type}_start`,name:u,tags:s,metadata:c,data:{input:e}};d.includeEvent(E,w.type)&&(yield E)}let _=h.ops.filter(w=>w.path.startsWith("/logs/")).map(w=>w.path.split("/")[2]),v=[...new Set(_)];for(let w of v){let E,S={},g=i.state.logs[w];if(g.end_time===void 0?g.streamed_output.length>0?E="stream":E="start":E="end",E==="start")g.inputs!==void 0&&(S.input=g.inputs);else if(E==="end")g.inputs!==void 0&&(S.input=g.inputs),S.output=g.final_output;else if(E==="stream"){let I=g.streamed_output.length;if(I!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${I} instead. Encountered in: "${g.name}"`);S={chunk:g.streamed_output[0]},g.streamed_output=[]}yield{event:`on_${g.type}_${E}`,name:g.name,run_id:g.id,tags:g.tags,metadata:g.metadata,data:S}}let{state:x}=i;if(x.streamed_output.length>0){let w=x.streamed_output.length;if(w!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${w} instead. Encountered in: "${x.name}"`);let E={chunk:x.streamed_output[0]};x.streamed_output=[];let S={event:`on_${x.type}_stream`,run_id:x.id,tags:s,metadata:c,name:u,data:E};d.includeEvent(S,x.type)&&(yield S)}}let m=i==null?void 0:i.state;if(m!==void 0){let h={event:`on_${m.type}_end`,name:u,run_id:m.id,tags:s,metadata:c,data:{output:m.final_output}};d.includeEvent(h,m.type)&&(yield h)}}static isRunnable(e){return Fh(e)}withListeners({onStart:e,onEnd:r,onError:n}){return new Iu({bound:this,config:{},configFactories:[i=>({callbacks:[new BO({config:i,onStart:e,onEnd:r,onError:n})]})]})}asTool(e){return ise(this,e)}},Iu=class a5 extends xt{constructor(r){super(r);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"bound");A(this,"config");A(this,"kwargs");A(this,"configFactories");this.bound=r.bound,this.kwargs=r.kwargs,this.config=r.config,this.configFactories=r.configFactories}static lc_name(){return"RunnableBinding"}getName(r){return this.bound.getName(r)}async _mergeConfig(...r){let n=Bc(this.config,...r);return Bc(n,...this.configFactories?await Promise.all(this.configFactories.map(async i=>await i(n))):[])}withConfig(r){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...r}})}withRetry(r){return new mw({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:r==null?void 0:r.stopAfterAttempt,...r})}async invoke(r,n){return this.bound.invoke(r,await this._mergeConfig(n,this.kwargs))}async batch(r,n,i){let o=Array.isArray(n)?await Promise.all(n.map(async a=>this._mergeConfig(We(a),this.kwargs))):await this._mergeConfig(We(n),this.kwargs);return this.bound.batch(r,o,i)}_concatOutputChunks(r,n){return this.bound._concatOutputChunks(r,n)}async*_streamIterator(r,n){yield*this.bound._streamIterator(r,await this._mergeConfig(We(n),this.kwargs))}async stream(r,n){return this.bound.stream(r,await this._mergeConfig(We(n),this.kwargs))}async*transform(r,n){yield*this.bound.transform(r,await this._mergeConfig(We(n),this.kwargs))}streamEvents(r,n,i){let o=this,a=async function*(){yield*o.bound.streamEvents(r,{...await o._mergeConfig(We(n),o.kwargs),version:n.version},i)};return _n.fromAsyncGenerator(a())}static isRunnableBinding(r){return r.bound&&xt.isRunnable(r.bound)}withListeners({onStart:r,onEnd:n,onError:i}){return new a5({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[o=>({callbacks:[new BO({config:o,onStart:r,onEnd:n,onError:i})]})]})}},s5=class u5 extends xt{constructor(r){super(r);A(this,"lc_serializable",!0);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"bound");this.bound=r.bound}static lc_name(){return"RunnableEach"}async invoke(r,n){return this._callWithConfig(this._invoke.bind(this),r,n)}async _invoke(r,n,i){return this.bound.batch(r,ft(n,{callbacks:i==null?void 0:i.getChild()}))}withListeners({onStart:r,onEnd:n,onError:i}){return new u5({bound:this.bound.withListeners({onStart:r,onEnd:n,onError:i})})}},mw=class extends Iu{constructor(e){var r,n;super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"maxAttemptNumber",3);A(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=(r=e.maxAttemptNumber)!=null?r:this.maxAttemptNumber,this.onFailedAttempt=(n=e.onFailedAttempt)!=null?n:this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,r,n){let i=e>1?`retry:attempt:${e}`:void 0;return ft(r,{callbacks:n==null?void 0:n.getChild(i)})}async _invoke(e,r,n){return jh(i=>super.invoke(e,this._patchConfigForRetry(i,r,n)),{onFailedAttempt:({error:i})=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _batch(e,r,n,i){let o={};try{await jh(async a=>{let s=e.map((f,m)=>m).filter(f=>o[f.toString()]===void 0||o[f.toString()]instanceof Error),c=s.map(f=>e[f]),u=s.map(f=>this._patchConfigForRetry(a,r==null?void 0:r[f],n==null?void 0:n[f])),l=await super.batch(c,u,{...i,returnExceptions:!0}),d;for(let f=0;f<l.length;f+=1){let m=l[f],p=s[f];m instanceof Error&&d===void 0&&(d=m,d.input=c[f]),o[p.toString()]=m}if(d)throw d;return l},{onFailedAttempt:({error:a})=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(o).sort((a,s)=>parseInt(a,10)-parseInt(s,10)).map(a=>o[parseInt(a,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}},Nu=class Cg extends xt{constructor(r){var n,i;super(r);A(this,"first");A(this,"middle",[]);A(this,"last");A(this,"omitSequenceTags",!1);A(this,"lc_serializable",!0);A(this,"lc_namespace",["langchain_core","runnables"]);this.first=r.first,this.middle=(n=r.middle)!=null?n:this.middle,this.last=r.last,this.name=r.name,this.omitSequenceTags=(i=r.omitSequenceTags)!=null?i:this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(r,n){var u;let i=We(n),o=await en(i),a=await(o==null?void 0:o.handleChainStart(this.toJSON(),gr(r,"input"),i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;let s=r,c;try{let l=[this.first,...this.middle];for(let d=0;d<l.length;d+=1){let m=l[d].invoke(s,ft(i,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`)}));s=await Ui(m,n==null?void 0:n.signal)}if((u=n==null?void 0:n.signal)!=null&&u.aborted)throw du(n.signal);c=await this.last.invoke(s,ft(i,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(gr(c,"output"))),c}async batch(r,n,i){var u;let o=this._getOptionsList(n!=null?n:{},r.length),a=await Promise.all(o.map(en)),s=await Promise.all(a.map(async(l,d)=>{let f=await(l==null?void 0:l.handleChainStart(this.toJSON(),gr(r[d],"input"),o[d].runId,void 0,void 0,void 0,o[d].runName));return delete o[d].runId,f})),c=r;try{for(let l=0;l<this.steps.length;l+=1){let f=this.steps[l].batch(c,s.map((m,p)=>{let b=m==null?void 0:m.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`);return ft(o[p],{callbacks:b})}),i);c=await Ui(f,(u=o[0])==null?void 0:u.signal)}}catch(l){throw await Promise.all(s.map(d=>d==null?void 0:d.handleChainError(l))),l}return await Promise.all(s.map(l=>l==null?void 0:l.handleChainEnd(gr(c,"output")))),c}_concatOutputChunks(r,n){return this.last._concatOutputChunks(r,n)}async*_streamIterator(r,n){var f;let i=await en(n),{runId:o,...a}=n!=null?n:{},s=await(i==null?void 0:i.handleChainStart(this.toJSON(),gr(r,"input"),o,void 0,void 0,void 0,a==null?void 0:a.runName)),c=[this.first,...this.middle,this.last],u=!0,l;async function*d(){yield r}try{let m=c[0].transform(d(),ft(a,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let p=1;p<c.length;p+=1)m=await c[p].transform(m,ft(a,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`)}));for await(let p of m)if((f=n==null?void 0:n.signal)==null||f.throwIfAborted(),yield p,u)if(l===void 0)l=p;else try{l=this._concatOutputChunks(l,p)}catch(b){l=void 0,u=!1}}catch(m){throw await(s==null?void 0:s.handleChainError(m)),m}await(s==null?void 0:s.handleChainEnd(gr(l,"output")))}getGraph(r){let n=new cw,i=null;return this.steps.forEach((o,a)=>{let s=o.getGraph(r);a!==0&&s.trimFirstNode(),a!==this.steps.length-1&&s.trimLastNode(),n.extend(s);let c=s.firstNode();if(!c)throw new Error(`Runnable ${o} has no first node`);i&&n.addEdge(i,c),i=s.lastNode()}),n}pipe(r){var n;return Cg.isRunnableSequence(r)?new Cg({first:this.first,middle:this.middle.concat([this.last,r.first,...r.middle]),last:r.last,name:(n=this.name)!=null?n:r.name}):new Cg({first:this.first,middle:[...this.middle,this.last],last:pi(r),name:this.name})}static isRunnableSequence(r){return Array.isArray(r.middle)&&xt.isRunnable(r)}static from([r,...n],i){let o={};return typeof i=="string"?o.name=i:i!==void 0&&(o=i),new Cg({...o,first:pi(r),middle:n.slice(0,-1).map(pi),last:pi(n[n.length-1])})}},Cu=class c5 extends xt{constructor(r){super(r);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"steps");this.steps={};for(let[n,i]of Object.entries(r.steps))this.steps[n]=pi(i)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(r){return new c5({steps:r})}async invoke(r,n){let i=We(n),o=await en(i),a=await(o==null?void 0:o.handleChainStart(this.toJSON(),{input:r},i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;let s={};try{let c=Object.entries(this.steps).map(async([u,l])=>{s[u]=await l.invoke(r,ft(i,{callbacks:a==null?void 0:a.getChild(`map:key:${u}`)}))});await Ui(Promise.all(c),n==null?void 0:n.signal)}catch(c){throw await(a==null?void 0:a.handleChainError(c)),c}return await(a==null?void 0:a.handleChainEnd(s)),s}async*_transform(r,n,i){let o={...this.steps},a=jb(r,Object.keys(o).length),s=new Map(Object.entries(o).map(([c,u],l)=>{let d=u.transform(a[l],ft(i,{callbacks:n==null?void 0:n.getChild(`map:key:${c}`)}));return[c,d.next().then(f=>({key:c,gen:d,result:f}))]}));for(;s.size;){let c=Promise.race(s.values()),{key:u,result:l,gen:d}=await Ui(c,i==null?void 0:i.signal);s.delete(u),l.done||(yield{[u]:l.value},s.set(u,d.next().then(f=>({key:u,gen:d,result:f}))))}}transform(r,n){return this._transformStreamWithConfig(r,this._transform.bind(this),n)}async stream(r,n){async function*i(){yield r}let o=We(n),a=new fu({generator:this.transform(i(),o),config:o});return await a.setup,_n.fromAsyncGenerator(a)}},rse=class l5 extends xt{constructor(r){super(r);A(this,"lc_serializable",!1);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"func");if(!Db(r.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=r.func}async invoke(r,n){let[i]=this._getOptionsList(n!=null?n:{},1),o=await en(i),a=this.func(ft(i,{callbacks:o}),r);return Ui(a,i==null?void 0:i.signal)}async*_streamIterator(r,n){var a,s;let[i]=this._getOptionsList(n!=null?n:{},1),o=await this.invoke(r,n);if(lw(o)){for await(let c of o)(a=i==null?void 0:i.signal)==null||a.throwIfAborted(),yield c;return}if(o5(o)){for(;;){(s=i==null?void 0:i.signal)==null||s.throwIfAborted();let c=o.next();if(c.done)break;yield c.value}return}yield o}static from(r){return new l5({func:r})}};function nse(t){if(Db(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Zn=class d5 extends xt{constructor(r){if(Db(r.func))return rse.from(r.func);super(r);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"func");nse(r.func),this.func=r.func}static lc_name(){return"RunnableLambda"}static from(r){return new d5({func:r})}async _invoke(r,n,i){return new Promise((o,a)=>{var c;let s=ft(n,{callbacks:i==null?void 0:i.getChild(),recursionLimit:((c=n==null?void 0:n.recursionLimit)!=null?c:Ub)-1});kr.runWithConfig(yn(s),async()=>{var u,l,d;try{let f=await this.func(r,{...s});if(f&&xt.isRunnable(f)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");f=await f.invoke(r,{...s,recursionLimit:((u=s.recursionLimit)!=null?u:Ub)-1})}else if(lw(f)){let m;for await(let p of dw(s,f))if((l=n==null?void 0:n.signal)==null||l.throwIfAborted(),m===void 0)m=p;else try{m=this._concatOutputChunks(m,p)}catch(b){m=p}f=m}else if(u1(f)){let m;for(let p of c1(s,f))if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),m===void 0)m=p;else try{m=this._concatOutputChunks(m,p)}catch(b){m=p}f=m}o(f)}catch(f){a(f)}})})}async invoke(r,n){return this._callWithConfig(this._invoke.bind(this),r,n)}async*_transform(r,n,i){var c,u,l;let o;for await(let d of r)if(o===void 0)o=d;else try{o=this._concatOutputChunks(o,d)}catch(f){o=d}let a=ft(i,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((c=i==null?void 0:i.recursionLimit)!=null?c:Ub)-1}),s=await new Promise((d,f)=>{kr.runWithConfig(yn(a),async()=>{try{let m=await this.func(o,{...a,config:a});d(m)}catch(m){f(m)}})});if(s&&xt.isRunnable(s)){if((i==null?void 0:i.recursionLimit)===0)throw new Error("Recursion limit reached.");let d=await s.stream(o,a);for await(let f of d)yield f}else if(lw(s))for await(let d of dw(a,s))(u=i==null?void 0:i.signal)==null||u.throwIfAborted(),yield d;else if(u1(s))for(let d of c1(a,s))(l=i==null?void 0:i.signal)==null||l.throwIfAborted(),yield d;else yield s}transform(r,n){return this._transformStreamWithConfig(r,this._transform.bind(this),n)}async stream(r,n){async function*i(){yield r}let o=We(n),a=new fu({generator:this.transform(i(),o),config:o});return await a.setup,_n.fromAsyncGenerator(a)}},f5=class extends Cu{},l1=class extends xt{constructor(e){super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"runnable");A(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,r){let n=We(r),i=await en(n),{runId:o,...a}=n,s=await(i==null?void 0:i.handleChainStart(this.toJSON(),gr(e,"input"),o,void 0,void 0,void 0,a==null?void 0:a.runName)),c=ft(a,{callbacks:s==null?void 0:s.getChild()});return await kr.runWithConfig(c,async()=>{var d;let l;for(let f of this.runnables()){(d=n==null?void 0:n.signal)==null||d.throwIfAborted();try{let m=await f.invoke(e,c);return await(s==null?void 0:s.handleChainEnd(gr(m,"output"))),m}catch(m){l===void 0&&(l=m)}}throw l===void 0?new Error("No error stored at end of fallback."):(await(s==null?void 0:s.handleChainError(l)),l)})}async*_streamIterator(e,r){var d;let n=We(r),i=await en(n),{runId:o,...a}=n,s=await(i==null?void 0:i.handleChainStart(this.toJSON(),gr(e,"input"),o,void 0,void 0,void 0,a==null?void 0:a.runName)),c,u;for(let f of this.runnables()){(d=n==null?void 0:n.signal)==null||d.throwIfAborted();let m=ft(a,{callbacks:s==null?void 0:s.getChild()});try{let p=await f.stream(e,m);u=dw(m,p);break}catch(p){c===void 0&&(c=p)}}if(u===void 0){let f=c!=null?c:new Error("No error stored at end of fallback.");throw await(s==null?void 0:s.handleChainError(f)),f}let l;try{for await(let f of u){yield f;try{l=l===void 0?l:this._concatOutputChunks(l,f)}catch(m){l=void 0}}}catch(f){throw await(s==null?void 0:s.handleChainError(f)),f}await(s==null?void 0:s.handleChainEnd(gr(l,"output")))}async batch(e,r,n){var c;if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");let i=this._getOptionsList(r!=null?r:{},e.length),o=await Promise.all(i.map(u=>en(u))),a=await Promise.all(o.map(async(u,l)=>{let d=await(u==null?void 0:u.handleChainStart(this.toJSON(),gr(e[l],"input"),i[l].runId,void 0,void 0,void 0,i[l].runName));return delete i[l].runId,d})),s;for(let u of this.runnables()){(c=i[0].signal)==null||c.throwIfAborted();try{let l=await u.batch(e,a.map((d,f)=>ft(i[f],{callbacks:d==null?void 0:d.getChild()})),n);return await Promise.all(a.map((d,f)=>d==null?void 0:d.handleChainEnd(gr(l[f],"output")))),l}catch(l){s===void 0&&(s=l)}}throw s?(await Promise.all(a.map(u=>u==null?void 0:u.handleChainError(s))),s):new Error("No error stored at end of fallbacks.")}};function pi(t){if(typeof t=="function")return new Zn({func:t});if(xt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){let e={};for(let[r,n]of Object.entries(t))e[r]=pi(n);return new Cu({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var kg=class extends xt{constructor(e){e instanceof Cu&&(e={mapper:e});super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,r){let n=await this.mapper.invoke(e,r);return{...e,...n}}async*_transform(e,r,n){let i=this.mapper.getStepsKeys(),[o,a]=jb(e),s=this.mapper.transform(a,ft(n,{callbacks:r==null?void 0:r.getChild()})),c=s.next();for await(let u of o){if(typeof u!="object"||Array.isArray(u))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof u}`);let l=Object.fromEntries(Object.entries(u).filter(([d])=>!i.includes(d)));Object.keys(l).length>0&&(yield l)}yield(await c).value;for await(let u of s)yield u}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let i=We(r),o=new fu({generator:this.transform(n(),i),config:i});return await o.setup,_n.fromAsyncGenerator(o)}},d1=class extends xt{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{let r=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(e,r){return this._callWithConfig(this._pick.bind(this),e,r)}async*_transform(e){for await(let r of e){let n=await this._pick(r);n!==void 0&&(yield n)}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let i=We(r),o=new fu({generator:this.transform(n(),i),config:i});return await o.setup,_n.fromAsyncGenerator(o)}},fw=class extends Iu{constructor(e){var n;let r=Nu.from([Zn.from(async i=>{let o;if(iu(i))try{o=await wu(this.schema,i.args)}catch(a){throw new Df("Received tool input did not match expected schema",JSON.stringify(i.args))}else o=i;return o}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:r,config:(n=e.config)!=null?n:{}});A(this,"name");A(this,"description");A(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function ise(t,e){var i,o;let r=(i=e.name)!=null?i:t.getName(),n=(o=e.description)!=null?o:Su(e.schema);return sm(e.schema)?new fw({name:r,description:n,schema:wn.object({input:wn.string()}).transform(a=>a.input),bound:t}):new fw({name:r,description:n,schema:e.schema,bound:t})}var pw=(t,e)=>{let r=[...new Set(e==null?void 0:e.map(i=>{if(typeof i=="string")return i;let o=new i({});if(!("getType"in o)||typeof o.getType!="function")throw new Error("Invalid type provided.");return o.getType()}))],n=t.getType();return r.some(i=>i===n)};function y5(t,e){return Array.isArray(t)?m5(t,e):Zn.from(r=>m5(r,t))}function m5(t,e={}){let{includeNames:r,excludeNames:n,includeTypes:i,excludeTypes:o,includeIds:a,excludeIds:s}=e,c=[];for(let u of t)if(!(n&&u.name&&n.includes(u.name))){{if(o&&pw(u,o))continue;if(s&&u.id&&s.includes(u.id))continue}i||a||r?(r&&u.name&&r.some(l=>l===u.name)||i&&pw(u,i)||a&&u.id&&a.some(l=>l===u.id))&&c.push(u):c.push(u)}return c}function _5(t){return Array.isArray(t)?p5(t):Zn.from(p5)}function p5(t){if(!t.length)return[];let e=[];for(let r of t){let n=r,i=e.pop();if(!i)e.push(n);else if(n.getType()==="tool"||n.getType()!==i.getType())e.push(i,n);else{let o=Mc(i),a=Mc(n),s=o.concat(a);typeof o.content=="string"&&typeof a.content=="string"&&(s.content=`${o.content}
${a.content}`),e.push(ase(s))}}return e}function v5(t,e){if(Array.isArray(t)){let r=t;if(!e)throw new Error("Options parameter is required when providing messages.");return h5(r,e)}else{let r=t;return Zn.from(n=>h5(n,r)).withConfig({runName:"trim_messages"})}}async function h5(t,e){let{maxTokens:r,tokenCounter:n,strategy:i="last",allowPartial:o=!1,endOn:a,startOn:s,includeSystem:c=!1,textSplitter:u}=e;if(s&&i==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(c&&i==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let l;"getNumTokens"in n?l=async f=>(await Promise.all(f.map(p=>n.getNumTokens(p.content)))).reduce((p,b)=>p+b,0):l=async f=>n(f);let d=m1;if(u&&("splitText"in u?d=u.splitText:d=async f=>u(f)),i==="first")return b5(t,{maxTokens:r,tokenCounter:l,textSplitter:d,partialStrategy:o?"first":void 0,endOn:a});if(i==="last")return ose(t,{maxTokens:r,tokenCounter:l,textSplitter:d,allowPartial:o,includeSystem:c,startOn:s,endOn:a});throw new Error(`Unrecognized strategy: '${i}'. Must be one of 'first' or 'last'.`)}async function b5(t,e){let{maxTokens:r,tokenCounter:n,textSplitter:i,partialStrategy:o,endOn:a}=e,s=[...t],c=0;for(let u=0;u<s.length;u+=1){let l=u>0?s.slice(0,-u):s;if(await n(l)<=r){c=s.length-u;break}}if(c<s.length&&o){let u=!1;if(Array.isArray(s[c].content)){let l=s[c];if(typeof l.content=="string")throw new Error("Expected content to be an array.");let d=l.content.length,f=o==="last"?[...l.content].reverse():l.content;for(let m=1;m<=d;m+=1){let p=o==="first"?f.slice(0,m):f.slice(-m),b=Object.fromEntries(Object.entries(l).filter(([_])=>_!=="type"&&!_.startsWith("lc_"))),y=f1(l.getType(),{...b,content:p}),h=[...s.slice(0,c),y];if(await n(h)<=r)s=h,c+=1,u=!0;else break}u&&o==="last"&&(l.content=[...f].reverse())}if(!u){let l=s[c],d;if(Array.isArray(l.content)&&l.content.some(f=>typeof f=="string"||f.type==="text")){let f=l.content.find(m=>m.type==="text"&&m.text);d=f==null?void 0:f.text}else typeof l.content=="string"&&(d=l.content);if(d){let f=await i(d),m=f.length;o==="last"&&f.reverse();for(let p=0;p<m-1;p+=1)if(f.pop(),l.content=f.join(""),await n([...s.slice(0,c),l])<=r){o==="last"&&(l.content=[...f].reverse().join("")),s=[...s.slice(0,c),l],c+=1;break}}}}if(a){let u=Array.isArray(a)?a:[a];for(;c>0&&!pw(s[c-1],u);)c-=1}return s.slice(0,c)}async function ose(t,e){var l;let{allowPartial:r=!1,includeSystem:n=!1,endOn:i,startOn:o,...a}=e,s=t.map(d=>{let f=Object.fromEntries(Object.entries(d).filter(([m])=>m!=="type"&&!m.startsWith("lc_")));return f1(d.getType(),f,zf(d))});if(i){let d=Array.isArray(i)?i:[i];for(;s.length>0&&!pw(s[s.length-1],d);)s=s.slice(0,-1)}let c=n&&((l=s[0])==null?void 0:l.getType())==="system",u=c?s.slice(0,1).concat(s.slice(1).reverse()):s.reverse();return u=await b5(u,{...a,partialStrategy:r?"last":void 0,endOn:o}),c?[u[0],...u.slice(1).reverse()]:u.reverse()}var g5={human:{message:zn,messageChunk:Ua},ai:{message:Qt,messageChunk:Sr},system:{message:fn,messageChunk:Pi},developer:{message:fn,messageChunk:Pi},tool:{message:Wr,messageChunk:nu},function:{message:$c,messageChunk:La},generic:{message:Ri,messageChunk:Da},remove:{message:Rc,messageChunk:Rc}};function f1(t,e,r){var o;let n,i;switch(t){case"human":r?n=new Ua(e):i=new zn(e);break;case"ai":if(r){let a={...e};"tool_calls"in a&&(a={...a,tool_call_chunks:(o=a.tool_calls)==null?void 0:o.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),n=new Sr(a)}else i=new Qt(e);break;case"system":r?n=new Pi(e):i=new fn(e);break;case"developer":r?n=new Pi({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}}):i=new fn({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in e)r?n=new nu(e):i=new Wr(e);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(r)n=new La(e);else{if(!e.name)throw new Error("FunctionMessage must have a 'name' field");i=new $c(e)}break;case"generic":if("role"in e)r?n=new Da(e):i=new Ri(e);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${t}`)}if(r&&n)return n;if(i)return i;throw new Error(`Unrecognized message type ${t}`)}function ase(t){let e=t.getType(),r,n=Object.fromEntries(Object.entries(t).filter(([i])=>!["type","tool_call_chunks"].includes(i)&&!i.startsWith("lc_")));if(e in g5&&(r=f1(e,n)),!r)throw new Error(`Unrecognized message chunk class ${e}. Supported classes are ${Object.keys(g5)}`);return r}function m1(t){let e=t.split(`
`);return Promise.resolve([...e.slice(0,-1).map(r=>`${r}
`),e[e.length-1]])}var x5=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"];var w5=["image","video","audio","text-plain","file"];var S5=["text","reasoning",...x5,...w5];var sse={};le(sse,{AIMessage:()=>Qt,AIMessageChunk:()=>Sr,BaseMessage:()=>Fr,BaseMessageChunk:()=>dn,ChatMessage:()=>Ri,ChatMessageChunk:()=>Da,FunctionMessage:()=>$c,FunctionMessageChunk:()=>La,HumanMessage:()=>zn,HumanMessageChunk:()=>Ua,KNOWN_BLOCK_TYPES:()=>S5,RemoveMessage:()=>Rc,SystemMessage:()=>fn,SystemMessageChunk:()=>Pi,ToolMessage:()=>Wr,ToolMessageChunk:()=>nu,_isMessageFieldWithRole:()=>Hv,_mergeDicts:()=>Bt,_mergeLists:()=>kc,_mergeObj:()=>Gv,_mergeStatus:()=>qv,coerceMessageLikeToMessage:()=>au,collapseToolCallChunks:()=>Xv,convertToChunk:()=>Mc,convertToOpenAIImageBlock:()=>jv,convertToProviderContentBlock:()=>Mf,defaultTextSplitter:()=>m1,defaultToolCallParser:()=>yh,filterMessages:()=>y5,getBufferString:()=>Lf,iife:()=>Qv,isAIMessage:()=>ou,isAIMessageChunk:()=>vh,isBase64ContentBlock:()=>Pf,isBaseMessage:()=>si,isBaseMessageChunk:()=>zf,isChatMessage:()=>Ej,isChatMessageChunk:()=>Oj,isDataContentBlock:()=>Pn,isDirectToolOutput:()=>gh,isFunctionMessage:()=>Ij,isFunctionMessageChunk:()=>Nj,isHumanMessage:()=>Cj,isHumanMessageChunk:()=>kj,isIDContentBlock:()=>Uv,isMessage:()=>Fv,isOpenAIToolCallArray:()=>wj,isPlainTextContentBlock:()=>WU,isSystemMessage:()=>$j,isSystemMessageChunk:()=>Rj,isToolMessage:()=>yE,isToolMessageChunk:()=>_E,isURLContentBlock:()=>Rf,mapChatMessagesToStoredMessages:()=>Zj,mapStoredMessageToChatMessage:()=>bh,mapStoredMessagesToChatMessages:()=>Bj,mergeContent:()=>Jr,mergeMessageRuns:()=>_5,mergeResponseMetadata:()=>Kv,mergeUsageMetadata:()=>Jv,parseBase64DataUrl:()=>ru,parseMimeType:()=>hh,trimMessages:()=>v5});var Wa=t=>t();function Ya(t){return t?!!(/^o\d/.test(t!=null?t:"")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")):!1}function use(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function ym(t){var r,n,i,o,a;let e=(a=(i=(r=t.metadata)==null?void 0:r.filename)!=null?i:(n=t.metadata)==null?void 0:n.name)!=null?a:(o=t.metadata)==null?void 0:o.title;if(!e)throw new Error("a filename or name or title is needed via meta-data for OpenAI when working with multimodal blocks");return e}function Xa(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!Ri.isInstance(t))throw new Error("Invalid generic chat message");return use(t);default:throw new Error(`Unknown message type: ${e}`)}}function A5(t){return t.includes("gpt-5.2-pro")}function ku(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:o,azureADTokenProvider:a,azureOpenAIEndpoint:s}=t;if((n||a)&&i&&e)return`${i}/${e}`;if((n||a)&&s&&e)return`${s}/openai/deployments/${e}`;if(n||a){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return o}function p1(t){return typeof Headers!="undefined"&&t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Headers]"}function T5(t){let e=Wa(()=>{if(p1(t))return t;if(Array.isArray(t))return new Headers(t);if(typeof t=="object"&&t!==null&&"values"in t&&p1(t.values))return t.values;if(typeof t=="object"&&t!==null){let r=Object.entries(t).filter(([,n])=>typeof n=="string").map(([n,i])=>[n,i]);return new Headers(r)}return new Headers});return Object.fromEntries(e.entries())}function E5(){let t=tb();return(t==="node"||t==="deno")&&(t=`(${t}/${process.version}; ${process.platform}; ${process.arch})`),t}function $u(t,e=!1,r="1.0.0"){let n=T5(t),i=E5(),o=`langchainjs${e?"-azure":""}-openai`;return{...n,"User-Agent":n["User-Agent"]?`${o}/${r} (${i})${n["User-Agent"]}`:`${o}/${r} (${i})`}}function $g(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function Rg(t){return t!==void 0&&xt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function Pg(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(xn(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function hl(t){return Pg(t)||Rg(t)||$g(t)}var cse={};le(cse,{convertToOpenAIFunction:()=>O5,convertToOpenAITool:()=>h1,isLangChainTool:()=>hl,isRunnableToolLike:()=>Rg,isStructuredTool:()=>$g,isStructuredToolParams:()=>Pg});function O5(t,e){let r=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:Vr(t.schema),...(r==null?void 0:r.strict)!==void 0?{strict:r.strict}:{}}}function h1(t,e){let r=typeof e=="number"?void 0:e,n;return hl(t)?n={type:"function",function:O5(t)}:n=t,(r==null?void 0:r.strict)!==void 0&&(n.function.strict=r.strict),n}var lse={};le(lse,{extendInteropZodObject:()=>tZ,getInteropZodDefaultGetter:()=>nZ,getInteropZodObjectShape:()=>Hx,getSchemaDescription:()=>Su,interopParse:()=>X9,interopParseAsync:()=>wu,interopSafeParse:()=>Y9,interopSafeParseAsync:()=>Jx,interopZodObjectMakeFieldsOptional:()=>iZ,interopZodObjectPartial:()=>rZ,interopZodObjectPassthrough:()=>Kx,interopZodObjectStrict:()=>am,interopZodTransformInputSchema:()=>Yx,isInteropZodError:()=>Xx,isInteropZodLiteral:()=>W9,isInteropZodObject:()=>eZ,isInteropZodSchema:()=>xn,isShapelessZodSchema:()=>Q9,isSimpleStringZodSchema:()=>sm,isZodArrayV4:()=>Tg,isZodLiteralV3:()=>JC,isZodLiteralV4:()=>WC,isZodNullableV4:()=>XC,isZodObjectV3:()=>Wx,isZodObjectV4:()=>Bi,isZodOptionalV4:()=>YC,isZodSchema:()=>J9,isZodSchemaV3:()=>Gt,isZodSchemaV4:()=>Tt});function I5(t,e){let r;return hl(t)?r=h1(t):r=t,(e==null?void 0:e.strict)!==void 0&&(r.function.strict=e.strict),r}function dse(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function N5(t){var r;let e=["namespace functions {",""];for(let n of t)n.description&&e.push(`// ${n.description}`),Object.keys((r=n.parameters.properties)!=null?r:{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(C5(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function C5(t,e){var n,i;let r=[];for(let[o,a]of Object.entries((n=t.properties)!=null?n:{}))a.description&&e<2&&r.push(`// ${a.description}`),(i=t.required)!=null&&i.includes(o)?r.push(`${o}: ${hw(a,e)},`):r.push(`${o}?: ${hw(a,e)},`);return r.map(o=>" ".repeat(e)+o).join(`
`)}function hw(t,e){if(dse(t))return t.anyOf.map(r=>hw(r,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(r=>`"${r}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(r=>`${r}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",C5(t,e+2),"}"].join(`
`);case"array":return t.items?`${hw(t.items,e)}[]`:"any[]";default:return""}}function gw(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function _m(t){return"type"in t&&t.type!=="function"}function k5(t){return typeof t=="object"&&t!==null&&"extras"in t&&typeof t.extras=="object"&&t.extras!==null&&"providerToolDefinition"in t.extras&&typeof t.extras.providerToolDefinition=="object"&&t.extras.providerToolDefinition!==null}function $5(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function gl(t){return typeof t=="object"&&t!==null&&"metadata"in t&&typeof t.metadata=="object"&&t.metadata!==null&&"customTool"in t.metadata&&typeof t.metadata.customTool=="object"&&t.metadata.customTool!==null}function yw(t){return"type"in t&&t.type==="custom"&&"custom"in t&&typeof t.custom=="object"&&t.custom!==null}function R5(t){if(t.type==="custom_tool_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:t.name,isCustomTool:!0,args:{input:t.input}}}function P5(t){if(t.type==="computer_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:"computer_use",isComputerTool:!0,args:{action:t.action}}}function M5(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="tool_call"&&"isComputerTool"in t&&t.isComputerTool===!0}function z5(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="tool_call"&&"isCustomTool"in t&&t.isCustomTool===!0}function D5(t){let e=()=>{if(t.custom.format){if(t.custom.format.type==="grammar")return{type:"grammar",definition:t.custom.format.grammar.definition,syntax:t.custom.format.grammar.syntax};if(t.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:t.custom.name,description:t.custom.description,format:e()}}function L5(t){let e=()=>{if(t.format){if(t.format.type==="grammar")return{type:"grammar",grammar:{definition:t.format.definition,syntax:t.format.syntax}};if(t.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:t.name,description:t.description,format:e()}}}var re={};na(re,{$brand:()=>ex,$input:()=>oC,$output:()=>iC,NEVER:()=>ZO,TimePrecision:()=>cC,ZodAny:()=>K5,ZodArray:()=>X5,ZodBase64:()=>H1,ZodBase64URL:()=>K1,ZodBigInt:()=>Fg,ZodBigIntFormat:()=>Y1,ZodBoolean:()=>jg,ZodCIDRv4:()=>q1,ZodCIDRv6:()=>G1,ZodCUID:()=>L1,ZodCUID2:()=>U1,ZodCatch:()=>y8,ZodCodec:()=>sk,ZodCustom:()=>Cw,ZodCustomStringFormat:()=>Lg,ZodDate:()=>Ow,ZodDefault:()=>d8,ZodDiscriminatedUnion:()=>Q5,ZodE164:()=>J1,ZodEmail:()=>M1,ZodEmoji:()=>z1,ZodEnum:()=>zg,ZodError:()=>mse,ZodFile:()=>u8,ZodFirstPartyTypeKind:()=>uk,ZodFunction:()=>E8,ZodGUID:()=>ww,ZodIPv4:()=>Z1,ZodIPv6:()=>V1,ZodISODate:()=>vw,ZodISODateTime:()=>_w,ZodISODuration:()=>xw,ZodISOTime:()=>bw,ZodIntersection:()=>e8,ZodIssueCode:()=>Oue,ZodJWT:()=>W1,ZodKSUID:()=>B1,ZodLazy:()=>S8,ZodLiteral:()=>s8,ZodMAC:()=>F5,ZodMap:()=>o8,ZodNaN:()=>v8,ZodNanoID:()=>D1,ZodNever:()=>W5,ZodNonOptional:()=>ok,ZodNull:()=>G5,ZodNullable:()=>l8,ZodNumber:()=>Ug,ZodNumberFormat:()=>bm,ZodObject:()=>Nw,ZodOptional:()=>ik,ZodPipe:()=>ak,ZodPrefault:()=>m8,ZodPromise:()=>T8,ZodReadonly:()=>b8,ZodRealError:()=>Vn,ZodRecord:()=>tk,ZodSet:()=>a8,ZodString:()=>Dg,ZodStringFormat:()=>Et,ZodSuccess:()=>g8,ZodSymbol:()=>V5,ZodTemplateLiteral:()=>w8,ZodTransform:()=>c8,ZodTuple:()=>r8,ZodType:()=>Ze,ZodULID:()=>j1,ZodURL:()=>Ew,ZodUUID:()=>Qa,ZodUndefined:()=>q5,ZodUnion:()=>Q1,ZodUnknown:()=>J5,ZodVoid:()=>Y5,ZodXID:()=>F1,_ZodString:()=>P1,_default:()=>f8,_function:()=>_ue,any:()=>Xse,array:()=>Iw,base64:()=>Mse,base64url:()=>zse,bigint:()=>Hse,boolean:()=>Z5,catch:()=>_8,check:()=>vue,cidrv4:()=>Rse,cidrv6:()=>Pse,clone:()=>zt,codec:()=>hue,coerce:()=>kw,config:()=>ur,core:()=>Ko,cuid:()=>Tse,cuid2:()=>Ese,custom:()=>bue,date:()=>eue,decode:()=>T1,decodeAsync:()=>O1,describe:()=>xue,discriminatedUnion:()=>oue,e164:()=>Dse,email:()=>hse,emoji:()=>Sse,encode:()=>A1,encodeAsync:()=>E1,endsWith:()=>yg,enum:()=>rk,file:()=>due,flattenError:()=>Wh,float32:()=>Zse,float64:()=>Vse,formatError:()=>Yh,function:()=>_ue,getErrorMap:()=>Nue,globalRegistry:()=>ht,gt:()=>qa,gte:()=>jn,guid:()=>gse,hash:()=>Bse,hex:()=>Fse,hostname:()=>jse,httpUrl:()=>wse,includes:()=>hg,instanceof:()=>Sue,int:()=>R1,int32:()=>qse,int64:()=>Kse,intersection:()=>t8,ipv4:()=>Cse,ipv6:()=>$se,iso:()=>Mg,json:()=>Tue,jwt:()=>Lse,keyof:()=>tue,ksuid:()=>Nse,lazy:()=>A8,length:()=>im,literal:()=>lue,locales:()=>Jc,looseObject:()=>iue,lowercase:()=>mg,lt:()=>Va,lte:()=>Fi,mac:()=>kse,map:()=>sue,maxLength:()=>nm,maxSize:()=>rm,meta:()=>wue,mime:()=>_g,minLength:()=>bu,minSize:()=>Yc,multipleOf:()=>Wc,nan:()=>pue,nanoid:()=>Ase,nativeEnum:()=>cue,negative:()=>zC,never:()=>X1,nonnegative:()=>LC,nonoptional:()=>h8,nonpositive:()=>DC,normalize:()=>vg,null:()=>H5,nullable:()=>Aw,nullish:()=>fue,number:()=>B5,object:()=>rue,optional:()=>Sw,overwrite:()=>Ho,parse:()=>b1,parseAsync:()=>x1,partialRecord:()=>aue,pipe:()=>Tw,positive:()=>MC,prefault:()=>p8,preprocess:()=>Eue,prettifyError:()=>tI,promise:()=>yue,property:()=>UC,readonly:()=>x8,record:()=>i8,refine:()=>O8,regex:()=>fg,regexes:()=>fi,registry:()=>Ex,safeDecode:()=>N1,safeDecodeAsync:()=>k1,safeEncode:()=>I1,safeEncodeAsync:()=>C1,safeParse:()=>w1,safeParseAsync:()=>S1,set:()=>uue,setErrorMap:()=>Iue,size:()=>dg,slugify:()=>Sg,startsWith:()=>gg,strictObject:()=>nue,string:()=>$1,stringFormat:()=>Use,stringbool:()=>Aue,success:()=>mue,superRefine:()=>I8,symbol:()=>Wse,templateLiteral:()=>gue,toJSONSchema:()=>xu,toLowerCase:()=>xg,toUpperCase:()=>wg,transform:()=>nk,treeifyError:()=>eI,trim:()=>bg,tuple:()=>n8,uint32:()=>Gse,uint64:()=>Jse,ulid:()=>Ose,undefined:()=>Yse,union:()=>ek,unknown:()=>vm,uppercase:()=>pg,url:()=>xse,util:()=>Y,uuid:()=>yse,uuidv4:()=>_se,uuidv6:()=>vse,uuidv7:()=>bse,void:()=>Qse,xid:()=>Ise});var Mg={};na(Mg,{ZodISODate:()=>vw,ZodISODateTime:()=>_w,ZodISODuration:()=>xw,ZodISOTime:()=>bw,date:()=>y1,datetime:()=>g1,duration:()=>v1,time:()=>_1});var _w=P("ZodISODateTime",(t,e)=>{lN.init(t,e),Et.init(t,e)});function g1(t){return lC(_w,t)}var vw=P("ZodISODate",(t,e)=>{dN.init(t,e),Et.init(t,e)});function y1(t){return dC(vw,t)}var bw=P("ZodISOTime",(t,e)=>{fN.init(t,e),Et.init(t,e)});function _1(t){return fC(bw,t)}var xw=P("ZodISODuration",(t,e)=>{mN.init(t,e),Et.init(t,e)});function v1(t){return mC(xw,t)}var j5=(t,e)=>{Jh.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>Yh(t,r)},flatten:{value:r=>Wh(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,Gf,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,Gf,2)}},isEmpty:{get(){return t.issues.length===0}}})},mse=P("ZodError",j5),Vn=P("ZodError",j5,{Parent:Error});var b1=Jf(Vn),x1=Wf(Vn),w1=Yf(Vn),S1=Xf(Vn),A1=nx(Vn),T1=ix(Vn),E1=ox(Vn),O1=ax(Vn),I1=sx(Vn),N1=ux(Vn),C1=cx(Vn),k1=lx(Vn);var Ze=P("ZodType",(t,e)=>(Pe.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>{var n;return t.clone(Y.mergeDefs(e,{checks:[...(n=e.checks)!=null?n:[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}))},t.clone=(r,n)=>zt(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>b1(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>w1(t,r,n),t.parseAsync=async(r,n)=>x1(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>S1(t,r,n),t.spa=t.safeParseAsync,t.encode=(r,n)=>A1(t,r,n),t.decode=(r,n)=>T1(t,r,n),t.encodeAsync=async(r,n)=>E1(t,r,n),t.decodeAsync=async(r,n)=>O1(t,r,n),t.safeEncode=(r,n)=>I1(t,r,n),t.safeDecode=(r,n)=>N1(t,r,n),t.safeEncodeAsync=async(r,n)=>C1(t,r,n),t.safeDecodeAsync=async(r,n)=>k1(t,r,n),t.refine=(r,n)=>t.check(O8(r,n)),t.superRefine=r=>t.check(I8(r)),t.overwrite=r=>t.check(Ho(r)),t.optional=()=>Sw(t),t.nullable=()=>Aw(t),t.nullish=()=>Sw(Aw(t)),t.nonoptional=r=>h8(t,r),t.array=()=>Iw(t),t.or=r=>ek([t,r]),t.and=r=>t8(t,r),t.transform=r=>Tw(t,nk(r)),t.default=r=>f8(t,r),t.prefault=r=>p8(t,r),t.catch=r=>_8(t,r),t.pipe=r=>Tw(t,r),t.readonly=()=>x8(t),t.describe=r=>{let n=t.clone();return ht.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){var r;return(r=ht.get(t))==null?void 0:r.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return ht.get(t);let n=t.clone();return ht.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),P1=P("_ZodString",(t,e)=>{var n,i,o;Kc.init(t,e),Ze.init(t,e);let r=t._zod.bag;t.format=(n=r.format)!=null?n:null,t.minLength=(i=r.minimum)!=null?i:null,t.maxLength=(o=r.maximum)!=null?o:null,t.regex=(...a)=>t.check(fg(...a)),t.includes=(...a)=>t.check(hg(...a)),t.startsWith=(...a)=>t.check(gg(...a)),t.endsWith=(...a)=>t.check(yg(...a)),t.min=(...a)=>t.check(bu(...a)),t.max=(...a)=>t.check(nm(...a)),t.length=(...a)=>t.check(im(...a)),t.nonempty=(...a)=>t.check(bu(1,...a)),t.lowercase=a=>t.check(mg(a)),t.uppercase=a=>t.check(pg(a)),t.trim=()=>t.check(bg()),t.normalize=(...a)=>t.check(vg(...a)),t.toLowerCase=()=>t.check(xg()),t.toUpperCase=()=>t.check(wg()),t.slugify=()=>t.check(Sg())}),Dg=P("ZodString",(t,e)=>{Kc.init(t,e),P1.init(t,e),t.email=r=>t.check(Ox(M1,r)),t.url=r=>t.check(ug(Ew,r)),t.jwt=r=>t.check(Gx(W1,r)),t.emoji=r=>t.check($x(z1,r)),t.guid=r=>t.check(sg(ww,r)),t.uuid=r=>t.check(Ix(Qa,r)),t.uuidv4=r=>t.check(Nx(Qa,r)),t.uuidv6=r=>t.check(Cx(Qa,r)),t.uuidv7=r=>t.check(kx(Qa,r)),t.nanoid=r=>t.check(Rx(D1,r)),t.guid=r=>t.check(sg(ww,r)),t.cuid=r=>t.check(Px(L1,r)),t.cuid2=r=>t.check(Mx(U1,r)),t.ulid=r=>t.check(zx(j1,r)),t.base64=r=>t.check(Zx(H1,r)),t.base64url=r=>t.check(Vx(K1,r)),t.xid=r=>t.check(Dx(F1,r)),t.ksuid=r=>t.check(Lx(B1,r)),t.ipv4=r=>t.check(Ux(Z1,r)),t.ipv6=r=>t.check(jx(V1,r)),t.cidrv4=r=>t.check(Fx(q1,r)),t.cidrv6=r=>t.check(Bx(G1,r)),t.e164=r=>t.check(qx(J1,r)),t.datetime=r=>t.check(g1(r)),t.date=r=>t.check(y1(r)),t.time=r=>t.check(_1(r)),t.duration=r=>t.check(v1(r))});function $1(t){return aC(Dg,t)}var Et=P("ZodStringFormat",(t,e)=>{bt.init(t,e),P1.init(t,e)}),M1=P("ZodEmail",(t,e)=>{tN.init(t,e),Et.init(t,e)});function hse(t){return Ox(M1,t)}var ww=P("ZodGUID",(t,e)=>{QI.init(t,e),Et.init(t,e)});function gse(t){return sg(ww,t)}var Qa=P("ZodUUID",(t,e)=>{eN.init(t,e),Et.init(t,e)});function yse(t){return Ix(Qa,t)}function _se(t){return Nx(Qa,t)}function vse(t){return Cx(Qa,t)}function bse(t){return kx(Qa,t)}var Ew=P("ZodURL",(t,e)=>{rN.init(t,e),Et.init(t,e)});function xse(t){return ug(Ew,t)}function wse(t){return ug(Ew,{protocol:/^https?$/,hostname:fi.domain,...Y.normalizeParams(t)})}var z1=P("ZodEmoji",(t,e)=>{nN.init(t,e),Et.init(t,e)});function Sse(t){return $x(z1,t)}var D1=P("ZodNanoID",(t,e)=>{iN.init(t,e),Et.init(t,e)});function Ase(t){return Rx(D1,t)}var L1=P("ZodCUID",(t,e)=>{oN.init(t,e),Et.init(t,e)});function Tse(t){return Px(L1,t)}var U1=P("ZodCUID2",(t,e)=>{aN.init(t,e),Et.init(t,e)});function Ese(t){return Mx(U1,t)}var j1=P("ZodULID",(t,e)=>{sN.init(t,e),Et.init(t,e)});function Ose(t){return zx(j1,t)}var F1=P("ZodXID",(t,e)=>{uN.init(t,e),Et.init(t,e)});function Ise(t){return Dx(F1,t)}var B1=P("ZodKSUID",(t,e)=>{cN.init(t,e),Et.init(t,e)});function Nse(t){return Lx(B1,t)}var Z1=P("ZodIPv4",(t,e)=>{pN.init(t,e),Et.init(t,e)});function Cse(t){return Ux(Z1,t)}var F5=P("ZodMAC",(t,e)=>{gN.init(t,e),Et.init(t,e)});function kse(t){return uC(F5,t)}var V1=P("ZodIPv6",(t,e)=>{hN.init(t,e),Et.init(t,e)});function $se(t){return jx(V1,t)}var q1=P("ZodCIDRv4",(t,e)=>{yN.init(t,e),Et.init(t,e)});function Rse(t){return Fx(q1,t)}var G1=P("ZodCIDRv6",(t,e)=>{_N.init(t,e),Et.init(t,e)});function Pse(t){return Bx(G1,t)}var H1=P("ZodBase64",(t,e)=>{bN.init(t,e),Et.init(t,e)});function Mse(t){return Zx(H1,t)}var K1=P("ZodBase64URL",(t,e)=>{xN.init(t,e),Et.init(t,e)});function zse(t){return Vx(K1,t)}var J1=P("ZodE164",(t,e)=>{wN.init(t,e),Et.init(t,e)});function Dse(t){return qx(J1,t)}var W1=P("ZodJWT",(t,e)=>{SN.init(t,e),Et.init(t,e)});function Lse(t){return Gx(W1,t)}var Lg=P("ZodCustomStringFormat",(t,e)=>{AN.init(t,e),Et.init(t,e)});function Use(t,e,r={}){return om(Lg,t,e,r)}function jse(t){return om(Lg,"hostname",fi.hostname,t)}function Fse(t){return om(Lg,"hex",fi.hex,t)}function Bse(t,e){var o;let r=(o=e==null?void 0:e.enc)!=null?o:"hex",n=`${t}_${r}`,i=fi[n];if(!i)throw new Error(`Unrecognized hash format: ${n}`);return om(Lg,n,i,e)}var Ug=P("ZodNumber",(t,e)=>{var n,i,o,a,s,c,u,l,d;vx.init(t,e),Ze.init(t,e),t.gt=(f,m)=>t.check(qa(f,m)),t.gte=(f,m)=>t.check(jn(f,m)),t.min=(f,m)=>t.check(jn(f,m)),t.lt=(f,m)=>t.check(Va(f,m)),t.lte=(f,m)=>t.check(Fi(f,m)),t.max=(f,m)=>t.check(Fi(f,m)),t.int=f=>t.check(R1(f)),t.safe=f=>t.check(R1(f)),t.positive=f=>t.check(qa(0,f)),t.nonnegative=f=>t.check(jn(0,f)),t.negative=f=>t.check(Va(0,f)),t.nonpositive=f=>t.check(Fi(0,f)),t.multipleOf=(f,m)=>t.check(Wc(f,m)),t.step=(f,m)=>t.check(Wc(f,m)),t.finite=()=>t;let r=t._zod.bag;t.minValue=(o=Math.max((n=r.minimum)!=null?n:Number.NEGATIVE_INFINITY,(i=r.exclusiveMinimum)!=null?i:Number.NEGATIVE_INFINITY))!=null?o:null,t.maxValue=(c=Math.min((a=r.maximum)!=null?a:Number.POSITIVE_INFINITY,(s=r.exclusiveMaximum)!=null?s:Number.POSITIVE_INFINITY))!=null?c:null,t.isInt=((u=r.format)!=null?u:"").includes("int")||Number.isSafeInteger((l=r.multipleOf)!=null?l:.5),t.isFinite=!0,t.format=(d=r.format)!=null?d:null});function B5(t){return pC(Ug,t)}var bm=P("ZodNumberFormat",(t,e)=>{TN.init(t,e),Ug.init(t,e)});function R1(t){return gC(bm,t)}function Zse(t){return yC(bm,t)}function Vse(t){return _C(bm,t)}function qse(t){return vC(bm,t)}function Gse(t){return bC(bm,t)}var jg=P("ZodBoolean",(t,e)=>{tg.init(t,e),Ze.init(t,e)});function Z5(t){return xC(jg,t)}var Fg=P("ZodBigInt",(t,e)=>{var n,i,o;bx.init(t,e),Ze.init(t,e),t.gte=(a,s)=>t.check(jn(a,s)),t.min=(a,s)=>t.check(jn(a,s)),t.gt=(a,s)=>t.check(qa(a,s)),t.gte=(a,s)=>t.check(jn(a,s)),t.min=(a,s)=>t.check(jn(a,s)),t.lt=(a,s)=>t.check(Va(a,s)),t.lte=(a,s)=>t.check(Fi(a,s)),t.max=(a,s)=>t.check(Fi(a,s)),t.positive=a=>t.check(qa(BigInt(0),a)),t.negative=a=>t.check(Va(BigInt(0),a)),t.nonpositive=a=>t.check(Fi(BigInt(0),a)),t.nonnegative=a=>t.check(jn(BigInt(0),a)),t.multipleOf=(a,s)=>t.check(Wc(a,s));let r=t._zod.bag;t.minValue=(n=r.minimum)!=null?n:null,t.maxValue=(i=r.maximum)!=null?i:null,t.format=(o=r.format)!=null?o:null});function Hse(t){return SC(Fg,t)}var Y1=P("ZodBigIntFormat",(t,e)=>{EN.init(t,e),Fg.init(t,e)});function Kse(t){return TC(Y1,t)}function Jse(t){return EC(Y1,t)}var V5=P("ZodSymbol",(t,e)=>{ON.init(t,e),Ze.init(t,e)});function Wse(t){return OC(V5,t)}var q5=P("ZodUndefined",(t,e)=>{IN.init(t,e),Ze.init(t,e)});function Yse(t){return IC(q5,t)}var G5=P("ZodNull",(t,e)=>{NN.init(t,e),Ze.init(t,e)});function H5(t){return NC(G5,t)}var K5=P("ZodAny",(t,e)=>{CN.init(t,e),Ze.init(t,e)});function Xse(){return CC(K5)}var J5=P("ZodUnknown",(t,e)=>{rg.init(t,e),Ze.init(t,e)});function vm(){return cg(J5)}var W5=P("ZodNever",(t,e)=>{ng.init(t,e),Ze.init(t,e)});function X1(t){return lg(W5,t)}var Y5=P("ZodVoid",(t,e)=>{kN.init(t,e),Ze.init(t,e)});function Qse(t){return kC(Y5,t)}var Ow=P("ZodDate",(t,e)=>{$N.init(t,e),Ze.init(t,e),t.min=(n,i)=>t.check(jn(n,i)),t.max=(n,i)=>t.check(Fi(n,i));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});function eue(t){return $C(Ow,t)}var X5=P("ZodArray",(t,e)=>{RN.init(t,e),Ze.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(bu(r,n)),t.nonempty=r=>t.check(bu(1,r)),t.max=(r,n)=>t.check(nm(r,n)),t.length=(r,n)=>t.check(im(r,n)),t.unwrap=()=>t.element});function Iw(t,e){return jC(X5,t,e)}function tue(t){let e=t._zod.def.shape;return rk(Object.keys(e))}var Nw=P("ZodObject",(t,e)=>{PN.init(t,e),Ze.init(t,e),Y.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>rk(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:vm()}),t.loose=()=>t.clone({...t._zod.def,catchall:vm()}),t.strict=()=>t.clone({...t._zod.def,catchall:X1()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>Y.extend(t,r),t.safeExtend=r=>Y.safeExtend(t,r),t.merge=r=>Y.merge(t,r),t.pick=r=>Y.pick(t,r),t.omit=r=>Y.omit(t,r),t.partial=(...r)=>Y.partial(ik,t,r[0]),t.required=(...r)=>Y.required(ok,t,r[0])});function rue(t,e){let r={type:"object",shape:t!=null?t:{},...Y.normalizeParams(e)};return new Nw(r)}function nue(t,e){return new Nw({type:"object",shape:t,catchall:X1(),...Y.normalizeParams(e)})}function iue(t,e){return new Nw({type:"object",shape:t,catchall:vm(),...Y.normalizeParams(e)})}var Q1=P("ZodUnion",(t,e)=>{xx.init(t,e),Ze.init(t,e),t.options=e.options});function ek(t,e){return new Q1({type:"union",options:t,...Y.normalizeParams(e)})}var Q5=P("ZodDiscriminatedUnion",(t,e)=>{Q1.init(t,e),MN.init(t,e)});function oue(t,e,r){return new Q5({type:"union",options:e,discriminator:t,...Y.normalizeParams(r)})}var e8=P("ZodIntersection",(t,e)=>{zN.init(t,e),Ze.init(t,e)});function t8(t,e){return new e8({type:"intersection",left:t,right:e})}var r8=P("ZodTuple",(t,e)=>{wx.init(t,e),Ze.init(t,e),t.rest=r=>t.clone({...t._zod.def,rest:r})});function n8(t,e,r){let n=e instanceof Pe,i=n?r:e,o=n?e:null;return new r8({type:"tuple",items:t,rest:o,...Y.normalizeParams(i)})}var tk=P("ZodRecord",(t,e)=>{DN.init(t,e),Ze.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function i8(t,e,r){return new tk({type:"record",keyType:t,valueType:e,...Y.normalizeParams(r)})}function aue(t,e,r){let n=zt(t);return n._zod.values=void 0,new tk({type:"record",keyType:n,valueType:e,...Y.normalizeParams(r)})}var o8=P("ZodMap",(t,e)=>{LN.init(t,e),Ze.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function sue(t,e,r){return new o8({type:"map",keyType:t,valueType:e,...Y.normalizeParams(r)})}var a8=P("ZodSet",(t,e)=>{UN.init(t,e),Ze.init(t,e),t.min=(...r)=>t.check(Yc(...r)),t.nonempty=r=>t.check(Yc(1,r)),t.max=(...r)=>t.check(rm(...r)),t.size=(...r)=>t.check(dg(...r))});function uue(t,e){return new a8({type:"set",valueType:t,...Y.normalizeParams(e)})}var zg=P("ZodEnum",(t,e)=>{jN.init(t,e),Ze.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(n,i)=>{let o={};for(let a of n)if(r.has(a))o[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new zg({...e,checks:[],...Y.normalizeParams(i),entries:o})},t.exclude=(n,i)=>{let o={...e.entries};for(let a of n)if(r.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new zg({...e,checks:[],...Y.normalizeParams(i),entries:o})}});function rk(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new zg({type:"enum",entries:r,...Y.normalizeParams(e)})}function cue(t,e){return new zg({type:"enum",entries:t,...Y.normalizeParams(e)})}var s8=P("ZodLiteral",(t,e)=>{FN.init(t,e),Ze.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function lue(t,e){return new s8({type:"literal",values:Array.isArray(t)?t:[t],...Y.normalizeParams(e)})}var u8=P("ZodFile",(t,e)=>{BN.init(t,e),Ze.init(t,e),t.min=(r,n)=>t.check(Yc(r,n)),t.max=(r,n)=>t.check(rm(r,n)),t.mime=(r,n)=>t.check(_g(Array.isArray(r)?r:[r],n))});function due(t){return FC(u8,t)}var c8=P("ZodTransform",(t,e)=>{ZN.init(t,e),Ze.init(t,e),t._zod.parse=(r,n)=>{if(n.direction==="backward")throw new pu(t.constructor.name);r.addIssue=o=>{var a,s,c;if(typeof o=="string")r.issues.push(Y.issue(o,r.value,e));else{let u=o;u.fatal&&(u.continue=!1),(a=u.code)!=null||(u.code="custom"),(s=u.input)!=null||(u.input=r.value),(c=u.inst)!=null||(u.inst=t),r.issues.push(Y.issue(u))}};let i=e.transform(r.value,r);return i instanceof Promise?i.then(o=>(r.value=o,r)):(r.value=i,r)}});function nk(t){return new c8({type:"transform",transform:t})}var ik=P("ZodOptional",(t,e)=>{em.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Sw(t){return new ik({type:"optional",innerType:t})}var l8=P("ZodNullable",(t,e)=>{VN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Aw(t){return new l8({type:"nullable",innerType:t})}function fue(t){return Sw(Aw(t))}var d8=P("ZodDefault",(t,e)=>{qN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function f8(t,e){return new d8({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Y.shallowClone(e)}})}var m8=P("ZodPrefault",(t,e)=>{GN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function p8(t,e){return new m8({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Y.shallowClone(e)}})}var ok=P("ZodNonOptional",(t,e)=>{HN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function h8(t,e){return new ok({type:"nonoptional",innerType:t,...Y.normalizeParams(e)})}var g8=P("ZodSuccess",(t,e)=>{KN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function mue(t){return new g8({type:"success",innerType:t})}var y8=P("ZodCatch",(t,e)=>{JN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function _8(t,e){return new y8({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}var v8=P("ZodNaN",(t,e)=>{WN.init(t,e),Ze.init(t,e)});function pue(t){return PC(v8,t)}var ak=P("ZodPipe",(t,e)=>{YN.init(t,e),Ze.init(t,e),t.in=e.in,t.out=e.out});function Tw(t,e){return new ak({type:"pipe",in:t,out:e})}var sk=P("ZodCodec",(t,e)=>{ak.init(t,e),ig.init(t,e)});function hue(t,e,r){return new sk({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}var b8=P("ZodReadonly",(t,e)=>{XN.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function x8(t){return new b8({type:"readonly",innerType:t})}var w8=P("ZodTemplateLiteral",(t,e)=>{QN.init(t,e),Ze.init(t,e)});function gue(t,e){return new w8({type:"template_literal",parts:t,...Y.normalizeParams(e)})}var S8=P("ZodLazy",(t,e)=>{rC.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.getter()});function A8(t){return new S8({type:"lazy",getter:t})}var T8=P("ZodPromise",(t,e)=>{tC.init(t,e),Ze.init(t,e),t.unwrap=()=>t._zod.def.innerType});function yue(t){return new T8({type:"promise",innerType:t})}var E8=P("ZodFunction",(t,e)=>{eC.init(t,e),Ze.init(t,e)});function _ue(t){var e,r;return new E8({type:"function",input:Array.isArray(t==null?void 0:t.input)?n8(t==null?void 0:t.input):(e=t==null?void 0:t.input)!=null?e:Iw(vm()),output:(r=t==null?void 0:t.output)!=null?r:vm()})}var Cw=P("ZodCustom",(t,e)=>{nC.init(t,e),Ze.init(t,e)});function vue(t){let e=new At({check:"custom"});return e._zod.check=t,e}function bue(t,e){return BC(Cw,t!=null?t:(()=>!0),e)}function O8(t,e={}){return ZC(Cw,t,e)}function I8(t){return VC(t)}var xue=qC,wue=GC;function Sue(t,e={error:`Input not instance of ${t.name}`}){let r=new Cw({type:"custom",check:"custom",fn:n=>n instanceof t,abort:!0,...Y.normalizeParams(e)});return r._zod.bag.Class=t,r}var Aue=(...t)=>HC({Codec:sk,Boolean:jg,String:Dg},...t);function Tue(t){let e=A8(()=>ek([$1(t),B5(),Z5(),H5(),Iw(e),i8($1(),e)]));return e}function Eue(t,e){return Tw(nk(t),e)}var Oue={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function Iue(t){ur({customError:t})}function Nue(){return ur().customError}var uk;uk||(uk={});var kw={};na(kw,{bigint:()=>Rue,boolean:()=>$ue,date:()=>Pue,number:()=>kue,string:()=>Cue});function Cue(t){return sC(Dg,t)}function kue(t){return hC(Ug,t)}function $ue(t){return wC(jg,t)}function Rue(t){return AC(Fg,t)}function Pue(t){return RC(Ow,t)}ur(Sx());var C8=Symbol("Let zodToJsonSchema decide on which parser to use"),N8={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},k8=t=>typeof t=="string"?{...N8,basePath:["#"],definitions:{},name:t}:{...N8,basePath:["#"],definitions:{},...t};var Bg=t=>"_def"in t?t._def:t;function $8(t){if(!t)return!0;for(let e in t)return!1;return!0}var R8=t=>{let e=k8(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[Bg(i),{def:Bg(i),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function ck(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function nt(t,e,r,n,i){t[e]=r,ck(t,e,n,i)}function P8(){return{}}function M8(t,e){var n,i;let r={type:"array"};return((i=(n=t.type)==null?void 0:n._def)==null?void 0:i.typeName)!==F.ZodAny&&(r.items=Oe(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&nt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&nt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(nt(r,"minItems",t.exactLength.value,t.exactLength.message,e),nt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function z8(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?nt(r,"minimum",n.value,n.message,e):nt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),nt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?nt(r,"maximum",n.value,n.message,e):nt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),nt(r,"maximum",n.value,n.message,e));break;case"multipleOf":nt(r,"multipleOf",n.value,n.message,e);break}return r}function D8(){return{type:"boolean"}}function L8(t,e){return Oe(t.type._def,e)}var U8=(t,e)=>Oe(t.innerType._def,e);function lk(t,e,r){let n=r!=null?r:e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,o)=>lk(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return zue(t,e)}}var zue=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":nt(r,"minimum",n.value,n.message,e);break;case"max":nt(r,"maximum",n.value,n.message,e);break}return r};function j8(t,e){return{...Oe(t.innerType._def,e),default:t.defaultValue()}}function F8(t,e,r){return e.effectStrategy==="input"?Oe(t.schema._def,e,r):{}}function B8(t){return{type:"string",enum:[...t.values]}}var Due=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Z8(t,e){let r=[Oe(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Oe(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(o=>{if(Due(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(n=void 0);else{let a=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:s,...c}=o;a=c}else n=void 0;i.push(a)}}),i.length?{allOf:i,...n}:void 0}function V8(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var dk,yl={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(dk===void 0&&(dk=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),dk),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function $w(t,e){let r={type:"string"};function n(i){return e.patternStrategy==="escape"?Lue(i):i}if(t.checks)for(let i of t.checks)switch(i.kind){case"min":nt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e);break;case"max":nt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":po(r,"email",i.message,e);break;case"format:idn-email":po(r,"idn-email",i.message,e);break;case"pattern:zod":ho(r,yl.email,i.message,e);break}break;case"url":po(r,"uri",i.message,e);break;case"uuid":po(r,"uuid",i.message,e);break;case"regex":ho(r,i.regex,i.message,e);break;case"cuid":ho(r,yl.cuid,i.message,e);break;case"cuid2":ho(r,yl.cuid2,i.message,e);break;case"startsWith":ho(r,RegExp(`^${n(i.value)}`),i.message,e);break;case"endsWith":ho(r,RegExp(`${n(i.value)}$`),i.message,e);break;case"datetime":po(r,"date-time",i.message,e);break;case"date":po(r,"date",i.message,e);break;case"time":po(r,"time",i.message,e);break;case"duration":po(r,"duration",i.message,e);break;case"length":nt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e),nt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"includes":{ho(r,RegExp(n(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&po(r,"ipv4",i.message,e),i.version!=="v4"&&po(r,"ipv6",i.message,e);break}case"emoji":ho(r,yl.emoji,i.message,e);break;case"ulid":{ho(r,yl.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{po(r,"binary",i.message,e);break}case"contentEncoding:base64":{nt(r,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{ho(r,yl.base64,i.message,e);break}}break}case"nanoid":ho(r,yl.nanoid,i.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}var Lue=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),po=(t,e,r,n)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):nt(t,"format",e,r,n)},ho=(t,e,r,n)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:q8(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):nt(t,"pattern",q8(e,n),r,n)},q8=(t,e)=>{var u;let r=typeof t=="function"?t():t;if(!e.applyRegexFlags||!r.flags)return r.source;let n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},i=n.i?r.source.toLowerCase():r.source,o="",a=!1,s=!1,c=!1;for(let l=0;l<i.length;l++){if(a){o+=i[l],a=!1;continue}if(n.i){if(s){if(i[l].match(/[a-z]/)){c?(o+=i[l],o+=`${i[l-2]}-${i[l]}`.toUpperCase(),c=!1):i[l+1]==="-"&&((u=i[l+2])!=null&&u.match(/[a-z]/))?(o+=i[l],c=!0):o+=`${i[l]}${i[l].toUpperCase()}`;continue}}else if(i[l].match(/[a-z]/)){o+=`[${i[l]}${i[l].toUpperCase()}]`;continue}}if(n.m){if(i[l]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(i[l]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&i[l]==="."){o+=s?`${i[l]}\r
`:`[${i[l]}\r
]`;continue}o+=i[l],i[l]==="\\"?a=!0:s&&i[l]==="]"?s=!1:!s&&i[l]==="["&&(s=!0)}try{let l=new RegExp(o)}catch(l){return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return o};function Rw(t,e){var n,i,o,a,s;if(e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===F.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,u)=>{var l;return{...c,[u]:(l=Oe(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]}))!=null?l:{}}},{}),additionalProperties:!1};let r={type:"object",additionalProperties:(i=Oe(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?i:{}};if(e.target==="openApi3")return r;if(((o=t.keyType)==null?void 0:o._def.typeName)===F.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let c=Object.entries($w(t.keyType._def,e)).reduce((u,[l,d])=>l==="type"?u:{...u,[l]:d},{});return{...r,propertyNames:c}}else if(((s=t.keyType)==null?void 0:s._def.typeName)===F.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};return r}function G8(t,e){if(e.mapStrategy==="record")return Rw(t,e);let r=Oe(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=Oe(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function H8(t){let e=t.values,n=Object.keys(t.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(n.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function K8(){return{not:{}}}function J8(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Zg={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Y8(t,e){if(e.target==="openApi3")return W8(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Zg&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,o)=>{let a=Zg[o._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,o)=>{let a=typeof o._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((o,a,s)=>s.indexOf(o)===a);return{type:i.length>1?i:i[0],enum:r.reduce((o,a)=>o.includes(a._def.value)?o:[...o,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(o=>!n.includes(o))],[])};return W8(t,e)}var W8=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>Oe(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function X8(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:Zg[t.innerType._def.typeName],nullable:!0}:{type:[Zg[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=Oe(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=Oe(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Q8(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",ck(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?nt(r,"minimum",n.value,n.message,e):nt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),nt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?nt(r,"maximum",n.value,n.message,e):nt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),nt(r,"maximum",n.value,n.message,e));break;case"multipleOf":nt(r,"multipleOf",n.value,n.message,e);break}return r}function Uue(t,e){var r,n;return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":(r=Oe(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(n=Oe(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?n:!0}function eV(t,e){let r={type:"object",...Object.entries(t.shape()).reduce((n,[i,o])=>{var c;if(o===void 0||o._def===void 0)return n;let a=[...e.currentPath,"properties",i],s=Oe(o._def,{...e,currentPath:a,propertyPath:a});if(s===void 0)return n;if(e.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&typeof((c=o._def)==null?void 0:c.defaultValue)=="undefined")throw new Error(`Zod field at \`${a.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...n.properties,[i]:s},required:o.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,i]}},{properties:{},required:[]}),additionalProperties:Uue(t,e)};return r.required.length||delete r.required,r}var tV=(t,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return Oe(t.innerType._def,{...e,currentPath:e.currentPath});let r=Oe(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var rV=(t,e)=>{if(e.pipeStrategy==="input")return Oe(t.in._def,e);if(e.pipeStrategy==="output")return Oe(t.out._def,e);let r=Oe(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=Oe(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function nV(t,e){return Oe(t.type._def,e)}function iV(t,e){let n={type:"array",uniqueItems:!0,items:Oe(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&nt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&nt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function oV(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>Oe(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Oe(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>Oe(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function aV(){return{not:{}}}function sV(){return{}}var uV=(t,e)=>Oe(t.innerType._def,e);function Oe(t,e,r=!1){var a;let n=e.seen.get(t);if(e.override){let s=(a=e.override)==null?void 0:a.call(e,t,e,n,r);if(s!==C8)return s}if(n&&!r){let s=jue(n,e);if(s!==void 0)return"$ref"in s&&e.seenRefs.add(s.$ref),s}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let o=Bue(t,t.typeName,e,r);return o&&Zue(t,e,o),i.jsonSchema=o,o}var jue=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":let r=t.path.slice(e.basePath.length+1).join("_");return r!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[r]=t.def),{$ref:[...e.basePath,e.definitionPath,r].join("/")};case"relative":return{$ref:Fue(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,i)=>e.currentPath[i]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Fue=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},Bue=(t,e,r,n)=>{switch(e){case F.ZodString:return $w(t,r);case F.ZodNumber:return Q8(t,r);case F.ZodObject:return eV(t,r);case F.ZodBigInt:return z8(t,r);case F.ZodBoolean:return D8();case F.ZodDate:return lk(t,r);case F.ZodUndefined:return aV();case F.ZodNull:return J8(r);case F.ZodArray:return M8(t,r);case F.ZodUnion:case F.ZodDiscriminatedUnion:return Y8(t,r);case F.ZodIntersection:return Z8(t,r);case F.ZodTuple:return oV(t,r);case F.ZodRecord:return Rw(t,r);case F.ZodLiteral:return V8(t,r);case F.ZodEnum:return B8(t);case F.ZodNativeEnum:return H8(t);case F.ZodNullable:return X8(t,r);case F.ZodOptional:return tV(t,r);case F.ZodMap:return G8(t,r);case F.ZodSet:return iV(t,r);case F.ZodLazy:return Oe(t.getter()._def,r);case F.ZodPromise:return nV(t,r);case F.ZodNaN:case F.ZodNever:return K8();case F.ZodEffects:return F8(t,r,n);case F.ZodAny:return P8();case F.ZodUnknown:return sV();case F.ZodDefault:return j8(t,r);case F.ZodBranded:return L8(t,r);case F.ZodReadonly:return uV(t,r);case F.ZodCatch:return U8(t,r);case F.ZodPipeline:return rV(t,r);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(i=>{})(e)}},Zue=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var fk=(t,e)=>{var c;let r=R8(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=(c=Oe(t._def,n===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1))!=null?c:{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);let a=(()=>{var d;if($8(r.definitions))return;let u={},l=new Set;for(let f=0;f<500;f++){let m=Object.entries(r.definitions).filter(([p])=>!l.has(p));if(m.length===0)break;for(let[p,b]of m)u[p]=(d=Oe(Bg(b),{...r,currentPath:[...r.basePath,r.definitionPath,p]},!0))!=null?d:{},l.add(p)}return u})(),s=n===void 0?a?{...i,[r.definitionPath]:a}:i:r.nameStrategy==="duplicate-ref"?{...i,...a||r.seenRefs.size?{[r.definitionPath]:{...a,...r.seenRefs.size?{[n]:i}:void 0}}:void 0}:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...a,[n]:i}};return r.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),s};function cV(t){if(t.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${t.type?`'${t.type}'`:"undefined"}`);let e=structuredClone(t);return es(e,[],e)}function mk(t){var e,r;if(typeof t=="boolean")return!1;if(t.type==="null")return!0;for(let n of(e=t.oneOf)!=null?e:[])if(mk(n))return!0;for(let n of(r=t.anyOf)!=null?r:[])if(mk(n))return!0;return!1}function es(t,e,r){var f;if(typeof t=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);if(!_l(t))throw new TypeError(`Expected ${JSON.stringify(t)} to be an object; path=${e.join("/")}`);let n=t.$defs;if(_l(n))for(let[m,p]of Object.entries(n))es(p,[...e,"$defs",m],r);let i=t.definitions;if(_l(i))for(let[m,p]of Object.entries(i))es(p,[...e,"definitions",m],r);t.type==="object"&&!("additionalProperties"in t)&&(t.additionalProperties=!1);let a=(f=t.required)!=null?f:[],s=t.properties;if(_l(s)){for(let[m,p]of Object.entries(s))if(!mk(p)&&!a.includes(m))throw new Error(`Zod field at \`${[...e,"properties",m].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);t.required=Object.keys(s),t.properties=Object.fromEntries(Object.entries(s).map(([m,p])=>[m,es(p,[...e,"properties",m],r)]))}let c=t.items;_l(c)&&(t.items=es(c,[...e,"items"],r));let u=t.anyOf;Array.isArray(u)&&(t.anyOf=u.map((m,p)=>es(m,[...e,"anyOf",String(p)],r)));let l=t.allOf;if(Array.isArray(l))if(l.length===1){let m=es(l[0],[...e,"allOf","0"],r);Object.assign(t,m),delete t.allOf}else t.allOf=l.map((m,p)=>es(m,[...e,"allOf",String(p)],r));t.default===null&&delete t.default;let d=t.$ref;if(d&&que(t,1)){if(typeof d!="string")throw new TypeError(`Received non-string $ref - ${d}; path=${e.join("/")}`);let m=Vue(r,d);if(typeof m=="boolean")throw new Error(`Expected \`$ref: ${d}\` to resolve to an object schema but got boolean`);if(!_l(m))throw new Error(`Expected \`$ref: ${d}\` to resolve to an object but got ${JSON.stringify(m)}`);return Object.assign(t,{...m,...t}),delete t.$ref,es(t,e,r)}return t}function Vue(t,e){if(!e.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);let r=e.slice(2).split("/"),n=t;for(let i of r){if(!_l(n))throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(n)}`);let o=n[i];if(o===void 0)throw new Error(`Key ${i} not found while resolving ${e}`);n=o}return n}function _l(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function que(t,e){let r=0;for(let n in t)if(r++,r>e)return!0;return!1}function Gue(t,e){return fk(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Hue(t){return cV(xu(t,{target:"draft-7"}))}function Kue(t){return"_zod"in t}function lV(t,e,r){return Tz({type:"json_schema",json_schema:{...r,name:e,strict:!0,schema:Kue(t)?Hue(t):Gue(t,{name:e})}},n=>t.parse(JSON.parse(n)))}var dV=["jsonSchema","functionCalling","jsonMode"];function fV(t,e){if(typeof e!="undefined"&&!dV.includes(e))throw new Error(`Invalid method: ${e}. Supported methods are: ${dV.join(", ")}`);let r=!t.startsWith("gpt-3")&&!t.startsWith("gpt-4-")&&t!=="gpt-4";if(r&&!e)return"jsonSchema";if(!r&&e==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${t}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return e!=null?e:"functionCalling"}function Jue(t,e){let r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),r}function mV(t,e,r){if(Gt(t))return lV(t,e,r);if(Tt(t))return Jue({type:"json_schema",json_schema:{...r,name:e,strict:!0,schema:Vr(t,{cycles:"ref",reused:"ref",override(n){n.jsonSchema.title=e}})}},n=>Go(t,JSON.parse(n)));throw new Error("Unsupported schema response format")}function pV(t,e){if(e&&typeof e=="object"&&"images"in e&&Array.isArray(e.images)){let r=e.images.filter(n=>{var i;return typeof((i=n==null?void 0:n.image_url)==null?void 0:i.url)=="string"}).map(n=>({type:"image",url:n.image_url.url}));return[{type:"text",text:t},...r]}return t}var Wue={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}},hV=Wue;var Yue={};le(Yue,{BasePromptValue:()=>Pw,ChatPromptValue:()=>hk,ImagePromptValue:()=>Xue,StringPromptValue:()=>pk});var Pw=class extends jo{},pk=class extends Pw{constructor(e){super({value:e});A(this,"lc_namespace",["langchain_core","prompt_values"]);A(this,"lc_serializable",!0);A(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new zn(this.value)]}},hk=class extends Pw{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);A(this,"lc_namespace",["langchain_core","prompt_values"]);A(this,"lc_serializable",!0);A(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return Lf(this.messages)}toChatMessages(){return this.messages}},Xue=class extends Pw{constructor(e){"imageUrl"in e||(e={imageUrl:e});super(e);A(this,"lc_namespace",["langchain_core","prompt_values"]);A(this,"lc_serializable",!0);A(this,"imageUrl");A(this,"value");this.imageUrl=e.imageUrl}static lc_name(){return"ImagePromptValue"}toString(){return this.imageUrl.url}toChatMessages(){return[new zn({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}};var pe="0123456789abcdef".split(""),Que=[-2147483648,8388608,32768,128],go=[24,16,8,0],Mw=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],$r=[];function yo(t,e){e?($r[0]=$r[16]=$r[1]=$r[2]=$r[3]=$r[4]=$r[5]=$r[6]=$r[7]=$r[8]=$r[9]=$r[10]=$r[11]=$r[12]=$r[13]=$r[14]=$r[15]=0,this.blocks=$r):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}yo.prototype.update=function(t){if(!this.finalized){var e,r=typeof t;if(r!=="string"){if(r==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,i=0,o,a=t.length,s=this.blocks;i<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,this.block=s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),e)for(o=this.start;i<a&&o<64;++i)s[o>>>2]|=t[i]<<go[o++&3];else for(o=this.start;i<a&&o<64;++i)n=t.charCodeAt(i),n<128?s[o>>>2]|=n<<go[o++&3]:n<2048?(s[o>>>2]|=(192|n>>>6)<<go[o++&3],s[o>>>2]|=(128|n&63)<<go[o++&3]):n<55296||n>=57344?(s[o>>>2]|=(224|n>>>12)<<go[o++&3],s[o>>>2]|=(128|n>>>6&63)<<go[o++&3],s[o>>>2]|=(128|n&63)<<go[o++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++i)&1023),s[o>>>2]|=(240|n>>>18)<<go[o++&3],s[o>>>2]|=(128|n>>>12&63)<<go[o++&3],s[o>>>2]|=(128|n>>>6&63)<<go[o++&3],s[o>>>2]|=(128|n&63)<<go[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=s[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};yo.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=Que[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};yo.prototype.hash=function(){var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,c=this.blocks,u,l,d,f,m,p,b,y,h,_,v;for(u=16;u<64;++u)m=c[u-15],l=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=c[u-2],d=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,c[u]=c[u-16]+l+c[u-7]+d<<0;for(v=e&r,u=0;u<64;u+=4)this.first?(this.is224?(y=300032,m=c[0]-1413257819,s=m-150054599<<0,n=m+24177077<<0):(y=704751109,m=c[0]-210244248,s=m-1521486534<<0,n=m+143694565<<0),this.first=!1):(l=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),y=t&e,f=y^t&r^v,b=i&o^~i&a,m=s+d+b+Mw[u]+c[u],p=l+f,s=n+m<<0,n=m+p<<0),l=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),h=n&t,f=h^n&e^y,b=a&s^~a&i,m=o+d+b+Mw[u+1]+c[u+1],p=l+f,a=r+m<<0,r=m+p<<0,l=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),d=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),_=r&n,f=_^r&t^h,b=o&a^~o&s,m=i+d+b+Mw[u+2]+c[u+2],p=l+f,o=e+m<<0,e=m+p<<0,l=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),v=e&r,f=v^e&n^_,b=o&a^~o&s,m=i+d+b+Mw[u+3]+c[u+3],p=l+f,i=t+m<<0,t=m+p<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+o<<0,this.h6=this.h6+a<<0,this.h7=this.h7+s<<0};yo.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,c=pe[t>>>28&15]+pe[t>>>24&15]+pe[t>>>20&15]+pe[t>>>16&15]+pe[t>>>12&15]+pe[t>>>8&15]+pe[t>>>4&15]+pe[t&15]+pe[e>>>28&15]+pe[e>>>24&15]+pe[e>>>20&15]+pe[e>>>16&15]+pe[e>>>12&15]+pe[e>>>8&15]+pe[e>>>4&15]+pe[e&15]+pe[r>>>28&15]+pe[r>>>24&15]+pe[r>>>20&15]+pe[r>>>16&15]+pe[r>>>12&15]+pe[r>>>8&15]+pe[r>>>4&15]+pe[r&15]+pe[n>>>28&15]+pe[n>>>24&15]+pe[n>>>20&15]+pe[n>>>16&15]+pe[n>>>12&15]+pe[n>>>8&15]+pe[n>>>4&15]+pe[n&15]+pe[i>>>28&15]+pe[i>>>24&15]+pe[i>>>20&15]+pe[i>>>16&15]+pe[i>>>12&15]+pe[i>>>8&15]+pe[i>>>4&15]+pe[i&15]+pe[o>>>28&15]+pe[o>>>24&15]+pe[o>>>20&15]+pe[o>>>16&15]+pe[o>>>12&15]+pe[o>>>8&15]+pe[o>>>4&15]+pe[o&15]+pe[a>>>28&15]+pe[a>>>24&15]+pe[a>>>20&15]+pe[a>>>16&15]+pe[a>>>12&15]+pe[a>>>8&15]+pe[a>>>4&15]+pe[a&15];return this.is224||(c+=pe[s>>>28&15]+pe[s>>>24&15]+pe[s>>>20&15]+pe[s>>>16&15]+pe[s>>>12&15]+pe[s>>>8&15]+pe[s>>>4&15]+pe[s&15]),c};yo.prototype.toString=yo.prototype.hex;yo.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,o=this.h5,a=this.h6,s=this.h7,c=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255];return this.is224||c.push(s>>>24&255,s>>>16&255,s>>>8&255,s&255),c};yo.prototype.array=yo.prototype.digest;yo.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};var zw=(...t)=>new yo(!1,!0).update(t.join("")).hex();var ece={};le(ece,{sha256:()=>zw});var tce={};le(tce,{BaseCache:()=>yV,InMemoryCache:()=>gk,defaultHashKeyEncoder:()=>gV,deserializeStoredGeneration:()=>rce,serializeGeneration:()=>nce});var gV=(...t)=>zw(t.join("_"));function rce(t){return t.message!==void 0?{text:t.text,message:bh(t.message)}:{text:t.text}}function nce(t){let e={text:t.text};return t.message!==void 0&&(e.message=t.message.toDict()),e}var yV=class{constructor(){A(this,"keyEncoder",gV)}makeDefaultKeyEncoder(t){this.keyEncoder=t}},ice=new Map,gk=class _V extends yV{constructor(r){super();A(this,"cache");this.cache=r!=null?r:new Map}lookup(r,n){var i;return Promise.resolve((i=this.cache.get(this.keyEncoder(r,n)))!=null?i:null)}async update(r,n,i){this.cache.set(this.keyEncoder(r,n),i)}static global(){return new _V(ice)}};var wV=be(xV(),1);var fce=Object.defineProperty,mce=(t,e,r)=>e in t?fce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pce=(t,e,r)=>(mce(t,typeof e!="symbol"?e+"":e,r),r);function hce(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let o=t.slice(r[i].start,r[i+1].end),a=e.get(o.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,i])}if(n!=null){let i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function gce(t,e){return t.length===1?[e.get(t.join(","))]:hce(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function yce(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _k=class{constructor(t,e){A(this,"specialTokens");A(this,"inverseSpecialTokens");A(this,"patStr");A(this,"textEncoder",new TextEncoder);A(this,"textDecoder",new TextDecoder("utf-8"));A(this,"rankMap",new Map);A(this,"textMap",new Map);this.patStr=t.pat_str;let r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{let[o,a,...s]=i.split(" "),c=Number.parseInt(a,10);return s.forEach((u,l)=>n[u]=c+l),n},{});for(let[n,i]of Object.entries(r)){let o=wV.default.toByteArray(n);this.rankMap.set(o.join(","),i),this.textMap.set(i,o)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,o])=>(n[o]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){var u;let n=new RegExp(this.patStr,"ug"),i=_k.specialTokenRegex(Object.keys(this.specialTokens)),o=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),s=new Set(r==="all"?Object.keys(this.specialTokens).filter(l=>!a.has(l)):r);if(s.size>0){let l=_k.specialTokenRegex([...s]),d=t.match(l);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let c=0;for(;;){let l=null,d=c;for(;i.lastIndex=d,l=i.exec(t),!(l==null||a.has(l[0]));)d=l.index+1;let f=(u=l==null?void 0:l.index)!=null?u:t.length;for(let p of t.substring(c,f).matchAll(n)){let b=this.textEncoder.encode(p[0]),y=this.rankMap.get(b.join(","));if(y!=null){o.push(y);continue}o.push(...gce(b,this.rankMap))}if(l==null)break;let m=this.specialTokens[l[0]];o.push(m),c=l.index+l[0].length}return o}decode(t){var o;let e=[],r=0;for(let a=0;a<t.length;++a){let s=t[a],c=(o=this.textMap.get(s))!=null?o:this.inverseSpecialTokens[s];c!=null&&(e.push(c),r+=c.length)}let n=new Uint8Array(r),i=0;for(let a of e)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},Lw=_k;pce(Lw,"specialTokenRegex",t=>new RegExp(t.map(e=>yce(e)).join("|"),"g"));function vk(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var _ce={};le(_ce,{encodingForModel:()=>jw,getEncoding:()=>SV});var Uw={},vce=new Za({});async function SV(t){return t in Uw||(Uw[t]=vce.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Lw(e)).catch(e=>{throw delete Uw[t],e})),await Uw[t]}async function jw(t){return SV(vk(t))}var bce={};le(bce,{BaseLangChain:()=>Bw,BaseLanguageModel:()=>qg,calculateMaxTokens:()=>TV,getEmbeddingContextSize:()=>xce,getModelContextSize:()=>AV,getModelNameForTiktoken:()=>Fw,isOpenAITool:()=>Vg});var Fw=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t,xce=t=>{switch(t){case"text-embedding-ada-002":return 8191;default:return 2046}},AV=t=>{switch(Fw(t)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function Vg(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}var TV=async({prompt:t,modelName:e})=>{let r;try{r=(await jw(Fw(e))).encode(t).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(t.length/4)}return AV(e)-r},wce=()=>!1,Bw=class extends xt{constructor(e){var r,n,i;super(e);A(this,"verbose");A(this,"callbacks");A(this,"tags");A(this,"metadata");this.verbose=(r=e.verbose)!=null?r:wce(),this.callbacks=e.callbacks,this.tags=(n=e.tags)!=null?n:[],this.metadata=(i=e.metadata)!=null?i:{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},qg=class extends Bw{constructor({callbacks:e,callbackManager:r,...n}){let{cache:i,...o}=n;super({callbacks:e!=null?e:r,...o});A(this,"caller");A(this,"cache");A(this,"_encoding");typeof i=="object"?this.cache=i:i?this.cache=gk.global():this.cache=void 0,this.caller=new Za(n!=null?n:{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let r;typeof e=="string"?r=e:r=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let n=Math.ceil(r.length/4);if(!this._encoding)try{this._encoding=await jw("modelName"in this?Fw(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{n=this._encoding.encode(r).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new pk(e):Array.isArray(e)?new hk(e.map(au)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...r}){let n={...this._identifyingParams(),...r,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([a,s])=>s!==void 0).map(([a,s])=>`${a}:${JSON.stringify(s)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}};var ta=class extends xt{constructor(e){super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,r){let n=We(r);return this.func&&await this.func(e,n),this._callWithConfig(i=>Promise.resolve(i),e,n)}async*transform(e,r){let n=We(r),i,o=!0;for await(let a of this._transformStreamWithConfig(e,s=>s,n))if(yield a,o)if(i===void 0)i=a;else try{i=ci(i,a)}catch(s){i=void 0,o=!1}this.func&&i!==void 0&&await this.func(i,n)}static assign(e){return new kg(new Cu({steps:e}))}};var EV=t=>t();function Zw(t){let e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}var Sce={};le(Sce,{BaseChatModel:()=>Vw,SimpleChatModel:()=>Ace});function bk(t){let e=[];for(let r of t){let n=r;if(Array.isArray(r.content))for(let i=0;i<r.content.length;i++){let o=r.content[i];(Rf(o)||Pf(o))&&n===r&&(n=new r.constructor({...n,content:[...r.content.slice(0,i),jv(o),...r.content.slice(i+1)]}))}e.push(n)}return e}var Vw=class bl extends qg{constructor(r){super(r);A(this,"lc_namespace",["langchain","chat_models",this._llmType()]);A(this,"disableStreaming",!1);A(this,"outputVersion");this.outputVersion=EV(()=>{var i;let n=(i=r.outputVersion)!=null?i:er("LC_OUTPUT_VERSION");return n&&["v0","v1"].includes(n)?n:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(r){let[n,i]=super._separateRunnableConfigFromCallOptions(r);return i.signal=n.signal,[n,i]}async invoke(r,n){let i=bl._convertInputToPromptValue(r);return(await this.generatePrompt([i],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(r,n,i){throw new Error("Not implemented.")}async*_streamIterator(r,n){var i,o;if(this._streamResponseChunks===bl.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(r,n);else{let s=bl._convertInputToPromptValue(r).toChatMessages(),[c,u]=this._separateRunnableConfigFromCallOptionsCompat(n),l={...c.metadata,...this.getLsParams(u)},d=await Ar.configure(c.callbacks,this.callbacks,c.tags,this.tags,l,this.metadata,{verbose:this.verbose}),f={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:1},m=(i=u.outputVersion)!=null?i:this.outputVersion,p=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),[bk(s)],c.runId,void 0,f,void 0,void 0,c.runName)),b,y;try{for await(let h of this._streamResponseChunks(s,u,p==null?void 0:p[0])){if(h.message.id==null){let _=(o=p==null?void 0:p.at(0))==null?void 0:o.runId;_!=null&&h.message._updateId(`run-${_}`)}h.message.response_metadata={...h.generationInfo,...h.message.response_metadata},m==="v1"?yield Zw(h.message):yield h.message,b?b=b.concat(h):b=h,vh(h.message)&&h.message.usage_metadata!==void 0&&(y={tokenUsage:{promptTokens:h.message.usage_metadata.input_tokens,completionTokens:h.message.usage_metadata.output_tokens,totalTokens:h.message.usage_metadata.total_tokens}})}}catch(h){throw await Promise.all((p!=null?p:[]).map(_=>_==null?void 0:_.handleLLMError(h))),h}await Promise.all((p!=null?p:[]).map(h=>h==null?void 0:h.handleLLMEnd({generations:[[b]],llmOutput:y})))}}getLsParams(r){let n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:r.stop,ls_provider:n}}async _generateUncached(r,n,i,o){var m,p,b;let a=r.map(y=>y.map(au)),s;if(o!==void 0&&o.length===a.length)s=o;else{let y={...i.metadata,...this.getLsParams(n)},h=await Ar.configure(i.callbacks,this.callbacks,i.tags,this.tags,y,this.metadata,{verbose:this.verbose}),_={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1};s=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),a.map(bk),i.runId,void 0,_,void 0,void 0,i.runName))}let c=(m=n.outputVersion)!=null?m:this.outputVersion,u=[],l=[];if(!!(s!=null&&s[0].handlers.find(wh))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==bl.prototype._streamResponseChunks)try{let y=await this._streamResponseChunks(a[0],n,s==null?void 0:s[0]),h,_;for await(let v of y){if(v.message.id==null){let x=(p=s==null?void 0:s.at(0))==null?void 0:p.runId;x!=null&&v.message._updateId(`run-${x}`)}h===void 0?h=v:h=ci(h,v),vh(v.message)&&v.message.usage_metadata!==void 0&&(_={tokenUsage:{promptTokens:v.message.usage_metadata.input_tokens,completionTokens:v.message.usage_metadata.output_tokens,totalTokens:v.message.usage_metadata.total_tokens}})}if(h===void 0)throw new Error("Received empty response from chat model call.");u.push([h]),await(s==null?void 0:s[0].handleLLMEnd({generations:u,llmOutput:_}))}catch(y){throw await(s==null?void 0:s[0].handleLLMError(y)),y}else{let y=await Promise.allSettled(a.map(async(h,_)=>{let v=await this._generate(h,{...n,promptIndex:_},s==null?void 0:s[_]);if(c==="v1")for(let x of v.generations)x.message=Zw(x.message);return v}));await Promise.all(y.map(async(h,_)=>{var v,x,w;if(h.status==="fulfilled"){let E=h.value;for(let S of E.generations){if(S.message.id==null){let g=(v=s==null?void 0:s.at(0))==null?void 0:v.runId;g!=null&&S.message._updateId(`run-${g}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata}}return E.generations.length===1&&(E.generations[0].message.response_metadata={...E.llmOutput,...E.generations[0].message.response_metadata}),u[_]=E.generations,l[_]=E.llmOutput,(x=s==null?void 0:s[_])==null?void 0:x.handleLLMEnd({generations:[E.generations],llmOutput:E.llmOutput})}else return await((w=s==null?void 0:s[_])==null?void 0:w.handleLLMError(h.reason)),Promise.reject(h.reason)}))}let f={generations:u,llmOutput:l.length?(b=this._combineLLMOutput)==null?void 0:b.call(this,...l):void 0};return Object.defineProperty(f,Vc,{value:s?{runIds:s==null?void 0:s.map(y=>y.runId)}:void 0,configurable:!0}),f}async _generateCached({messages:r,cache:n,llmStringKey:i,parsedOptions:o,handledOptions:a}){var _;let s=r.map(v=>v.map(au)),c={...a.metadata,...this.getLsParams(o)},u=await Ar.configure(a.callbacks,this.callbacks,a.tags,this.tags,c,this.metadata,{verbose:this.verbose}),l={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},d=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),s.map(bk),a.runId,void 0,l,void 0,void 0,a.runName)),f=[],p=(await Promise.allSettled(s.map(async(v,x)=>{let w=bl._convertInputToPromptValue(v).toString(),E=await n.lookup(w,i);return E==null&&f.push(x),E}))).map((v,x)=>({result:v,runManager:d==null?void 0:d[x]})).filter(({result:v})=>v.status==="fulfilled"&&v.value!=null||v.status==="rejected"),b=(_=o.outputVersion)!=null?_:this.outputVersion,y=[];await Promise.all(p.map(async({result:v,runManager:x},w)=>{if(v.status==="fulfilled"){let E=v.value;return y[w]=E.map(S=>("message"in S&&si(S.message)&&ou(S.message)&&(S.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},b==="v1"&&(S.message=Zw(S.message))),S.generationInfo={...S.generationInfo,tokenUsage:{}},S)),E.length&&await(x==null?void 0:x.handleLLMNewToken(E[0].text)),x==null?void 0:x.handleLLMEnd({generations:[E]},void 0,void 0,void 0,{cached:!0})}else return await(x==null?void 0:x.handleLLMError(v.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(v.reason)}));let h={generations:y,missingPromptIndices:f,startedRunManagers:d};return Object.defineProperty(h,Vc,{value:d?{runIds:d==null?void 0:d.map(v=>v.runId)}:void 0,configurable:!0}),h}async generate(r,n,i){var b,y;let o;Array.isArray(n)?o={stop:n}:o=n;let a=r.map(h=>h.map(au)),[s,c]=this._separateRunnableConfigFromCallOptionsCompat(o);if(s.callbacks=(b=s.callbacks)!=null?b:i,!this.cache)return this._generateUncached(a,c,s);let{cache:u}=this,l=this._getSerializedCacheKeyParametersForCall(c),{generations:d,missingPromptIndices:f,startedRunManagers:m}=await this._generateCached({messages:a,cache:u,llmStringKey:l,parsedOptions:c,handledOptions:s}),p={};if(f.length>0){let h=await this._generateUncached(f.map(_=>a[_]),c,s,m!==void 0?f.map(_=>m==null?void 0:m[_]):void 0);await Promise.all(h.generations.map(async(_,v)=>{let x=f[v];d[x]=_;let w=bl._convertInputToPromptValue(a[x]).toString();return u.update(w,l,_)})),p=(y=h.llmOutput)!=null?y:{}}return{generations:d,llmOutput:p}}invocationParams(r){return{}}_modelType(){return"base_chat_model"}async generatePrompt(r,n,i){let o=r.map(a=>a.toChatMessages());return this.generate(o,n,i)}withStructuredOutput(r,n){var y;if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');let i=r,o=n==null?void 0:n.name,a=(y=Su(i))!=null?y:"A function available to call.",s=n==null?void 0:n.method,c=n==null?void 0:n.includeRaw;if(s==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=o!=null?o:"extract",l;xn(i)?l=[{type:"function",function:{name:u,description:a,parameters:Vr(i)}}]:("name"in i&&(u=i.name),l=[{type:"function",function:{name:u,description:a,parameters:i}}]);let d=this.bindTools(l),f=Zn.from(h=>{if(!Sr.isInstance(h))throw new Error("Input is not an AIMessageChunk.");if(!h.tool_calls||h.tool_calls.length===0)throw new Error("No tool calls found in the response.");let _=h.tool_calls.find(v=>v.name===u);if(!_)throw new Error(`No tool call found with name ${u}.`);return _.args});if(!c)return d.pipe(f).withConfig({runName:"StructuredOutput"});let m=ta.assign({parsed:(h,_)=>f.invoke(h.raw,_)}),p=ta.assign({parsed:()=>null}),b=m.withFallbacks({fallbacks:[p]});return Nu.from([{raw:d},b]).withConfig({runName:"StructuredOutputRunnable"})}},Ace=class extends Vw{async _generate(t,e,r){let n=await this._call(t,e,r),i=new Qt(n);if(typeof i.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}}};var OV=class extends xt{constructor(e){super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"runnables");this.runnables=e.runnables}static lc_name(){return"RouterRunnable"}async invoke(e,r){let{key:n,input:i}=e,o=this.runnables[n];if(o===void 0)throw new Error(`No runnable associated with key "${n}".`);return o.invoke(i,We(r))}async batch(e,r,n){var f,m;let i=e.map(p=>p.key),o=e.map(p=>p.input);if(i.find(p=>this.runnables[p]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");let s=i.map(p=>this.runnables[p]),c=this._getOptionsList(r!=null?r:{},e.length),u=(m=(f=c[0])==null?void 0:f.maxConcurrency)!=null?m:n==null?void 0:n.maxConcurrency,l=u&&u>0?u:e.length,d=[];for(let p=0;p<o.length;p+=l){let b=o.slice(p,p+l).map((h,_)=>s[_].invoke(h,c[_])),y=await Promise.all(b);d.push(y)}return d.flat()}async stream(e,r){let{key:n,input:i}=e,o=this.runnables[n];if(o===void 0)throw new Error(`No runnable associated with key "${n}".`);return o.stream(i,r)}};var IV=class extends xt{constructor(e){super(e);A(this,"lc_namespace",["langchain_core","runnables"]);A(this,"lc_serializable",!0);A(this,"default");A(this,"branches");this.branches=e.branches,this.default=e.default}static lc_name(){return"RunnableBranch"}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");let n=e.slice(0,-1).map(([o,a])=>[pi(o),pi(a)]),i=pi(e[e.length-1]);return new this({branches:n,default:i})}async _invoke(e,r,n){let i;for(let o=0;o<this.branches.length;o+=1){let[a,s]=this.branches[o];if(await a.invoke(e,ft(r,{callbacks:n==null?void 0:n.getChild(`condition:${o+1}`)}))){i=await s.invoke(e,ft(r,{callbacks:n==null?void 0:n.getChild(`branch:${o+1}`)}));break}}return i||(i=await this.default.invoke(e,ft(r,{callbacks:n==null?void 0:n.getChild("branch:default")}))),i}async invoke(e,r={}){return this._callWithConfig(this._invoke,e,r)}async*_streamIterator(e,r){let n=await en(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),gr(e,"input"),r==null?void 0:r.runId,void 0,void 0,void 0,r==null?void 0:r.runName)),o,a=!0,s;try{for(let c=0;c<this.branches.length;c+=1){let[u,l]=this.branches[c];if(await u.invoke(e,ft(r,{callbacks:i==null?void 0:i.getChild(`condition:${c+1}`)}))){s=await l.stream(e,ft(r,{callbacks:i==null?void 0:i.getChild(`branch:${c+1}`)}));for await(let f of s)if(yield f,a)if(o===void 0)o=f;else try{o=ci(o,f)}catch(m){o=void 0,a=!1}break}}if(s===void 0){s=await this.default.stream(e,ft(r,{callbacks:i==null?void 0:i.getChild("branch:default")}));for await(let c of s)if(yield c,a)if(o===void 0)o=c;else try{o=ci(o,c)}catch(u){o=void 0,a=!1}}}catch(c){throw await(i==null?void 0:i.handleChainError(c)),c}await(i==null?void 0:i.handleChainEnd(o!=null?o:{}))}};var NV=class extends Iu{constructor(e){var a,s;let r=Zn.from((c,u)=>this._enterHistory(c,u!=null?u:{})).withConfig({runName:"loadHistory"}),n=(a=e.historyMessagesKey)!=null?a:e.inputMessagesKey;n&&(r=ta.assign({[n]:r}).withConfig({runName:"insertHistory"}));let i=r.pipe(e.runnable.withListeners({onEnd:(c,u)=>this._exitHistory(c,u!=null?u:{})})).withConfig({runName:"RunnableWithMessageHistory"}),o=(s=e.config)!=null?s:{};super({...e,config:o,bound:i});A(this,"runnable");A(this,"inputMessagesKey");A(this,"outputMessagesKey");A(this,"historyMessagesKey");A(this,"getMessageHistory");this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let r;if(typeof e=="object"&&!Array.isArray(e)&&!si(e)){let n;this.inputMessagesKey?n=this.inputMessagesKey:Object.keys(e).length===1?n=Object.keys(e)[0]:n="input",Array.isArray(e[n])&&Array.isArray(e[n][0])?r=e[n][0]:r=e[n]}else r=e;if(typeof r=="string")return[new zn(r)];if(Array.isArray(r))return r;if(si(r))return[r];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(r,null,2)}`)}_getOutputMessages(e){let r;if(!Array.isArray(e)&&!si(e)&&typeof e!="string"){let n;this.outputMessagesKey!==void 0?n=this.outputMessagesKey:Object.keys(e).length===1?n=Object.keys(e)[0]:n="output",e.generations!==void 0?r=e.generations[0][0].message:r=e[n]}else r=e;if(typeof r=="string")return[new Qt(r)];if(Array.isArray(r))return r;if(si(r))return[r];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(r,null,2)}`)}async _enterHistory(e,r){var o;let i=await((o=r==null?void 0:r.configurable)==null?void 0:o.messageHistory).getMessages();return this.historyMessagesKey===void 0?i.concat(this._getInputMessages(e)):i}async _exitHistory(e,r){var c;let n=(c=r.configurable)==null?void 0:c.messageHistory,i;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?i=e.inputs[0]:i=e.inputs;let o=this._getInputMessages(i);if(this.historyMessagesKey===void 0){let u=await n.getMessages();o=o.slice(u.length)}let a=e.outputs;if(!a)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);let s=this._getOutputMessages(a);await n.addMessages([...o,...s])}async _mergeConfig(...e){var i;let r=await super._mergeConfig(...e);if(!r.configurable||!r.configurable.sessionId){let o={[(i=this.inputMessagesKey)!=null?i:"input"]:"foo"},a={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(o)}, ${JSON.stringify(a)})`)}let{sessionId:n}=r.configurable;return r.configurable.messageHistory=await this.getMessageHistory(n),r}};var Tce={};le(Tce,{RouterRunnable:()=>OV,Runnable:()=>xt,RunnableAssign:()=>kg,RunnableBinding:()=>Iu,RunnableBranch:()=>IV,RunnableEach:()=>s5,RunnableLambda:()=>Zn,RunnableMap:()=>Cu,RunnableParallel:()=>f5,RunnablePassthrough:()=>ta,RunnablePick:()=>d1,RunnableRetry:()=>mw,RunnableSequence:()=>Nu,RunnableToolLike:()=>fw,RunnableWithFallbacks:()=>l1,RunnableWithMessageHistory:()=>NV,_coerceToRunnable:()=>pi,ensureConfig:()=>We,getCallbackManagerForConfig:()=>en,mergeConfigs:()=>Bc,patchConfig:()=>ft,pickRunnableConfigKeys:()=>yn,raceWithSignal:()=>Ui});var xk=class extends xt{parseResultWithPrompt(t,e,r){return this.parseResult(t,r)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(r,n)=>this.parseResult([{text:r}],n==null?void 0:n.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(r,n)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],n==null?void 0:n.callbacks),t,{...e,runType:"parser"})}},xl=class extends xk{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,r){return this.parse(t,r)}_type(){throw new Error("_type not implemented")}},hi=class extends Error{constructor(e,r,n,i=!1){super(e);A(this,"llmOutput");A(this,"observation");A(this,"sendToLLM");if(this.llmOutput=r,this.observation=n,this.sendToLLM=i,i&&(n===void 0||r===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");Yv(this,"OUTPUT_PARSING_FAILURE")}};var ts=class extends xl{async*_transform(t){for await(let e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},Ru=class extends ts{constructor(e){var r;super(e);A(this,"diff",!1);this.diff=(r=e==null?void 0:e.diff)!=null?r:this.diff}async*_transform(e){let r,n;for await(let i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let o;if(zf(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Ba({message:i,text:i.content})}else if(si(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Ba({message:Mc(i),text:i.content})}else o=new qo({text:i});n===void 0?n=o:n=n.concat(o);let a=await this.parsePartialResult([n]);a!=null&&!Xo(a,r)&&(this.diff?yield this._diff(r,a):yield a,r=a)}}getFormatInstructions(){return""}};var Ece={};le(Ece,{applyPatch:()=>mu,compare:()=>qf});var Gg=class extends Ru{constructor(){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers"]);A(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,r){return this.diff?super._concatOutputChunks(e,r):r}_diff(e,r){if(r)return e?qf(e,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(e){return _h(e[0].text)}async parse(e){return _h(e,JSON.parse)}getFormatInstructions(){return""}};var CV=class extends ts{constructor(){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers","bytes"]);A(this,"lc_serializable",!0);A(this,"textEncoder",new TextEncoder)}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}};var xm=class extends ts{constructor(){super(...arguments);A(this,"re")}async*_transform(e){var n;let r="";for await(let i of e)if(typeof i=="string"?r+=i:r+=i.content,this.re){let o=[...r.matchAll(this.re)];if(o.length>1){let a=0;for(let s of o.slice(0,-1))yield[s[1]],a+=((n=s.index)!=null?n:0)+s[0].length;r=r.slice(a)}}else{let o=await this.parse(r);if(o.length>1){for(let a of o.slice(0,-1))yield[a];r=o[o.length-1]}}for(let i of await this.parse(r))yield[i]}},kV=class extends xm{constructor(){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers","list"]);A(this,"lc_serializable",!0)}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(r=>r.trim())}catch(r){throw new hi(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},$V=class extends xm{constructor({length:e,separator:r}){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers","list"]);A(this,"length");A(this,"separator");this.length=e,this.separator=r||","}async parse(e){try{let r=e.trim().split(this.separator).map(n=>n.trim());if(this.length!==void 0&&r.length!==this.length)throw new hi(`Incorrect number of items. Expected ${this.length}, got ${r.length}.`);return r}catch(r){throw Object.getPrototypeOf(r)===hi.prototype?r:new hi(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},RV=class extends xm{constructor(){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers","list"]);A(this,"lc_serializable",!0);A(this,"re",/\d+\.\s([^\n]+)/g)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){var r;return[...(r=e.matchAll(this.re))!=null?r:[]].map(n=>n[1])}},PV=class extends xm{constructor(){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers","list"]);A(this,"lc_serializable",!0);A(this,"re",/^\s*[-*]\s([^\n]+)$/gm)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){var r;return[...(r=e.matchAll(this.re))!=null?r:[]].map(n=>n[1])}};var MV=class extends ts{constructor(){super(...arguments);A(this,"lc_namespace",["langchain_core","output_parsers","string"]);A(this,"lc_serializable",!0)}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((r,n)=>r+this._messageContentToString(n),"")}};var wm=class extends xl{constructor(e){super(e);A(this,"lc_namespace",["langchain","output_parsers","structured"]);this.schema=e}static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let r=wn.object(Object.fromEntries(Object.entries(e).map(([n,i])=>[n,wn.string().describe(i)])));return new this(r)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Vr(this.schema))}
\`\`\`
`}async parse(e){var r,n;try{let i=e.trim(),a=(((r=i.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:r[1])||((n=i.match(/```json\s*([\s\S]*?)```/))==null?void 0:n[1])||i).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(s,c)=>`"${c.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await wu(this.schema,JSON.parse(a))}catch(i){throw new hi(`Failed to parse. Text: "${e}". Error: ${i}`,e)}}},wk=class extends wm{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(t){var r;let e=(r=t==null?void 0:t.interpolationDepth)!=null?r:1;if(e<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Vr(this.schema)).replaceAll("{","{".repeat(e)).replaceAll("}","}".repeat(e))}
\`\`\``}_schemaToInstruction(t,e=2){let r=t;if("type"in r){let n=!1,i;if(Array.isArray(r.type)){let s=r.type.findIndex(c=>c==="null");s!==-1&&(n=!0,r.type.splice(s,1)),i=r.type.join(" | ")}else i=r.type;if(r.type==="object"&&r.properties){let s=r.description?` // ${r.description}`:"";return`{
${Object.entries(r.properties).map(([u,l])=>{var f;let d=(f=r.required)!=null&&f.includes(u)?"":" (optional)";return`${" ".repeat(e)}"${u}": ${this._schemaToInstruction(l,e+2)}${d}`}).join(`
`)}
${" ".repeat(e-2)}}${s}`}if(r.type==="array"&&r.items){let s=r.description?` // ${r.description}`:"";return`array[
${" ".repeat(e)}${this._schemaToInstruction(r.items,e+2)}
${" ".repeat(e-2)}] ${s}`}let o=n?" (nullable)":"",a=r.description?` // ${r.description}`:"";return`${i}${a}${o}`}if("anyOf"in r)return r.anyOf.map(n=>this._schemaToInstruction(n,e)).join(`
${" ".repeat(e-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(t){return new this(t)}static fromNamesAndDescriptions(t){let e=wn.object(Object.fromEntries(Object.entries(t).map(([r,n])=>[r,wn.string().describe(n)])));return new this(e)}},zV=class extends xl{constructor({inputSchema:e}){super(...arguments);A(this,"structuredInputParser");this.structuredInputParser=new wk(e)}async parse(e){let r;try{r=await this.structuredInputParser.parse(e)}catch(n){throw new hi(`Failed to parse. Text: "${e}". Error: ${n}`,e)}return this.outputProcessor(r)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};var Oce=function(){let t={};t.parser=function(O,T){return new r(O,T)},t.SAXParser=r,t.SAXStream=u,t.createStream=c,t.MAX_BUFFER_LENGTH=65536;let e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(O,T){if(!(this instanceof r))return new r(O,T);var M=this;i(M),M.q=M.c="",M.bufferCheckPosition=t.MAX_BUFFER_LENGTH,M.opt=T||{},M.opt.lowercase=M.opt.lowercase||M.opt.lowercasetags,M.looseCase=M.opt.lowercase?"toLowerCase":"toUpperCase",M.tags=[],M.closed=M.closedRoot=M.sawRoot=!1,M.tag=M.error=null,M.strict=!!O,M.noscript=!!(O||M.opt.noscript),M.state=g.BEGIN,M.strictEntities=M.opt.strictEntities,M.ENTITIES=M.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),M.attribList=[],M.opt.xmlns&&(M.ns=Object.create(p)),M.trackPosition=M.opt.position!==!1,M.trackPosition&&(M.position=M.line=M.column=0),N(M,"onready")}Object.create||(Object.create=function(O){function T(){}T.prototype=O;var M=new T;return M}),Object.keys||(Object.keys=function(O){var T=[];for(var M in O)O.hasOwnProperty(M)&&T.push(M);return T});function n(O){for(var T=Math.max(t.MAX_BUFFER_LENGTH,10),M=0,$=0,Ae=e.length;$<Ae;$++){var qe=O[e[$]].length;if(qe>T)switch(e[$]){case"textNode":R(O);break;case"cdata":C(O,"oncdata",O.cdata),O.cdata="";break;case"script":C(O,"onscript",O.script),O.script="";break;default:j(O,"Max buffer length exceeded: "+e[$])}M=Math.max(M,qe)}var Ve=t.MAX_BUFFER_LENGTH-M;O.bufferCheckPosition=Ve+O.position}function i(O){for(var T=0,M=e.length;T<M;T++)O[e[T]]=""}function o(O){R(O),O.cdata!==""&&(C(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(C(O,"onscript",O.script),O.script="")}r.prototype={end:function(){L(this)},write:Se,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a=ReadableStream;a||(a=function(){});var s=t.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function c(O,T){return new u(O,T)}function u(O,T){if(!(this instanceof u))return new u(O,T);a.apply(this),this._parser=new r(O,T),this.writable=!0,this.readable=!0;var M=this;this._parser.onend=function(){M.emit("end")},this._parser.onerror=function($){M.emit("error",$),M._parser.error=null},this._decoder=null,s.forEach(function($){Object.defineProperty(M,"on"+$,{get:function(){return M._parser["on"+$]},set:function(Ae){if(!Ae)return M.removeAllListeners($),M._parser["on"+$]=Ae,Ae;M.on($,Ae)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(a.prototype,{constructor:{value:u}}),u.prototype.write=function(O){return this._parser.write(O.toString()),this.emit("data",O),!0},u.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},u.prototype.on=function(O,T){var M=this;return!M._parser["on"+O]&&s.indexOf(O)!==-1&&(M._parser["on"+O]=function(){var $=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);$.splice(0,0,O),M.emit.apply(M,$)}),a.prototype.on.call(M,O,T)};var l="[CDATA[",d="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",p={xml:f,xmlns:m},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(O){return O===" "||O===`
`||O==="\r"||O==="	"}function x(O){return O==='"'||O==="'"}function w(O){return O===">"||v(O)}function E(O,T){return O.test(T)}function S(O,T){return!E(O,T)}var g=0;t.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(O){var T=t.ENTITIES[O],M=typeof T=="number"?String.fromCharCode(T):T;t.ENTITIES[O]=M});for(var I in t.STATE)t.STATE[t.STATE[I]]=I;g=t.STATE;function N(O,T,M){O[T]&&O[T](M)}function C(O,T,M){O.textNode&&R(O),N(O,T,M)}function R(O){O.textNode=z(O.opt,O.textNode),O.textNode&&N(O,"ontext",O.textNode),O.textNode=""}function z(O,T){return O.trim&&(T=T.trim()),O.normalize&&(T=T.replace(/\s+/g," ")),T}function j(O,T){return R(O),O.trackPosition&&(T+=`
Line: `+O.line+`
Column: `+O.column+`
Char: `+O.c),T=new Error(T),O.error=T,N(O,"onerror",T),O}function L(O){return O.sawRoot&&!O.closedRoot&&k(O,"Unclosed root tag"),O.state!==g.BEGIN&&O.state!==g.BEGIN_WHITESPACE&&O.state!==g.TEXT&&j(O,"Unexpected end"),R(O),O.c="",O.closed=!0,N(O,"onend"),r.call(O,O.strict,O.opt),O}function k(O,T){if(typeof O!="object"||!(O instanceof r))throw new Error("bad call to strictFail");O.strict&&j(O,T)}function U(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var T=O.tags[O.tags.length-1]||O,M=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(M.ns=T.ns),O.attribList.length=0,C(O,"onopentagstart",M)}function J(O,T){var M=O.indexOf(":"),$=M<0?["",O]:O.split(":"),Ae=$[0],qe=$[1];return T&&O==="xmlns"&&(Ae="xmlns",qe=""),{prefix:Ae,local:qe}}function H(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName)){O.attribName=O.attribValue="";return}if(O.opt.xmlns){var T=J(O.attribName,!0),M=T.prefix,$=T.local;if(M==="xmlns")if($==="xml"&&O.attribValue!==f)k(O,"xml: prefix must be bound to "+f+`
Actual: `+O.attribValue);else if($==="xmlns"&&O.attribValue!==m)k(O,"xmlns: prefix must be bound to "+m+`
Actual: `+O.attribValue);else{var Ae=O.tag,qe=O.tags[O.tags.length-1]||O;Ae.ns===qe.ns&&(Ae.ns=Object.create(qe.ns)),Ae.ns[$]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,C(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}function V(O,T){if(O.opt.xmlns){var M=O.tag,$=J(O.tagName);M.prefix=$.prefix,M.local=$.local,M.uri=M.ns[$.prefix]||"",M.prefix&&!M.uri&&(k(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),M.uri=$.prefix);var Ae=O.tags[O.tags.length-1]||O;M.ns&&Ae.ns!==M.ns&&Object.keys(M.ns).forEach(function(cr){C(O,"onopennamespace",{prefix:cr,uri:M.ns[cr]})});for(var qe=0,Ve=O.attribList.length;qe<Ve;qe++){var wt=O.attribList[qe],Kt=wt[0],te=wt[1],ce=J(Kt,!0),it=ce.prefix,dt=ce.local,Qe=it===""?"":M.ns[it]||"",W={name:Kt,value:te,prefix:it,local:dt,uri:Qe};it&&it!=="xmlns"&&!Qe&&(k(O,"Unbound namespace prefix: "+JSON.stringify(it)),W.uri=it),O.tag.attributes[Kt]=W,C(O,"onattribute",W)}O.attribList.length=0}O.tag.isSelfClosing=!!T,O.sawRoot=!0,O.tags.push(O.tag),C(O,"onopentag",O.tag),T||(!O.noscript&&O.tagName.toLowerCase()==="script"?O.state=g.SCRIPT:O.state=g.TEXT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function _e(O){if(!O.tagName){k(O,"Weird empty close tag."),O.textNode+="</>",O.state=g.TEXT;return}if(O.script){if(O.tagName!=="script"){O.script+="</"+O.tagName+">",O.tagName="",O.state=g.SCRIPT;return}C(O,"onscript",O.script),O.script=""}var T=O.tags.length,M=O.tagName;O.strict||(M=M[O.looseCase]());for(var $=M;T--;){var Ae=O.tags[T];if(Ae.name!==$)k(O,"Unexpected close tag");else break}if(T<0){k(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",O.state=g.TEXT;return}O.tagName=M;for(var qe=O.tags.length;qe-- >T;){var Ve=O.tag=O.tags.pop();O.tagName=O.tag.name,C(O,"onclosetag",O.tagName);var wt={};for(var Kt in Ve.ns)wt[Kt]=Ve.ns[Kt];var te=O.tags[O.tags.length-1]||O;O.opt.xmlns&&Ve.ns!==te.ns&&Object.keys(Ve.ns).forEach(function(ce){var it=Ve.ns[ce];C(O,"onclosenamespace",{prefix:ce,uri:it})})}T===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=g.TEXT}function Fe(O){var T=O.entity,M=T.toLowerCase(),$,Ae="";return O.ENTITIES[T]?O.ENTITIES[T]:O.ENTITIES[M]?O.ENTITIES[M]:(T=M,T.charAt(0)==="#"&&(T.charAt(1)==="x"?(T=T.slice(2),$=parseInt(T,16),Ae=$.toString(16)):(T=T.slice(1),$=parseInt(T,10),Ae=$.toString(10))),T=T.replace(/^0+/,""),isNaN($)||Ae.toLowerCase()!==T?(k(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint($))}function Lt(O,T){T==="<"?(O.state=g.OPEN_WAKA,O.startTagPosition=O.position):v(T)||(k(O,"Non-whitespace before first tag."),O.textNode=T,O.state=g.TEXT)}function qt(O,T){var M="";return T<O.length&&(M=O.charAt(T)),M}function Se(O){var T=this;if(this.error)throw this.error;if(T.closed)return j(T,"Cannot write after close. Assign an onready handler.");if(O===null)return L(T);typeof O=="object"&&(O=O.toString());for(var M=0,$="";$=qt(O,M++),T.c=$,!!$;)switch(T.trackPosition&&(T.position++,$===`
`?(T.line++,T.column=0):T.column++),T.state){case g.BEGIN:if(T.state=g.BEGIN_WHITESPACE,$==="\uFEFF")continue;Lt(T,$);continue;case g.BEGIN_WHITESPACE:Lt(T,$);continue;case g.TEXT:if(T.sawRoot&&!T.closedRoot){for(var Ae=M-1;$&&$!=="<"&&$!=="&";)$=qt(O,M++),$&&T.trackPosition&&(T.position++,$===`
`?(T.line++,T.column=0):T.column++);T.textNode+=O.substring(Ae,M-1)}$==="<"&&!(T.sawRoot&&T.closedRoot&&!T.strict)?(T.state=g.OPEN_WAKA,T.startTagPosition=T.position):(!v($)&&(!T.sawRoot||T.closedRoot)&&k(T,"Text data outside of root node."),$==="&"?T.state=g.TEXT_ENTITY:T.textNode+=$);continue;case g.SCRIPT:$==="<"?T.state=g.SCRIPT_ENDING:T.script+=$;continue;case g.SCRIPT_ENDING:$==="/"?T.state=g.CLOSE_TAG:(T.script+="<"+$,T.state=g.SCRIPT);continue;case g.OPEN_WAKA:if($==="!")T.state=g.SGML_DECL,T.sgmlDecl="";else if(!v($))if(E(b,$))T.state=g.OPEN_TAG,T.tagName=$;else if($==="/")T.state=g.CLOSE_TAG,T.tagName="";else if($==="?")T.state=g.PROC_INST,T.procInstName=T.procInstBody="";else{if(k(T,"Unencoded <"),T.startTagPosition+1<T.position){var qe=T.position-T.startTagPosition;$=new Array(qe).join(" ")+$}T.textNode+="<"+$,T.state=g.TEXT}continue;case g.SGML_DECL:(T.sgmlDecl+$).toUpperCase()===l?(C(T,"onopencdata"),T.state=g.CDATA,T.sgmlDecl="",T.cdata=""):T.sgmlDecl+$==="--"?(T.state=g.COMMENT,T.comment="",T.sgmlDecl=""):(T.sgmlDecl+$).toUpperCase()===d?(T.state=g.DOCTYPE,(T.doctype||T.sawRoot)&&k(T,"Inappropriately located doctype declaration"),T.doctype="",T.sgmlDecl=""):$===">"?(C(T,"onsgmldeclaration",T.sgmlDecl),T.sgmlDecl="",T.state=g.TEXT):(x($)&&(T.state=g.SGML_DECL_QUOTED),T.sgmlDecl+=$);continue;case g.SGML_DECL_QUOTED:$===T.q&&(T.state=g.SGML_DECL,T.q=""),T.sgmlDecl+=$;continue;case g.DOCTYPE:$===">"?(T.state=g.TEXT,C(T,"ondoctype",T.doctype),T.doctype=!0):(T.doctype+=$,$==="["?T.state=g.DOCTYPE_DTD:x($)&&(T.state=g.DOCTYPE_QUOTED,T.q=$));continue;case g.DOCTYPE_QUOTED:T.doctype+=$,$===T.q&&(T.q="",T.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:T.doctype+=$,$==="]"?T.state=g.DOCTYPE:x($)&&(T.state=g.DOCTYPE_DTD_QUOTED,T.q=$);continue;case g.DOCTYPE_DTD_QUOTED:T.doctype+=$,$===T.q&&(T.state=g.DOCTYPE_DTD,T.q="");continue;case g.COMMENT:$==="-"?T.state=g.COMMENT_ENDING:T.comment+=$;continue;case g.COMMENT_ENDING:$==="-"?(T.state=g.COMMENT_ENDED,T.comment=z(T.opt,T.comment),T.comment&&C(T,"oncomment",T.comment),T.comment=""):(T.comment+="-"+$,T.state=g.COMMENT);continue;case g.COMMENT_ENDED:$!==">"?(k(T,"Malformed comment"),T.comment+="--"+$,T.state=g.COMMENT):T.state=g.TEXT;continue;case g.CDATA:$==="]"?T.state=g.CDATA_ENDING:T.cdata+=$;continue;case g.CDATA_ENDING:$==="]"?T.state=g.CDATA_ENDING_2:(T.cdata+="]"+$,T.state=g.CDATA);continue;case g.CDATA_ENDING_2:$===">"?(T.cdata&&C(T,"oncdata",T.cdata),C(T,"onclosecdata"),T.cdata="",T.state=g.TEXT):$==="]"?T.cdata+="]":(T.cdata+="]]"+$,T.state=g.CDATA);continue;case g.PROC_INST:$==="?"?T.state=g.PROC_INST_ENDING:v($)?T.state=g.PROC_INST_BODY:T.procInstName+=$;continue;case g.PROC_INST_BODY:if(!T.procInstBody&&v($))continue;$==="?"?T.state=g.PROC_INST_ENDING:T.procInstBody+=$;continue;case g.PROC_INST_ENDING:$===">"?(C(T,"onprocessinginstruction",{name:T.procInstName,body:T.procInstBody}),T.procInstName=T.procInstBody="",T.state=g.TEXT):(T.procInstBody+="?"+$,T.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:E(y,$)?T.tagName+=$:(U(T),$===">"?V(T):$==="/"?T.state=g.OPEN_TAG_SLASH:(v($)||k(T,"Invalid character in tag name"),T.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:$===">"?(V(T,!0),_e(T)):(k(T,"Forward-slash in opening tag not followed by >"),T.state=g.ATTRIB);continue;case g.ATTRIB:if(v($))continue;$===">"?V(T):$==="/"?T.state=g.OPEN_TAG_SLASH:E(b,$)?(T.attribName=$,T.attribValue="",T.state=g.ATTRIB_NAME):k(T,"Invalid attribute name");continue;case g.ATTRIB_NAME:$==="="?T.state=g.ATTRIB_VALUE:$===">"?(k(T,"Attribute without value"),T.attribValue=T.attribName,H(T),V(T)):v($)?T.state=g.ATTRIB_NAME_SAW_WHITE:E(y,$)?T.attribName+=$:k(T,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if($==="=")T.state=g.ATTRIB_VALUE;else{if(v($))continue;k(T,"Attribute without value"),T.tag.attributes[T.attribName]="",T.attribValue="",C(T,"onattribute",{name:T.attribName,value:""}),T.attribName="",$===">"?V(T):E(b,$)?(T.attribName=$,T.state=g.ATTRIB_NAME):(k(T,"Invalid attribute name"),T.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(v($))continue;x($)?(T.q=$,T.state=g.ATTRIB_VALUE_QUOTED):(k(T,"Unquoted attribute value"),T.state=g.ATTRIB_VALUE_UNQUOTED,T.attribValue=$);continue;case g.ATTRIB_VALUE_QUOTED:if($!==T.q){$==="&"?T.state=g.ATTRIB_VALUE_ENTITY_Q:T.attribValue+=$;continue}H(T),T.q="",T.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:v($)?T.state=g.ATTRIB:$===">"?V(T):$==="/"?T.state=g.OPEN_TAG_SLASH:E(b,$)?(k(T,"No whitespace between attributes"),T.attribName=$,T.attribValue="",T.state=g.ATTRIB_NAME):k(T,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!w($)){$==="&"?T.state=g.ATTRIB_VALUE_ENTITY_U:T.attribValue+=$;continue}H(T),$===">"?V(T):T.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(T.tagName)$===">"?_e(T):E(y,$)?T.tagName+=$:T.script?(T.script+="</"+T.tagName,T.tagName="",T.state=g.SCRIPT):(v($)||k(T,"Invalid tagname in closing tag"),T.state=g.CLOSE_TAG_SAW_WHITE);else{if(v($))continue;S(b,$)?T.script?(T.script+="</"+$,T.state=g.SCRIPT):k(T,"Invalid tagname in closing tag."):T.tagName=$}continue;case g.CLOSE_TAG_SAW_WHITE:if(v($))continue;$===">"?_e(T):k(T,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var Ve,wt;switch(T.state){case g.TEXT_ENTITY:Ve=g.TEXT,wt="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:Ve=g.ATTRIB_VALUE_QUOTED,wt="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:Ve=g.ATTRIB_VALUE_UNQUOTED,wt="attribValue";break}if($===";")if(T.opt.unparsedEntities){var Kt=Fe(T);T.entity="",T.state=Ve,T.write(Kt)}else T[wt]+=Fe(T),T.entity="",T.state=Ve;else E(T.entity.length?_:h,$)?T.entity+=$:(k(T,"Invalid character in entity name"),T[wt]+="&"+T.entity+$,T.entity="",T.state=Ve);continue;default:throw new Error(T,"Unknown state: "+T.state)}return T.position>=T.bufferCheckPosition&&n(T),T}return String.fromCodePoint||(function(){var O=String.fromCharCode,T=Math.floor,M=function(){var $=16384,Ae=[],qe,Ve,wt=-1,Kt=arguments.length;if(!Kt)return"";for(var te="";++wt<Kt;){var ce=Number(arguments[wt]);if(!isFinite(ce)||ce<0||ce>1114111||T(ce)!==ce)throw RangeError("Invalid code point: "+ce);ce<=65535?Ae.push(ce):(ce-=65536,qe=(ce>>10)+55296,Ve=ce%1024+56320,Ae.push(qe,Ve)),(wt+1===Kt||Ae.length>$)&&(te+=O.apply(null,Ae),Ae.length=0)}return te};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:M,configurable:!0,writable:!0}):String.fromCodePoint=M})(),t},DV=Oce();var qw=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``,LV=class extends Ru{constructor(e){super(e);A(this,"tags");A(this,"lc_namespace",["langchain_core","output_parsers"]);A(this,"lc_serializable",!0);this.tags=e==null?void 0:e.tags}static lc_name(){return"XMLOutputParser"}_diff(e,r){if(r)return e?qf(e,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(e){return Gw(e[0].text)}async parse(e){return Gw(e)}getFormatInstructions(){var r,n;return!!(this.tags&&this.tags.length>0)?qw.replace("{tags}",(n=(r=this.tags)==null?void 0:r.join(", "))!=null?n:""):qw}},Ice=t=>t.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),UV=t=>{var r;if(Object.keys(t).length===0)return{};let e={};return t.children.length>0?(e[t.name]=t.children.map(UV),e):(e[t.name]=(r=t.text)!=null?r:void 0,e)};function Gw(t){let e=Ice(t),r=DV.parser(!0),n={},i=[];r.onopentag=s=>{let c={name:s.name,attributes:s.attributes,children:[],text:"",isSelfClosing:s.isSelfClosing};i.length>0?i[i.length-1].children.push(c):n=c,s.isSelfClosing||i.push(c)},r.onclosetag=()=>{if(i.length>0){let s=i.pop();i.length===0&&s&&(n=s)}},r.ontext=s=>{if(i.length>0){let c=i[i.length-1];c.text+=s}},r.onattribute=s=>{if(i.length>0){let c=i[i.length-1];c.attributes[s.name]=s.value}};let o=/```(xml)?(.*)```/s.exec(e),a=o?o[2]:e;return r.write(a).close(),n&&n.name==="?xml"&&(n=n.children[0]),UV(n)}var Nce={};le(Nce,{AsymmetricStructuredOutputParser:()=>zV,BaseCumulativeTransformOutputParser:()=>Ru,BaseLLMOutputParser:()=>xk,BaseOutputParser:()=>xl,BaseTransformOutputParser:()=>ts,BytesOutputParser:()=>CV,CommaSeparatedListOutputParser:()=>kV,CustomListOutputParser:()=>$V,JsonMarkdownStructuredOutputParser:()=>wk,JsonOutputParser:()=>Gg,ListOutputParser:()=>xm,MarkdownListOutputParser:()=>PV,NumberedListOutputParser:()=>RV,OutputParserException:()=>hi,StringOutputParser:()=>MV,StructuredOutputParser:()=>wm,XMLOutputParser:()=>LV,XML_FORMAT_INSTRUCTIONS:()=>qw,parseJsonMarkdown:()=>_h,parsePartialJson:()=>Pc,parseXMLMarkdown:()=>Gw});function wl(t,e){var i;if(t.function===void 0)return;let r;if(e!=null&&e.partial)try{r=Pc((i=t.function.arguments)!=null?i:"{}")}catch(o){return}else try{r=JSON.parse(t.function.arguments)}catch(o){throw new hi([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${o.message}`].join(`
`))}let n={name:t.function.name,args:r,type:"tool_call"};return e!=null&&e.returnId&&(n.id=t.id),n}function Hw(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Pu(t,e){var r,n;return{name:(r=t.function)==null?void 0:r.name,args:(n=t.function)==null?void 0:n.arguments,id:t.id,error:e,type:"invalid_tool_call"}}var Sk=class extends Ru{constructor(e){var r;super(e);A(this,"returnId",!1);A(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);A(this,"lc_serializable",!0);this.returnId=(r=e==null?void 0:e.returnId)!=null?r:this.returnId}static lc_name(){return"JsonOutputToolsParser"}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,r=!0){var a;let n=e[0].message,i;if(ou(n)&&((a=n.tool_calls)!=null&&a.length)?i=n.tool_calls.map(s=>{let{id:c,...u}=s;return this.returnId?{id:c,...u}:u}):n.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(c=>wl(c,{returnId:this.returnId,partial:r}))),!i)return[];let o=[];for(let s of i)if(s!==void 0){let c={type:s.name,args:s.args,id:s.id};o.push(c)}return o}},Hg=class extends Sk{constructor(e){var r;super(e);A(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);A(this,"lc_serializable",!0);A(this,"returnId",!1);A(this,"keyName");A(this,"returnSingle",!1);A(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=(r=e.returnSingle)!=null?r:this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"JsonOutputKeyToolsParser"}async _validateResult(e){var n;if(this.zodSchema===void 0)return e;let r=await Jx(this.zodSchema,e);if(r.success)return r.data;throw new hi(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((n=r.error)==null?void 0:n.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){let n=(await super.parsePartialResult(e)).filter(o=>o.type===this.keyName),i=n;if(n.length)return this.returnId||(i=n.map(o=>o.args)),this.returnSingle?i[0]:i}async parseResult(e){let n=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName),i=n;return n.length?(this.returnId||(i=n.map(a=>a.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(a=>this._validateResult(a)))):void 0}};var Cce={};le(Cce,{JsonOutputKeyToolsParser:()=>Hg,JsonOutputToolsParser:()=>Sk,convertLangChainToolCallToOpenAI:()=>Hw,makeInvalidToolCall:()=>Pu,parseToolCall:()=>wl});var Sl=class extends Vw{constructor(e){var n,i,o,a,s,c,u,l,d,f,m,p,b,y,h,_,v,x,w,E,S,g;super(e!=null?e:{});A(this,"temperature");A(this,"topP");A(this,"frequencyPenalty");A(this,"presencePenalty");A(this,"n");A(this,"logitBias");A(this,"model","gpt-3.5-turbo");A(this,"modelKwargs");A(this,"stop");A(this,"stopSequences");A(this,"user");A(this,"timeout");A(this,"streaming",!1);A(this,"streamUsage",!0);A(this,"maxTokens");A(this,"logprobs");A(this,"topLogprobs");A(this,"apiKey");A(this,"organization");A(this,"__includeRawResponse");A(this,"client");A(this,"clientConfig");A(this,"supportsStrictToolCalling");A(this,"audio");A(this,"modalities");A(this,"reasoning");A(this,"zdrEnabled");A(this,"service_tier");A(this,"promptCacheKey");A(this,"promptCacheRetention");A(this,"verbosity");A(this,"defaultOptions");A(this,"lc_serializable",!0);let r=typeof((n=e==null?void 0:e.configuration)==null?void 0:n.apiKey)=="string"||typeof((i=e==null?void 0:e.configuration)==null?void 0:i.apiKey)=="function"?(o=e==null?void 0:e.configuration)==null?void 0:o.apiKey:void 0;this.apiKey=(s=(a=e==null?void 0:e.apiKey)!=null?a:r)!=null?s:er("OPENAI_API_KEY"),this.organization=(u=(c=e==null?void 0:e.configuration)==null?void 0:c.organization)!=null?u:er("OPENAI_ORGANIZATION"),this.model=(d=(l=e==null?void 0:e.model)!=null?l:e==null?void 0:e.modelName)!=null?d:this.model,this.modelKwargs=(f=e==null?void 0:e.modelKwargs)!=null?f:{},this.timeout=e==null?void 0:e.timeout,this.temperature=(m=e==null?void 0:e.temperature)!=null?m:this.temperature,this.topP=(p=e==null?void 0:e.topP)!=null?p:this.topP,this.frequencyPenalty=(b=e==null?void 0:e.frequencyPenalty)!=null?b:this.frequencyPenalty,this.presencePenalty=(y=e==null?void 0:e.presencePenalty)!=null?y:this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(h=e==null?void 0:e.n)!=null?h:this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(_=e==null?void 0:e.stopSequences)!=null?_:e==null?void 0:e.stop,this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=e==null?void 0:e.reasoning,this.maxTokens=(v=e==null?void 0:e.maxCompletionTokens)!=null?v:e==null?void 0:e.maxTokens,this.promptCacheKey=(x=e==null?void 0:e.promptCacheKey)!=null?x:this.promptCacheKey,this.promptCacheRetention=(w=e==null?void 0:e.promptCacheRetention)!=null?w:this.promptCacheRetention,this.verbosity=(E=e==null?void 0:e.verbosity)!=null?E:this.verbosity,this.disableStreaming=(e==null?void 0:e.disableStreaming)===!0,this.streaming=(e==null?void 0:e.streaming)===!0,this.disableStreaming&&(this.streaming=!1),(e==null?void 0:e.streaming)===!1&&(this.disableStreaming=!0),this.streamUsage=(S=e==null?void 0:e.streamUsage)!=null?S:this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(g=e==null?void 0:e.zdrEnabled)!=null?g:!1}_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","promptCacheRetention","verbosity"]}getLsParams(e){var n,i;let r=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:(n=r.temperature)!=null?n:void 0,ls_max_tokens:(i=r.max_tokens)!=null?i:void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}_getReasoningParams(e){if(!Ya(this.model))return;let r;return this.reasoning!==void 0&&(r={...r,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(r={...r,...e.reasoning}),r}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&xn(e.json_schema.schema)?mV(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e!=null?e:{}}}_getClientOptions(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},i=ku(n),o={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};o.baseURL||delete o.baseURL,o.defaultHeaders=$u(o.defaultHeaders),this.client=new Te(o)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,r){return gl(e)?L5(e.metadata.customTool):Vg(e)?(r==null?void 0:r.strict)!==void 0?{...e,function:{...e.function,strict:r.strict}}:e:I5(e,r)}bindTools(e,r){let n;return(r==null?void 0:r.strict)!==void 0?n=r.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.withConfig({tools:e.map(i=>_m(i)||gl(i)?i:k5(i)?i.extras.providerToolDefinition:this._convertChatOpenAIToolToCompletionsTool(i,{strict:n})),...r})}async stream(e,r){return super.stream(e,this._combineCallOptions(r))}async invoke(e,r){return super.invoke(e,this._combineCallOptions(r))}_combineLLMOutput(...e){return e.reduce((r,n)=>{var i,o,a;return n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=(i=n.tokenUsage.completionTokens)!=null?i:0,r.tokenUsage.promptTokens+=(o=n.tokenUsage.promptTokens)!=null?o:0,r.tokenUsage.totalTokens+=(a=n.tokenUsage.totalTokens)!=null?a:0),r},{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let r=0,n=0,i=0;this.model==="gpt-3.5-turbo-0301"?(n=4,i=-1):(n=3,i=1);let o=await Promise.all(e.map(async a=>{var f,m,p,b,y,h;let s=await this.getNumTokens(a.content),c=await this.getNumTokens(Xa(a)),u=a.name!==void 0?i+await this.getNumTokens(a.name):0,l=s+n+c+u,d=a;if(d._getType()==="function"&&(l-=2),(f=d.additional_kwargs)!=null&&f.function_call&&(l+=3),(m=d==null?void 0:d.additional_kwargs.function_call)!=null&&m.name&&(l+=await this.getNumTokens((p=d.additional_kwargs.function_call)==null?void 0:p.name)),(b=d.additional_kwargs.function_call)!=null&&b.arguments)try{l+=await this.getNumTokens(JSON.stringify(JSON.parse((y=d.additional_kwargs.function_call)==null?void 0:y.arguments)))}catch(_){console.error("Error parsing function arguments",_,JSON.stringify(d.additional_kwargs.function_call)),l+=await this.getNumTokens((h=d.additional_kwargs.function_call)==null?void 0:h.arguments)}return r+=l,l}));return r+=3,{totalCount:r,countPerMessage:o}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>{var i;return(i=n.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)}))).reduce((n,i)=>n+i,0)}async _getEstimatedTokenCountFromPrompt(e,r,n){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(r&&n!=="auto"){let o=N5(r);i+=await this.getNumTokens(o),i+=9}return r&&e.find(o=>o._getType()==="system")&&(i-=4),n==="none"?i+=1:typeof n=="object"&&(i+=await this.getNumTokens(n.name)+4),i}async moderateContent(e,r){var a;let n=this._getClientOptions(r==null?void 0:r.options),i=(a=r==null?void 0:r.model)!=null?a:"omni-moderation-latest",o={input:e,model:i};return this.caller.call(async()=>{try{return await this.client.moderations.create(o,n)}catch(s){throw Uo(s)}})}get profile(){var e;return(e=hV[this.model])!=null?e:{}}_getStructuredOutputMethod(e){let r={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((r==null?void 0:r.method)===void 0)return"jsonSchema"}else r.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return r.method}withStructuredOutput(e,r){var f,m;let n,i,{schema:o,name:a,includeRaw:s}={...r,schema:e};if((r==null?void 0:r.strict)!==void 0&&r.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");let c=fV(this.model,r==null?void 0:r.method);if(c==="jsonMode"){xn(o)?i=wm.fromZodSchema(o):i=new Gg;let p=Vr(o);n=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:a!=null?a:"extract",...p}}})}else if(c==="jsonSchema"){let p={name:a!=null?a:"extract",description:Su(o),schema:o,strict:r==null?void 0:r.strict},b=Vr(p.schema);if(n=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:p},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:p.name,description:p.description,...b}}}),xn(o)){let y=wm.fromZodSchema(o);i=Zn.from(h=>"parsed"in h.additional_kwargs?h.additional_kwargs.parsed:y)}else i=new Gg}else{let p=a!=null?a:"extract";if(xn(o)){let b=Vr(o);n=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:{name:p,description:b.description,parameters:b}}],tool_choice:{type:"function",function:{name:p}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:p,...b}},...(r==null?void 0:r.strict)!==void 0?{strict:r.strict}:{}}),i=new Hg({returnSingle:!0,keyName:p,zodSchema:o})}else{let b;typeof o.name=="string"&&typeof o.parameters=="object"&&o.parameters!=null?(b=o,p=o.name):(p=(f=o.title)!=null?f:p,b={name:p,description:(m=o.description)!=null?m:"",parameters:o});let y=Vr(o);n=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:b}],tool_choice:{type:"function",function:{name:p}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:p,...y}},...(r==null?void 0:r.strict)!==void 0?{strict:r.strict}:{}}),i=new Hg({returnSingle:!0,keyName:p})}}if(!s)return n.pipe(i);let u=ta.assign({parsed:(p,b)=>i.invoke(p.raw,b)}),l=ta.assign({parsed:()=>null}),d=u.withFallbacks({fallbacks:[l]});return Nu.from([{raw:n},d])}};var Kw={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,r,n;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${(r=t.mime_type)!=null?r:""};base64,${t.data}`,...(n=t.metadata)!=null&&n.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){var e;if(t.source_type==="url"){let r=ru({dataUrl:t.url});if(!r)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);let n=r.mime_type||t.mime_type||"",i;try{i=hh(n)}catch(o){throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(i.type!=="audio"||i.subtype!=="wav"&&i.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:i.subtype,data:r.data}}}if(t.source_type==="base64"){let r;try{r=hh((e=t.mime_type)!=null?e:"")}catch(n){throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,r,n,i,o,a;if(t.source_type==="url"){let s=ru({dataUrl:t.url}),c=ym(t);if(!s)throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(r=t.metadata)!=null&&r.name?{filename:c}:{}}}}if(t.source_type==="base64"){let s=ym(t);return{type:"file",file:{file_data:`data:${(n=t.mime_type)!=null?n:""};base64,${t.data}`,...(i=t.metadata)!=null&&i.filename||(o=t.metadata)!=null&&o.name||(a=t.metadata)!=null&&a.title?{filename:s}:{}}}}if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}},Ak=({message:t,rawResponse:e,includeRawResponse:r})=>{var i,o,a;let n=t.tool_calls;switch(t.role){case"assistant":{let s=[],c=[];for(let f of n!=null?n:[])try{s.push(wl(f,{returnId:!0}))}catch(m){c.push(Pu(f,m.message))}let u={function_call:t.function_call,tool_calls:n};r!==void 0&&(u.__raw_response=e);let l={model_provider:"openai",model_name:e.model,...e.system_fingerprint?{usage:{...e.usage},system_fingerprint:e.system_fingerprint}:{}};t.audio&&(u.audio=t.audio);let d=pV(t.content||"",(o=(i=e.choices)==null?void 0:i[0])==null?void 0:o.message);return new Qt({content:d,tool_calls:s,invalid_tool_calls:c,additional_kwargs:u,response_metadata:l,id:e.id})}default:return new Ri(t.content||"",(a=t.role)!=null?a:"unknown")}},Tk=({delta:t,rawResponse:e,includeRawResponse:r,defaultRole:n})=>{var c,u,l,d;let i=(c=t.role)!=null?c:n,o=(u=t.content)!=null?u:"",a;t.function_call?a={function_call:t.function_call}:t.tool_calls?a={tool_calls:t.tool_calls}:a={},r&&(a.__raw_response=e),t.audio&&(a.audio={...t.audio,index:e.choices[0].index});let s={model_provider:"openai",usage:{...e.usage}};if(i==="user")return new Ua({content:o,response_metadata:s});if(i==="assistant"){let f=[];if(Array.isArray(t.tool_calls))for(let m of t.tool_calls)f.push({name:(l=m.function)==null?void 0:l.name,args:(d=m.function)==null?void 0:d.arguments,id:m.id,index:m.index,type:"tool_call_chunk"});return new Sr({content:o,tool_call_chunks:f,additional_kwargs:a,id:e.id,response_metadata:s})}else return i==="system"?new Pi({content:o,response_metadata:s}):i==="developer"?new Pi({content:o,response_metadata:s,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new La({content:o,additional_kwargs:a,name:t.name,response_metadata:s}):i==="tool"?new nu({content:o,additional_kwargs:a,tool_call_id:t.tool_call_id,response_metadata:s}):new Da({content:o,role:i,response_metadata:s})},jV=t=>{if(t.type==="image"){if(t.url)return{type:"image_url",image_url:{url:t.url}};if(t.data)return{type:"image_url",image_url:{url:`data:${t.mimeType};base64,${t.data}`}}}if(t.type==="audio"&&t.data){let e=Qv(()=>{let[,r]=t.mimeType.split("/");return r==="wav"||r==="mp3"?r:"wav"});return{type:"input_audio",input_audio:{data:t.data.toString(),format:e}}}if(t.type==="file"){if(t.data){let e=ym(t);return{type:"file",file:{file_data:`data:${t.mimeType};base64,${t.data}`,filename:e}}}if(t.fileId)return{type:"file",file:{file_id:t.fileId}}}},FV=({message:t,model:e})=>{var i;let r=Xa(t);if(r==="system"&&Ya(e)&&(r="developer"),r==="developer")return{role:"developer",content:t.contentBlocks.filter(o=>o.type==="text")};if(r==="system")return{role:"system",content:t.contentBlocks.filter(o=>o.type==="text")};if(r==="assistant")return{role:"assistant",content:t.contentBlocks.filter(o=>o.type==="text")};if(r==="tool"&&Wr.isInstance(t))return{role:"tool",tool_call_id:t.tool_call_id,content:t.contentBlocks.filter(o=>o.type==="text")};if(r==="function")return{role:"function",name:(i=t.name)!=null?i:"",content:t.contentBlocks.filter(o=>o.type==="text").join("")};function*n(o){for(let a of o){a.type==="text"&&(yield{type:"text",text:a.text});let s=jV(a);s&&(yield s)}}return{role:"user",content:Array.from(n(t.contentBlocks))}},Kg=({messages:t,model:e})=>t.flatMap(r=>{var a,s;if("output_version"in r.response_metadata&&((a=r.response_metadata)==null?void 0:a.output_version)==="v1")return FV({message:r});let n=Xa(r);n==="system"&&Ya(e)&&(n="developer");let i=typeof r.content=="string"?r.content:r.content.map(c=>Pn(c)?Mf(c,Kw):c),o={role:n,content:i};if(r.name!=null&&(o.name=r.name),r.additional_kwargs.function_call!=null&&(o.function_call=r.additional_kwargs.function_call),Qt.isInstance(r)&&((s=r.tool_calls)!=null&&s.length)?o.tool_calls=r.tool_calls.map(Hw):(r.additional_kwargs.tool_calls!=null&&(o.tool_calls=r.additional_kwargs.tool_calls),Wr.isInstance(r)&&r.tool_call_id!=null&&(o.tool_call_id=r.tool_call_id)),r.additional_kwargs.audio&&typeof r.additional_kwargs.audio=="object"&&"id"in r.additional_kwargs.audio){let c={role:"assistant",audio:{id:r.additional_kwargs.audio.id}};return[o,c]}return o});var Jw=class extends Sl{invocationParams(t,e){var a,s,c,u,l;let r;(t==null?void 0:t.strict)!==void 0?r=t.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let n={};(t==null?void 0:t.stream_options)!==void 0?n={stream_options:t.stream_options}:this.streamUsage&&(this.streaming||e!=null&&e.streaming)&&(n={stream_options:{include_usage:!0}});let i={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(a=t==null?void 0:t.stop)!=null?a:this.stopSequences,user:this.user,stream:this.streaming,functions:t==null?void 0:t.functions,function_call:t==null?void 0:t.function_call,tools:(s=t==null?void 0:t.tools)!=null&&s.length?t.tools.map(d=>this._convertChatOpenAIToolToCompletionsTool(d,{strict:r})):void 0,tool_choice:gw(t==null?void 0:t.tool_choice),response_format:this._getResponseFormat(t==null?void 0:t.response_format),seed:t==null?void 0:t.seed,...n,parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,...this.audio||t!=null&&t.audio?{audio:this.audio||(t==null?void 0:t.audio)}:{},...this.modalities||t!=null&&t.modalities?{modalities:this.modalities||(t==null?void 0:t.modalities)}:{},...this.modelKwargs,prompt_cache_key:(c=t==null?void 0:t.promptCacheKey)!=null?c:this.promptCacheKey,prompt_cache_retention:(u=t==null?void 0:t.promptCacheRetention)!=null?u:this.promptCacheRetention,verbosity:(l=t==null?void 0:t.verbosity)!=null?l:this.verbosity};(t==null?void 0:t.prediction)!==void 0&&(i.prediction=t.prediction),this.service_tier!==void 0&&(i.service_tier=this.service_tier),(t==null?void 0:t.service_tier)!==void 0&&(i.service_tier=t.service_tier);let o=this._getReasoningParams(t);return o!==void 0&&o.effort!==void 0&&(i.reasoning_effort=o.effort),Ya(i.model)?i.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:i.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,i}async _generate(t,e,r){var a,s,c,u,l,d,f,m,p,b;let n={},i=this.invocationParams(e),o=Kg({messages:t,model:this.model});if(i.stream){let y=this._streamResponseChunks(t,e,r),h={};for await(let S of y){S.message.response_metadata={...S.generationInfo,...S.message.response_metadata};let g=(s=(a=S.generationInfo)==null?void 0:a.completion)!=null?s:0;h[g]===void 0?h[g]=S:h[g]=h[g].concat(S)}let _=Object.entries(h).sort(([S],[g])=>parseInt(S,10)-parseInt(g,10)).map(([S,g])=>g),{functions:v,function_call:x}=this.invocationParams(e),w=await this._getEstimatedTokenCountFromPrompt(t,v,x),E=await this._getNumTokensFromGenerations(_);return n.input_tokens=w,n.output_tokens=E,n.total_tokens=w+E,{generations:_,llmOutput:{estimatedTokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}else{let y=await this.completionWithRetry({...i,stream:!1,messages:o},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options}),{completion_tokens:h,prompt_tokens:_,total_tokens:v,prompt_tokens_details:x,completion_tokens_details:w}=(c=y==null?void 0:y.usage)!=null?c:{};h&&(n.output_tokens=((u=n.output_tokens)!=null?u:0)+h),_&&(n.input_tokens=((l=n.input_tokens)!=null?l:0)+_),v&&(n.total_tokens=((d=n.total_tokens)!=null?d:0)+v),((x==null?void 0:x.audio_tokens)!==null||(x==null?void 0:x.cached_tokens)!==null)&&(n.input_token_details={...(x==null?void 0:x.audio_tokens)!==null&&{audio:x==null?void 0:x.audio_tokens},...(x==null?void 0:x.cached_tokens)!==null&&{cache_read:x==null?void 0:x.cached_tokens}}),((w==null?void 0:w.audio_tokens)!==null||(w==null?void 0:w.reasoning_tokens)!==null)&&(n.output_token_details={...(w==null?void 0:w.audio_tokens)!==null&&{audio:w==null?void 0:w.audio_tokens},...(w==null?void 0:w.reasoning_tokens)!==null&&{reasoning:w==null?void 0:w.reasoning_tokens}});let E=[];for(let S of(f=y==null?void 0:y.choices)!=null?f:[]){let I={text:(p=(m=S.message)==null?void 0:m.content)!=null?p:"",message:this._convertCompletionsMessageToBaseMessage((b=S.message)!=null?b:{role:"assistant"},y)};I.generationInfo={...S.finish_reason?{finish_reason:S.finish_reason}:{},...S.logprobs?{logprobs:S.logprobs}:{}},ou(I.message)&&(I.message.usage_metadata=n),I.message=new Qt(Object.fromEntries(Object.entries(I.message).filter(([N])=>!N.startsWith("lc_")))),E.push(I)}return{generations:E,llmOutput:{tokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}}async*_streamResponseChunks(t,e,r){var c,u,l,d,f,m,p,b,y,h,_,v,x,w;let n=Kg({messages:t,model:this.model}),i={...this.invocationParams(e,{streaming:!0}),messages:n,stream:!0},o,a=await this.completionWithRetry(i,e),s;for await(let E of a){let S=(c=E==null?void 0:E.choices)==null?void 0:c[0];if(E.usage&&(s=E.usage),!S)continue;let{delta:g}=S;if(!g)continue;let I=this._convertCompletionsDeltaToBaseMessageChunk(g,E,o);o=(u=g.role)!=null?u:o;let N={prompt:(l=e.promptIndex)!=null?l:0,completion:(d=S.index)!=null?d:0};if(typeof I.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let C={...N};S.finish_reason!=null&&(C.finish_reason=S.finish_reason,C.system_fingerprint=E.system_fingerprint,C.model_name=E.model,C.service_tier=E.service_tier),this.logprobs&&(C.logprobs=S.logprobs);let R=new Ba({message:I,text:I.content,generationInfo:C});yield R,await(r==null?void 0:r.handleLLMNewToken((f=R.text)!=null?f:"",N,void 0,void 0,void 0,{chunk:R}))}if(s){let E={...((m=s.prompt_tokens_details)==null?void 0:m.audio_tokens)!==null&&{audio:(p=s.prompt_tokens_details)==null?void 0:p.audio_tokens},...((b=s.prompt_tokens_details)==null?void 0:b.cached_tokens)!==null&&{cache_read:(y=s.prompt_tokens_details)==null?void 0:y.cached_tokens}},S={...((h=s.completion_tokens_details)==null?void 0:h.audio_tokens)!==null&&{audio:(_=s.completion_tokens_details)==null?void 0:_.audio_tokens},...((v=s.completion_tokens_details)==null?void 0:v.reasoning_tokens)!==null&&{reasoning:(x=s.completion_tokens_details)==null?void 0:x.reasoning_tokens}};yield new Ba({message:new Sr({content:"",response_metadata:{usage:{...s}},usage_metadata:{input_tokens:s.prompt_tokens,output_tokens:s.completion_tokens,total_tokens:s.total_tokens,...Object.keys(E).length>0&&{input_token_details:E},...Object.keys(S).length>0&&{output_token_details:S}}}),text:""})}if((w=e.signal)!=null&&w.aborted)throw new Error("AbortError")}async completionWithRetry(t,e){let r=this._getClientOptions(e),n=t.response_format&&t.response_format.type==="json_schema";return this.caller.call(async()=>{try{return n&&!t.stream?await this.client.chat.completions.parse(t,r):await this.client.chat.completions.create(t,r)}catch(i){throw Uo(i)}})}_convertCompletionsDeltaToBaseMessageChunk(t,e,r){return Tk({delta:t,rawResponse:e,includeRawResponse:this.__includeRawResponse,defaultRole:r})}_convertCompletionsMessageToBaseMessage(t,e){return Ak({message:t,rawResponse:e,includeRawResponse:this.__includeRawResponse})}};var Sm="__openai_function_call_ids__",Ek=t=>{var n,i,o,a,s,c,u;let e={...((n=t==null?void 0:t.input_tokens_details)==null?void 0:n.cached_tokens)!=null&&{cache_read:(i=t==null?void 0:t.input_tokens_details)==null?void 0:i.cached_tokens}},r={...((o=t==null?void 0:t.output_tokens_details)==null?void 0:o.reasoning_tokens)!=null&&{reasoning:(a=t==null?void 0:t.output_tokens_details)==null?void 0:a.reasoning_tokens}};return{input_tokens:(s=t==null?void 0:t.input_tokens)!=null?s:0,output_tokens:(c=t==null?void 0:t.output_tokens)!=null?c:0,total_tokens:(u=t==null?void 0:t.total_tokens)!=null?u:0,input_token_details:e,output_token_details:r}},Ww=t=>{var s,c;if(t.error){let u=new Error(t.error.message);throw u.name=t.error.code,u}let e,r=[],n=[],i=[],o={model_provider:"openai",model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,service_tier:t.service_tier,model_name:t.model},a={};for(let u of t.output)if(u.type==="message")e=u.id,r.push(...u.content.flatMap(l=>l.type==="output_text"?("parsed"in l&&l.parsed!=null&&(a.parsed=l.parsed),{type:"text",text:l.text,annotations:l.annotations}):l.type==="refusal"?(a.refusal=l.refusal,[]):l));else if(u.type==="function_call"){let l={function:{name:u.name,arguments:u.arguments},id:u.call_id};try{n.push(wl(l,{returnId:!0}))}catch(d){let f;typeof d=="object"&&d!=null&&"message"in d&&typeof d.message=="string"&&(f=d.message),i.push(Pu(l,f))}(s=a[Sm])!=null||(a[Sm]={}),u.id&&(a[Sm][u.call_id]=u.id)}else if(u.type==="reasoning")a.reasoning=u;else if(u.type==="custom_tool_call"){let l=R5(u);l?n.push(l):i.push(Pu(u,"Malformed custom tool call"))}else if(u.type==="computer_call"){let l=P5(u);l?n.push(l):i.push(Pu(u,"Malformed computer call"))}else(c=a.tool_outputs)!=null||(a.tool_outputs=[]),a.tool_outputs.push(u);return new Qt({id:e,content:r,tool_calls:n,invalid_tool_calls:i,usage_metadata:Ek(t.usage),additional_kwargs:a,response_metadata:o})},HV=t=>{let e=(t.summary.length>1?t.summary.reduce((r,n)=>{let i=r[r.length-1];return i.index===n.index?i.text+=n.text:r.push(n),r},[{...t.summary[0]}]):t.summary).map(r=>Object.fromEntries(Object.entries(r).filter(([n])=>n!=="index")));return{...t,summary:e}},Ok=t=>{var c,u,l;let e=[],r={},n,i=[],o={model_provider:"openai"},a={},s;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")s=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")i.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.call_id,index:t.output_index}),a[Sm]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&t.item.type==="computer_call")i.push({type:"tool_call_chunk",name:"computer_use",args:JSON.stringify({action:t.item.action}),id:t.item.call_id,index:t.output_index}),a.tool_outputs=[t.item];else if(t.type==="response.output_item.done"&&["web_search_call","file_search_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(t.item.type))a.tool_outputs=[t.item];else if(t.type==="response.created")o.id=t.response.id,o.model_name=t.response.model,o.model=t.response.model;else if(t.type==="response.completed"){let d=Ww(t.response);n=Ek(t.response.usage),((u=(c=t.response.text)==null?void 0:c.format)==null?void 0:u.type)==="json_schema"&&((l=a.parsed)!=null||(a.parsed=JSON.parse(d.text)));for(let[f,m]of Object.entries(t.response))f!=="id"&&(o[f]=m)}else if(t.type==="response.function_call_arguments.delta"||t.type==="response.custom_tool_call_input.delta")i.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")r={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")a.refusal=t.refusal;else if(t.type==="response.output_item.added"&&"item"in t&&t.item.type==="reasoning"){let d=t.item.summary?t.item.summary.map((f,m)=>({...f,index:m})):void 0;a.reasoning={id:t.item.id,type:t.item.type,...d?{summary:d}:{}}}else if(t.type==="response.reasoning_summary_part.added")a.reasoning={type:"reasoning",summary:[{...t.part,index:t.summary_index}]};else if(t.type==="response.reasoning_summary_text.delta")a.reasoning={type:"reasoning",summary:[{text:t.delta,type:"summary_text",index:t.summary_index}]};else return t.type==="response.image_generation_call.partial_image",null;return new Ba({text:e.map(d=>d.text).join(""),message:new Sr({id:s,content:e,tool_call_chunks:i,usage_metadata:n,additional_kwargs:a,response_metadata:o}),generationInfo:r})},KV=t=>{var n;let e=Qt.isInstance(t)&&((n=t.response_metadata)==null?void 0:n.model_provider)==="openai";function*r(){var _,v,x,w,E,S;let i=Wa(()=>{try{let g=Xa(t);return g==="system"||g==="developer"||g==="assistant"||g==="user"?g:"assistant"}catch(g){return"assistant"}}),o,a=new Set,s=new Set,c=new Map,u=new Map;function*l(){if(!o)return;let g=o.content;(typeof g=="string"&&g.length>0||Array.isArray(g)&&g.length>0)&&(yield o),o=void 0}let d=g=>{o||(o={type:"message",role:i,content:[]}),typeof o.content=="string"?o.content=o.content.length>0?[{type:"input_text",text:o.content},...g]:[...g]:o.content.push(...g)},f=g=>{if(typeof g=="string")return g;try{return JSON.stringify(g!=null?g:{})}catch(I){return"{}"}},m=g=>{var N;let I=Wa(()=>{var R;let C=(R=g.metadata)==null?void 0:R.detail;return C==="low"||C==="high"||C==="auto"?C:"auto"});if(g.fileId)return{type:"input_image",detail:I,file_id:g.fileId};if(g.url)return{type:"input_image",detail:I,image_url:g.url};if(g.data){let C=typeof g.data=="string"?g.data:Buffer.from(g.data).toString("base64"),R=(N=g.mimeType)!=null?N:"image/png";return{type:"input_image",detail:I,image_url:`data:${R};base64,${C}`}}},p=g=>{var N;let I=ym(g);if(g.fileId&&typeof I=="string")return{type:"input_file",file_id:g.fileId,...I?{filename:I}:{}};if(g.url&&typeof I=="string")return{type:"input_file",file_url:g.url,...I?{filename:I}:{}};if(g.data&&typeof I=="string"){let C=typeof g.data=="string"?g.data:Buffer.from(g.data).toString("base64");return{type:"input_file",file_data:`data:${(N=g.mimeType)!=null?N:"application/octet-stream"};base64,${C}`,...I?{filename:I}:{}}}},b=g=>{var R;let I=Wa(()=>{var z;if(Array.isArray(g.summary)){let j=g.summary,L=(z=j==null?void 0:j.map(k=>k==null?void 0:k.text).filter(k=>typeof k=="string"))!=null?z:[];if(L.length>0)return L}return g.reasoning?[g.reasoning]:[]}),N=I.length>0?I.map(z=>({type:"summary_text",text:z})):[{type:"summary_text",text:""}],C={type:"reasoning",id:(R=g.id)!=null?R:"",summary:N};return g.reasoning&&(C.content=[{type:"reasoning_text",text:g.reasoning}]),C},y=g=>{var I,N;return{type:"function_call",name:(I=g.name)!=null?I:"",call_id:(N=g.id)!=null?N:"",arguments:f(g.args)}},h=g=>{var C;let I=f(g.output),N=g.status==="success"?"completed":g.status==="error"?"incomplete":void 0;return{type:"function_call_output",call_id:(C=g.toolCallId)!=null?C:"",output:I,...N?{status:N}:{}}};for(let g of t.contentBlocks)if(g.type==="text")d([{type:"input_text",text:g.text}]);else if(g.type!=="invalid_tool_call"){if(g.type==="reasoning")yield*l(),yield b(g);else if(g.type==="tool_call"){yield*l();let I=(_=g.id)!=null?_:"";I&&(a.add(I),c.delete(I)),yield y(g)}else if(g.type==="tool_call_chunk"){if(g.id){let I=(v=c.get(g.id))!=null?v:{name:g.name,args:[]};g.name&&(I.name=g.name),g.args&&I.args.push(g.args),c.set(g.id,I)}}else if(g.type==="server_tool_call"){yield*l();let I=(x=g.id)!=null?x:"";I&&(s.add(I),u.delete(I)),yield y(g)}else if(g.type==="server_tool_call_chunk"){if(g.id){let I=(w=u.get(g.id))!=null?w:{name:g.name,args:[]};g.name&&(I.name=g.name),g.args&&I.args.push(g.args),u.set(g.id,I)}}else if(g.type==="server_tool_call_result")yield*l(),yield h(g);else if(g.type!=="audio")if(g.type==="file"){let I=p(g);I&&d([I])}else if(g.type==="image"){let I=m(g);I&&d([I])}else if(g.type==="video"){let I=p(g);I&&d([I])}else g.type==="text-plain"?g.text&&d([{type:"input_text",text:g.text}]):g.type==="non_standard"&&e&&(yield*l(),yield g.value)}yield*l();for(let[g,I]of c){if(!g||a.has(g))continue;let N=I.args.join("");!I.name&&!N||(yield{type:"function_call",call_id:g,name:(E=I.name)!=null?E:"",arguments:N})}for(let[g,I]of u){if(!g||s.has(g))continue;let N=I.args.join("");!I.name&&!N||(yield{type:"function_call",call_id:g,name:(S=I.name)!=null?S:"",arguments:N})}}return Array.from(r())},Yw=({messages:t,zdrEnabled:e,model:r})=>t.flatMap(n=>{var s,c,u,l;let i=n.response_metadata;if((i==null?void 0:i.output_version)==="v1")return KV(n);let o=n.additional_kwargs,a=Xa(n);if(a==="system"&&Ya(r)&&(a="developer"),a==="function")throw new Error("Function messages are not supported in Responses API");if(a==="tool"){let d=n;return(o==null?void 0:o.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof d.content=="string")return{type:"input_image",image_url:d.content};if(Array.isArray(d.content)){let m=d.content.find(y=>y.type==="input_image");if(m)return m;let p=d.content.find(y=>y.type==="computer_screenshot");if(p)return p;let b=d.content.find(y=>y.type==="image_url");if(b)return{type:"input_image",image_url:typeof b.image_url=="string"?b.image_url:b.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:d.tool_call_id}:(s=d.additional_kwargs)!=null&&s.customTool?{type:"custom_tool_call_output",call_id:d.tool_call_id,output:d.content}:{type:"function_call_output",call_id:d.tool_call_id,id:(c=d.id)!=null&&c.startsWith("fc_")?d.id:void 0,output:typeof d.content!="string"?JSON.stringify(d.content):d.content}}if(a==="assistant"){if(!e&&(i==null?void 0:i.output)!=null&&Array.isArray(i==null?void 0:i.output)&&(i==null?void 0:i.output.length)>0&&(i!=null&&i.output.every(y=>"type"in y)))return i==null?void 0:i.output;let d=[];if(o!=null&&o.reasoning&&!e){let y=HV(o.reasoning);d.push(y)}let{content:f}=n;o!=null&&o.refusal&&(typeof f=="string"&&(f=[{type:"output_text",text:f,annotations:[]}]),f=[...f,{type:"refusal",refusal:o.refusal}]),(typeof f=="string"||f.length>0)&&d.push({type:"message",role:"assistant",...n.id&&!e&&n.id.startsWith("msg_")?{id:n.id}:{},content:Wa(()=>typeof f=="string"?f:f.flatMap(y=>{var h;return y.type==="text"?{type:"output_text",text:y.text,annotations:(h=y.annotations)!=null?h:[]}:y.type==="output_text"||y.type==="refusal"?y:[]}))});let m=o==null?void 0:o[Sm];Qt.isInstance(n)&&((u=n.tool_calls)!=null&&u.length)?d.push(...n.tool_calls.map(y=>{var h,_;return z5(y)?{type:"custom_tool_call",id:y.call_id,call_id:(h=y.id)!=null?h:"",input:y.args.input,name:y.name}:M5(y)?{type:"computer_call",id:y.call_id,call_id:(_=y.id)!=null?_:"",action:y.args.action}:{type:"function_call",name:y.name,arguments:JSON.stringify(y.args),call_id:y.id,...e?{}:{id:m==null?void 0:m[y.id]}}})):o!=null&&o.tool_calls&&d.push(...o.tool_calls.map(y=>({type:"function_call",name:y.function.name,call_id:y.id,arguments:y.function.arguments,...e?{}:{id:m==null?void 0:m[y.id]}})));let p=(l=i==null?void 0:i.output)!=null&&l.length?i==null?void 0:i.output:o.tool_outputs,b=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(p!=null){let y=p,h=y==null?void 0:y.filter(_=>b.includes(_.type));h.length>0&&d.push(...h)}return d}if(a==="user"||a==="system"||a==="developer"){if(typeof n.content=="string")return{type:"message",role:a,content:n.content};let d=[],f=n.content.flatMap(m=>{if(m.type==="mcp_approval_response"&&d.push({type:"mcp_approval_response",approval_request_id:m.approval_request_id,approve:m.approve}),Pn(m))return Mf(m,Kw);if(m.type==="text")return{type:"input_text",text:m.text};if(m.type==="image_url"){let p=Wa(()=>{if(typeof m.image_url=="string")return m.image_url;if(typeof m.image_url=="object"&&m.image_url!==null&&"url"in m.image_url)return m.image_url.url}),b=Wa(()=>{if(typeof m.image_url=="string")return"auto";if(typeof m.image_url=="object"&&m.image_url!==null&&"detail"in m.image_url)return m.image_url.detail});return{type:"input_image",image_url:p,detail:b}}return m.type==="input_text"||m.type==="input_image"||m.type==="input_file"?m:[]});return f.length>0&&d.push({type:"message",role:a,content:f}),d}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${a}`),[]});var Xw=class extends Sl{invocationParams(t){var i,o,a;let e;(t==null?void 0:t.strict)!==void 0&&(e=t.strict),e===void 0&&this.supportsStrictToolCalling!==void 0&&(e=this.supportsStrictToolCalling);let r={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:t==null?void 0:t.previous_response_id,truncation:t==null?void 0:t.truncation,include:t==null?void 0:t.include,tools:(i=t==null?void 0:t.tools)!=null&&i.length?this._reduceChatOpenAITools(t.tools,{stream:this.streaming,strict:e}):void 0,tool_choice:$5(t==null?void 0:t.tool_choice)?t==null?void 0:t.tool_choice:(()=>{let s=gw(t==null?void 0:t.tool_choice);if(typeof s=="object"&&"type"in s){if(s.type==="function")return{type:"function",name:s.function.name};if(s.type==="allowed_tools")return{type:"allowed_tools",mode:s.allowed_tools.mode,tools:s.allowed_tools.tools};if(s.type==="custom")return{type:"custom",name:s.custom.name}}})(),text:(()=>{if(t!=null&&t.text)return t.text;let s=this._getResponseFormat(t==null?void 0:t.response_format);return(s==null?void 0:s.type)==="json_schema"?s.json_schema.schema!=null?{format:{type:"json_schema",schema:s.json_schema.schema,description:s.json_schema.description,name:s.json_schema.name,strict:s.json_schema.strict},verbosity:t==null?void 0:t.verbosity}:void 0:{format:s,verbosity:t==null?void 0:t.verbosity}})(),parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(o=t==null?void 0:t.promptCacheKey)!=null?o:this.promptCacheKey,prompt_cache_retention:(a=t==null?void 0:t.promptCacheRetention)!=null?a:this.promptCacheRetention,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},n=this._getReasoningParams(t);return n!==void 0&&(r.reasoning=n),r}async _generate(t,e){var n,i,o;let r=this.invocationParams(e);if(r.stream){let a=this._streamResponseChunks(t,e),s;for await(let c of a)c.message.response_metadata={...c.generationInfo,...c.message.response_metadata},s=(n=s==null?void 0:s.concat(c))!=null?n:c;return{generations:s?[s]:[],llmOutput:{estimatedTokenUsage:(i=s==null?void 0:s.message)==null?void 0:i.usage_metadata}}}else{let a=await this.completionWithRetry({input:Yw({messages:t,zdrEnabled:(o=this.zdrEnabled)!=null?o:!1,model:this.model}),...r,stream:!1},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options});return{generations:[{text:a.output_text,message:Ww(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(t,e,r){var i,o;let n=await this.completionWithRetry({...this.invocationParams(e),input:Yw({messages:t,zdrEnabled:(i=this.zdrEnabled)!=null?i:!1,model:this.model}),stream:!0},e);for await(let a of n){let s=Ok(a);s!=null&&(yield s,await(r==null?void 0:r.handleLLMNewToken(s.text||"",{prompt:(o=e.promptIndex)!=null?o:0,completion:0},void 0,void 0,void 0,{chunk:s})))}}async completionWithRetry(t,e){return this.caller.call(async()=>{var n,i;let r=this._getClientOptions(e);try{return((i=(n=t.text)==null?void 0:n.format)==null?void 0:i.type)==="json_schema"&&!t.stream?await this.client.responses.parse(t,r):await this.client.responses.create(t,r)}catch(o){throw Uo(o)}})}_reduceChatOpenAITools(t,e){var n;let r=[];for(let i of t)if(_m(i))i.type==="image_generation"&&(e!=null&&e.stream)&&(i.partial_images=1),r.push(i);else if(gl(i)){let o=i.metadata.customTool;r.push({type:"custom",name:o.name,description:o.description,format:o.format})}else Vg(i)?r.push({type:"function",name:i.function.name,parameters:i.function.parameters,description:i.function.description,strict:(n=e==null?void 0:e.strict)!=null?n:null}):yw(i)&&r.push(D5(i));return r}};var Jg=class JV extends Sl{constructor(r){var n,i,o;super(r);A(this,"useResponsesApi",!1);A(this,"responses");A(this,"completions");this.fields=r,this.useResponsesApi=(n=r==null?void 0:r.useResponsesApi)!=null?n:!1,this.responses=(i=r==null?void 0:r.responses)!=null?i:new Xw(r),this.completions=(o=r==null?void 0:r.completions)!=null?o:new Jw(r)}get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}_useResponsesApi(r){var a,s,c,u,l;let n=(a=r==null?void 0:r.tools)==null?void 0:a.some(_m),i=(r==null?void 0:r.previous_response_id)!=null||(r==null?void 0:r.text)!=null||(r==null?void 0:r.truncation)!=null||(r==null?void 0:r.include)!=null||((s=r==null?void 0:r.reasoning)==null?void 0:s.summary)!=null||((c=this.reasoning)==null?void 0:c.summary)!=null,o=((u=r==null?void 0:r.tools)==null?void 0:u.some(yw))||((l=r==null?void 0:r.tools)==null?void 0:l.some(gl));return this.useResponsesApi||n||i||o||A5(this.model)}getLsParams(r){let n=this._combineCallOptions(r);return this._useResponsesApi(r)?this.responses.getLsParams(n):this.completions.getLsParams(n)}invocationParams(r){let n=this._combineCallOptions(r);return this._useResponsesApi(r)?this.responses.invocationParams(n):this.completions.invocationParams(n)}async _generate(r,n,i){return this._useResponsesApi(n)?this.responses._generate(r,n):this.completions._generate(r,n,i)}async*_streamResponseChunks(r,n,i){if(this._useResponsesApi(n)){yield*this.responses._streamResponseChunks(r,this._combineCallOptions(n),i);return}yield*this.completions._streamResponseChunks(r,this._combineCallOptions(n),i)}withConfig(r){let n=new JV(this.fields);return n.defaultOptions={...this.defaultOptions,...r},n}};var Pce={};le(Pce,{BaseLLM:()=>Ik,LLM:()=>Mce});var Ik=class Wg extends qg{constructor(){super(...arguments);A(this,"lc_namespace",["langchain","llms",this._llmType()])}async invoke(r,n){let i=Wg._convertInputToPromptValue(r);return(await this.generatePrompt([i],n,n==null?void 0:n.callbacks)).generations[0][0].text}async*_streamResponseChunks(r,n,i){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(r){let[n,i]=super._separateRunnableConfigFromCallOptions(r);return i.signal=n.signal,[n,i]}async*_streamIterator(r,n){if(this._streamResponseChunks===Wg.prototype._streamResponseChunks)yield this.invoke(r,n);else{let i=Wg._convertInputToPromptValue(r),[o,a]=this._separateRunnableConfigFromCallOptionsCompat(n),s=await Ar.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),c={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},u=await(s==null?void 0:s.handleLLMStart(this.toJSON(),[i.toString()],o.runId,void 0,c,void 0,void 0,o.runName)),l=new qo({text:""});try{for await(let d of this._streamResponseChunks(i.toString(),a,u==null?void 0:u[0]))l?l=l.concat(d):l=d,typeof d.text=="string"&&(yield d.text)}catch(d){throw await Promise.all((u!=null?u:[]).map(f=>f==null?void 0:f.handleLLMError(d))),d}await Promise.all((u!=null?u:[]).map(d=>d==null?void 0:d.handleLLMEnd({generations:[[l]]})))}}async generatePrompt(r,n,i){let o=r.map(a=>a.toString());return this.generate(o,n,i)}invocationParams(r){return{}}_flattenLLMResult(r){let n=[];for(let i=0;i<r.generations.length;i+=1){let o=r.generations[i];if(i===0)n.push({generations:[o],llmOutput:r.llmOutput});else{let a=r.llmOutput?{...r.llmOutput,tokenUsage:{}}:void 0;n.push({generations:[o],llmOutput:a})}}return n}async _generateUncached(r,n,i,o){let a;if(o!==void 0&&o.length===r.length)a=o;else{let l=await Ar.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),d={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:r.length};a=await(l==null?void 0:l.handleLLMStart(this.toJSON(),r,i.runId,void 0,d,void 0,void 0,i==null?void 0:i.runName))}let s=!!(a!=null&&a[0].handlers.find(wh)),c;if(s&&r.length===1&&this._streamResponseChunks!==Wg.prototype._streamResponseChunks)try{let l=await this._streamResponseChunks(r[0],n,a==null?void 0:a[0]),d;for await(let f of l)d===void 0?d=f:d=ci(d,f);if(d===void 0)throw new Error("Received empty response from chat model call.");c={generations:[[d]],llmOutput:{}},await(a==null?void 0:a[0].handleLLMEnd(c))}catch(l){throw await(a==null?void 0:a[0].handleLLMError(l)),l}else{try{c=await this._generate(r,n,a==null?void 0:a[0])}catch(d){throw await Promise.all((a!=null?a:[]).map(f=>f==null?void 0:f.handleLLMError(d))),d}let l=this._flattenLLMResult(c);await Promise.all((a!=null?a:[]).map((d,f)=>d==null?void 0:d.handleLLMEnd(l[f])))}let u=(a==null?void 0:a.map(l=>l.runId))||void 0;return Object.defineProperty(c,Vc,{value:u?{runIds:u}:void 0,configurable:!0}),c}async _generateCached({prompts:r,cache:n,llmStringKey:i,parsedOptions:o,handledOptions:a,runId:s}){let c=await Ar.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:r.length},l=await(c==null?void 0:c.handleLLMStart(this.toJSON(),r,s,void 0,u,void 0,void 0,a==null?void 0:a.runName)),d=[],m=(await Promise.allSettled(r.map(async(y,h)=>{let _=await n.lookup(y,i);return _==null&&d.push(h),_}))).map((y,h)=>({result:y,runManager:l==null?void 0:l[h]})).filter(({result:y})=>y.status==="fulfilled"&&y.value!=null||y.status==="rejected"),p=[];await Promise.all(m.map(async({result:y,runManager:h},_)=>{if(y.status==="fulfilled"){let v=y.value;return p[_]=v.map(x=>(x.generationInfo={...x.generationInfo,tokenUsage:{}},x)),v.length&&await(h==null?void 0:h.handleLLMNewToken(v[0].text)),h==null?void 0:h.handleLLMEnd({generations:[v]},void 0,void 0,void 0,{cached:!0})}else return await(h==null?void 0:h.handleLLMError(y.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(y.reason)}));let b={generations:p,missingPromptIndices:d,startedRunManagers:l};return Object.defineProperty(b,Vc,{value:l?{runIds:l==null?void 0:l.map(y=>y.runId)}:void 0,configurable:!0}),b}async generate(r,n,i){var p,b;if(!Array.isArray(r))throw new Error("Argument 'prompts' is expected to be a string[]");let o;Array.isArray(n)?o={stop:n}:o=n;let[a,s]=this._separateRunnableConfigFromCallOptionsCompat(o);if(a.callbacks=(p=a.callbacks)!=null?p:i,!this.cache)return this._generateUncached(r,s,a);let{cache:c}=this,u=this._getSerializedCacheKeyParametersForCall(s),{generations:l,missingPromptIndices:d,startedRunManagers:f}=await this._generateCached({prompts:r,cache:c,llmStringKey:u,parsedOptions:s,handledOptions:a,runId:a.runId}),m={};if(d.length>0){let y=await this._generateUncached(d.map(h=>r[h]),s,a,f!==void 0?d.map(h=>f==null?void 0:f[h]):void 0);await Promise.all(y.generations.map(async(h,_)=>{let v=d[_];return l[v]=h,c.update(r[v],u,h)})),m=(b=y.llmOutput)!=null?b:{}}return{generations:l,llmOutput:m}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},Mce=class extends Ik{async _generate(t,e,r){return{generations:await Promise.all(t.map((i,o)=>this._call(i,{...e,promptIndex:o},r).then(a=>[{text:a}])))}}};var zce={};le(zce,{chunkArray:()=>Nk});var Nk=(t,e)=>t.reduce((r,n,i)=>{let o=Math.floor(i/e),a=r[o]||[];return r[o]=a.concat([n]),r},[]);var Lce={};le(Lce,{Embeddings:()=>WV});var WV=class{constructor(t){A(this,"caller");this.caller=new Za(t!=null?t:{})}};var jce={};le(jce,{BaseToolkit:()=>Fce,DynamicStructuredTool:()=>YV,DynamicTool:()=>$k,StructuredTool:()=>Ck,Tool:()=>kk,ToolInputParsingException:()=>Df,isLangChainTool:()=>hl,isRunnableToolLike:()=>Rg,isStructuredTool:()=>$g,isStructuredToolParams:()=>Pg,tool:()=>Yg});var Ck=class extends Bw{constructor(e){var r,n,i,o,a;super(e!=null?e:{});A(this,"extras");A(this,"returnDirect",!1);A(this,"verboseParsingErrors",!1);A(this,"responseFormat","content");A(this,"defaultConfig");this.verboseParsingErrors=(r=e==null?void 0:e.verboseParsingErrors)!=null?r:this.verboseParsingErrors,this.responseFormat=(n=e==null?void 0:e.responseFormat)!=null?n:this.responseFormat,this.defaultConfig=(i=e==null?void 0:e.defaultConfig)!=null?i:this.defaultConfig,this.metadata=(o=e==null?void 0:e.metadata)!=null?o:this.metadata,this.extras=(a=e==null?void 0:e.extras)!=null?a:this.extras}get lc_namespace(){return["langchain","tools"]}async invoke(e,r){let n,i=We(Bc(this.defaultConfig,r));return iu(e)?(n=e.args,i={...i,toolCall:e}):n=e,this.call(n,i)}async call(e,r,n){let i=iu(e)?e.args:e,o;if(xn(this.schema))try{o=await wu(this.schema,i)}catch(p){let b="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(b=`${b}
Details: ${p.message}`),Xx(p)&&(b=`${b}

${re.prettifyError(p)}`),new Df(b,JSON.stringify(e))}else{let p=Ct(i,this.schema);if(!p.valid){let b="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(b=`${b}
Details: ${p.errors.map(y=>`${y.keywordLocation}: ${y.error}`).join(`
`)}`),new Df(b,JSON.stringify(e))}o=i}let a=Dh(r),s=Ar.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),c=await(s==null?void 0:s.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),a.runId,void 0,void 0,void 0,a.runName));delete a.runId;let u;try{u=await this._call(o,c,a)}catch(p){throw await(c==null?void 0:c.handleToolError(p)),p}let l,d;if(this.responseFormat==="content_and_artifact")if(Array.isArray(u)&&u.length===2)[l,d]=u;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(u)}`);else l=u;let f;iu(e)&&(f=e.id),!f&&Pj(a)&&(f=a.toolCall.id);let m=Bce({content:l,artifact:d,toolCallId:f,name:this.name,metadata:this.metadata});return await(c==null?void 0:c.handleToolEnd(m)),m}},kk=class extends Ck{constructor(e){super(e);A(this,"schema",wn.object({input:wn.string().optional()}).transform(e=>e.input))}call(e,r){let n=typeof e=="string"||e==null?{input:e}:e;return super.call(n,r)}},$k=class extends kk{constructor(e){var r;super(e);A(this,"name");A(this,"description");A(this,"func");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=(r=e.returnDirect)!=null?r:this.returnDirect}static lc_name(){return"DynamicTool"}async call(e,r){let n=Dh(r);return n.runName===void 0&&(n.runName=this.name),super.call(e,n)}async _call(e,r,n){return this.func(e,r,n)}},YV=class extends Ck{constructor(e){var r;super(e);A(this,"name");A(this,"description");A(this,"func");A(this,"schema");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=(r=e.returnDirect)!=null?r:this.returnDirect,this.schema=e.schema}static lc_name(){return"DynamicStructuredTool"}async call(e,r,n){let i=Dh(r);return i.runName===void 0&&(i.runName=this.name),super.call(e,i,n)}_call(e,r,n){return this.func(e,r,n)}},Fce=class{getTools(){return this.tools}};function Yg(t,e){var a,s,c,u,l;let r=sm(e.schema),n=gm(e.schema);if(!e.schema||r||n)return new $k({...e,description:(c=(s=e.description)!=null?s:(a=e.schema)==null?void 0:a.description)!=null?c:`${e.name} tool`,func:async(d,f,m)=>new Promise((p,b)=>{let y=ft(m,{callbacks:f==null?void 0:f.getChild()});kr.runWithConfig(yn(y),async()=>{try{p(t(d,y))}catch(h){b(h)}})})});let i=e.schema,o=(l=(u=e.description)!=null?u:e.schema.description)!=null?l:`${e.name} tool`;return new YV({...e,description:o,schema:i,func:async(d,f,m)=>new Promise((p,b)=>{let y,h=()=>{m!=null&&m.signal&&y&&m.signal.removeEventListener("abort",y)};m!=null&&m.signal&&(y=()=>{h(),b(du(m.signal))},m.signal.addEventListener("abort",y));let _=ft(m,{callbacks:f==null?void 0:f.getChild()});kr.runWithConfig(yn(_),async()=>{var v;try{let x=await t(d,_);if((v=m==null?void 0:m.signal)!=null&&v.aborted){h();return}h(),p(x)}catch(x){h(),b(x)}})})})}function Bce(t){let{content:e,artifact:r,toolCallId:n,metadata:i}=t;return n&&!gh(e)?typeof e=="string"||Array.isArray(e)&&e.every(o=>typeof o=="object")?new Wr({status:"success",content:e,artifact:r,tool_call_id:n,name:t.name,metadata:i}):new Wr({status:"success",content:Zce(e),artifact:r,tool_call_id:n,name:t.name,metadata:i}):e}function Zce(t){var e;try{return(e=JSON.stringify(t,null,2))!=null?e:""}catch(r){return`${t}`}}var Vce=re.object({type:re.literal("screenshot")}),qce=re.object({type:re.literal("click"),x:re.number(),y:re.number(),button:re.enum(["left","right","wheel","back","forward"]).default("left")}),Gce=re.object({type:re.literal("double_click"),x:re.number(),y:re.number(),button:re.enum(["left","right","wheel","back","forward"]).default("left")}),Hce=re.object({type:re.literal("drag"),path:re.array(re.object({x:re.number(),y:re.number()}))}),Kce=re.object({type:re.literal("keypress"),keys:re.array(re.string())}),Jce=re.object({type:re.literal("move"),x:re.number(),y:re.number()}),Wce=re.object({type:re.literal("scroll"),x:re.number(),y:re.number(),scroll_x:re.number(),scroll_y:re.number()}),Yce=re.object({type:re.literal("type"),text:re.string()}),Xce=re.object({type:re.literal("wait"),duration:re.number().optional()}),Qce=re.discriminatedUnion("type",[Vce,qce,Gce,Hce,Kce,Jce,Wce,Yce,Xce]),krt=re.object({action:Qce});var ele=re.object({type:re.literal("exec"),command:re.array(re.string()),env:re.record(re.string(),re.string()).optional(),working_directory:re.string().optional(),timeout_ms:re.number().optional(),user:re.string().optional()}),Mrt=re.discriminatedUnion("type",[ele]);var Urt=re.object({commands:re.array(re.string()).describe("Array of shell commands to execute"),timeout_ms:re.number().optional().describe("Optional timeout in milliseconds for the commands"),max_output_length:re.number().optional().describe("Optional maximum number of characters to return from each command")});var tle=re.object({type:re.literal("create_file"),path:re.string(),diff:re.string()}),rle=re.object({type:re.literal("update_file"),path:re.string(),diff:re.string()}),nle=re.object({type:re.literal("delete_file"),path:re.string()}),Zrt=re.discriminatedUnion("type",[tle,rle,nle]);var XV=require("obsidian");var Mu=(_=>(_.auto="auto",_.en="en",_.es="es",_.fr="fr",_.de="de",_.it="it",_.pt="pt",_.nl="nl",_.hi="hi",_.ja="ja",_.zh="zh",_.fi="fi",_.ko="ko",_.pl="pl",_.ru="ru",_.tr="tr",_.uk="uk",_.vi="vi",_))(Mu||{}),Xg={auto:"Auto Detect",en:"English",es:"Spanish",fr:"French",de:"German",it:"Italian",pt:"Portuguese",nl:"Dutch",hi:"Hindi",ja:"Japanese",zh:"Chinese",fi:"Finnish",ko:"Korean",pl:"Polish",ru:"Russian",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese"};function Rk(t){let r=/```mermaid\s+([\s\S]*?)```/g.exec(t);if(r&&r.length>1)return r[1]}function Qw(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"")}var Am=(t=>(t["gpt-4.1"]="gpt-4.1",t["gpt-4.1-mini"]="gpt-4.1-mini",t["gpt-4o"]="gpt-4o",t["gpt-4o-mini"]="gpt-4o-mini",t["gpt-4-turbo"]="gpt-4-turbo",t))(Am||{}),ile=25*1024*1024;async function QV(t,e,{audioFileLanguage:r},n,i){let o=new Te({apiKey:t,dangerouslyAllowBrowser:!0,...n&&{baseURL:n}}),a=await mE(e,ile);return new XV.Notice(`Scribe: \u{1F3A7} Split transcript into ${a.length} files`),await ole(o,{audioFiles:a,audioFileLanguage:r,customModel:i})}async function ole(t,{audioFiles:e,onChunkStart:r,audioFileLanguage:n,customModel:i}){let o="";for(let[a,s]of e.entries()){r&&r(a,e.length);let c=n&&n!=="auto",l={model:i||"whisper-1",file:s},d=c?{...l,language:n}:l,f=await t.audio.transcriptions.create(d);o+=(a===0?"":" ")+f.text.trim()}return o}async function eq(t,e,{scribeOutputLanguage:r,activeNoteTemplate:n},i="gpt-4o",o,a){let s=`
  You are "Scribe" an expert note-making AI for Obsidian you specialize in the Linking Your Thinking (LYK) strategy.  
  The following is the transcription generated from a recording of someone talking aloud or multiple people in a conversation. 
  There may be a lot of random things said given fluidity of conversation or thought process and the microphone's ability to pick up all audio.  

  The transcription may address you by calling you "Scribe" or saying "Hey Scribe" and asking you a question, they also may just allude to you by asking "you" to do something.
  Give them the answers to this question

  Give me notes in Markdown language on what was said, they should be
  - Easy to understand
  - Succinct
  - Clean
  - Logical
  - Insightful
  
  It will be nested under a h2 # tag, feel free to nest headers underneath it
  Rules:
  - Do not include escaped new line characters
  - Do not mention "the speaker" anywhere in your response.  
  - The notes should be written as if I were writing them. 

  The following is the transcribed audio:
  <transcript>
  ${e}
  </transcript>
  `,c=a||i,u=new Jg({model:c,apiKey:t,temperature:.5,...o&&{configuration:{baseURL:o}}}),l=[new fn(s)];r&&l.push(new fn(`Please respond in ${r} language`));let d={fileTitle:re.string().describe("A suggested title for the Obsidian Note. Ensure that it is in the proper format for a file on mac, windows and linux, do not include any special characters")};n.sections.forEach(b=>{let{sectionHeader:y,sectionInstructions:h,isSectionOptional:_}=b;d[Qw(y)]=_?re.string().nullable().describe(h):re.string().describe(h)});let f=re.object(d);return await await u.withStructuredOutput(f).invoke(l)}async function tq(t,e,r="gpt-4o",n,i){let o=`
You are an expert in mermaid charts and Obsidian (the note taking app)
Below is a <broken-mermaid-chart> that isn't rendering correctly in Obsidian
There may be some new line characters, or tab characters, or special characters.  
Strip them out and only return a fully valid unicode Mermaid chart that will render properly in Obsidian
Remove any special characters in the nodes text that isn't valid.

<broken-mermaid-chart>
${e}
</broken-mermaid-chart>

Thank you
  `,a=i||r,s=new Jg({model:a,apiKey:t,temperature:.3,...n&&{configuration:{baseURL:n}}}),c=[new fn(o)],u=re.object({mermaidChart:re.string().describe("A fully valid unicode mermaid chart")}),l=s.withStructuredOutput(u),{mermaidChart:d}=await l.invoke(c);return{mermaidChart:d}}var _q=be(yi());var rq=require("obsidian");function Al(t,e){return t.includes("{{date}}")?t.replace("{{date}}",(0,rq.moment)().format(e)):t}var Qg=be(yi());var Hi=be(yi());var e0=be(Ke()),nq=(0,Hi.createContext)(void 0),iq=(0,Hi.createContext)(void 0),oq=(0,Hi.createContext)(void 0);function aq({plugin:t,children:e}){let[r,n]=(0,Hi.useState)(t.settings),i=F_(()=>{t.saveSettings()},500);function o(a,s){n(c=>({...c,[a]:s}))}return(0,Hi.useEffect)(()=>{t.settings=r,i()},[t,r,i]),(0,e0.jsx)(iq.Provider,{value:t,children:(0,e0.jsx)(nq.Provider,{value:r,children:(0,e0.jsx)(oq.Provider,{value:o,children:e})})})}function sq(){let t=(0,Hi.useContext)(nq);if(t===void 0)throw new Error("useSettings must be used within a SettingsFormProvider");return t}function uq(){let t=(0,Hi.useContext)(oq);if(t===void 0)throw new Error("useSettingsUpdater must be used within a SettingsFormProvider");return t}function cq(){let t=(0,Hi.useContext)(iq);if(t===void 0)throw new Error("usePlugin must be used within a SettingsFormProvider");return t}function ale(){let t=sq(),e=uq();function r(n,i){let{displayValue:o,setValueAs:a}=i||{},s=t[n],c=l=>{let d=a?a(l):l;e(n,d)},u=o?o(s):s;return{onChange:c,value:u,id:n}}return{register:r,settings:t}}var zu=ale;var An=be(Ke());function Tm(t){let{id:e,onChange:r,value:n}=t;return typeof n!="boolean"?(console.error(`Can't use checkbox input for non-boolean value: ${e}`),null):(0,An.jsx)(Pk,{...t,children:(0,An.jsx)("div",{className:`checkbox-container ${n?"is-enabled":""}`,onClick:i=>{r(!n)},onKeyDown:i=>{i.key==="Enter"&&r(!n)},children:(0,An.jsx)("input",{type:"checkbox",checked:n,onChange:()=>r(!n)})})})}function Tl(t){let{id:e,onChange:r,value:n,valuesMapping:i}=t;return typeof n!="string"?(console.error(`Can't use select input for non-string value: ${e}`),null):(0,An.jsx)(Pk,{...t,children:(0,An.jsx)("select",{defaultValue:n,className:"dropdown",onChange:o=>{let a=o.currentTarget.value;r(a)},children:i.map(({displayName:o,value:a})=>(0,An.jsx)("option",{value:a,children:o},a))})})}function El(t){let{id:e,onChange:r,value:n,disabled:i,placeholder:o}=t;return typeof n!="string"?(console.error(`Can't use text input for non-string value: ${e}`),null):(0,An.jsx)(Pk,{...t,children:(0,An.jsx)("input",{disabled:i,defaultValue:n,placeholder:o,type:"text",onChange:a=>{let s=a.currentTarget.value;r(s)}})})}function Pk({description:t,id:e,name:r,value:n,children:i}){return(0,An.jsxs)("div",{className:"setting-item",children:[(0,An.jsxs)("div",{className:"setting-item-info",children:[(0,An.jsx)("div",{className:"setting-item-name",children:r}),t&&(0,An.jsx)("div",{className:"setting-item-description",children:t})]}),(0,An.jsx)("div",{className:"setting-item-control",children:i})]})}var Mk=be(Ke());function sle(){let{register:t}=zu(),[e,r]=(0,Qg.useState)(!0),[n,i]=(0,Qg.useState)([]),o=n.map(a=>({displayName:a.label,value:a.deviceId}));return(0,Qg.useEffect)(()=>{(async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(l=>l.stop());let u=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="audioinput").map(l=>({deviceId:l.deviceId,label:l.label||`Microphone (${l.deviceId.slice(0,8)}...)`}));i(u)}catch(s){console.error("Error getting audio devices:",s)}finally{r(!1)}})()},[]),e?(0,Mk.jsx)("div",{children:"Loading devices..."}):(0,Mk.jsx)(Tl,{...t("selectedAudioDeviceId"),name:"Audio Input Device",description:"Select which microphone to use for recording",valuesMapping:o})}var lq=sle;var dq=be(Ke());function ule({id:t,name:e,description:r}){let{register:n}=zu(),o=cq().app.vault.getAllFolders(),a=[{displayName:"Vault folder",value:""},{displayName:"Obsidian note folder",value:"matchObsidianNoteFolder"},...o.map(s=>({displayName:s.path===""?"Vault Folder":s.path,value:s.path}))];return(0,dq.jsx)(Tl,{...n(t),name:e,description:r,valuesMapping:a})}var zk=ule;var ra=be(Ke()),Ht=({name:t,description:e,control:r})=>(0,ra.jsxs)("div",{className:"setting-item",children:[(0,ra.jsxs)("div",{className:"setting-item-info",children:[(0,ra.jsx)("div",{className:"setting-item-name",children:t}),(0,ra.jsx)("div",{className:"setting-item-description",children:e})]}),(0,ra.jsx)("div",{className:"setting-item-control",children:r})]}),rs=({name:t})=>(0,ra.jsx)("div",{className:"setting-item setting-item-heading",children:(0,ra.jsx)("div",{className:"setting-item-info",children:(0,ra.jsx)("div",{className:"setting-item-name",children:t})})});var Dt=be(Ke()),fq=Object.entries(Xg).filter(([t])=>t!=="auto").map(([t,e])=>({displayName:e,value:t}));function lle(){let{register:t,settings:e}=zu(),r=(e.noteFilenamePrefix||"").includes("{{date}}")||(e.recordingFilenamePrefix||"").includes("{{date}}");return(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)(rs,{name:"Audio"}),(0,Dt.jsx)(lq,{}),(0,Dt.jsx)(rs,{name:"AI Processing"}),(0,Dt.jsx)(Tm,{...t("isDisableLlmTranscription",{displayValue:n=>!n,setValueAs:n=>!n}),name:"Transcribe recordings",description:"If disabled, audio will not be sent to any LLM for transcription"}),(0,Dt.jsx)(Tm,{...t("isOnlyTranscribeActive",{displayValue:n=>!n,setValueAs:n=>!n}),name:"Process transcriptions with LLM",description:"If disabled, we will only transcribe recordings without summarization, insights etc."}),(0,Dt.jsx)(rs,{name:"Language"}),(0,Dt.jsx)(Tl,{...t("scribeOutputLanguage"),name:"Scribe output language",description:"The language for the notes generated by Scribe to be in",valuesMapping:fq}),(0,Dt.jsx)(Tl,{...t("audioFileLanguage"),name:"Spoken language",description:`The default spoken language for audio transcription, 
          changing from auto may increase accuracy`,valuesMapping:fq}),(0,Dt.jsx)(rs,{name:"Transcripts"}),(0,Dt.jsx)(Tm,{name:"Append transcript to active file",description:"If true, the default behavior will be to append the transcription to the active file. If false, it will create a new note with the transcription.",...t("isAppendToActiveFile")}),(0,Dt.jsx)(zk,{...t("transcriptDirectory"),name:"Directory for transcripts"}),(0,Dt.jsx)(Tm,{name:'Link to Scribe in "created_by" frontmatter',description:"If true, we will add a link to the Scribe in the frontmatter of the note.  This is useful for knowing which notes were created by Scribe.",...t("isFrontMatterLinkToScribe")}),(0,Dt.jsx)(rs,{name:"Recordings"}),(0,Dt.jsx)(zk,{...t("recordingDirectory"),name:"Directory for recordings"}),(0,Dt.jsx)(Tm,{name:"Save audio file",description:'Save the audio file after Scribing it. If false, the audio file will be permanently deleted after transcription. This will not affect the Command for "Transcribe existing file"',...t("isSaveAudioFileActive")}),(0,Dt.jsx)(rs,{name:"File names settings"}),(0,Dt.jsx)(El,{...t("recordingFilenamePrefix"),name:"Audio recording filename prefix",description:"This will be the prefix of the audio recording filename, use {{date}} to include the date",placeholder:"scribe-"}),(0,Dt.jsx)(El,{...t("noteFilenamePrefix"),name:"Transcript filename prefix",description:"This will be the prefix of the note filename, use {{date}} to include the date",placeholder:"scribe-"}),(0,Dt.jsx)(El,{...t("dateFilenameFormat"),name:"Date format",description:"This will only be used if {{date}} is in the transcript or audio recording filename prefix above",placeholder:"YYYY-MM-DD",disabled:!r}),r&&(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("p",{children:[Al(`${e.noteFilenamePrefix}`,e.dateFilenameFormat),"filename"]}),(0,Dt.jsxs)("p",{children:[Al(`${e.recordingFilenamePrefix}`,e.dateFilenameFormat),"filename"]})]})]})}var mq=lle;var Em=be(Ke());function dle(){let{register:t,settings:e}=zu();return(0,Em.jsxs)("div",{children:[(0,Em.jsx)(rs,{name:"API keys"}),(0,Em.jsx)(El,{...t("openAiApiKey"),name:"OpenAI API key",description:"You can find this in your OpenAI dev console - https://platform.openai.com/settings",placeholder:"sk-..."}),(0,Em.jsx)(El,{...t("assemblyAiApiKey"),name:"AssemblyAI API key",description:"You can find this in your AssemblyAI dev console - https://www.assemblyai.com/app/account",placeholder:"c3p0..."})]})}var pq=dle;var ns=be(yi());var Ot=be(Ke()),hq=({plugin:t,saveSettings:e})=>{let[r,n]=(0,ns.useState)(t.settings.transcriptPlatform),[i,o]=(0,ns.useState)(t.settings.llmModel),[a,s]=(0,ns.useState)(t.settings.isMultiSpeakerEnabled),[c,u]=(0,ns.useState)(t.settings.isDisableLlmTranscription),[l,d]=(0,ns.useState)(t.settings.useCustomOpenAiBaseUrl),[f,m]=(0,ns.useState)(t.settings.customOpenAiBaseUrl),[p,b]=(0,ns.useState)(t.settings.customTranscriptModel),[y,h]=(0,ns.useState)(t.settings.customChatModel),_=()=>{let g=!a;s(g),t.settings.isMultiSpeakerEnabled=g,e()},v=()=>{let g=!c;u(g),t.settings.isDisableLlmTranscription=g,e()},x=()=>{let g=!l;d(g),t.settings.useCustomOpenAiBaseUrl=g,e()},w=g=>{m(g),t.settings.customOpenAiBaseUrl=g,e()},E=g=>{b(g),t.settings.customTranscriptModel=g,e()},S=g=>{h(g),t.settings.customChatModel=g,e()};return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h2",{children:"AI model options"}),(0,Ot.jsx)(Ht,{name:"Transcript platform",description:"Your recording is uploaded to this service",control:(0,Ot.jsxs)("select",{defaultValue:r,className:"dropdown",onChange:g=>{let I=g.target.value;n(I),t.settings.transcriptPlatform=I,e()},children:[(0,Ot.jsx)("option",{value:"openAi",children:"OpenAi"}),(0,Ot.jsx)("option",{value:"assemblyAi",children:"AssemblyAI"})]})}),r==="assemblyAi"&&(0,Ot.jsx)(Ht,{name:"Multi-speaker enabled",description:"Enable this if you have multiple speakers in your recording",control:(0,Ot.jsx)("div",{className:`checkbox-container ${a?"is-enabled":""}`,onClick:g=>{_()},onKeyDown:g=>{g.key==="Enter"&&_()},children:(0,Ot.jsx)("input",{type:"checkbox",checked:a,onChange:_})})}),(0,Ot.jsx)(Ht,{name:"LLM model for creating the summary",description:"The transcript is sent to this service",control:(0,Ot.jsx)("select",{defaultValue:i,className:"dropdown",onChange:g=>{let I=g.target.value;o(I),t.settings.llmModel=I,e()},children:Object.keys(Am).map(g=>(0,Ot.jsx)("option",{value:g,children:g},g))})}),(0,Ot.jsx)("h3",{children:"Custom OpenAI Configuration"}),(0,Ot.jsx)(Ht,{name:"Use custom OpenAI base URL",description:"Enable this to use a custom OpenAI-compatible API endpoint (e.g., local LLM server, Azure OpenAI, etc.)",control:(0,Ot.jsx)("div",{className:`checkbox-container ${l?"is-enabled":""}`,onClick:g=>{x()},onKeyDown:g=>{g.key==="Enter"&&x()},children:(0,Ot.jsx)("input",{type:"checkbox",checked:l,onChange:x})})}),l&&(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)(Ht,{name:"Custom OpenAI base URL",description:"The base URL for your custom OpenAI-compatible API (e.g., http://localhost:1234/v1, https://your-instance.openai.azure.com/)",control:(0,Ot.jsx)("input",{type:"text",placeholder:"http://localhost:1234/v1",value:f,onChange:g=>w(g.target.value),className:"text-input"})}),(0,Ot.jsx)(Ht,{name:"Custom transcription model",description:"The model name to use for audio transcription (e.g., whisper-1, faster-whisper, etc.)",control:(0,Ot.jsx)("input",{type:"text",placeholder:"whisper-1",value:p,onChange:g=>E(g.target.value),className:"text-input"})}),(0,Ot.jsx)(Ht,{name:"Custom chat model",description:"The model name to use for chat/summarization (e.g., gpt-4, llama-3.1-8b-instruct, etc.)",control:(0,Ot.jsx)("input",{type:"text",placeholder:"gpt-4o",value:y,onChange:g=>S(g.target.value),className:"text-input"})})]})]})};var ey=be(yi());var st=be(Ke()),ty={id:"default",name:"Scribe",sections:[{id:"1",sectionHeader:"Summary",sectionInstructions:`A summary of the transcript in Markdown.  It will be nested under a h2 # tag, so use a tag less than that for headers
Concise bullet points containing the primary points of the speaker`},{id:"2",sectionHeader:"Insights",sectionInstructions:`Insights that you gained from the transcript in Markdown.
A brief section, a paragraph or two on what insights and enhancements you think of
Several bullet points on things you think would be an improvement, feel free to use headers
It will be nested under an h2 tag, so use a tag less than that for headers
        `},{id:"3",sectionHeader:"Mermaid Chart",sectionOutputPrefix:"```mermaid",sectionOutputPostfix:"```",sectionInstructions:`A valid unicode mermaid chart that shows a concept map consisting of both what insights you had along with what the speaker said for the mermaid chart, 
Dont wrap it in anything, just output the mermaid chart.  
Do not use any special characters that arent letters in the nodes text, particularly new lines, tabs, or special characters like apostraphes or quotes or commas`},{id:"4",sectionHeader:"Answered Questions",isSectionOptional:!0,sectionInstructions:`If the user says "Hey Scribe" or alludes to you, asking you to do something, answer the question or do the ask and put the answers here
Put the text in markdown, it will be nested under an h2 tag, so use a tag less than that for headers
Summarize the question in a short sentence as a header and place your reply nicely below for as many questions as there are
Answer their questions in a clear and concise manner`}]},fle=({section:t,activeTemplate:e,setActiveTemplate:r,isTemplateLocked:n,setNoteTemplates:i,noteTemplates:o})=>{let a=c=>{let u=e.sections.map(d=>d.sectionHeader===t.sectionHeader?c:d),l=o.map(d=>(d.id||(d.id=Math.random().toString(36).substring(2,9)),d.id===e.id||d.name===e.name?{...d,sections:u}:d));i(l),r({...e,sections:u})},s=()=>{let c=e.sections.filter(u=>u.id!==t.id);r({...e,sections:c})};return(0,st.jsxs)("div",{style:{width:"100%"},children:[(0,st.jsx)(Ht,{name:"Section Header",description:"",control:(0,st.jsx)("input",{disabled:n,type:"text",value:t.sectionHeader,onChange:c=>{a({...t,sectionHeader:c.target.value})}})}),(0,st.jsx)("p",{children:"Section Instructions"}),(0,st.jsx)("textarea",{disabled:n,value:t.sectionInstructions,onChange:c=>{a({...t,sectionInstructions:c.target.value})},rows:3,style:{width:"100%",overflow:"visible",height:"auto"},onFocus:c=>{let u=c.target;u.style.height=`${u.scrollHeight}px`},onInput:c=>{let u=c.target;u.style.height=`${u.scrollHeight}px`}}),(0,st.jsx)(Ht,{name:"Section Optional",description:'Marks the section as optional - for example "Ask Scribe"',control:(0,st.jsx)("input",{disabled:n,type:"checkbox",checked:!!t.isSectionOptional,onChange:c=>{a({...t,isSectionOptional:c.target.checked})}})}),(0,st.jsx)(Ht,{name:"Section Output Prefix",description:"Prefix for the section output - this is useful for code blocks",control:(0,st.jsx)("input",{disabled:n,type:"text",value:t.sectionOutputPrefix||"",onChange:c=>{a({...t,sectionOutputPrefix:c.target.value})}})}),(0,st.jsx)(Ht,{name:"Section Output Postfix",description:"Postfix for the section output - this is useful for codeblocks",control:(0,st.jsx)("input",{disabled:n,type:"text",value:t.sectionOutputPostfix||"",onChange:c=>{a({...t,sectionOutputPostfix:c.target.value})}})}),(0,st.jsx)("button",{type:"button",onClick:s,disabled:n,children:"Remove Section"}),(0,st.jsx)("hr",{})]})},mle=({noteTemplates:t,activeTemplate:e,setNoteTemplates:r,setActiveTemplate:n,isTemplateLocked:i})=>(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)(Ht,{name:"Active Template",description:"Select the active note template - this will be auto selected in the modal",control:(0,st.jsx)("select",{value:e.name,className:"dropdown",onChange:o=>{let a=t.find(s=>s.name===o.target.value);a&&n(a)},children:t.map(o=>(0,st.jsxs)("option",{value:o.name,children:[o.name," ",o.name===ty.name?"(Locked)":""]},o.name))})}),(0,st.jsx)("button",{type:"button",onClick:()=>{let o={id:Math.random().toString(36).substring(2,9),name:Date.now().toString(),sections:[]},a=[...t,o];r(a),n(o)},children:"New Template"}),(0,st.jsx)("button",{type:"button",onClick:()=>{let o={...e,name:`${e.name} (Copy)`},a=[...t,o];r(a),n(o)},children:"Clone Template"}),(0,st.jsx)("button",{disabled:i,type:"button",onClick:()=>{let o=t.filter(a=>a.name!==e.name);r(o),n(o[0])},children:"Remove Active Template"}),(0,st.jsx)(Ht,{name:"Template Name",description:"Change the name of the active template",control:(0,st.jsx)("input",{disabled:i,type:"text",value:e.name,onChange:o=>{let a={...e,name:o.target.value},s=t.findIndex(u=>u.name===e.name),c=[...t];c[s]=a,n(a),r(c)}})}),(0,st.jsx)("button",{type:"button",disabled:i,onClick:()=>{let o={id:Math.random().toString(36).substring(2,9),sectionHeader:"New Section",sectionInstructions:"New Section Instructions"},a={...e,sections:[...e.sections,o]},s=t.findIndex(u=>u.name===e.name),c=[...t];c[s]=a,n(a),r(c)},children:"Add New Section"}),(0,st.jsx)("hr",{})]}),gq=({plugin:t,saveSettings:e})=>{let[r,n]=(0,ey.useState)(t.settings.noteTemplates),[i,o]=(0,ey.useState)(t.settings.activeNoteTemplate),a=i.name===ty.name;return(0,ey.useEffect)(()=>{t.settings.noteTemplates=r,t.settings.activeNoteTemplate=i,e()},[r,i,t,e]),(0,st.jsxs)("div",{children:[(0,st.jsx)("h2",{children:"Templates"}),(0,st.jsx)(mle,{noteTemplates:r,activeTemplate:i,setNoteTemplates:n,setActiveTemplate:o,isTemplateLocked:a}),i.sections.map(s=>(0,st.jsx)(fle,{section:s,activeTemplate:i,setActiveTemplate:o,setNoteTemplates:n,noteTemplates:r,isTemplateLocked:a},s.id))]})};var rn=be(Ke()),Om=(r=>(r.assemblyAi="assemblyAi",r.openAi="openAi",r))(Om||{});var r0={assemblyAiApiKey:"",openAiApiKey:"",recordingDirectory:"matchObsidianResourceFolder",transcriptDirectory:"matchObsidianNoteFolder",transcriptPlatform:"openAi",isMultiSpeakerEnabled:!1,llmModel:"gpt-4o",noteFilenamePrefix:"scribe-{{date}}-",recordingFilenamePrefix:"scribe-recording-{{date}}",dateFilenameFormat:"YYYY-MM-DD",isSaveAudioFileActive:!0,isOnlyTranscribeActive:!1,isAppendToActiveFile:!1,isDisableLlmTranscription:!1,audioFileLanguage:"auto",scribeOutputLanguage:"en",activeNoteTemplate:ty,noteTemplates:[ty],isFrontMatterLinkToScribe:!0,selectedAudioDeviceId:"",audioFileFormat:"webm",useCustomOpenAiBaseUrl:!1,customOpenAiBaseUrl:"",customTranscriptModel:"whisper-1",customChatModel:"gpt-4o"};async function vq(t){t.addSettingTab(new Dk(t.app,t))}var Dk=class extends t0.PluginSettingTab{constructor(e,r){super(e,r),this.plugin=r}display(){let{containerEl:e}=this;e.empty(),this.plugin.loadSettings();let r=e.createDiv({cls:"scribe-settings-react"});this.reactRoot=(0,yq.createRoot)(r),this.reactRoot.render((0,rn.jsx)(ple,{plugin:this.plugin})),new t0.Setting(e).addButton(n=>{n.setButtonText("Reset to default"),n.onClick(async()=>{this.plugin.settings={...r0,openAiApiKey:this.plugin.settings.openAiApiKey,assemblyAiApiKey:this.plugin.settings.assemblyAiApiKey},this.saveSettings(),this.display()})})}saveSettings(){this.plugin.saveSettings()}},ple=({plugin:t})=>{let[e,r]=(0,_q.useState)("general"),n=F_(()=>{t.saveSettings()},500),i=o=>{r(o)};return(0,rn.jsx)(aq,{plugin:t,children:(0,rn.jsxs)("div",{children:[(0,rn.jsx)("nav",{role:"tabpanel",children:hle.map(o=>(0,rn.jsx)(gle,{onSelect:()=>i(o.id),selected:o.id===e,children:o.name},o.id))}),(()=>{switch(e){case"general":return(0,rn.jsx)(mq,{});case"ai-providers":return(0,rn.jsxs)(rn.Fragment,{children:[(0,rn.jsx)(pq,{}),(0,rn.jsx)(hq,{plugin:t,saveSettings:n})]});case"templates":return(0,rn.jsx)(gq,{plugin:t,saveSettings:n});default:return(0,rn.jsx)("span",{children:"No tab selected"})}})()]})})};var hle=[{name:"General",id:"general"},{name:"AI Providers",id:"ai-providers"},{name:"Templates",id:"templates"}],gle=({onSelect:t,selected:e,children:r})=>(0,rn.jsx)("button",{onClick:t,className:"settings-tab scribe",type:"button","aria-selected":e,role:"tab",children:r});var qn=be(Ke());function bq({options:t,setOptions:e,noteTemplates:r}){let n=l=>{e({...t,...l})},{isAppendToActiveFile:i,isOnlyTranscribeActive:o,isSaveAudioFileActive:a,isMultiSpeakerEnabled:s,transcriptPlatform:c,activeNoteTemplate:u}=t;return(0,qn.jsxs)("div",{className:"scribe-recording-options",children:[(0,qn.jsxs)("label",{children:[(0,qn.jsx)("input",{type:"checkbox",checked:i,onChange:l=>{n({isAppendToActiveFile:l.target.checked})}}),"Append to active file"]}),(0,qn.jsxs)("label",{children:[(0,qn.jsx)("input",{type:"checkbox",checked:o,onChange:l=>{n({isOnlyTranscribeActive:l.target.checked})}}),"Only transcribe recording"]}),(0,qn.jsxs)("label",{children:[(0,qn.jsx)("input",{type:"checkbox",checked:a,onChange:l=>{n({isSaveAudioFileActive:l.target.checked})}}),"Save audio file"]}),c==="assemblyAi"&&(0,qn.jsxs)("label",{children:[(0,qn.jsx)("input",{type:"checkbox",checked:s,onChange:l=>{n({isMultiSpeakerEnabled:l.target.checked})}}),"Multi-speaker enabled"]}),(0,qn.jsx)(Ht,{name:"Active template",description:"",control:(0,qn.jsx)("select",{defaultValue:u.name,className:"dropdown",onChange:l=>{let d=r.find(f=>f.name===l.target.value);n({activeNoteTemplate:d})},children:r.map(l=>(0,qn.jsx)("option",{value:l.name,children:l.name},l.name))})})]})}var is=be(Ke());function xq({options:t,setOptions:e}){let r=o=>{e({...t,...o})},{transcriptPlatform:n,llmModel:i}=t;return(0,is.jsxs)("div",{className:"scribe-recording-options",children:[(0,is.jsx)(Ht,{name:"LLM model",description:"",control:(0,is.jsx)("select",{defaultValue:i,className:"dropdown",onChange:o=>{r({llmModel:o.target.value})},children:Object.keys(Am).map(o=>(0,is.jsx)("option",{value:o,children:o},o))})}),(0,is.jsx)(Ht,{name:"Transcript platform",description:"",control:(0,is.jsx)("select",{defaultValue:n,className:"dropdown",onChange:o=>{r({transcriptPlatform:o.target.value})},children:Object.keys(Om).map(o=>(0,is.jsx)("option",{value:o,children:o},o))})})]})}var os=be(Ke());function wq({options:t,setOptions:e}){let r=o=>{e({...t,...o})},{audioFileLanguage:n,scribeOutputLanguage:i}=t;return(0,os.jsxs)("div",{className:"scribe-recording-options",children:[(0,os.jsx)(Ht,{name:"Spoken language",description:"",control:(0,os.jsx)("select",{defaultValue:n,className:"dropdown",onChange:o=>{r({audioFileLanguage:o.target.value})},children:Object.keys(Mu).map(o=>(0,os.jsx)("option",{value:o,children:Xg[o]},o))})}),(0,os.jsx)(Ht,{name:"Scribe output language",description:"",control:(0,os.jsx)("select",{defaultValue:i,className:"dropdown",onChange:o=>{r({scribeOutputLanguage:o.target.value})},children:Object.keys(Mu).filter(o=>o!=="auto").map(o=>(0,os.jsx)("option",{value:o,children:Xg[o]},o))})})]})}var qr=be(Ke());function Sq({plugin:t,options:e,setOptions:r}){let[n,i]=(0,Lk.useState)(!1),[o,a]=(0,Lk.useState)(!1);return(0,qr.jsxs)("div",{children:[(0,qr.jsx)("p",{children:"Session settings"}),(0,qr.jsx)("div",{className:"scribe-options-container",children:(0,qr.jsx)(bq,{options:e,setOptions:r,noteTemplates:t.settings.noteTemplates})}),(0,qr.jsx)("button",{onClick:()=>a(!o),type:"button",className:"scribe-settings-btn",children:"Language options"}),(0,qr.jsx)("button",{onClick:()=>i(!n),type:"button",className:"scribe-settings-btn",children:"Model options"}),o&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("h5",{children:"Language options"}),(0,qr.jsx)(wq,{options:e,setOptions:r})]}),n&&(0,qr.jsxs)(qr.Fragment,{children:[(0,qr.jsx)("h5",{children:"AI model options"}),(0,qr.jsx)(xq,{options:e,setOptions:r})]})]})}var Gr=be(Ke()),Im=class extends Tq.Modal{constructor(e){super(e.app),this.plugin=e}async onOpen(){this.plugin.state.isOpen=!0,this.initModal()}async onClose(){var r;let{contentEl:e}=this;e.empty(),this.plugin.state.isOpen=!1,this.plugin.cancelRecording(),(r=this.root)==null||r.unmount()}initModal(){let{contentEl:e}=this;this.modalEl.addClass("scribe-modal");let r=e.createDiv({cls:"scribe-controls-modal-react"});this.root=(0,Aq.createRoot)(r),this.root.render((0,Gr.jsx)(yle,{plugin:this.plugin}))}},yle=({plugin:t})=>{let[e,r]=(0,Ol.useState)(!1),[n,i]=(0,Ol.useState)(!0),[o,a]=(0,Ol.useState)("inactive"),[s,c]=(0,Ol.useState)(!1),[u,l]=(0,Ol.useState)(null),[d,f]=(0,Ol.useState)({isAppendToActiveFile:t.settings.isAppendToActiveFile,isOnlyTranscribeActive:t.settings.isOnlyTranscribeActive,isSaveAudioFileActive:t.settings.isSaveAudioFileActive,isMultiSpeakerEnabled:t.settings.isMultiSpeakerEnabled,isDisableLlmTranscription:t.settings.isDisableLlmTranscription,audioFileLanguage:t.settings.audioFileLanguage,scribeOutputLanguage:t.settings.scribeOutputLanguage,transcriptPlatform:t.settings.transcriptPlatform,llmModel:t.settings.llmModel,activeNoteTemplate:t.settings.activeNoteTemplate}),m=!!t.settings.openAiApiKey;return(0,Gr.jsxs)("div",{className:"scribe-modal-container",children:[!m&&(0,Gr.jsxs)("div",{className:"scribe-settings-warning-container",children:[(0,Gr.jsxs)("h1",{children:["\uFE0F",(0,Gr.jsx)(W2,{})," Missing Open AI API key"]}),(0,Gr.jsx)("h2",{className:"scribe-settings-warning",children:"Please enter the key in the plugin settings."}),(0,Gr.jsx)("p",{children:"You can get your API key here"}),(0,Gr.jsx)("a",{href:"https://platform.openai.com/settings",children:"OpenAI Platform"})]}),m&&(0,Gr.jsxs)(Gr.Fragment,{children:[(0,Gr.jsx)(G2,{startTimeMs:u}),(0,Gr.jsx)(Y2,{recordingState:o,active:e,isPaused:n,isScribing:s,handleStart:async()=>{a("recording"),await t.startRecording(),l(Date.now()),r(!0),i(!1)},handlePauseResume:()=>{let _=!n;i(_),a(_?"paused":"recording"),t.handlePauseResumeRecording()},handleComplete:async()=>{i(!0),c(!0),l(null),a("inactive"),await t.scribe(d),i(!1),r(!1),c(!1)},handleReset:()=>{t.cancelRecording(),a("inactive"),r(!1),l(null)}})]}),(0,Gr.jsx)("hr",{}),(0,Gr.jsx)(Sq,{plugin:t,options:d,setOptions:f})]})};function Eq(t){t.addCommand({id:"scribe-recording-modal",name:"Open recording modal",callback:()=>{t.state.isOpen=!0,new Im(t).open()}}),t.addCommand({id:"scribe-recording-toggle-recording",name:"Start/Stop recording",callback:()=>{var r,n;((n=(r=t.state.audioRecord)==null?void 0:r.mediaRecorder)==null?void 0:n.state)==="recording"?t.scribe():t.startRecording()}}),t.addCommand({id:"scribe-transcribe-summarize",name:"Transcribe & summarize current file",callback:async()=>{let e=t.app.workspace.getActiveFile();e&&t.scribeExistingFile(e)}}),t.addCommand({id:"scribe-fix-mermaid-chart",name:"Fix mermaid chart",callback:()=>{let e=t.app.workspace.getActiveFile();e&&t.fixMermaidChart(e)}})}var Oq=require("obsidian");function Iq(t){t.addRibbonIcon("mic-vocal","Scribe",r=>{_le(t).showAtMouseEvent(r)}).addClass("scribe-plugin-ribbon")}function _le(t){var n,i;let e=new Oq.Menu;return((i=(n=t.state.audioRecord)==null?void 0:n.mediaRecorder)==null?void 0:i.state)==="recording"?(e.addItem(o=>{o.setIcon("trash-2"),o.setTitle("Cancel Recording"),o.onClick(()=>{t.cancelRecording()})}),e.addItem(o=>{o.setIcon("save"),o.setTitle("Stop Recording"),o.onClick(()=>{t.scribe()})})):(e.addItem(o=>{o.setIcon("joystick"),o.setTitle("Open Controls"),o.onClick(()=>{t.state.isOpen=!0,t.controlModal.open()})}),e.addItem(o=>{o.setIcon("mic-vocal"),o.setTitle("Start Recording"),o.onClick(()=>{t.startRecording()})})),e}var ry={cache:"no-store"},vle=t=>ny+(t===!1?"":" AssemblyAI/1.0 ("+Object.entries({...n0,...t}).map(([e,r])=>r?`${e}=${r.name}/${r.version}`:"").join(" ")+")"),ny="";typeof navigator!="undefined"&&navigator.userAgent&&(ny+=navigator.userAgent);var n0={sdk:{name:"JavaScript",version:"4.22.0"}};typeof process!="undefined"&&(process.versions.node&&ny.indexOf("Node")===-1&&(n0.runtime_env={name:"Node",version:process.versions.node}),process.versions.bun&&ny.indexOf("Bun")===-1&&(n0.runtime_env={name:"Bun",version:process.versions.bun}));typeof Deno!="undefined"&&process.versions.bun&&ny.indexOf("Deno")===-1&&(n0.runtime_env={name:"Deno",version:Deno.version.deno});var Il=class{constructor(e){this.params=e,e.userAgent===!1?this.userAgent=void 0:this.userAgent=vle(e.userAgent||{})}async fetch(e,r){r={...ry,...r};let n={Authorization:this.params.apiKey,"Content-Type":"application/json"};ry!=null&&ry.headers&&(n={...n,...ry.headers}),r!=null&&r.headers&&(n={...n,...r.headers}),this.userAgent&&(n["User-Agent"]=this.userAgent,typeof window!="undefined"&&"chrome"in window&&(n["AssemblyAI-Agent"]=this.userAgent)),r.headers=n,e.startsWith("http")||(e=this.params.baseUrl+e);let i=await fetch(e,r);if(i.status>=400){let o,a=await i.text();if(a){try{o=JSON.parse(a)}catch(s){}throw o!=null&&o.error?new Error(o.error):new Error(a)}throw new Error(`HTTP Error: ${i.status} ${i.statusText}`)}return i}async fetchJson(e,r){return(await this.fetch(e,r)).json()}},Uk=class extends Il{summary(e,r){return this.fetchJson("/lemur/v3/generate/summary",{method:"POST",body:JSON.stringify(e),signal:r})}questionAnswer(e,r){return this.fetchJson("/lemur/v3/generate/question-answer",{method:"POST",body:JSON.stringify(e),signal:r})}actionItems(e,r){return this.fetchJson("/lemur/v3/generate/action-items",{method:"POST",body:JSON.stringify(e),signal:r})}task(e,r){return this.fetchJson("/lemur/v3/generate/task",{method:"POST",body:JSON.stringify(e),signal:r})}getResponse(e,r){return this.fetchJson(`/lemur/v3/${e}`,{signal:r})}purgeRequestData(e,r){return this.fetchJson(`/lemur/v3/${e}`,{method:"DELETE",signal:r})}},{WritableStream:Dq}=typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis,Mq,zq,Nq=(zq=(Mq=WebSocket!=null?WebSocket:global==null?void 0:global.WebSocket)!=null?Mq:window==null?void 0:window.WebSocket)!=null?zq:self==null?void 0:self.WebSocket,i0=(t,e)=>e?new Nq(t,e):new Nq(t),Tr={BadSampleRate:4e3,AuthFailed:4001,InsufficientFundsOrFreeAccount:4002,InsufficientFunds:4002,FreeTierUser:4003,NonexistentSessionId:4004,SessionExpired:4008,ClosedSession:4010,RateLimited:4029,UniqueSessionViolation:4030,SessionTimeout:4031,AudioTooShort:4032,AudioTooLong:4033,AudioTooSmallToTranscode:4034,BadJson:4100,BadSchema:4101,TooManyStreams:4102,Reconnected:4103,ReconnectAttemptsExhausted:1013,WordBoostParameterParsingFailed:4104},Cq={[Tr.BadSampleRate]:"Sample rate must be a positive integer",[Tr.AuthFailed]:"Not Authorized",[Tr.InsufficientFunds]:"Insufficient funds",[Tr.FreeTierUser]:"This feature is paid-only and requires you to add a credit card. Please visit https://app.assemblyai.com/ to add a credit card to your account.",[Tr.NonexistentSessionId]:"Session ID does not exist",[Tr.SessionExpired]:"Session has expired",[Tr.ClosedSession]:"Session is closed",[Tr.RateLimited]:"Rate limited",[Tr.UniqueSessionViolation]:"Unique session violation",[Tr.SessionTimeout]:"Session Timeout",[Tr.AudioTooShort]:"Audio too short",[Tr.AudioTooLong]:"Audio too long",[Tr.AudioTooSmallToTranscode]:"Audio too small to transcode",[Tr.BadJson]:"Bad JSON",[Tr.BadSchema]:"Bad schema",[Tr.TooManyStreams]:"Too many streams",[Tr.Reconnected]:"This session has been reconnected. This WebSocket is no longer valid.",[Tr.ReconnectAttemptsExhausted]:"Reconnect attempts exhausted",[Tr.WordBoostParameterParsingFailed]:"Could not parse word boost parameter"},jk=class extends Error{},nn={BadSampleRate:4e3,AuthFailed:4001,InsufficientFunds:4002,FreeTierUser:4003,NonexistentSessionId:4004,SessionExpired:4008,ClosedSession:4010,RateLimited:4029,UniqueSessionViolation:4030,SessionTimeout:4031,AudioTooShort:4032,AudioTooLong:4033,AudioTooSmallToTranscode:4034,BadSchema:4101,TooManyStreams:4102,Reconnected:4103},kq={[nn.BadSampleRate]:"Sample rate must be a positive integer",[nn.AuthFailed]:"Not Authorized",[nn.InsufficientFunds]:"Insufficient funds",[nn.FreeTierUser]:"This feature is paid-only and requires you to add a credit card. Please visit https://app.assemblyai.com/ to add a credit card to your account.",[nn.NonexistentSessionId]:"Session ID does not exist",[nn.SessionExpired]:"Session has expired",[nn.ClosedSession]:"Session is closed",[nn.RateLimited]:"Rate limited",[nn.UniqueSessionViolation]:"Unique session violation",[nn.SessionTimeout]:"Session Timeout",[nn.AudioTooShort]:"Audio too short",[nn.AudioTooLong]:"Audio too long",[nn.AudioTooSmallToTranscode]:"Audio too small to transcode",[nn.BadSchema]:"Bad schema",[nn.TooManyStreams]:"Too many streams",[nn.Reconnected]:"This session has been reconnected. This WebSocket is no longer valid."},Fk=class extends Error{},ble="wss://api.assemblyai.com/v2/realtime/ws",xle='{"force_end_utterance":true}',$q='{"terminate_session":true}',Bk=class{constructor(e){var r,n;if(this.listeners={},this.realtimeUrl=(r=e.realtimeUrl)!=null?r:ble,this.sampleRate=(n=e.sampleRate)!=null?n:16e3,this.wordBoost=e.wordBoost,this.encoding=e.encoding,this.endUtteranceSilenceThreshold=e.endUtteranceSilenceThreshold,this.disablePartialTranscripts=e.disablePartialTranscripts,"token"in e&&e.token&&(this.token=e.token),"apiKey"in e&&e.apiKey&&(this.apiKey=e.apiKey),!(this.token||this.apiKey))throw new Error("API key or temporary token is required.")}connectionUrl(){let e=new URL(this.realtimeUrl);if(e.protocol!=="wss:")throw new Error("Invalid protocol, must be wss");let r=new URLSearchParams;return this.token&&r.set("token",this.token),r.set("sample_rate",this.sampleRate.toString()),this.wordBoost&&this.wordBoost.length>0&&r.set("word_boost",JSON.stringify(this.wordBoost)),this.encoding&&r.set("encoding",this.encoding),r.set("enable_extra_session_information","true"),this.disablePartialTranscripts&&r.set("disable_partial_transcripts",this.disablePartialTranscripts.toString()),e.search=r.toString(),e}on(e,r){this.listeners[e]=r}connect(){return new Promise(e=>{if(this.socket)throw new Error("Already connected");let r=this.connectionUrl();this.token?this.socket=i0(r.toString()):(console.warn(`API key authentication is not supported for the RealtimeTranscriber in browser environment. Use temporary token authentication instead.
Learn more at https://github.com/AssemblyAI/assemblyai-node-sdk/blob/main/docs/compat.md#browser-compatibility.`),this.socket=i0(r.toString(),{headers:{Authorization:this.apiKey}})),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.endUtteranceSilenceThreshold===void 0||this.endUtteranceSilenceThreshold===null||this.configureEndUtteranceSilenceThreshold(this.endUtteranceSilenceThreshold)},this.socket.onclose=({code:n,reason:i})=>{var o,a;i||n in Cq&&(i=Cq[n]),(a=(o=this.listeners).close)==null||a.call(o,n,i)},this.socket.onerror=n=>{var i,o,a,s;n.error?(o=(i=this.listeners).error)==null||o.call(i,n.error):(s=(a=this.listeners).error)==null||s.call(a,new Error(n.message))},this.socket.onmessage=({data:n})=>{var o,a,s,c,u,l,d,f,m,p,b,y,h,_,v;let i=JSON.parse(n.toString());if("error"in i){(a=(o=this.listeners).error)==null||a.call(o,new jk(i.error));return}switch(i.message_type){case"SessionBegins":{let x={sessionId:i.session_id,expiresAt:new Date(i.expires_at)};e(x),(c=(s=this.listeners).open)==null||c.call(s,x);break}case"PartialTranscript":{i.created=new Date(i.created),(l=(u=this.listeners).transcript)==null||l.call(u,i),(f=(d=this.listeners)["transcript.partial"])==null||f.call(d,i);break}case"FinalTranscript":{i.created=new Date(i.created),(p=(m=this.listeners).transcript)==null||p.call(m,i),(y=(b=this.listeners)["transcript.final"])==null||y.call(b,i);break}case"SessionInformation":{(_=(h=this.listeners).session_information)==null||_.call(h,i);break}case"SessionTerminated":{(v=this.sessionTerminatedResolve)==null||v.call(this);break}}}})}sendAudio(e){this.send(e)}stream(){return new Dq({write:e=>{this.sendAudio(e)}})}forceEndUtterance(){this.send(xle)}configureEndUtteranceSilenceThreshold(e){this.send(`{"end_utterance_silence_threshold":${e}}`)}send(e){if(!this.socket||this.socket.readyState!==this.socket.OPEN)throw new Error("Socket is not open for communication");this.socket.send(e)}async close(e=!0){var r;if(this.socket){if(this.socket.readyState===this.socket.OPEN)if(e){let n=new Promise(i=>{this.sessionTerminatedResolve=i});this.socket.send($q),await n}else this.socket.send($q);(r=this.socket)!=null&&r.removeAllListeners&&this.socket.removeAllListeners(),this.socket.close()}this.listeners={},this.socket=void 0}};var Zk=class extends Il{constructor(e){super(e),this.rtFactoryParams=e}createService(e){return this.transcriber(e)}transcriber(e){let r={...e};return!r.token&&!r.apiKey&&(r.apiKey=this.rtFactoryParams.apiKey),new Bk(r)}async createTemporaryToken(e){return(await this.fetchJson("/v2/realtime/token",{method:"POST",body:JSON.stringify(e)})).token}};function Rq(t){return t.startsWith("http")||t.startsWith("https")||t.startsWith("data:")?null:t.startsWith("file://")?t.substring(7):t.startsWith("file:")?t.substring(5):t}var Vk=class extends Il{constructor(e,r){super(e),this.files=r}async transcribe(e,r){let n=await this.submit(e);return await this.waitUntilReady(n.id,r)}async submit(e){let r,n;if("audio"in e){let{audio:o,...a}=e;if(typeof o=="string"){let s=Rq(o);s!==null?r=await this.files.upload(s):o.startsWith("data:")?r=await this.files.upload(o):r=o}else r=await this.files.upload(o);n={...a,audio_url:r}}else n=e;return await this.fetchJson("/v2/transcript",{method:"POST",body:JSON.stringify(n)})}async create(e,r){var o;let n=Rq(e.audio_url);if(n!==null){let a=await this.files.upload(n);e.audio_url=a}let i=await this.fetchJson("/v2/transcript",{method:"POST",body:JSON.stringify(e)});return(o=r==null?void 0:r.poll)==null||o?await this.waitUntilReady(i.id,r):i}async waitUntilReady(e,r){var a,s;let n=(a=r==null?void 0:r.pollingInterval)!=null?a:3e3,i=(s=r==null?void 0:r.pollingTimeout)!=null?s:-1,o=Date.now();for(;;){let c=await this.get(e);if(c.status==="completed"||c.status==="error")return c;if(i>0&&Date.now()-o>i)throw new Error("Polling timeout");await new Promise(u=>setTimeout(u,n))}}get(e){return this.fetchJson(`/v2/transcript/${e}`)}async list(e){let r="/v2/transcript";typeof e=="string"?r=e:e&&(r=`${r}?${new URLSearchParams(Object.keys(e).map(i=>{var o;return[i,((o=e[i])==null?void 0:o.toString())||""]}))}`);let n=await this.fetchJson(r);for(let i of n.transcripts)i.created=new Date(i.created),i.completed&&(i.completed=new Date(i.completed));return n}delete(e){return this.fetchJson(`/v2/transcript/${e}`,{method:"DELETE"})}wordSearch(e,r){let n=new URLSearchParams({words:r.join(",")});return this.fetchJson(`/v2/transcript/${e}/word-search?${n.toString()}`)}sentences(e){return this.fetchJson(`/v2/transcript/${e}/sentences`)}paragraphs(e){return this.fetchJson(`/v2/transcript/${e}/paragraphs`)}async subtitles(e,r="srt",n){let i=`/v2/transcript/${e}/${r}`;if(n){let a=new URLSearchParams;a.set("chars_per_caption",n.toString()),i+=`?${a.toString()}`}return await(await this.fetch(i)).text()}redactions(e){return this.redactedAudio(e)}redactedAudio(e){return this.fetchJson(`/v2/transcript/${e}/redacted-audio`)}async redactedAudioFile(e){let{redacted_audio_url:r,status:n}=await this.redactedAudio(e);if(n!=="redacted_audio_ready")throw new Error(`Redacted audio status is ${n}`);let i=await fetch(r);if(!i.ok)throw new Error(`Failed to fetch redacted audio: ${i.statusText}`);return{arrayBuffer:i.arrayBuffer.bind(i),blob:i.blob.bind(i),body:i.body,bodyUsed:i.bodyUsed}}},wle=async function(t){throw new Error("Interacting with the file system is not supported in this environment.")},qk=class extends Il{async upload(e){let r;return typeof e=="string"?e.startsWith("data:")?r=Sle(e):r=await wle():r=e,(await this.fetchJson("/v2/upload",{method:"POST",body:r,headers:{"Content-Type":"application/octet-stream"},duplex:"half"})).upload_url}};function Sle(t){let e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,o=new Uint8Array(i);for(;i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})}var Ale="wss://streaming.assemblyai.com/v3/ws",Pq='{"type":"Terminate"}',Gk=class{constructor(e){if(this.listeners={},this.params={...e,websocketBaseUrl:e.websocketBaseUrl||Ale},"token"in e&&e.token&&(this.token=e.token),"apiKey"in e&&e.apiKey&&(this.apiKey=e.apiKey),!(this.token||this.apiKey))throw new Error("API key or temporary token is required.")}connectionUrl(){var n;let e=new URL((n=this.params.websocketBaseUrl)!=null?n:"");if(e.protocol!=="wss:")throw new Error("Invalid protocol, must be wss");let r=new URLSearchParams;return this.token&&r.set("token",this.token),r.set("sample_rate",this.params.sampleRate.toString()),this.params.endOfTurnConfidenceThreshold&&r.set("end_of_turn_confidence_threshold",this.params.endOfTurnConfidenceThreshold.toString()),this.params.minEndOfTurnSilenceWhenConfident&&r.set("min_end_of_turn_silence_when_confident",this.params.minEndOfTurnSilenceWhenConfident.toString()),this.params.maxTurnSilence&&r.set("max_turn_silence",this.params.maxTurnSilence.toString()),this.params.vadThreshold!==void 0&&r.set("vad_threshold",this.params.vadThreshold.toString()),this.params.formatTurns&&r.set("format_turns",this.params.formatTurns.toString()),this.params.encoding&&r.set("encoding",this.params.encoding.toString()),this.params.keytermsPrompt?r.set("keyterms_prompt",JSON.stringify(this.params.keytermsPrompt)):this.params.keyterms&&(console.warn("[Deprecation Warning] `keyterms` is deprecated and will be removed in a future release. Please use `keytermsPrompt` instead."),r.set("keyterms_prompt",JSON.stringify(this.params.keyterms))),this.params.filterProfanity&&r.set("filter_profanity",this.params.filterProfanity.toString()),this.params.speechModel&&r.set("speech_model",this.params.speechModel.toString()),this.params.languageDetection!==void 0&&r.set("language_detection",this.params.languageDetection.toString()),this.params.inactivityTimeout!==void 0&&r.set("inactivity_timeout",this.params.inactivityTimeout.toString()),e.search=r.toString(),e}on(e,r){this.listeners[e]=r}connect(){return new Promise(e=>{if(this.socket)throw new Error("Already connected");let r=this.connectionUrl();this.token?this.socket=i0(r.toString()):(console.warn(`API key authentication is not supported for the StreamingTranscriber in browser environment. Use temporary token authentication instead.
Learn more at https://github.com/AssemblyAI/assemblyai-node-sdk/blob/main/docs/compat.md#browser-compatibility.`),this.socket=i0(r.toString(),{headers:{Authorization:this.apiKey}})),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{},this.socket.onclose=({code:n,reason:i})=>{var o,a;i||n in kq&&(i=kq[n]),(a=(o=this.listeners).close)==null||a.call(o,n,i)},this.socket.onerror=n=>{var i,o,a,s;n.error?(o=(i=this.listeners).error)==null||o.call(i,n.error):(s=(a=this.listeners).error)==null||s.call(a,new Error(n.message))},this.socket.onmessage=({data:n})=>{var o,a,s,c,u,l,d;let i=JSON.parse(n.toString());if("error"in i){(a=(o=this.listeners).error)==null||a.call(o,new Fk(i.error));return}switch(i.type){case"Begin":{e(i),(c=(s=this.listeners).open)==null||c.call(s,i);break}case"Turn":{(l=(u=this.listeners).turn)==null||l.call(u,i);break}case"Termination":{(d=this.sessionTerminatedResolve)==null||d.call(this);break}}}})}stream(){return new Dq({write:e=>{this.sendAudio(e)}})}sendAudio(e){this.send(e)}send(e){if(!this.socket||this.socket.readyState!==this.socket.OPEN)throw new Error("Socket is not open for communication");this.socket.send(e)}async close(e=!0){var r;if(this.socket){if(this.socket.readyState===this.socket.OPEN)if(e){let n=new Promise(i=>{this.sessionTerminatedResolve=i});this.socket.send(Pq),await n}else this.socket.send(Pq);(r=this.socket)!=null&&r.removeAllListeners&&this.socket.removeAllListeners(),this.socket.close()}this.listeners={},this.socket=void 0}},Hk=class extends Il{constructor(e){super(e),this.baseServiceParams=e}transcriber(e){let r={...e};return!r.token&&!r.apiKey&&(r.apiKey=this.baseServiceParams.apiKey),new Gk(r)}async createTemporaryToken(e){let r=new URLSearchParams;Object.entries(e).forEach(([a,s])=>{s!=null&&r.append(a,String(s))});let n=r.toString(),i=n?`/v3/token?${n}`:"/v3/token";return(await this.fetchJson(i,{method:"GET"})).token}},Tle="https://api.assemblyai.com",Ele="https://streaming.assemblyai.com",o0=class{constructor(e){e.baseUrl=e.baseUrl||Tle,e.baseUrl&&e.baseUrl.endsWith("/")&&(e.baseUrl=e.baseUrl.slice(0,-1)),this.files=new qk(e),this.transcripts=new Vk(e,this.files),this.lemur=new Uk(e),this.realtime=new Zk(e),this.streaming=new Hk({...e,baseUrl:e.streamingBaseUrl||Ele})}};async function Lq(t,e,r){let{isMultiSpeakerEnabled:n=!1,audioFileLanguage:i}=r||{},o=new o0({apiKey:t}),a=i&&i!=="auto",s={audio:e,format_text:!0,speaker_labels:n},c=a?{...s,language_code:i}:s,u=await o.transcripts.transcribe(c),l;try{let{paragraphs:f}=await o.transcripts.paragraphs(u.id);l=f}catch(f){console.error("Failed to fetch paragraphs from AssemblyAI, moving forward with raw text:",f)}let d="";if(n&&u.utterances?d=(u.utterances||[]).map(f=>`**Speaker ${f.speaker}**: ${f.text}`).join(`
`):l?d=l.map(f=>f.text).join(`

`):d=u.text||"",u.error)throw console.error("Failed to transcribe with AssemblyAI, please try again",u.error),new Error(u.error);return d}var a0=require("obsidian");var Kk=require("obsidian");async function iy(t){let e=t.app.fileManager,r=t.app.workspace.getActiveFile(),n=(0,Kk.normalizePath)(e.getNewFileParent((r==null?void 0:r.path)||"","").path),i=Date.now(),o=(await e.getAvailablePathForAttachment(i.toString())).split("/"),a=(0,Kk.normalizePath)(o.splice(0,o.length-1).join("/"));return{defaultNewFilePath:n,defaultNewResourcePath:a}}async function Uq(t,e,r){var s,c;let n=await iy(t),i=t.settings.recordingDirectory==="matchObsidianResourceFolder"?n.defaultNewResourcePath:t.settings.recordingDirectory,o=(0,a0.normalizePath)(`${i}/${r}.${(s=t.state.audioRecord)==null?void 0:s.fileExtension}`);if(console.log("Saving audio to path:",o),await t.app.vault.adapter.exists(o,!0)){let u=Math.floor(Math.random()*1e3);o=`${i}/${r}.${u}.${(c=t.state.audioRecord)==null?void 0:c.fileExtension}`}try{return await t.app.vault.createBinary(o,e)}catch(u){throw console.error(`Failed to save file in: ${o}`,u),u}}async function s0(t,e){try{let r=await iy(t),n=t.settings.transcriptDirectory==="matchObsidianNoteFolder"?r.defaultNewFilePath:t.settings.transcriptDirectory,i=`${n}/${e}.md`,o=(0,a0.normalizePath)(i);if(console.log("Saving note to path:",o),await t.app.vault.adapter.exists(o,!0)){let c=Math.floor(Math.random()*1e3);o=(0,a0.normalizePath)(`${n}/${e}.${c}.md`)}return await t.app.vault.create(o,"")}catch(r){throw console.error("Failed to save file",r),r==="Error: File already exists"&&s0(t,`${e}.${Math.random()*100}`),r}}async function jq(t,e,r){let n=e.path.replace(e.name,""),i=`${n}/${r}.md`;if(await t.app.vault.adapter.exists(i,!0)){let a=Math.floor(Math.random()*1e3);i=`${n}/${r}.${a}.md`}await t.app.fileManager.renameFile(e,`${i}`)}async function Jk(t,e,r){try{return await t.app.fileManager.processFrontMatter(e,n=>{let i={...n,audio:r?[...n.source||[],`[[${r.path}]]`]:n.source};t.settings.isFrontMatterLinkToScribe&&(i.created_by="[[Scribe]]"),Object.assign(n,i)}),e}catch(n){throw console.error("Failed to addAudioSourceToFrontmatter",n),n}}async function oy(t,e,r,n){try{return await t.app.vault.process(e,i=>{try{if(n)return i.replace(n,r)}catch(o){return console.error("Failed to replace text",o),`${i}
${r}`}return`${i.length&&`${i}
`}${r}`}),e}catch(i){throw console.error("Failed to addAudioSourceToFrontmatter",i),i}}var Ole={isOpen:!1,counter:0,audioRecord:null,openAiClient:null},ay=class extends Vt.Plugin{constructor(){super(...arguments);this.settings=r0;this.state=Ole}async onload(){this.app.workspace.onLayoutReady(async()=>{await this.loadSettings(),Iq(this),Eq(this),vq(this),this.controlModal=new Im(this)})}onunload(){}async loadSettings(){let r=await this.loadData();this.settings={...r0,...r};let n=await iy(this);this.settings.openAiApiKey||(console.error("OpenAI API key is needed in Scribes settings - https://platform.openai.com/settings"),new Vt.Notice("\u26A0\uFE0F Scribe: OpenAI API key is missing for Scribe")),this.settings.recordingDirectory||(this.settings.recordingDirectory=n.defaultNewResourcePath),this.settings.transcriptDirectory||(this.settings.transcriptDirectory=n.defaultNewFilePath)}async saveSettings(){new Vt.Notice("Scribe: \u2705 Settings saved"),await this.saveData(this.settings)}async startRecording(){new Vt.Notice("Scribe: \u{1F399}\uFE0F Recording started");let r=new uy;this.state.audioRecord=r,r.startRecording(this.settings.selectedAudioDeviceId)}async handlePauseResumeRecording(){var r,n,i,o,a;(r=this.state.audioRecord)==null||r.handlePauseResume(),((i=(n=this.state.audioRecord)==null?void 0:n.mediaRecorder)==null?void 0:i.state)==="recording"&&new Vt.Notice("Scribe: \u25B6\uFE0F\u{1F399}\uFE0F Resuming recording"),((a=(o=this.state.audioRecord)==null?void 0:o.mediaRecorder)==null?void 0:a.state)==="paused"&&new Vt.Notice("Scribe: \u23F8\uFE0F\u{1F399}\uFE0F Recording paused")}async cancelRecording(){var r,n;(r=this.state.audioRecord)!=null&&r.mediaRecorder&&(new Vt.Notice("Scribe: \u{1F6D1}\uFE0F Recording cancelled"),await((n=this.state.audioRecord)==null?void 0:n.stopRecording()))}async scribe(r={isAppendToActiveFile:this.settings.isAppendToActiveFile,isOnlyTranscribeActive:this.settings.isOnlyTranscribeActive,isMultiSpeakerEnabled:this.settings.isMultiSpeakerEnabled,isSaveAudioFileActive:this.settings.isSaveAudioFileActive,isDisableLlmTranscription:this.settings.isDisableLlmTranscription,audioFileLanguage:this.settings.audioFileLanguage,scribeOutputLanguage:this.settings.scribeOutputLanguage,transcriptPlatform:this.settings.transcriptPlatform,llmModel:this.settings.llmModel,activeNoteTemplate:this.settings.activeNoteTemplate}){try{let n=Al(this.settings.recordingFilenamePrefix,this.settings.dateFilenameFormat),{recordingBuffer:i,recordingFile:o}=await this.handleStopAndSaveRecording(n);if(await this.handleScribeFile({audioRecordingFile:o,audioRecordingBuffer:i,scribeOptions:r}),!r.isSaveAudioFileActive){let a=o.name;await this.app.vault.delete(o),new Vt.Notice(`Scribe: \u2705\u{1F5D1}\uFE0F Audio file deleted ${a}`)}}catch(n){new Vt.Notice(`Scribe: Something went wrong ${n.toString()}`),console.error("Scribe: Something went wrong",n)}finally{await this.cleanup()}}async scribeExistingFile(r,n={isAppendToActiveFile:this.settings.isAppendToActiveFile,isOnlyTranscribeActive:this.settings.isOnlyTranscribeActive,isMultiSpeakerEnabled:this.settings.isMultiSpeakerEnabled,isSaveAudioFileActive:this.settings.isSaveAudioFileActive,isDisableLlmTranscription:this.settings.isDisableLlmTranscription,audioFileLanguage:this.settings.audioFileLanguage,scribeOutputLanguage:this.settings.scribeOutputLanguage,transcriptPlatform:this.settings.transcriptPlatform,llmModel:this.settings.llmModel,activeNoteTemplate:this.settings.activeNoteTemplate}){try{if(!sy(`audio/${r.extension}`)){new Vt.Notice("Scribe: \u26A0\uFE0F This file type is not supported.");return}let i=await this.app.vault.readBinary(r);await this.handleScribeFile({audioRecordingFile:r,audioRecordingBuffer:i,scribeOptions:n})}catch(i){new Vt.Notice(`Scribe: Something went wrong ${i.toString()}`),console.error("Scribe: Something went wrong",i)}finally{await this.cleanup()}}async fixMermaidChart(r){try{let n;await this.app.vault.process(r,o=>(n=Rk(o),o));let i;if(n){let o=this.settings.useCustomOpenAiBaseUrl?this.settings.customOpenAiBaseUrl:void 0,a=this.settings.useCustomOpenAiBaseUrl?this.settings.customChatModel:void 0;i=(await tq(this.settings.openAiApiKey,n,this.settings.llmModel,o,a)).mermaidChart}n&&i&&await this.app.vault.process(r,o=>(n=Rk(o),o.replace(n,`${i}
`)))}catch(n){new Vt.Notice(`Scribe: Something went wrong ${n.toString()}`)}finally{await this.cleanup()}}async handleStopAndSaveRecording(r){let o=await(await this.state.audioRecord.stopRecording()).arrayBuffer(),a=await Uq(this,o,r);return new Vt.Notice(`Scribe: \u2705 Audio file saved ${a.name}`),{recordingBuffer:o,recordingFile:a}}async handleScribeFile({audioRecordingFile:r,audioRecordingBuffer:n,scribeOptions:i}){var y,h,_,v;let{isAppendToActiveFile:o,isOnlyTranscribeActive:a,isSaveAudioFileActive:s,activeNoteTemplate:c}=i,u=`${Al(this.settings.noteFilenamePrefix,this.settings.dateFilenameFormat)}`,l=o?this.app.workspace.getActiveFile():await s0(this,u);if(!l){new Vt.Notice("Scribe: \u26A0\uFE0F No active file to append to, creating new one!"),l=await s0(this,u);let x=(h=(y=this.app.workspace.getActiveFile())==null?void 0:y.path)!=null?h:"";this.app.workspace.openLinkText(l==null?void 0:l.path,x,!0)}if(s?await Jk(this,l,r):await Jk(this,l),await this.cleanup(),!o){let x=(v=(_=this.app.workspace.getActiveFile())==null?void 0:_.path)!=null?v:"";this.app.workspace.openLinkText(l==null?void 0:l.path,x,!0)}await oy(this,l,"# Audio in progress");let d=await this.handleTranscription(n,i),f=o?"# Audio in progress":`
# Audio in progress`,m=s?`# Audio
![[${r.path}]]
${d}`:`# Audio
${d}`;if(await oy(this,l,m,f),a)return;let p=await this.handleTranscriptSummary(d,i);if(c.sections.forEach(async x=>{let{sectionHeader:w,sectionOutputPrefix:E,sectionOutputPostfix:S,isSectionOptional:g}=x,I=Qw(w),N=p[I];if(!(g&&!N)){if(E||S){let C=`## ${w}
${E||""}
${N}
${S||""}`;await oy(this,l,C);return}await oy(this,l,`## ${w}
${N}`)}}),!o&&p.fileTitle){let x=`${Al(this.settings.noteFilenamePrefix,this.settings.dateFilenameFormat)}${(0,Vt.normalizePath)(p.fileTitle)}`;await jq(this,l,x)}}async handleTranscription(r,n){try{if(this.settings.isDisableLlmTranscription)return new Vt.Notice("Scribe: \u{1F3A7} Transcription is disabled in settings"),"";new Vt.Notice(`Scribe: \u{1F3A7} Beginning transcription w/ ${this.settings.transcriptPlatform}`);let i=this.settings.transcriptPlatform==="assemblyAi"?await Lq(this.settings.assemblyAiApiKey,r,n):await QV(this.settings.openAiApiKey,r,n,this.settings.useCustomOpenAiBaseUrl?this.settings.customOpenAiBaseUrl:void 0,this.settings.useCustomOpenAiBaseUrl?this.settings.customTranscriptModel:void 0);return new Vt.Notice(`Scribe: \u{1F3A7} Completed transcription  w/ ${this.settings.transcriptPlatform}`),i}catch(i){throw new Vt.Notice(`Scribe: \u{1F3A7} \u{1F6D1} Something went wrong trying to Transcribe w/  ${this.settings.transcriptPlatform}
        ${i.toString()}`),i}}async handleTranscriptSummary(r,n){new Vt.Notice("Scribe: \u{1F9E0} Sending to LLM to summarize");let i=this.settings.useCustomOpenAiBaseUrl?this.settings.customOpenAiBaseUrl:void 0,o=this.settings.useCustomOpenAiBaseUrl?this.settings.customChatModel:void 0,a=await eq(this.settings.openAiApiKey,r,n,this.settings.llmModel,i,o);return new Vt.Notice("Scribe: \u{1F9E0} LLM summation complete"),a}cleanup(){var r,n,i;this.controlModal.close(),((n=(r=this.state.audioRecord)==null?void 0:r.mediaRecorder)==null?void 0:n.state)==="recording"&&((i=this.state.audioRecord)==null||i.stopRecording()),this.state.audioRecord=null}};var Ile=ay;
/*! Bundled license information:

scheduler/cjs/scheduler.production.js:
  (**
   * @license React
   * scheduler.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.js:
  (**
   * @license React
   * react-dom.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-client.production.js:
  (**
   * @license React
   * react-dom-client.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@langchain/core/dist/utils/fast-json-patch/src/helpers.js:
  (*!
  * https://github.com/Starcounter-Jack/JSON-Patch
  * (c) 2017-2022 Joachim Wester
  * MIT licensed
  *)

@langchain/core/dist/utils/sax-js/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/

/* nosourcemap */